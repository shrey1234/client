!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,d,t,E,y,w,f,h,a,i,o,s,n,g,v,u,r,c,l,p,m,b,S,C,_,A,I,P,O,T,k,L,R,x,N,M){"use strict";var U="default"in E?E.default:E;p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function q(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function B(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,n,s):i(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function V(n,r){return function(e,t){r(e,t,n)}}function z(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function G(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function K(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function Y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){i[r]&&(s[r]=function(n){return new Promise(function(e,t){1<o.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=i[e](t)).value instanceof J?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Z(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=H(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(i){return new Promise(function(e,t){var n,r;i=s[o](i),n=e,e=t,r=i.done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function X(e){return"function"==typeof e}var Q=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Q=e},get useDeprecatedSynchronousErrorHandling(){return Q}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=Array.isArray||function(e){return e&&"number"==typeof e.length};function ie(e){return null!==e&&"object"==typeof e}var oe,se=(ce.prototype=Object.create(Error.prototype),ce),ae=(ue.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ue)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(X(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof se?le(t.errors):[t]}}if(re(i))for(var o=-1,s=i.length;++o<s;){var a=i[o];if(ie(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof se?e=e.concat(le(t.errors)):e.push(t)}}if(e)throw new se(e)}},ue.prototype.add=function(e){var t,n=e;if(!e)return ue.EMPTY;switch(typeof e){case"function":n=new ue(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof ue||(t=n,(n=new ue)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(null===(e=n._parentOrParents))n._parentOrParents=this;else if(e instanceof ue){if(e===this)return n;n._parentOrParents=[e,this]}else{if(-1!==e.indexOf(this))return n;e.push(this)}return null===(e=this._subscriptions)?this._subscriptions=[n]:e.push(n),n},ue.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},ue.EMPTY=((oe=new ue).closed=!0,oe),ue);function ue(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}function ce(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function le(e){return e.reduce(function(e,t){return e.concat(t instanceof se?t.errors:t)},[])}var pe,fe,de="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),he=(F(me,fe=ae),me.prototype[de]=function(){return this},me.create=function(e,t,n){return(n=new me(e,t,n)).syncErrorThrowable=!1,n},me.prototype.next=function(e){this.isStopped||this._next(e)},me.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},me.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},me.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,fe.prototype.unsubscribe.call(this))},me.prototype._next=function(e){this.destination.next(e)},me.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},me.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},me.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},me),ge=(F(ve,pe=he),ve.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},ve.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},ve.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},ve.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},ve.prototype.__tryOrSetError=function(e,t,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return ee.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(te(t),!0)}return!1},ve.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},ve);function ve(e,t,n,r){var i,o=pe.call(this)||this;return o._parentSubscriber=e,e=o,X(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==ne&&(X((e=Object.create(t)).unsubscribe)&&o.add(e.unsubscribe.bind(e)),e.unsubscribe=o.unsubscribe.bind(o))),o._context=e,o._next=i,o._error=n,o._complete=r,o}function me(e,t,n){var r=fe.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof me?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new ge(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new ge(r,e,t,n)}return r}var ye="function"==typeof Symbol&&Symbol.observable||"@@observable";var be=(Se.prototype.lift=function(e){var t=new Se;return t.source=this,t.operator=e,t},Se.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof he)return e;if(e[de])return e[de]()}return e||t||n?new he(e,t,n):new he(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},Se.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof he?n:null}return 1}(t)?t.error(e):console.warn(e)}},Se.prototype.forEach=function(r,e){var i=this;return new(e=we(e))(function(e,t){var n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},Se.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},Se.prototype[ye]=function(){return this},Se.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},Se.prototype.toPromise=function(e){var r=this;return new(e=we(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},Se.create=function(e){return new Se(e)},Se);function Se(e){this._isScalar=!1,e&&(this._subscribe=e)}function we(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Ce,_e,Ee,Ae,Ie=(Me.prototype=Object.create(Error.prototype),Me),Pe=(F(Ne,Ae=ae),Ne.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},Ne),Oe=(F(xe,Ee=he),xe),Te=(F(Re,_e=be),Re.prototype[de]=function(){return new Oe(this)},Re.prototype.lift=function(e){var t=new ke(this,this);return t.operator=e,t},Re.prototype.next=function(e){if(this.closed)throw new Ie;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},Re.prototype.error=function(e){if(this.closed)throw new Ie;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},Re.prototype.complete=function(){if(this.closed)throw new Ie;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},Re.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Re.prototype._trySubscribe=function(e){if(this.closed)throw new Ie;return _e.prototype._trySubscribe.call(this,e)},Re.prototype._subscribe=function(e){if(this.closed)throw new Ie;return this.hasError?(e.error(this.thrownError),ae.EMPTY):this.isStopped?(e.complete(),ae.EMPTY):(this.observers.push(e),new Pe(this,e))},Re.prototype.asObservable=function(){var e=new be;return e.source=this,e},Re.create=function(e,t){return new ke(e,t)},Re),ke=(F(Le,Ce=Te),Le.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},Le.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},Le.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},Le.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ae.EMPTY},Le);function Le(e,t){var n=Ce.call(this)||this;return n.destination=e,n.source=t,n}function Re(){var e=_e.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function xe(e){var t=Ee.call(this,e)||this;return t.destination=e,t}function Ne(e,t){var n=Ae.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}function Me(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function Ue(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Fe(t,n))}}var De,Fe=(Be.prototype.call=function(e,t){return t.subscribe(new je(e,this.project,this.thisArg))},Be),je=(F(qe,De=he),qe.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},qe);function qe(e,t,n){return(e=De.call(this,e)||this).project=t,e.count=0,e.thisArg=n||e,e}function Be(e,t){this.project=e,this.thisArg=t}var Ve="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ze=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ge(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ke=function(e){if(e&&"function"==typeof e[ye])return o=e,function(e){var t=o[ye]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(ze(e))return i=e,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()};if(Ge(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[Ve])return r=e,function(e){for(var t=r[Ve]();;){var n=void 0;try{n=t.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,i,o,e=ie(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function He(e,t){return t?function(e,t){if(null!=e){if((n=e)&&"function"==typeof n[ye])return a=e,u=t,new be(function(t){var n=new ae;return n.add(u.schedule(function(){var e=a[ye]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ge(e))return o=e,s=t,new be(function(t){var n=new ae;return n.add(s.schedule(function(){return o.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(ze(e))return r=e,i=t,new be(function(e){var t=new ae,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ve]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new be(function(r){var i,e=new ae;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ve](),e.add(n.schedule(function(){if(!r.closed){try{var e=i.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,i,o,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof be?e:new be(Ke(e))}function We(u,c){return new be(function(r){var i=u.length;if(0!==i)for(var o=new Array(i),s=0,a=0,e=0;e<i;e++)!function(t){var e=He(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),o[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==i&&n||(a===i&&r.next(c?c.reduce(function(e,t,n){return e[t]=o[n],e},{}):o),r.complete())}}))}(e);else r.complete()})}var $e=null,Je=(Object.defineProperty(Ye.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Ye);function Ye(){this.resourceLoaderType=null}var Ze,Xe=(F(Qe,Ze=Je),Qe.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Qe.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Qe.prototype.supportsDOMEvents=function(){return!0},Qe.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Qe.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},Qe.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},Qe.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Qe);function Qe(){var t=Ze.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var et,tt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},nt={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};d["ɵglobal"].Node&&(et=d["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var it,ot=(F(st,it=Xe),st.prototype.parse=function(e){throw new Error("parse not implemented")},st.makeCurrent=function(){var e=new st;$e=$e||e},st.prototype.hasProperty=function(e,t){return t in e},st.prototype.setProperty=function(e,t,n){e[t]=n},st.prototype.getProperty=function(e,t){return e[t]},st.prototype.invoke=function(e,t,n){e[t].apply(e,n)},st.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},st.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},st.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},st.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(st.prototype,"attrToPropMap",{get:function(){return tt},enumerable:!0,configurable:!0}),st.prototype.contains=function(e,t){return et.call(e,t)},st.prototype.querySelector=function(e,t){return e.querySelector(t)},st.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},st.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},st.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},st.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},st.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},st.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},st.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},st.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},st.prototype.getInnerHTML=function(e){return e.innerHTML},st.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},st.prototype.getOuterHTML=function(e){return e.outerHTML},st.prototype.nodeName=function(e){return e.nodeName},st.prototype.nodeValue=function(e){return e.nodeValue},st.prototype.type=function(e){return e.type},st.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},st.prototype.firstChild=function(e){return e.firstChild},st.prototype.nextSibling=function(e){return e.nextSibling},st.prototype.parentElement=function(e){return e.parentNode},st.prototype.childNodes=function(e){return e.childNodes},st.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},st.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},st.prototype.appendChild=function(e,t){e.appendChild(t)},st.prototype.removeChild=function(e,t){e.removeChild(t)},st.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},st.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},st.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},st.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},st.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},st.prototype.setInnerHTML=function(e,t){e.innerHTML=t},st.prototype.getText=function(e){return e.textContent},st.prototype.setText=function(e,t){e.textContent=t},st.prototype.getValue=function(e){return e.value},st.prototype.setValue=function(e,t){e.value=t},st.prototype.getChecked=function(e){return e.checked},st.prototype.setChecked=function(e,t){e.checked=t},st.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},st.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},st.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},st.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},st.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},st.prototype.createScriptTag=function(e,t,n){return(n=(n=n||this.getDefaultDocument()).createElement("SCRIPT")).setAttribute(e,t),n},st.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},st.prototype.createShadowRoot=function(e){return e.createShadowRoot()},st.prototype.getShadowRoot=function(e){return e.shadowRoot},st.prototype.getHost=function(e){return e.host},st.prototype.clone=function(e){return e.cloneNode(!0)},st.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},st.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},st.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},st.prototype.addClass=function(e,t){e.classList.add(t)},st.prototype.removeClass=function(e,t){e.classList.remove(t)},st.prototype.hasClass=function(e,t){return e.classList.contains(t)},st.prototype.setStyle=function(e,t,n){e.style[t]=n},st.prototype.removeStyle=function(e,t){e.style[t]=""},st.prototype.getStyle=function(e,t){return e.style[t]},st.prototype.hasStyle=function(e,t,n){return t=this.getStyle(e,t)||"",n?t==n:0<t.length},st.prototype.tagName=function(e){return e.tagName},st.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},st.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},st.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},st.prototype.getAttribute=function(e,t){return e.getAttribute(t)},st.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},st.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},st.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},st.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},st.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},st.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},st.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},st.prototype.getDefaultDocument=function(){return document},st.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},st.prototype.getTitle=function(e){return e.title},st.prototype.setTitle=function(e,t){e.title=t||""},st.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},st.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},st.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},st.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},st.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},st.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},st.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},st.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},st.prototype.adoptNode=function(e){return document.adoptNode(e)},st.prototype.getHref=function(e){return e.getAttribute("href")},st.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&rt.hasOwnProperty(t)&&(t=rt[t]))}return nt[t]||t},st.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},st.prototype.getHistory=function(){return window.history},st.prototype.getLocation=function(){return window.location},st.prototype.getBaseHref=function(e){var t,n=(ut=ut||document.querySelector("base"))?ut.getAttribute("href"):null;return null==n?null:(t=n,(at=at||document.createElement("a")).setAttribute("href",t),"/"===at.pathname.charAt(0)?at.pathname:"/"+at.pathname)},st.prototype.resetBaseElement=function(){ut=null},st.prototype.getUserAgent=function(){return window.navigator.userAgent},st.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},st.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},st.prototype.getComputedStyle=function(e){return getComputedStyle(e)},st.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},st.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},st.prototype.supportsCookies=function(){return!0},st.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},st.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},st);function st(){return null!==it&&it.apply(this,arguments)||this}var at,ut=null,ct=t.DOCUMENT;function lt(){return window.history.pushState}var pt,ft=(F(dt,pt=t.PlatformLocation),dt.prototype._init=function(){this.location=$e.getLocation(),this._history=$e.getHistory()},dt.prototype.getBaseHrefFromDOM=function(){return $e.getBaseHref(this._doc)},dt.prototype.onPopState=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},dt.prototype.onHashChange=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(dt.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),dt.prototype.pushState=function(e,t,n){lt()?this._history.pushState(e,t,n):this.location.hash=n},dt.prototype.replaceState=function(e,t,n){lt()?this._history.replaceState(e,t,n):this.location.hash=n},dt.prototype.forward=function(){this._history.forward()},dt.prototype.back=function(){this._history.back()},dt.decorators=[{type:d.Injectable}],dt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]}]},dt);function dt(e){var t=pt.call(this)||this;return t._doc=e,t._init(),t}d.Injectable,new d.InjectionToken("TRANSITION_ID");var ht=(gt.init=function(){d.setTestabilityGetter(new gt)},gt.prototype.addToWindow=function(n){d["ɵglobal"].getAngularTestability=function(e,t){if(void 0===t&&(t=!0),null==(t=n.findTestabilityInTree(e,t)))throw new Error("Could not find testability for element.");return t},d["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},d["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()},d["ɵglobal"].frameworkStabilizers||(d["ɵglobal"].frameworkStabilizers=[]),d["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){i=i||e,0==--r&&t(i)}var e=d["ɵglobal"].getAllAngularTestabilities(),r=e.length,i=!1;e.forEach(function(e){e.whenStable(n)})})},gt.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?$e.isShadowRoot(t)?this.findTestabilityInTree(e,$e.getHost(t),!0):this.findTestabilityInTree(e,$e.parentElement(t),!0):null},gt);function gt(){}d.Injectable;d.ApplicationRef,d.NgZone;d.APP_INITIALIZER,d.NgProbeToken,new d.Optional;var vt=new d.InjectionToken("EventManagerPlugins");mt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},mt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},mt.prototype.getZone=function(){return this._zone},mt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},mt.decorators=[{type:d.Injectable}],mt.ctorParameters=function(){return[{type:Array,decorators:[{type:d.Inject,args:[vt]}]},{type:d.NgZone}]};function mt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var yt=(bt.prototype.addGlobalEventListener=function(e,t,n){if(!(e=$e.getGlobalEventTarget(this._doc,e)))throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},bt);function bt(e){this._doc=e}var St=(wt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},wt.prototype.onStylesAdded=function(e){},wt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},wt.decorators=[{type:d.Injectable}],wt.ctorParameters=function(){return[]},wt);function wt(){this._stylesSet=new Set}var Ct;F(_t,Ct=St),_t.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},_t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},_t.prototype.removeHost=function(e){this._hostNodes.delete(e)},_t.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},_t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return $e.remove(e)})},_t.decorators=[{type:d.Injectable}],_t.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]}]};function _t(e){var t=Ct.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},At=/%COMP%/g;function It(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?It(e,i,n):(i=i.replace(At,e),n.push(i))}return n}function Pt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}d.Injectable;var Ot=(Tt.prototype.destroy=function(){},Tt.prototype.createElement=function(e,t){return t?document.createElementNS(Et[t],e):document.createElement(e)},Tt.prototype.createComment=function(e){return document.createComment(e)},Tt.prototype.createText=function(e){return document.createTextNode(e)},Tt.prototype.appendChild=function(e,t){e.appendChild(t)},Tt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Tt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Tt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Tt.prototype.parentNode=function(e){return e.parentNode},Tt.prototype.nextSibling=function(e){return e.nextSibling},Tt.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=Et[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Tt.prototype.removeAttribute=function(e,t,n){var r;n?(r=Et[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Tt.prototype.addClass=function(e,t){e.classList.add(t)},Tt.prototype.removeClass=function(e,t){e.classList.remove(t)},Tt.prototype.setStyle=function(e,t,n,r){r&d.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&d.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Tt.prototype.removeStyle=function(e,t,n){n&d.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Tt.prototype.setProperty=function(e,t,n){Lt(t,"property"),e[t]=n},Tt.prototype.setValue=function(e,t){e.nodeValue=t},Tt.prototype.listen=function(e,t,n){return Lt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pt(n)):this.eventManager.addEventListener(e,t,Pt(n))},Tt);function Tt(e){this.eventManager=e,this.data=Object.create(null)}var kt="@".charCodeAt(0);function Lt(e,t){if(e.charCodeAt(0)===kt)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Rt;F(xt,Rt=Ot),xt.prototype.applyToHost=function(e){Rt.prototype.setAttribute.call(this,e,this.hostAttr,"")},xt.prototype.createElement=function(e,t){return t=Rt.prototype.createElement.call(this,e,t),Rt.prototype.setAttribute.call(this,t,this.contentAttr,""),t};function xt(e,t,n){var r=Rt.call(this,e)||this,e=It((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,"_ngcontent-%COMP%".replace(At,e)),r.hostAttr=(n=n.id,"_nghost-%COMP%".replace(At,n)),r}var Nt;F(Mt,Nt=Ot),Mt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Mt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Mt.prototype.appendChild=function(e,t){return Nt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Mt.prototype.insertBefore=function(e,t,n){return Nt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Mt.prototype.removeChild=function(e,t){return Nt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Mt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Nt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Mt(e,t,n,r){var i=Nt.call(this,e)||this;i.sharedStylesHost=t,i.hostEl=n,i.component=r,i.shadowRoot=n.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=It(r.id,r.styles,[]),s=0;s<o.length;s++){var a=document.createElement("style");a.textContent=o[s],i.shadowRoot.appendChild(a)}return i}var Ut,Dt,Ft="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},jt=Ft("addEventListener"),qt=Ft("removeEventListener"),Bt={},Vt="removeEventListener",zt="__zone_symbol__propagationStopped",Gt="__zone_symbol__stopImmediatePropagation";function Kt(e){return Ut&&Ut.hasOwnProperty(e)}function Ht(e){var t=Bt[e.type];if(t=t&&this[t]){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,i=t.slice(),o=0;o<i.length&&!0!==e[zt];o++)(r=i[o]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}function Wt(e,t){return(e=Dt.call(this,e)||this).ngZone=t,e.patchEvent(),e}(_w="undefined"!=typeof Zone&&Zone[Ft("BLACK_LISTED_EVENTS")])&&(Ut={},_w.forEach(function(e){Ut[e]=e})),F(Wt,Dt=yt),Wt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Gt]||(e=Event.prototype[Gt]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[zt]=!0),e&&e.apply(this,arguments)}))},Wt.prototype.supports=function(e){return!0},Wt.prototype.addEventListener=function(e,t,n){var r=this,i=e[jt],o=n;if(!i||d.NgZone.isInAngularZone()&&!Kt(t))e.addEventListener(t,o,!1);else{var n=(n=Bt[t])||(Bt[t]=Ft("ANGULAR"+t+"FALSE")),i=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=Kt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:o});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===o){a=!0;break}a||s.push({zone:n,handler:o})}i||e[jt](t,Ht,!1)}return function(){return r.removeEventListener(e,t,o)}},Wt.prototype.removeEventListener=function(e,t,n){var r=e[qt];if(!r)return e[Vt].apply(e,[t,n,!1]);var i=Bt[t],o=i&&e[i];if(!o)return e[Vt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Ht,!1]):e[Vt].apply(e,[t,n,!1])},Wt.decorators=[{type:d.Injectable}],Wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]},{type:d.NgZone}]};var $t,Jt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Yt=new d.InjectionToken("HammerGestureConfig"),Zt=(Xt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Xt.decorators=[{type:d.Injectable}],Xt.ctorParameters=function(){return[]},Xt);function Xt(){this.events=[],this.overrides={}}function Qt(e,t){return(e=$t.call(this,e)||this)._config=t,e}F(Qt,$t=yt),Qt.prototype.supports=function(e){if(!Jt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Qt.prototype.addEventListener=function(n,r,i){var o=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){i(e)})}var t=o._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Qt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Qt.decorators=[{type:d.Injectable}],Qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]},{type:Zt,decorators:[{type:d.Inject,args:[Yt]}]}]};var en,tn=["alt","control","meta","shift"],nn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function rn(e){return en.call(this,e)||this}F(rn,en=yt),rn.prototype.supports=function(e){return null!=rn.parseEventName(e)},rn.prototype.addEventListener=function(e,t,n){var r=rn.parseEventName(t),i=rn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return $e.onAndCancel(e,r.domEventName,i)})},rn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=rn._normalizeKey(n.pop()),r="";return tn.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length?null:((e={}).domEventName=t,e.fullKey=r,e)},rn.getEventFullKey=function(t){var n="",r=$e.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),tn.forEach(function(e){e!=r&&(0,nn[e])(t)&&(n+=e+".")}),n+=r},rn.eventCallback=function(t,n,r){return function(e){rn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},rn._normalizeKey=function(e){return"esc"!==e?e:"escape"},rn.decorators=[{type:d.Injectable}],rn.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]}]};var on=(sn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;return t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null),(t=t.response.body).removeChild(t.firstChild),t},sn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},sn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},sn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var i=t[e];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},sn);function sn(e,t){this.defaultDoc=e,this.DOM=t,e=this.DOM.createHtmlDocument(),this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var an=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function cn(e){return(e=String(e)).match(an)||e.match(un)?e:(d.isDevMode()&&$e.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function ln(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function pn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o,s=i[r];for(o in s)s.hasOwnProperty(o)&&(n[o]=!0)}return n}var fn=ln("area,br,col,hr,img,wbr"),dn=ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hn=pn(pi=ln("rp,rt"),dn),gn=pn(dn,ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vn=pn(pi,ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mn=pn(fn,gn,vn,hn),yn=ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bn=ln("srcset"),Sn=ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wn=pn(yn,bn,Sn),Cn=(_n.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},_n.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();mn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();wn.hasOwnProperty(n)?(yn[n]&&(e=cn(e)),bn[n]&&(n=e,e=(n=String(n)).split(",").map(function(e){return cn(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(Pn(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},_n.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase(),mn.hasOwnProperty(e)&&!fn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},_n.prototype.chars=function(e){this.buf.push(Pn(e))},_n.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},_n);function _n(){this.sanitizedSomething=!1,this.buf=[],this.DOM=$e}var En,An=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,In=/([^\#-~ |!])/g;function Pn(e){return e.replace(/&/g,"&amp;").replace(An,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(In,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var On,Tn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),kn=/^url\(([^)]+)\)$/;function Ln(e){var t=On.call(this)||this;return t._doc=e,t}F(Ln,On=function(){}),Ln.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case d.SecurityContext.NONE:return t;case d.SecurityContext.HTML:return t instanceof Mn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=$e,r=null;try{En=En||new on(e,n);var i=t?String(t):"",r=En.getInertBodyElement(i),o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=s,s=n.getInnerHTML(r),r=En.getInertBodyElement(i)}while(i!==s);var a=new Cn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return d.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var f=p[l];n.removeChild(c,f)}}}(this._doc,String(t)));case d.SecurityContext.STYLE:return t instanceof Fn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(kn);return t&&cn(t[1])===t[1]||e.match(Tn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(d.isDevMode()&&$e.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case d.SecurityContext.SCRIPT:if(t instanceof Bn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case d.SecurityContext.URL:return t instanceof Wn||t instanceof Gn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),cn(String(t)));case d.SecurityContext.RESOURCE_URL:if(t instanceof Wn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Ln.prototype.checkNotSafeValue=function(e,t){if(e instanceof Rn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Ln.prototype.bypassSecurityTrustHtml=function(e){return new Mn(e)},Ln.prototype.bypassSecurityTrustStyle=function(e){return new Fn(e)},Ln.prototype.bypassSecurityTrustScript=function(e){return new Bn(e)},Ln.prototype.bypassSecurityTrustUrl=function(e){return new Gn(e)},Ln.prototype.bypassSecurityTrustResourceUrl=function(e){return new Wn(e)},Ln.decorators=[{type:d.Injectable}],Ln.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[ct]}]}]};var Rn=(xn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},xn);function xn(e){this.changingThisBreaksApplicationSecurity=e}var Nn,Mn=(F(Un,Nn=Rn),Un.prototype.getTypeName=function(){return"HTML"},Un);function Un(){return null!==Nn&&Nn.apply(this,arguments)||this}var Dn,Fn=(F(jn,Dn=Rn),jn.prototype.getTypeName=function(){return"Style"},jn);function jn(){return null!==Dn&&Dn.apply(this,arguments)||this}var qn,Bn=(F(Vn,qn=Rn),Vn.prototype.getTypeName=function(){return"Script"},Vn);function Vn(){return null!==qn&&qn.apply(this,arguments)||this}var zn,Gn=(F(Kn,zn=Rn),Kn.prototype.getTypeName=function(){return"URL"},Kn);function Kn(){return null!==zn&&zn.apply(this,arguments)||this}var Hn,Wn=(F($n,Hn=Rn),$n.prototype.getTypeName=function(){return"ResourceURL"},$n);function $n(){return null!==Hn&&Hn.apply(this,arguments)||this}var Jn=[{provide:d.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:d.PLATFORM_INITIALIZER,useValue:function(){ot.makeCurrent(),ht.init()},multi:!0},{provide:t.PlatformLocation,useClass:ft,deps:[ct]},{provide:ct,useFactory:function(){return document},deps:[]}];d.createPlatformFactory(d.platformCore,"browser",Jn),d.Injectable,new d.Version("5.2.11");var Yn=(Object.defineProperty(Zn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Zn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Zn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Zn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},Zn);function Zn(){}var Xn,Qn=(F(er,Xn=Yn),Object.defineProperty(er.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(er.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),er);function er(){return null!==Xn&&Xn.apply(this,arguments)||this}function tr(e){return null==e||0===e.length}var nr=new d.InjectionToken("NgValidators"),rr=new d.InjectionToken("NgAsyncValidators"),ir=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,or=(sr.min=function(n){return function(e){if(tr(e.value)||tr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},sr.max=function(n){return function(e){if(tr(e.value)||tr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},sr.required=function(e){return tr(e.value)?{required:!0}:null},sr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},sr.email=function(e){return tr(e.value)||ir.test(e.value)?null:{email:!0}},sr.minLength=function(t){return function(e){return!tr(e.value)&&(e=e.value?e.value.length:0)<t?{minlength:{requiredLength:t,actualLength:e}}:null}},sr.maxLength=function(t){return function(e){return e=e.value?e.value.length:0,t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},sr.pattern=function(e){if(!e)return sr.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){return tr(e.value)?null:(e=e.value,n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}})}},sr.nullValidator=function(e){return null},sr.compose=function(e){if(!e)return null;var n=e.filter(ar);return 0==n.length?null:function(e){return cr((t=e,n.map(function(e){return e(t)})));var t}},sr.composeAsync=function(e){if(!e)return null;var n=e.filter(ar);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return We(n,null);if(ie(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return We(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return We(e,null);var i=e.pop();return We(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(Ue(function(e){return i.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(ur))).pipe(Ue(cr))}},sr);function sr(){}function ar(e){return null!=e}function ur(e){if(e=d["ɵisPromise"](e)?He(e):e,!d["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function cr(e){return e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{}),0===Object.keys(e).length?null:e}var lr={provide:_l=new d.InjectionToken("NgValueAccessor"),useExisting:d.forwardRef(function(){return pr}),multi:!0},pr=(fr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},fr.prototype.registerOnChange=function(e){this.onChange=e},fr.prototype.registerOnTouched=function(e){this.onTouched=e},fr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[lr]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],fr));function fr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var dr={provide:_l,useExisting:d.forwardRef(function(){return gr}),multi:!0},hr=new d.InjectionToken("CompositionEventMode"),gr=(vr.prototype.writeValue=function(e){e=null==e?"":e,this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},vr.prototype.registerOnChange=function(e){this.onChange=e},vr.prototype.registerOnTouched=function(e){this.onTouched=e},vr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},vr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},vr.prototype._compositionStart=function(){this._composing=!0},vr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},B([d.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[dr]}),V(2,d.Optional()),V(2,d.Inject(hr)),z("design:paramtypes",[d.Renderer2,d.ElementRef,Boolean])],vr));function vr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=$e?$e.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function mr(t){return t.validate?function(e){return t.validate(e)}:t}function yr(t){return t.validate?function(e){return t.validate(e)}:t}var br={provide:_l,useExisting:d.forwardRef(function(){return Sr}),multi:!0},Sr=(wr.prototype.writeValue=function(e){e=null==e?"":e,this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},wr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},wr.prototype.registerOnTouched=function(e){this.onTouched=e},wr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[br]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],wr));function wr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function Cr(){throw new Error("unimplemented")}var _r,Er=(F(Ar,_r=Yn),Object.defineProperty(Ar.prototype,"validator",{get:Cr,enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"asyncValidator",{get:Cr,enumerable:!0,configurable:!0}),Ar);function Ar(){var e=null!==_r&&_r.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}function Ir(){this._accessors=[]}p={provide:_l,useExisting:d.forwardRef(function(){return Pr}),multi:!0},Ir.prototype.add=function(e,t){this._accessors.push([e,t])},Ir.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},Ir.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},Ir.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},m=B([d.Injectable()],Ir);var Pr=(Or.prototype.ngOnInit=function(){this._control=this._injector.get(Er),this._checkName(),this._registry.add(this._control,this)},Or.prototype.ngOnDestroy=function(){this._registry.remove(this)},Or.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Or.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Or.prototype.fireUncheck=function(e){this.writeValue(e)},Or.prototype.registerOnTouched=function(e){this.onTouched=e},Or.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Or.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Or.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},B([d.Input(),z("design:type",String)],Or.prototype,"name",void 0),B([d.Input(),z("design:type",String)],Or.prototype,"formControlName",void 0),B([d.Input(),z("design:type",Object)],Or.prototype,"value",void 0),B([d.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[p]}),z("design:paramtypes",[d.Renderer2,d.ElementRef,m,d.Injector])],Or));function Or(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var b={provide:_l,useExisting:d.forwardRef(function(){return Tr}),multi:!0},Tr=(kr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},kr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},kr.prototype.registerOnTouched=function(e){this.onTouched=e},kr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[b]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],kr));function kr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Lr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Rr='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',xr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Nr=(Mr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Lr)},Mr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Rr+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+xr)},Mr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Lr)},Mr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Rr)},Mr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Mr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Mr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Mr);function Mr(){}function Ur(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}C={provide:_l,useExisting:d.forwardRef(function(){return Dr}),multi:!0};var Dr=(Object.defineProperty(Fr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Fr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1),e=Ur(t,e),this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},Fr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},Fr.prototype.registerOnTouched=function(e){this.onTouched=e},Fr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Fr.prototype._registerOption=function(){return(this._idCounter++).toString()},Fr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Fr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},B([d.Input(),z("design:type",Function),z("design:paramtypes",[Function])],Fr.prototype,"compareWith",null),B([d.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[C]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],Fr));function Fr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=d["ɵlooseIdentical"]}function jr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}function qr(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}Object.defineProperty(jr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Ur(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(jr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),jr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},jr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([d.Input("ngValue"),z("design:type",Object),z("design:paramtypes",[Object])],jr.prototype,"ngValue",null),B([d.Input("value"),z("design:type",Object),z("design:paramtypes",[Object])],jr.prototype,"value",null),Je=B([d.Directive({selector:"option"}),V(2,d.Optional()),V(2,d.Host()),z("design:paramtypes",[d.ElementRef,d.Renderer2,Dr])],jr),Xe={provide:_l,useExisting:d.forwardRef(function(){return Br}),multi:!0};var Br=(Object.defineProperty(Vr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Vr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Vr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var i=n.item(r),o=a._getOptionValue(i.value);t.push(o)}else for(n=e.options,r=0;r<n.length;r++)(i=n.item(r)).selected&&(o=a._getOptionValue(i.value),t.push(o));a.value=t,s(t)}},Vr.prototype.registerOnTouched=function(e){this.onTouched=e},Vr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Vr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Vr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Vr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},B([d.Input(),z("design:type",Function),z("design:paramtypes",[Function])],Vr.prototype,"compareWith",null),B([d.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[Xe]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],Vr));function Vr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=d["ɵlooseIdentical"]}function zr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Gr(e,t){return $(t.path,[e])}function Kr(t,n){var r,i,o,e,s;t||Jr(n,"Cannot find control with"),n.valueAccessor||Jr(n,"No value accessor for form control with"),t.validator=or.compose([t.validator,n.validator]),t.asyncValidator=or.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(i=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Hr(r,i)}),o=n,t.registerOnChange(function(e,t){o.valueAccessor.writeValue(e),t&&o.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Hr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Hr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Wr(e,t){null==e&&Jr(t,"Cannot find control with"),e.validator=or.compose([e.validator,t.validator]),e.asyncValidator=or.composeAsync([e.asyncValidator,t.asyncValidator])}function $r(e){return Jr(e,"There is no FormControl instance attached to form control element with")}function Jr(e,t){throw e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+e)}function Yr(e){return null!=e?or.compose(e.map(mr)):null}function Zr(e){return null!=e?or.composeAsync(e.map(yr)):null}function Xr(e,t){return e.hasOwnProperty("model")&&((e=e.model).isFirstChange()||!d["ɵlooseIdentical"](t,e.currentValue))}Object.defineProperty(zr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(qr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(zr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(qr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),zr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},zr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},zr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([d.Input("ngValue"),z("design:type",Object),z("design:paramtypes",[Object])],zr.prototype,"ngValue",null),B([d.Input("value"),z("design:type",Object),z("design:paramtypes",[Object])],zr.prototype,"value",null),St=B([d.Directive({selector:"option"}),V(2,d.Optional()),V(2,d.Host()),z("design:paramtypes",[d.ElementRef,d.Renderer2,Br])],zr);var Qr=[pr,Tr,Sr,Dr,Br,Pr];function ei(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function ti(n,e){if(!e)return null;Array.isArray(e)||Jr(n,"Value accessor was not provided as an array for form control with");var r=void 0,i=void 0,o=void 0;return e.forEach(function(e){var t;e.constructor===gr?r=e:(t=e,Qr.some(function(e){return t.constructor===e})?(i&&Jr(n,"More than one built-in value accessor matches form control with"),i=e):(o&&Jr(n,"More than one custom value accessor matches form control with"),o=e))}),o||i||r||(Jr(n,"No valid value accessor for form control with"),null)}function ni(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function ri(e,t,n,r){d.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Nr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var ii,oi=(F(si,ii=Qn),si.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},si.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(si.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(si.prototype,"path",{get:function(){return Gr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(si.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(si.prototype,"validator",{get:function(){return Yr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(si.prototype,"asyncValidator",{get:function(){return Zr(this._asyncValidators)},enumerable:!0,configurable:!0}),si.prototype._checkParentType=function(){},si);function si(){return null!==ii&&ii.apply(this,arguments)||this}function ai(e){this._cd=e}Object.defineProperty(ai.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(ai.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0});var ui,yt={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},dn=(F(ci,ui=_w=ai),B([d.Directive({selector:"[formControlName],[ngModel],[formControl]",host:yt}),V(0,d.Self()),z("design:paramtypes",[Er])],ci));function ci(e){return ui.call(this,e)||this}var li,pi=(F(fi,li=_w),B([d.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:yt}),V(0,d.Self()),z("design:paramtypes",[Qn])],fi));function fi(e){return li.call(this,e)||this}var di="VALID",hi="INVALID",gi="PENDING",vi="DISABLED";function mi(e){return e=bi(e)?e.validators:e,Array.isArray(e)?Yr(e):e||null}function yi(e,t){return e=bi(t)?t.asyncValidators:e,Array.isArray(e)?Zr(e):e||null}function bi(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function Si(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}Object.defineProperty(Si.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"valid",{get:function(){return this.status===di},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"invalid",{get:function(){return this.status===hi},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"pending",{get:function(){return this.status==gi},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"disabled",{get:function(){return this.status===vi},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"enabled",{get:function(){return this.status!==vi},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),Si.prototype.setValidators=function(e){this.validator=mi(e)},Si.prototype.setAsyncValidators=function(e){this.asyncValidator=yi(e)},Si.prototype.clearValidators=function(){this.validator=null},Si.prototype.clearAsyncValidators=function(){this.asyncValidator=null},Si.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},Si.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Si.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},Si.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Si.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=gi)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},Si.prototype.disable=function(t){void 0===t&&(t={}),this.status=vi,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},Si.prototype.enable=function(t){void 0===t&&(t={}),this.status=di,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},Si.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},Si.prototype.setParent=function(e){this._parent=e},Si.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==di&&this.status!==gi||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},Si.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},Si.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?vi:di},Si.prototype._runValidator=function(){return this.validator?this.validator(this):null},Si.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=gi,e=ur(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},Si.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},Si.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},Si.prototype.get=function(e){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof Ai?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Oi&&e.at(t)||null},this))},Si.prototype.getError=function(e,t){return(t=t?this.get(t):this)&&t.errors?t.errors[e]:null},Si.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(Si.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),Si.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},Si.prototype._initObservables=function(){this.valueChanges=new d.EventEmitter,this.statusChanges=new d.EventEmitter},Si.prototype._calculateStatus=function(){return this._allControlsDisabled()?vi:this.errors?hi:this._anyControlsHaveStatus(gi)?gi:this._anyControlsHaveStatus(hi)?hi:di},Si.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},Si.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},Si.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},Si.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Si.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Si.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},Si.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},Si.prototype._setUpdateStrategy=function(e){bi(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)};var wi,Ci=(F(_i,wi=gn=Si),_i.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},_i.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},_i.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},_i.prototype._updateValue=function(){},_i.prototype._anyControls=function(e){return!1},_i.prototype._allControlsDisabled=function(){return this.disabled},_i.prototype.registerOnChange=function(e){this._onChange.push(e)},_i.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},_i.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},_i.prototype._forEachChild=function(e){},_i.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},_i.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},_i);function _i(e,t,n){return void 0===e&&(e=null),(n=wi.call(this,mi(t),yi(n,t))||this)._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var Ei,Ai=(F(Ii,Ei=gn),Ii.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Ii.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Ii.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Ii.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Ii.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Ii.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Ii.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Ii.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Ii.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Ci?t.value:t.getRawValue(),e})},Ii.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Ii.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Ii.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Ii.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Ii.prototype._updateValue=function(){this.value=this._reduceValue()},Ii.prototype._anyControls=function(n){var r=this,i=!1;return this._forEachChild(function(e,t){i=i||r.contains(t)&&n(e)}),i},Ii.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Ii.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Ii.prototype._allControlsDisabled=function(){var e,t;try{for(var n=H(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var i=r.value;if(this.controls[i].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},Ii.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Ii);function Ii(e,t,n){return(n=Ei.call(this,mi(t),yi(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Pi,Oi=(F(Ti,Pi=gn),Ti.prototype.at=function(e){return this.controls[e]},Ti.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},Ti.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},Ti.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},Ti.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(Ti.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),Ti.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Ti.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Ti.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Ti.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Ci?e.value:e.getRawValue()})},Ti.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},Ti.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},Ti.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},Ti.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},Ti.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},Ti.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},Ti.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},Ti.prototype._allControlsDisabled=function(){var e,t;try{for(var n=H(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},Ti.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},Ti);function Ti(e,t,n){return(n=Pi.call(this,mi(t),yi(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var ki,vn={provide:Qn,useExisting:d.forwardRef(function(){return Ri})},Li=Promise.resolve(null),Ri=(F(xi,ki=Qn),xi.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(xi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(xi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(xi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(xi.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),xi.prototype.addControl=function(t){var n=this;Li.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Kr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},xi.prototype.getControl=function(e){return this.form.get(e.path)},xi.prototype.removeControl=function(t){var n=this;Li.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),ni(n._directives,t)})},xi.prototype.addFormGroup=function(n){var r=this;Li.then(function(){var e=r._findContainer(n.path),t=new Ai({});Wr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},xi.prototype.removeFormGroup=function(t){var n=this;Li.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},xi.prototype.getFormGroup=function(e){return this.form.get(e.path)},xi.prototype.updateModel=function(e,t){var n=this;Li.then(function(){n.form.get(e.path).setValue(t)})},xi.prototype.setValue=function(e){this.control.setValue(e)},xi.prototype.onSubmit=function(e){return this.submitted=!0,ei(this.form,this._directives),this.ngSubmit.emit(e),!1},xi.prototype.onReset=function(){this.resetForm()},xi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},xi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},xi.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},B([d.Input("ngFormOptions"),z("design:type",Object)],xi.prototype,"options",void 0),B([d.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[vn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(nr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(rr)),z("design:paramtypes",[Array,Array])],xi));function xi(e,t){var n=ki.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new d.EventEmitter,n.form=new Ai({},Yr(e),Zr(t)),n}var Ni=(Mi.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Lr+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},Mi.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+xr)},Mi.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Mi.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+xr)},Mi);function Mi(){}var Ui,Di,hn={provide:Qn,useExisting:d.forwardRef(function(){return Fi})},Fi=(F(ji,Ui=oi),(Di=ji).prototype._checkParentType=function(){this._parent instanceof Di||this._parent instanceof Ri||Ni.modelGroupParentException()},B([d.Input("ngModelGroup"),z("design:type",String)],ji.prototype,"name",void 0),Di=B([d.Directive({selector:"[ngModelGroup]",providers:[hn],exportAs:"ngModelGroup"}),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(rr)),z("design:paramtypes",[Qn,Array,Array])],ji));function ji(e,t,n){var r=Ui.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var qi,Sn={provide:Er,useExisting:d.forwardRef(function(){return Vi})},Bi=Promise.resolve(null),Vi=(F(zi,qi=Er),zi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Xr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},zi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(zi.prototype,"path",{get:function(){return this._parent?Gr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(zi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(zi.prototype,"validator",{get:function(){return Yr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(zi.prototype,"asyncValidator",{get:function(){return Zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),zi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},zi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},zi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},zi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},zi.prototype._setUpStandalone=function(){Kr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},zi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},zi.prototype._checkParentType=function(){!(this._parent instanceof Fi)&&this._parent instanceof oi?Ni.formGroupNameException():this._parent instanceof Fi||this._parent instanceof Ri||Ni.modelParentException()},zi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ni.missingNameException()},zi.prototype._updateValue=function(e){var t=this;Bi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},zi.prototype._updateDisabled=function(e){var t=this,n=""===(e=e.isDisabled.currentValue)||e&&"false"!==e;Bi.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},B([d.Input(),z("design:type",String)],zi.prototype,"name",void 0),B([d.Input("disabled"),z("design:type",Boolean)],zi.prototype,"isDisabled",void 0),B([d.Input("ngModel"),z("design:type",Object)],zi.prototype,"model",void 0),B([d.Input("ngModelOptions"),z("design:type",Object)],zi.prototype,"options",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],zi.prototype,"update",void 0),B([d.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Sn],exportAs:"ngModel"}),V(0,d.Optional()),V(0,d.Host()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(rr)),V(3,d.Optional()),V(3,d.Self()),V(3,d.Inject(_l)),z("design:paramtypes",[Qn,Array,Array,Array])],zi));function zi(e,t,n,r){var i=qi.call(this)||this;return i.control=new Ci,i._registered=!1,i.update=new d.EventEmitter,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=ti(i,r),i}var Gi,Ki,Hi=new d.InjectionToken("NgModelWithFormControlWarning"),ft={provide:Er,useExisting:d.forwardRef(function(){return Wi})},Wi=(F($i,Gi=Er),Ki=$i,Object.defineProperty($i.prototype,"isDisabled",{set:function(e){Nr.disabledAttrWarning()},enumerable:!0,configurable:!0}),$i.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Kr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Xr(e,this.viewModel)&&(ri("formControl",Ki,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty($i.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty($i.prototype,"validator",{get:function(){return Yr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty($i.prototype,"asyncValidator",{get:function(){return Zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty($i.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),$i.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},$i.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},$i._ngModelWarningSentOnce=!1,B([d.Input("formControl"),z("design:type",Ci)],$i.prototype,"form",void 0),B([d.Input("disabled"),z("design:type",Boolean),z("design:paramtypes",[Boolean])],$i.prototype,"isDisabled",null),B([d.Input("ngModel"),z("design:type",Object)],$i.prototype,"model",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],$i.prototype,"update",void 0),Ki=B([d.Directive({selector:"[formControl]",providers:[ft],exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(nr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(rr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(_l)),V(3,d.Optional()),V(3,d.Inject(Hi)),z("design:paramtypes",[Array,Array,Array,Object])],$i));function $i(e,t,n,r){var i=Gi.call(this)||this;return i._ngModelWarningConfig=r,i.update=new d.EventEmitter,i._ngModelWarningSent=!1,i._rawValidators=e||[],i._rawAsyncValidators=t||[],i.valueAccessor=ti(i,n),i}var Ji,Jn={provide:Qn,useExisting:d.forwardRef(function(){return Yi})},Yi=(F(Zi,Ji=Qn),Zi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Zi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Zi.prototype.addControl=function(e){var t=this.form.get(e.path);return Kr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Zi.prototype.getControl=function(e){return this.form.get(e.path)},Zi.prototype.removeControl=function(e){ni(this.directives,e)},Zi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Wr(t,e),t.updateValueAndValidity({emitEvent:!1})},Zi.prototype.removeFormGroup=function(e){},Zi.prototype.getFormGroup=function(e){return this.form.get(e.path)},Zi.prototype.addFormArray=function(e){var t=this.form.get(e.path);Wr(t,e),t.updateValueAndValidity({emitEvent:!1})},Zi.prototype.removeFormArray=function(e){},Zi.prototype.getFormArray=function(e){return this.form.get(e.path)},Zi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Zi.prototype.onSubmit=function(e){return this.submitted=!0,ei(this.form,this.directives),this.ngSubmit.emit(e),!1},Zi.prototype.onReset=function(){this.resetForm()},Zi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Zi.prototype._updateDomValue=function(){var i=this;this.directives.forEach(function(e){var t,n,r=i.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return $r(n)}),n.valueAccessor.registerOnTouched(function(){return $r(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Kr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Zi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Zi.prototype._updateValidators=function(){var e=Yr(this._validators);this.form.validator=or.compose([this.form.validator,e]),e=Zr(this._asyncValidators),this.form.asyncValidator=or.composeAsync([this.form.asyncValidator,e])},Zi.prototype._checkFormPresent=function(){this.form||Nr.missingFormException()},B([d.Input("formGroup"),z("design:type",Ai)],Zi.prototype,"form",void 0),B([d.Output(),z("design:type",Object)],Zi.prototype,"ngSubmit",void 0),B([d.Directive({selector:"[formGroup]",providers:[Jn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(nr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(rr)),z("design:paramtypes",[Array,Array])],Zi));function Zi(e,t){var n=Ji.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new d.EventEmitter,n}var Xi,lr={provide:Qn,useExisting:d.forwardRef(function(){return Qi})},Qi=(F(eo,Xi=oi),eo.prototype._checkParentType=function(){io(this._parent)&&Nr.groupParentException()},B([d.Input("formGroupName"),z("design:type",String)],eo.prototype,"name",void 0),B([d.Directive({selector:"[formGroupName]",providers:[lr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(rr)),z("design:paramtypes",[Qn,Array,Array])],eo));function eo(e,t,n){var r=Xi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var to,dr={provide:Qn,useExisting:d.forwardRef(function(){return no})},no=(F(ro,to=Qn),ro.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},ro.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(ro.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ro.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ro.prototype,"path",{get:function(){return Gr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ro.prototype,"validator",{get:function(){return Yr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(ro.prototype,"asyncValidator",{get:function(){return Zr(this._asyncValidators)},enumerable:!0,configurable:!0}),ro.prototype._checkParentType=function(){io(this._parent)&&Nr.arrayParentException()},B([d.Input("formArrayName"),z("design:type",String)],ro.prototype,"name",void 0),B([d.Directive({selector:"[formArrayName]",providers:[dr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(rr)),z("design:paramtypes",[Qn,Array,Array])],ro));function ro(e,t,n){var r=to.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function io(e){return!(e instanceof Qi||e instanceof Yi||e instanceof no)}var oo,so,hr={provide:Er,useExisting:d.forwardRef(function(){return ao})},ao=(F(uo,oo=Er),so=uo,Object.defineProperty(uo.prototype,"isDisabled",{set:function(e){Nr.disabledAttrWarning()},enumerable:!0,configurable:!0}),uo.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Xr(e,this.viewModel)&&(ri("formControlName",so,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},uo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},uo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(uo.prototype,"path",{get:function(){return Gr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(uo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(uo.prototype,"validator",{get:function(){return Yr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(uo.prototype,"asyncValidator",{get:function(){return Zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),uo.prototype._checkParentType=function(){!(this._parent instanceof Qi)&&this._parent instanceof oi?Nr.ngModelGroupException():this._parent instanceof Qi||this._parent instanceof Yi||this._parent instanceof no||Nr.controlParentException()},uo.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},uo._ngModelWarningSentOnce=!1,B([d.Input("formControlName"),z("design:type",String)],uo.prototype,"name",void 0),B([d.Input("disabled"),z("design:type",Boolean),z("design:paramtypes",[Boolean])],uo.prototype,"isDisabled",null),B([d.Input("ngModel"),z("design:type",Object)],uo.prototype,"model",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],uo.prototype,"update",void 0),so=B([d.Directive({selector:"[formControlName]",providers:[hr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(rr)),V(3,d.Optional()),V(3,d.Self()),V(3,d.Inject(_l)),V(4,d.Optional()),V(4,d.Inject(Hi)),z("design:paramtypes",[Qn,Array,Array,Array,Object])],uo));function uo(e,t,n,r,i){var o=oo.call(this)||this;return o._ngModelWarningConfig=i,o._added=!1,o.update=new d.EventEmitter,o._ngModelWarningSent=!1,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=ti(o,r),o}var br={provide:nr,useExisting:d.forwardRef(function(){return co}),multi:!0},Yn={provide:nr,useExisting:d.forwardRef(function(){return fo}),multi:!0},co=(Object.defineProperty(lo.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),lo.prototype.validate=function(e){return this.required?or.required(e):null},lo.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([d.Input(),z("design:type",Object),z("design:paramtypes",[Object])],lo.prototype,"required",null),B([d.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[br],host:{"[attr.required]":'required ? "" : null'}})],lo));function lo(){}var po,fo=(F(ho,po=co),ho.prototype.validate=function(e){return this.required?or.requiredTrue(e):null},B([d.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[Yn],host:{"[attr.required]":'required ? "" : null'}})],ho));function ho(){return null!==po&&po.apply(this,arguments)||this}var p={provide:nr,useExisting:d.forwardRef(function(){return go}),multi:!0},go=(Object.defineProperty(vo.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),vo.prototype.validate=function(e){return this._enabled?or.email(e):null},vo.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([d.Input(),z("design:type",Object),z("design:paramtypes",[Object])],vo.prototype,"email",null),B([d.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[p]})],vo));function vo(){}var b={provide:nr,useExisting:d.forwardRef(function(){return mo}),multi:!0},mo=(yo.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},yo.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},yo.prototype.registerOnValidatorChange=function(e){this._onChange=e},yo.prototype._createValidator=function(){this._validator=or.minLength(parseInt(this.minlength,10))},B([d.Input(),z("design:type",String)],yo.prototype,"minlength",void 0),B([d.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[b],host:{"[attr.minlength]":"minlength ? minlength : null"}})],yo));function yo(){}var C={provide:nr,useExisting:d.forwardRef(function(){return bo}),multi:!0},bo=(So.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},So.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},So.prototype.registerOnValidatorChange=function(e){this._onChange=e},So.prototype._createValidator=function(){this._validator=or.maxLength(parseInt(this.maxlength,10))},B([d.Input(),z("design:type",String)],So.prototype,"maxlength",void 0),B([d.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[C],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],So));function So(){}var wo,Xe={provide:nr,useExisting:d.forwardRef(function(){return Co}),multi:!0},Co=(_o.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},_o.prototype.validate=function(e){return this._validator(e)},_o.prototype.registerOnValidatorChange=function(e){this._onChange=e},_o.prototype._createValidator=function(){this._validator=or.pattern(this.pattern)},B([d.Input(),z("design:type",Object)],_o.prototype,"pattern",void 0),B([d.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Xe],host:{"[attr.pattern]":"pattern ? pattern : null"}})],_o));function _o(){}function Eo(){}function Ao(){}function Io(e){this.viewContainerRef=e}Eo.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new Ai(n,e,t)},Eo.prototype.control=function(e,t,n){return new Ci(e,t,n)},Eo.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new Oi(e,t,n)},Eo.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},Eo.prototype._createControl=function(e){if(e instanceof Ci||e instanceof Ai||e instanceof Oi)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},_w=B([d.Injectable()],Eo),new d.Version("6.1.10"),yt=[B([d.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],function(){}),Je,St,gr,Sr,Tr,pr,Dr,Br,Pr,dn,pi,co,mo,bo,Co,fo,go],gn=[Vi,Fi,Ri],vn=[Wi,Yi,ao,Qi,no],hn=B([d.NgModule({declarations:yt,exports:yt})],function(){}),Sn=B([d.NgModule({declarations:gn,providers:[m],exports:[hn,gn]})],function(){}),(wo=Ao).withConfig=function(e){return{ngModule:wo,providers:[{provide:Hi,useValue:e.warnOnNgModelWithFormControl}]}},wo=B([d.NgModule({declarations:[vn],providers:[_w,m],exports:[hn,vn]})],Ao),Io.decorators=[{type:d.Directive,args:[{selector:"[component-host]"}]}],Io.ctorParameters=function(){return[{type:d.ViewContainerRef}]},ft=Io;function Po(e,t){this.component=e,this.data=t}var Oo=new E.Logger("AuthDecorator");var To=function(e,t){return(To=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ko(e,t){function n(){this.constructor=e}To(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Lo=function(){return(Lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ro(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function xo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function No(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Mo(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Do(e):function(){return Fo(e)}})}function Uo(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:jo(e.region)})}var Do=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},Fo=function(r){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=void 0===(t=r.tls)||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},Jn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},lr={preferredFile:"credentials"},jo=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},dr="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function qo(){throw new Error("setTimeout has not been defined")}function Bo(){throw new Error("clearTimeout has not been defined")}var Vo=qo,zo=Bo;function Go(t){if(Vo===setTimeout)return setTimeout(t,0);if((Vo===qo||!Vo)&&setTimeout)return Vo=setTimeout,setTimeout(t,0);try{return Vo(t,0)}catch(e){try{return Vo.call(null,t,0)}catch(e){return Vo.call(this,t,0)}}}"function"==typeof dr.setTimeout&&(Vo=setTimeout),"function"==typeof dr.clearTimeout&&(zo=clearTimeout);var Ko,Ho=[],Wo=!1,$o=-1;function Jo(){Wo&&Ko&&(Wo=!1,Ko.length?Ho=Ko.concat(Ho):$o=-1,Ho.length&&Yo())}function Yo(){if(!Wo){var e=Go(Jo);Wo=!0;for(var t=Ho.length;t;){for(Ko=Ho,Ho=[];++$o<t;)Ko&&Ko[$o].run();$o=-1,t=Ho.length}Ko=null,Wo=!1,function(t){if(zo===clearTimeout)return clearTimeout(t);if((zo===Bo||!zo)&&clearTimeout)return zo=clearTimeout,clearTimeout(t);try{zo(t)}catch(e){try{return zo.call(null,t)}catch(e){return zo.call(this,t)}}}(e)}}function Zo(e,t){this.fun=e,this.array=t}function Xo(){}Zo.prototype.run=function(){this.fun.apply(null,this.array)},p=Yn=br=Qn=_l=rr=hr=Xo;var Qo,es=dr.performance||{},ts=es.now||es.mozNow||es.msNow||es.oNow||es.webkitNow||function(){return(new Date).getTime()},ns=new Date,rs={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ho.push(new Zo(e,t)),1!==Ho.length||Wo||Go(Yo)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:hr,addListener:rr,once:_l,off:Qn,removeListener:br,removeAllListeners:Yn,emit:p,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*ts.call(es),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ns)/1e3}},is=(F(os,Qo=Error),os);function os(e,t){return void 0===t&&(t=!0),(e=Qo.call(this,e)||this).tryNextLink=t,e}function ss(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var e,t,n=Promise.reject(new is("No providers in chain"));try{for(var r=H(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}function as(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return G(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}function us(t){return new Promise(function(r,i){var e=h.request(j({method:"GET"},t));e.on("error",function(e){i(Object.assign(new is("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){i(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode;((t=void 0===t?400:t)<200||300<=t)&&i(Object.assign(new is("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(f.Buffer.concat(n))})}),e.end()})}var cs=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},ls=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},ps=function(e){var t=e.maxRetries;return{maxRetries:t=void 0===t?0:t,timeout:void 0===(e=e.timeout)?1e3:e}},fs=function(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n},ds="AWS_CONTAINER_CREDENTIALS_FULL_URI",hs="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",gs="AWS_CONTAINER_AUTHORIZATION_TOKEN";function vs(e){var t=this;void 0===e&&(e={});var a=(e=ps(e)).timeout,n=e.maxRetries;return function(){return function(){if(rs.env[hs])return Promise.resolve({hostname:ms,path:rs.env[hs]});if(rs.env[ds]){var e=w.parse(rs.env[ds]);return e.hostname&&e.hostname in ys?e.protocol&&e.protocol in bs?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new is(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new is(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new is("The container metadata credential provider cannot be used unless the "+hs+" or "+ds+" environment variable is set",!1))}().then(function(s){return fs(function(){return G(t,void 0,void 0,function(){var i,o;return K(this,function(e){switch(e.label){case 0:return o=(i=JSON).parse,[4,(t=a,n=s,rs.env[gs]&&((r=void 0===(r=n.headers)?{}:r).Authorization=rs.env[gs],n.headers=r),us(j(j({},n),{timeout:t})).then(function(e){return e.toString()}))];case 1:if(i=o.apply(i,[e.sent()]),!cs(i))throw new is("Invalid response received from instance metadata service.");return[2,ls(i)]}var t,n,r})})},n)})}}var ms="169.254.170.2",ys={localhost:!0,"127.0.0.1":!0},bs={"http:":!0,"https:":!0},Ss="169.254.169.254",ws="/latest/meta-data/iam/security-credentials/",Cs=function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,us(j(j({},t),{host:Ss,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})})},_s=function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,us(j(j({},t),{host:Ss,path:ws}))];case 1:return[2,e.sent().toString()]}})})},Es=function(r,i){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,us(j(j({},i),{host:Ss,path:ws+r}))];case 1:if(t=n.apply(t,[e.sent().toString()]),!cs(t))throw new is("Invalid response received from instance metadata service.");return[2,ls(t)]}})})},As="AWS_SHARED_CREDENTIALS_FILE",Is="AWS_CONFIG_FILE",Ps=function(){return{}};function Os(e){void 0===e&&(e={});var t=void 0===(t=e.filepath)?rs.env[As]||o.join(xs(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?rs.env[Is]||o.join(xs(),".aws","config"):e;return Promise.all([Rs(e).then(Ls).then(ks).catch(Ps),Rs(t).then(Ls).catch(Ps)]).then(function(e){return{configFile:(e=W(e,2))[0],credentialsFile:e[1]}})}var Ts=/^profile\s(["'])?([^\1]+)\1$/;function ks(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=void 0;"default"===s?r.default=e.default:(a=Ts.exec(s))&&((a=W(a,3))[0],a[1],(a=a[2])&&(r[a]=e[s]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Ls(e){var t,n,r,i={};try{for(var o=H(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a=s.value,u=(a=a.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);u?r=u[1]:!r||(a=a.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Rs(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function xs(){var e=(r=rs.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+o.sep:r;return e||t||(n?""+r+n:i.homedir())}var Ns="default",Ms="AWS_PROFILE";function Us(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function Ds(t){return void 0===t&&(t={}),function(){return js(t).then(function(e){return function p(f,d,h,g){return void 0===g&&(g={}),G(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:if(n=d[f],0<Object.keys(g).length&&Us(n))return[2,qs(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,i=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,o=n.source_profile,!h.roleAssumer)throw new is("Profile "+f+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(o in g)throw new is("Detected a cycle attempting to resolve credentials for profile "+Fs(h)+". Profiles visited: "+Object.keys(g).join(", "),!1);if(l=p(o,d,h,j(j({},g),((l={})[o]=!0,l))),s={RoleArn:i,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!h.mfaCodeProvider)throw new is("Profile "+f+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,h.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=h).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(Us(n))return[2,qs(n)];throw new is("Profile "+f+" could not be found or parsed in shared credentials file.")}var t})})}(Fs(t),e,t)})}}function Fs(e){return e.profile||rs.env[Ms]||Ns}function js(e){var t=e.loadedConfig;return(void 0===t?Os(e):t).then(function(e){var t=e.configFile,e=e.credentialsFile;return j(j({},t),e)})}function qs(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Bs(e){void 0===e&&(e={});var t,n,r=e.profile;return as(e=(void 0===r?rs.env[Ms]:r)?Ds(e):ss(function(){var e=rs.env.AWS_ACCESS_KEY_ID,t=rs.env.AWS_SECRET_ACCESS_KEY,n=rs.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:rs.env.AWS_SESSION_TOKEN,expiration:n?new Date(n):void 0}):Promise.reject(new is("Unable to find environment variable credentials."))},Ds(e),(void 0===(n=e)&&(n={}),function(){return js(n).then(function(e){return function(u,r){return G(this,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return n=r[u],r[u]?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){s.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){var t;try{t=JSON.parse(e)}catch(e){throw Error("Profile "+u+" credential_process returned invalid JSON.")}var n=t.Version,r=t.AccessKeyId,i=t.SecretAccessKey,o=t.SessionToken,s=t.Expiration;if(1!==n)throw Error("Profile "+u+" credential_process did not return Version 1.");if(void 0===r||void 0===i)throw Error("Profile "+u+" credential_process returned invalid credentials.");if(s){var a=new Date;if(new Date(s)<a)throw Error("Profile "+u+" credential_process returned expired credentials.");a=Math.floor(new Date(s).valueOf()/1e3)}return{accessKeyId:r,secretAccessKey:i,sessionToken:o,expirationUnix:a}}).catch(function(e){throw new is(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new is("Profile "+u+" did not contain credential_process.");case 3:return[3,5];case 4:throw new is("Profile "+u+" could not be found in shared credentials file.");case 5:return[2]}var t})})}(Fs(n),e)})}),(t=e,rs.env[hs]||rs.env[ds]?vs(t):rs.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new is("EC2 Instance Metadata Service access disabled"))}:function(e){function r(t,i){return G(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return[4,fs(function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_s(i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)];case 1:return r=e.sent().trim(),[2,fs(function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Es(r,i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)]}})})}void 0===e&&(e={});var o=!1,i=(e=ps(e)).timeout,s=e.maxRetries;return function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return o?[2,r(s,{timeout:i})]:[3,1];case 1:t=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,Cs({timeout:i})];case 3:return t=e.sent().toString(),[3,5];case 4:if(400===(null==(n=e.sent())?void 0:n.statusCode))throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==n.message&&![403,404,405].includes(n.statusCode)||(o=!0),[2,r(s,{timeout:i})];case 5:return[2,r(s,{timeout:i,headers:{"x-aws-ec2-metadata-token":t}})]}})})}}(t))),function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})}function Vs(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function zs(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!Vs(e))throw new Error("argument passed to fromArrayBuffer was not an ArrayBuffer");if("function"==typeof f.Buffer.from&&f.Buffer.from!==Uint8Array.from)return f.Buffer.from(e,t,n);if(0!==t||n!==e.byteLength)throw new Error("Unable to convert TypedArray to Buffer in Node "+rs.version);return new f.Buffer(e)}function Gs(e,t){if("string"!=typeof e)throw new Error("argument passed to fromString was not a string");return"function"==typeof f.Buffer.from&&f.Buffer.from!==Uint8Array.from?f.Buffer.from(e,t):new f.Buffer(e,t)}function Ks(e,t){this.hash=t?n.createHmac(e,Hs(t)):n.createHash(e)}function Hs(e,t){return f.Buffer.isBuffer(e)?e:"string"==typeof e?Gs(e,t):ArrayBuffer.isView(e)?zs(e.buffer,e.byteOffset,e.byteLength):zs(e)}function Ws(t){return{applyToStack:function(e){var r;e.add((r=t,function(n){return function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,r.retryStrategy.retry(n,t)]})})}}),$s)}}}Ks.prototype.update=function(e,t){this.hash.update(Hs(e,t))},Ks.prototype.digest=function(){return Promise.resolve(this.hash.digest())},b=Ks;var $s={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},Js=(Ys.isInstance=function(e){return!!e&&("number"==typeof e.statusCode&&"object"==typeof e.headers)},Ys);function Ys(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var Zs=(Xs.isInstance=function(e){return!!e&&("method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers)},Xs.prototype.clone=function(){var r,e=new Xs(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},Xs);function Xs(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function Qs(e){return ra.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function ea(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function ta(e){return!!e&&(void 0!==e.$retryable||na.includes(e.name)||Qs(e)||ia.includes(e.name)||oa.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0))}var na=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],ra=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],ia=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],oa=[500,502,503,504],sa=(aa.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},aa.prototype.getMaxAttempts=function(){return G(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},aa.prototype.retry=function(p,f){return G(this,void 0,void 0,function(){var o,s,a,u,c,l,t;return K(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=f.request,Zs.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=g.v4()),t=function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),Zs.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(f)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(o),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return r=e.sent(),s++,l.shouldRetry(r,s,u)?(o=l.retryQuota.retrieveRetryTokens(r),i=l.delayDecider(Qs(r)?500:100,s),a+=i,[4,new Promise(function(e){return setTimeout(e,i)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},aa);function aa(e,t){function n(e){return"TimeoutError"===e.name?10:5}function r(e){return n(e)<=o}var i,o;this.maxAttemptsProvider=e,this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:ta,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:ea,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:(o=i=500,Object.freeze({hasRetryTokens:r,retrieveRetryTokens:function(e){if(!r(e))throw new Error("No retry token available");return e=n(e),o-=e,e},releaseRetryTokens:function(e){o+=null!=e?e:1,o=Math.min(o,i)}}))}function ua(e){var t=pa(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new sa(t)})}var ca="AWS_MAX_ATTEMPTS",la="max_attempts",C={environmentVariableSelector:function(e){var t=e[ca];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Environment variable "+ca+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[la];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Shared config file entry "+la+' mast be a number, got "'+t+'"');return e}},default:3},pa=function(e){if(void 0===e&&(e=3),"number"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},nr=function(e,t){var n,r,i,o=e.environmentVariableSelector,s=e.configFileSelector,e=e.default;return void 0===t&&(t={}),as(ss((n=o,function(){return G(void 0,void 0,void 0,function(){var t;return K(this,function(e){try{if(void 0===(t=n(rs.env)))throw new Error;return[2,t]}catch(e){throw new is(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),function(s,e){void 0===e&&(e={});var t=e.preferredFile,a=void 0===t?"config":t,u=q(e,["preferredFile"]);return function(){return G(void 0,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return t=u.loadedConfig,r=void 0===t?Os(u):t,n=u.profile,t=void 0===n?rs.env.AWS_PROFILE||"default":n,[4,r];case 1:n=e.sent(),r=n.configFile,n=(n=n.credentialsFile)[t]||{},r=r[t]||{},i="config"===a?j(j({},n),r):j(j({},r),n);try{if(void 0===(o=s(i)))throw new Error;return[2,o]}catch(e){throw new is(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+s)}return[2]}})})}}(s,t),"function"==typeof(r=e)?function(){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,r()]})})}:(i=r,function(){return Promise.resolve(i)})))};function fa(e){return encodeURIComponent(e).replace(/[!'()*]/g,da)}function da(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}function ha(e){var t,n,r=[];try{for(var i=H(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=fa(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+fa(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+fa(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function ga(e,t){t instanceof u.Readable?t.pipe(e):t?e.end(t):e.end()}function va(e){var t=(r=void 0===e?{}:e).connectionTimeout,n=r.socketTimeout,e=r.httpAgent,r=r.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=t,this.socketTimeout=n,this.httpAgent=e||new h.Agent({keepAlive:!0}),this.httpsAgent=r||new v.Agent({keepAlive:!0})}va.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},va.prototype.handle=function(p,e){var f=this,d=e.abortSignal;return new Promise(function(t,n){if(null!=d&&d.aborted)return(c=new Error("Request aborted")).name="AbortError",void n(c);var r,i,o,s,e,a,u="https:"===p.protocol,c=ha(p.query||{}),c={headers:p.headers,host:p.hostname,method:p.method,path:c?p.path+"?"+c:p.path,port:p.port,agent:u?f.httpsAgent:f.httpAgent},l=(u?v:h).request(c,function(e){e=new Js({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.headers),body:e}),t({response:e})});l.on("error",n),c=l,r=n,void 0===(i=f.connectionTimeout)&&(i=0),i&&c.on("socket",function(e){var t,n=this;e.connecting&&(t=setTimeout(function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+i+" ms");e.name="TimeoutError",r(e)},i),e.on("connect",function(){clearTimeout(t)}))}),c=l,o=n,void 0===(s=f.socketTimeout)&&(s=0),c.setTimeout(s,function(){this.abort();var e=new Error("Connection timed out after "+s+" ms");e.name="TimeoutError",o(e)}),d&&(d.onabort=function(){l.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),e=l,"100-continue"===((a=p).headers.Expect||a.headers.expect)?e.on("continue",function(){ga(e,a.body)}):ga(e,a.body)})},Xe=va;var ma=[],ya=[],ba="undefined"!=typeof Uint8Array?Uint8Array:Array,Sa=!1;function wa(){Sa=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ma[t]=e[t],ya[e.charCodeAt(t)]=t;ya["-".charCodeAt(0)]=62,ya["_".charCodeAt(0)]=63}function Ca(e){var t;Sa||wa();for(var n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(function(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(ma[r>>18&63]+ma[r>>12&63]+ma[r>>6&63]+ma[63&r]);return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],i+=ma[t>>2],i+=ma[t<<4&63],i+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i+=ma[t>>10],i+=ma[t>>4&63],i+=ma[t<<2&63],i+="="),o.push(i),o.join("")}function _a(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,f=n?-1:1,n=e[t+p];for(p+=f,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=c}return(n?-1:1)*s*Math.pow(2,o-r)}function Ea(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+f]=255&s,f+=d,s/=256,u-=8);e[n+f-d]|=128*o}var Aa={}.toString,Ia=Array.isArray||function(e){return"[object Array]"==Aa.call(e)};function Pa(){return Ta.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Oa(e,t){if(Pa()<t)throw new RangeError("Invalid typed array length");return Ta.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ta.prototype:(null===e&&(e=new Ta(t)),e.length=t),e}function Ta(e,t,n){if(!(Ta.TYPED_ARRAY_SUPPORT||this instanceof Ta))return new Ta(e,t,n);if("number"!=typeof e)return ka(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ra(this,e)}function ka(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Ta.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ta.prototype:e=xa(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Ta.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Ua(t,n);return(n=(e=Oa(e,r)).write(t,n))!==r&&(e=e.slice(0,n)),e}(e,t,n):function(e,t){if(Ma(t)){var n=0|Na(t.length);return 0===(e=Oa(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?Oa(e,0):xa(e,t);if("Buffer"===t.type&&Ia(t.data))return xa(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function La(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ra(e,t){if(La(t),e=Oa(e,t<0?0:0|Na(t)),!Ta.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function xa(e,t){var n=t.length<0?0:0|Na(t.length);e=Oa(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Na(e){if(e>=Pa())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pa().toString(16)+" bytes");return 0|e}function Ma(e){return null!=e&&e._isBuffer}function Ua(e,t){if(Ma(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Xa(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Qa(e).length;default:if(r)return Xa(e).length;t=(""+t).toLowerCase(),r=!0}}function Da(e,i,o){var t,n,r=!1;if((void 0===i||i<0)&&(i=0),i>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(i>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i,o="",s=t;s<n;++s)o+=(i=e[s])<16?"0"+i.toString(16):i.toString(16);return o}(this,i,o);case"utf8":case"utf-8":return Va(this,i,o);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,i,o);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,i,o);case"base64":return n=o,0===(t=i)&&n===this.length?Ca(this):Ca(this.slice(t,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e){for(var t=e.slice(i,o),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n}(this);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Fa(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ja(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Ta.from(t,r)),Ma(t))return 0===t.length?-1:qa(e,t,n,r,i);if("number"==typeof t)return t&=255,Ta.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):qa(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function qa(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(s<n+a&&(n=s-a),l=n;0<=l;l--){for(var p=!0,f=0;f<a;f++)if(u(e,l+f)!==u(t,f)){p=!1;break}if(p)return l}return-1}function Ba(e,t,n,r){return eu(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Va(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=za)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=za));return n}(r)}Ta.TYPED_ARRAY_SUPPORT=void 0===dr.TYPED_ARRAY_SUPPORT||dr.TYPED_ARRAY_SUPPORT,Ta.poolSize=8192,Ta._augment=function(e){return e.__proto__=Ta.prototype,e},Ta.from=function(e,t,n){return ka(null,e,t,n)},Ta.TYPED_ARRAY_SUPPORT&&(Ta.prototype.__proto__=Uint8Array.prototype,Ta.__proto__=Uint8Array),Ta.alloc=function(e,t,n){return r=null,La(e),e<=0||void 0===t?Oa(r,e):"string"==typeof n?Oa(r,e).fill(t,n):Oa(r,e).fill(t);var r},Ta.allocUnsafe=function(e){return Ra(null,e)},Ta.allocUnsafeSlow=function(e){return Ra(null,e)},Ta.isBuffer=function(e){return null!=e&&(!!e._isBuffer||tu(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&tu(e.slice(0,0)))},Ta.compare=function(e,t){if(!Ma(e)||!Ma(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ta.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ta.concat=function(e,t){if(!Ia(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ta.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=Ta.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!Ma(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},Ta.byteLength=Ua,Ta.prototype._isBuffer=!0,Ta.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Fa(this,t,t+1);return this},Ta.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Fa(this,t,t+3),Fa(this,t+1,t+2);return this},Ta.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Fa(this,t,t+7),Fa(this,t+1,t+6),Fa(this,t+2,t+5),Fa(this,t+3,t+4);return this},Ta.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?Va(this,0,e):Da.apply(this,arguments)},Ta.prototype.equals=function(e){if(!Ma(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ta.compare(this,e)},Ta.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Ta.prototype.compare=function(e,t,n,r,i){if(!Ma(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Ta.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ta.prototype.indexOf=function(e,t,n){return ja(this,e,t,n,!0)},Ta.prototype.lastIndexOf=function(e,t,n){return ja(this,e,t,n,!1)},Ta.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,eu(Xa(e,(o=this).length-s),o,s,a);case"ascii":return Ba(this,e,t,n);case"latin1":case"binary":return Ba(this,e,t,n);case"base64":return o=this,s=t,a=n,eu(Qa(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,l=n,eu(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,r%=256,i.push(r),i.push(n);return i}(e,(u=this).length-c),u,c,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},Ta.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var za=4096;function Ga(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Ka(e,t,n,r,i,o){if(!Ma(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Ha(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Wa(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function $a(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ja(e,t,n,r,i){return i||$a(e,0,n,4),Ea(e,t,n,r,23,4),n+4}function Ya(e,t,n,r,i){return i||$a(e,0,n,8),Ea(e,t,n,r,52,8),n+8}Ta.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Ta.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Ta.prototype;else for(var r=t-e,i=new Ta(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},Ta.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Ga(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Ta.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Ga(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},Ta.prototype.readUInt8=function(e,t){return t||Ga(e,1,this.length),this[e]},Ta.prototype.readUInt16LE=function(e,t){return t||Ga(e,2,this.length),this[e]|this[e+1]<<8},Ta.prototype.readUInt16BE=function(e,t){return t||Ga(e,2,this.length),this[e]<<8|this[e+1]},Ta.prototype.readUInt32LE=function(e,t){return t||Ga(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ta.prototype.readUInt32BE=function(e,t){return t||Ga(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ta.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Ga(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},Ta.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Ga(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},Ta.prototype.readInt8=function(e,t){return t||Ga(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ta.prototype.readInt16LE=function(e,t){return t||Ga(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},Ta.prototype.readInt16BE=function(e,t){return t||Ga(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},Ta.prototype.readInt32LE=function(e,t){return t||Ga(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ta.prototype.readInt32BE=function(e,t){return t||Ga(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ta.prototype.readFloatLE=function(e,t){return t||Ga(e,4,this.length),_a(this,e,!0,23,4)},Ta.prototype.readFloatBE=function(e,t){return t||Ga(e,4,this.length),_a(this,e,!1,23,4)},Ta.prototype.readDoubleLE=function(e,t){return t||Ga(e,8,this.length),_a(this,e,!0,52,8)},Ta.prototype.readDoubleBE=function(e,t){return t||Ga(e,8,this.length),_a(this,e,!1,52,8)},Ta.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ka(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Ta.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ka(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},Ta.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,1,255,0),Ta.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ta.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,2,65535,0),Ta.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ha(this,e,t,!0),t+2},Ta.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,2,65535,0),Ta.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ha(this,e,t,!1),t+2},Ta.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,4,4294967295,0),Ta.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Wa(this,e,t,!0),t+4},Ta.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,4,4294967295,0),Ta.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Wa(this,e,t,!1),t+4},Ta.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||Ka(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ta.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||Ka(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ta.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,1,127,-128),Ta.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ta.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,2,32767,-32768),Ta.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ha(this,e,t,!0),t+2},Ta.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,2,32767,-32768),Ta.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ha(this,e,t,!1),t+2},Ta.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,4,2147483647,-2147483648),Ta.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Wa(this,e,t,!0),t+4},Ta.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ka(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ta.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Wa(this,e,t,!1),t+4},Ta.prototype.writeFloatLE=function(e,t,n){return Ja(this,e,t,!0,n)},Ta.prototype.writeFloatBE=function(e,t,n){return Ja(this,e,t,!1,n)},Ta.prototype.writeDoubleLE=function(e,t,n){return Ya(this,e,t,!0,n)},Ta.prototype.writeDoubleBE=function(e,t,n){return Ya(this,e,t,!1,n)},Ta.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!Ta.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Ta.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ta.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=Ma(e)?e:Xa(new Ta(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var Za=/[^+\/0-9A-Za-z-_]/g;function Xa(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Qa(e){return function(e){var t,n,r,i;Sa||wa();var o=e.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[o-2]?2:"="===e[o-1]?1:0,i=new ba(3*o/4-r),t=0<r?o-4:o;for(var s=0,a=0;a<t;a+=4)n=ya[e.charCodeAt(a)]<<18|ya[e.charCodeAt(a+1)]<<12|ya[e.charCodeAt(a+2)]<<6|ya[e.charCodeAt(a+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=255&n;return 2==r?(n=ya[e.charCodeAt(a)]<<2|ya[e.charCodeAt(a+1)]>>4,i[s++]=255&n):1==r&&(n=ya[e.charCodeAt(a)]<<10|ya[e.charCodeAt(a+1)]<<4|ya[e.charCodeAt(a+2)]>>2,i[s++]=n>>8&255,i[s++]=255&n),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Za,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function eu(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function tu(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var nu,ru=(F(iu,nu=u.Writable),iu.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},iu);function iu(){var e=null!==nu&&nu.apply(this,arguments)||this;return e.bufferedBytes=[],e}function ou(e){var t,n=w.parse(e),r=void 0===(i=n.hostname)?"localhost":i,e=void 0===(o=n.pathname)?"/":o,i=n.port,o=void 0===(o=n.protocol)?"https:":o;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=H(e.split("&")),o=i.next();!o.done;o=i.next()){var s=(a=W(o.value.split("="),2))[0],a=void 0===(a=a[1])?null:a,s=decodeURIComponent(s),a=a&&decodeURIComponent(a);s in r?Array.isArray(r[s])?r[s].push(a):r[s]=[r[s],a]:r[s]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:i?parseInt(i):void 0,protocol:o,path:e,query:t}}function su(e){return e=Gs(e,"base64"),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function au(e){return zs(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function uu(e){return e?"string"==typeof e?Ta.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}function cu(e,t){var n=c.platform+"/"+c.version;return c.env.AWS_EXECUTION_ENV&&(n+=" exec-env/"+c.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+e+"/"+t+" "+n}function lu(e){return e=Gs(e,"utf8"),new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)}function pu(e){return zs(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}Je=function(e){return new Promise(function(t,n){var r=new ru;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Ta.concat(this.bufferedBytes));t(e)})})};var fu="pinpoint.{region}.amazonaws.com",du=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),hu=new Set(["cn-north-1","cn-northwest-1"]),gu=new Set(["us-iso-east-1"]),vu=new Set(["us-isob-east-1"]),mu=new Set(["us-gov-east-1","us-gov-west-1"]),yu=Lo(Lo({},{apiVersion:"2016-12-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:du.has(e)&&(n={hostname:fu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),hu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),gu.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),vu.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),mu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:fu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"node",base64Decoder:su,base64Encoder:au,bodyLengthChecker:uu,credentialDefaultProvider:Bs,defaultUserAgent:cu("@aws-sdk/client-pinpoint","1.0.0-gamma.8"),maxAttempts:nr(C),region:nr(Jn,lr),requestHandler:new Xe,sha256:b.bind(null,"sha256"),streamCollector:Je,urlParser:ou,utf8Decoder:lu,utf8Encoder:pu}),bu="content-length";function Su(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(o){return G(e,void 0,void 0,function(){var t,n,r,i;return K(this,function(e){return t=o.request,Zs.isInstance(t)&&(i=t.body,n=t.headers,i&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(bu)&&void 0!==(r=a(i))&&(t.headers=j(j({},t.headers),((i={})[bu]=String(r),i)))),[2,s(j(j({},o),{request:t}))]})})}}}(t.bodyLengthChecker),wu)}}}var wu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"};function Cu(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){return Zs.isInstance(r.request)&&(t=r.request,0<=(void 0===(n=(o.requestHandler.metadata||{}).handlerProtocol)?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,i(r)]})})}}),Eu)}}}function _u(){return{applyToStack:function(e){e.add(function(u,c){return function(a){return G(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:return t=c.logger,n=c.inputFilterSensitiveLog,r=c.outputFilterSensitiveLog,[4,u(a)];case 1:return i=e.sent(),t&&(s=i.output,o=s.$metadata,s=q(s,["$metadata"]),"function"==typeof t.debug&&(t.debug({httpRequest:a.request}),t.debug({httpResponse:i.response})),"function"==typeof t.info&&t.info({$metadata:o,input:n(a.input),output:r(s)})),[2,i]}})})}},Au)}}}var Eu={name:"hostHeaderMiddleware",step:"build",tags:["HOST"]},Au={name:"loggerMiddleware",tags:["LOGGER"],step:"finalizeRequest"},Iu="X-Amz-Date",Pu="X-Amz-Signature",Ou="X-Amz-Security-Token",Tu="authorization",ku=Iu.toLowerCase(),Lu=[Tu,ku,"date"],Ru=Pu.toLowerCase(),xu="x-amz-content-sha256",Nu=Ou.toLowerCase(),Mu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Uu=/^proxy-/,Du=/^sec-/,Fu="AWS4-HMAC-SHA256",ju="AWS4-HMAC-SHA256-PAYLOAD",qu="aws4_request",Bu={},Vu=[];function zu(e,t,n){return e+"/"+t+"/"+n+"/"+qu}function Gu(a,u,c,l,p){var f=c+":"+l+":"+p+":"+u.accessKeyId+":"+u.sessionToken;if(f in Bu)return Bu[f];for(Vu.push(f);50<Vu.length;)delete Bu[Vu.shift()];return Bu[f]=new Promise(function(e,t){var n,r,i=Promise.resolve("AWS4"+u.secretAccessKey);try{for(var o=H([c,l,p,qu]),s=o.next();!s.done;s=o.next())!function(r){(i=i.then(function(e){return n=r,(t=new a(t=e)).update(n),t.digest();var t,n})).catch(function(){})}(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}i.then(e,function(e){delete Bu[f],t(e)})})}for(var Ku={},Hu={},Wu=0;Wu<256;Wu++){var $u=Wu.toString(16).toLowerCase();1===$u.length&&($u="0"+$u),Ku[Wu]=$u,Hu[$u]=Wu}function Ju(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ku[e[n]];return t}function Yu(e,t,n){var r,i,o=e.headers,s={};try{for(var a=H(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Mu||null!=t&&t.has(l)||Uu.test(l)||Du.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function Zu(e,a){var u=e.headers,c=e.body;return G(this,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:try{for(t=H(Object.keys(u)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===xu)return[2,u[r]]}catch(e){o={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(o)throw o.error}}return null!=c?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof c||ArrayBuffer.isView(c)||Vs(c)?((o=new a).update(c),i=Ju,[4,o.digest()]):[3,3];case 2:return[2,i.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function Xu(e){var r,t=e.headers,n=e.query,e=q(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function Qu(e){var t,n;e="function"==typeof e.clone?e.clone():Xu(e);try{for(var r=H(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Lu.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var ec=(tc.prototype.presign=function(v,m){return void 0===m&&(m={}),G(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return K(this,function(e){switch(e.label){case 0:return s=m.signingDate,a=void 0===s?new Date:s,i=m.expiresIn,t=void 0===i?3600:i,n=m.unsignableHeaders,r=m.signableHeaders,s=m.signingRegion,i=m.signingService,[4,this.credentialProvider()];case 1:return o=e.sent(),null==s?[3,2]:(u=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:u=e.sent(),e.label=4;case 4:return s=u,u=nc(a),a=u.longDate,u=u.shortDate,604800<t?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(h=zu(u,s,null!=i?i:this.service),c=function(e){var t,n,r="function"==typeof e.clone?e.clone():Xu(e),i=r.headers,o=void 0===(r=r.query)?{}:r;try{for(var s=H(Object.keys(i)),a=s.next();!a.done;a=s.next()){var u=a.value;"x-amz-"===u.toLowerCase().substr(0,6)&&(o[u]=i[u],delete i[u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return j(j({},e),{headers:i,query:o})}(Qu(v)),o.sessionToken&&(c.query[Ou]=o.sessionToken),c.query["X-Amz-Algorithm"]=Fu,c.query["X-Amz-Credential"]=o.accessKeyId+"/"+h,c.query[Iu]=a,c.query["X-Amz-Expires"]=t.toString(10),g=Yu(c,n,r),c.query["X-Amz-SignedHeaders"]=rc(g),l=c.query,p=Pu,f=this.getSignature,d=[a,h,this.getSigningKey(o,s,u,i)],h=this.createCanonicalRequest,g=[c,g],[4,Zu(v,this.sha256)]);case 5:return[4,f.apply(this,d.concat([h.apply(this,g.concat([e.sent()]))]))];case 6:return l[p]=e.sent(),[2,c]}})})},tc.prototype.sign=function(t,n){return G(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},tc.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,f=t.signingRegion,d=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return null==f?[3,1]:(n=f,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,i=nc(l),o=i.shortDate,r=i.longDate,i=zu(o,t,null!=d?d:this.service),[4,Zu({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(o=new this.sha256).update(u),s=Ju,[4,o.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[ju,r,i,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:d})]}})})},tc.prototype.signString=function(a,e){var t=void 0===e?{}:e,u=void 0===(e=t.signingDate)?new Date:e,c=t.signingRegion,l=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==c?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=nc(u).shortDate,o=(i=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(i=new(o.apply(i,[void 0,e.sent()]))).update(a),s=Ju,[4,i.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},tc.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,f=t.signableHeaders,d=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=Qu(l),a=nc(p),o=a.longDate,s=a.shortDate,a=zu(s,n,null!=g?g:this.service),i.headers[ku]=o,t.sessionToken&&(i.headers[Nu]=t.sessionToken),[4,Zu(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=H(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(xu,i.headers)&&this.applyChecksum&&(i.headers[xu]=c),u=Yu(i,d,f),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Tu]=Fu+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+rc(u)+", Signature="+c,[2,i]}})})},tc.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,i=[],o={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){var e;n.toLowerCase()!==Ru&&(i.push(n),"string"==typeof(e=r[n])?o[n]=fa(n)+"="+fa(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([fa(n)+"="+fa(t)])},[]).join("&")))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},tc.prototype.createStringToSign=function(n,r,i){return G(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,Fu+"\n"+n+"\n"+r+"\n"+Ju(t)]}})})},tc.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},tc.prototype.getSignature=function(o,s,a,u){return G(this,void 0,void 0,function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(o,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),i=Ju,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},tc.prototype.getSigningKey=function(e,t,n,r){return Gu(this.sha256,e,n,t,r||this.service)},tc);function tc(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=ic(r),this.credentialProvider=oc(n)}var nc=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},rc=function(e){return Object.keys(e).sort().join(";")},ic=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},oc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function sc(r){var e=this,i=ac(r.credentials||r.credentialDefaultProvider(r)),o=void 0===(t=r.signingEscapePath)||t,t=void 0===(n=r.systemClockOffset)?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?ac(r.signer):function(){return ac(r.region)().then(function(t){return G(e,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=(n=W(e,2))[0],e=n[1],n=void 0===(n=t.signingRegion)?r.signingRegion:n,t=void 0===(t=t.signingService)?r.signingName:t;return r.signingRegion=r.signingRegion||n||e,r.signingName=r.signingName||t,new ec({credentials:i,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:o})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:o,credentials:i,signer:n})}function ac(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var uc=function(e){return new Date(Date.now()+e)};function cc(t){return{applyToStack:function(e){var c;e.addRelativeTo((c=t,function(a,u){return function(s){return G(this,void 0,void 0,function(){var n,r,i,o;return K(this,function(e){switch(e.label){case 0:return Zs.isInstance(s.request)?"function"!=typeof c.signer?[3,2]:[4,c.signer()]:[2,a(s)];case 1:return n=e.sent(),[3,3];case 2:n=c.signer,e.label=3;case 3:return r=a,i=[j({},s)],o={},[4,n.sign(s.request,{signingDate:new Date(Date.now()+c.systemClockOffset),signingRegion:u.signing_region,signingService:u.signing_service})];case 4:return[4,r.apply(void 0,[j.apply(void 0,i.concat([(o.request=e.sent(),o)]))])];case 5:return i=e.sent(),(o=(o=i.response.headers)&&(o.date||o.Date))&&(t=o=Date.parse(o),e=c.systemClockOffset,3e5<=Math.abs(uc(e).getTime()-t)&&(c.systemClockOffset=o-Date.now())),[2,i]}var t})})}}),lc)}}}var lc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};function pc(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(e){var t=e.request;if(!Zs.isInstance(t))return i(e);var n=t.headers,r="node"===o.runtime?"user-agent":"x-amz-user-agent";return n[r]?n[r]+=" "+o.defaultUserAgent:n[r]=""+o.defaultUserAgent,o.customUserAgent&&(n[r]+=" "+o.customUserAgent),i(j(j({},e),{request:t}))}}),fc)}}}var fc={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},dc=function(){function n(t){return c.forEach(function(e){t.add(e.middleware,j({},e))}),l.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}var c=[],l=[],i=new Set,p=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t},t={add:function(e,t){void 0===t&&(t={});var n=t.name,t=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(i.has(n))throw new Error("Duplicate middleware name '"+n+"'");i.add(n)}c.push(t)},addRelativeTo:function(e,t){var n=t.name,t=j({middleware:e},t);if(n){if(i.has(n))throw new Error("Duplicated middleware name '"+n+"'");i.add(n)}l.push(t)},clone:function(){return n(dc())},use:function(e){e.applyToStack(t)},remove:function(e){return("string"==typeof e?function(t){function e(e){return!e.name||e.name!==t||(n=!0,i.delete(t),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n}:function(t){function e(e){return e.middleware!==t||(n=!0,e.name&&i.delete(e.name),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n})(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!(t&&t.includes(n)&&(e&&i.delete(e),r=!0))}var r=!1;return c=c.filter(e),l=l.filter(e),r},concat:function(e){var t=n(dc());return t.use(e),t},applyToStack:n,resolve:function(e,t){var n,r,i,o,s;try{for(var a=H((i=[],o=[],s={},c.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(s[e.name]=e),i.push(e)}),l.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(s[e.name]=e),o.push(e)}),o.forEach(function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),i.sort(function(e,t){return hc[t.step]-hc[e.step]||gc[t.priority||"normal"]-gc[e.priority||"normal"]}).map(p).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware}).reverse())),u=a.next();!u.done;u=a.next())e=(0,u.value)(e,t)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return e}};return t},hc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},gc={high:3,normal:2,low:1},St=(vc.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,r=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return r(e).then(function(e){return e.output});r(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},vc.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},vc);function vc(e){this.middlewareStack=dc(),this.config=e}function mc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function yc(e){return Array.isArray(e)?e:[e]}dn=function(){this.middlewareStack=dc()};var bc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=bc(e[t]));return e};function Sc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"object"==typeof e&&("__type"in e&&-1<t.indexOf(e.__type)||"name"in e&&-1<t.indexOf(e.name))}(pi=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t}).prototype=Object.create(String.prototype,{constructor:{value:pi,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(pi,String);var wc,Cc=(F(_c,wc=pi),_c.prototype.deserializeJSON=function(){return JSON.parse(wc.prototype.toString.call(this))},_c.prototype.toJSON=function(){return wc.prototype.toString.call(this)},_c.fromObject=function(e){return e instanceof _c?e:e instanceof String||"string"==typeof e?new _c(e):new _c(JSON.stringify(e))},_c);function _c(){return null!==wc&&wc.apply(this,arguments)||this}var Ec=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ac=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ic(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return Ec[r]+", "+(i<10?"0"+i:""+i)+" "+Ac[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Pc,Oc,Tc,kc,Lc,Rc,xc,Nc="***SensitiveInformation***",Mc=(ko(Uc,Pc=St),Uc.prototype.destroy=function(){Pc.prototype.destroy.call(this)},Uc);function Uc(e){var t=this,e=ua(e=sc(Mo(e=Uo(e=Lo(Lo({},yu),e)))));return(t=Pc.call(this,e)||this).config=e,t.middlewareStack.use(cc(t.config)),t.middlewareStack.use(Ws(t.config)),t.middlewareStack.use(pc(t.config)),t.middlewareStack.use(Su(t.config)),t.middlewareStack.use(Cu(t.config)),t.middlewareStack.use(_u(t.config)),t}function Dc(e){return Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})}function Fc(e){return Lo(Lo(Lo(Lo(Lo(Lo({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})}(yt={}).ADM="ADM",yt.APNS="APNS",yt.APNS_SANDBOX="APNS_SANDBOX",yt.APNS_VOIP="APNS_VOIP",yt.APNS_VOIP_SANDBOX="APNS_VOIP_SANDBOX",yt.BAIDU="BAIDU",yt.CUSTOM="CUSTOM",yt.EMAIL="EMAIL",yt.GCM="GCM",yt.PUSH="PUSH",yt.SMS="SMS",yt.VOICE="VOICE",(gn={}).DEEP_LINK="DEEP_LINK",gn.OPEN_APP="OPEN_APP",gn.URL="URL",(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"ActivitiesResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"Activity")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"ActivityResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"AddressConfiguration")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"ADMChannelRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"ADMChannelResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"ADMMessage")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"AndroidPushNotificationTemplate")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"APNSChannelRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"APNSChannelResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"APNSMessage")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"APNSPushNotificationTemplate")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"APNSSandboxChannelRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"APNSSandboxChannelResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"APNSVoipChannelRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"APNSVoipChannelResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"APNSVoipSandboxChannelRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"APNSVoipSandboxChannelResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"ApplicationDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"ApplicationResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"ApplicationSettingsResource")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"ApplicationsResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"AttributeDimension")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"AttributesResource")},(Yn={}).EXCLUSIVE="EXCLUSIVE",Yn.INCLUSIVE="INCLUSIVE",(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"BadRequestException")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"BaiduChannelRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"BaiduChannelResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"BaiduMessage")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"BaseKpiResult")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"CampaignCustomMessage")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"CampaignDateRangeKpiResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"CampaignEmailMessage")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"CampaignEventFilter")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"CampaignHook")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"CampaignLimits")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"CampaignResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"CampaignSmsMessage")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"CampaignsResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"CampaignState")},(p={}).COMPLETED="COMPLETED",p.DELETED="DELETED",p.EXECUTING="EXECUTING",p.PAUSED="PAUSED",p.PENDING_NEXT_RUN="PENDING_NEXT_RUN",p.SCHEDULED="SCHEDULED",(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"ChannelResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"ChannelsResponse")},(yt={}).ADM="ADM",yt.APNS="APNS",yt.APNS_SANDBOX="APNS_SANDBOX",yt.APNS_VOIP="APNS_VOIP",yt.APNS_VOIP_SANDBOX="APNS_VOIP_SANDBOX",yt.BAIDU="BAIDU",yt.CUSTOM="CUSTOM",yt.EMAIL="EMAIL",yt.GCM="GCM",yt.PUSH="PUSH",yt.SMS="SMS",yt.VOICE="VOICE",(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"Condition")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"ConditionalSplitActivity")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"CreateApplicationRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"CreateAppRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"CreateAppResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"CreateCampaignRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"CreateCampaignResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"CreateEmailTemplateRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"CreateEmailTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"CreateExportJobRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"CreateExportJobResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"CreateImportJobRequest")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"CreateImportJobResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"CreateJourneyRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"CreateJourneyResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"CreatePushTemplateRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"CreatePushTemplateResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"CreateRecommenderConfigurationRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"CreateRecommenderConfigurationResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"CreateRecommenderConfigurationShape")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"CreateSegmentRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"CreateSegmentResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"CreateSmsTemplateRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"CreateSmsTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"CreateTemplateMessageBody")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"CreateVoiceTemplateRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"CreateVoiceTemplateResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"CustomDeliveryConfiguration")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"CustomMessageActivity")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"DefaultMessage")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"DefaultPushNotificationMessage")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"DefaultPushNotificationTemplate")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"DeleteAdmChannelRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"DeleteAdmChannelResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"DeleteApnsChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"DeleteApnsChannelResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"DeleteApnsSandboxChannelRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"DeleteApnsSandboxChannelResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"DeleteApnsVoipChannelRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"DeleteApnsVoipChannelResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"DeleteApnsVoipSandboxChannelRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"DeleteApnsVoipSandboxChannelResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"DeleteAppRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"DeleteAppResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"DeleteBaiduChannelRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"DeleteBaiduChannelResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"DeleteCampaignRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"DeleteCampaignResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"DeleteEmailChannelRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"DeleteEmailChannelResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"DeleteEmailTemplateRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"DeleteEmailTemplateResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"DeleteEndpointRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"DeleteEndpointResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"DeleteEventStreamRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"DeleteEventStreamResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"DeleteGcmChannelRequest")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"DeleteGcmChannelResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"DeleteJourneyRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"DeleteJourneyResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"DeletePushTemplateRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"DeletePushTemplateResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"DeleteRecommenderConfigurationRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"DeleteRecommenderConfigurationResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"DeleteSegmentRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"DeleteSegmentResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"DeleteSmsChannelRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"DeleteSmsChannelResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"DeleteSmsTemplateRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"DeleteSmsTemplateResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"DeleteUserEndpointsRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"DeleteUserEndpointsResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"DeleteVoiceChannelRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"DeleteVoiceChannelResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"DeleteVoiceTemplateRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"DeleteVoiceTemplateResponse")},(_w={}).DUPLICATE="DUPLICATE",_w.OPT_OUT="OPT_OUT",_w.PERMANENT_FAILURE="PERMANENT_FAILURE",_w.SUCCESSFUL="SUCCESSFUL",_w.TEMPORARY_FAILURE="TEMPORARY_FAILURE",_w.THROTTLED="THROTTLED",_w.UNKNOWN_FAILURE="UNKNOWN_FAILURE",(m={}).EXCLUSIVE="EXCLUSIVE",m.INCLUSIVE="INCLUSIVE",(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"DirectMessageConfiguration")},(vn={}).DAY_14="DAY_14",vn.DAY_30="DAY_30",vn.DAY_7="DAY_7",vn.HR_24="HR_24",(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"EmailChannelRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"EmailChannelResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"EmailMessage")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"EmailMessageActivity")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"EmailTemplateRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"EmailTemplateResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"EndpointBatchItem")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"EndpointBatchRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"EndpointDemographic")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"EndpointItemResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"EndpointLocation")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"EndpointMessageResult")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"EndpointRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"EndpointResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"EndpointSendConfiguration")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"EndpointsResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"EndpointUser")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"Event")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"EventCondition")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"EventDimensions")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"EventItemResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"EventsBatch")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"EventsRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"EventsResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"EventStream")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"ExportJobRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"ExportJobResource")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"ExportJobResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"ExportJobsResponse")},(vn={}).ENDPOINT="ENDPOINT",vn.SYSTEM="SYSTEM",(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"ForbiddenException")},(rr={}).CSV="CSV",rr.JSON="JSON",(_l={}).DAILY="DAILY",_l.EVENT="EVENT",_l.HOURLY="HOURLY",_l.MONTHLY="MONTHLY",_l.ONCE="ONCE",_l.WEEKLY="WEEKLY",(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GCMChannelRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GCMChannelResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GCMMessage")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetAdmChannelRequest")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetAdmChannelResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetApnsChannelRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetApnsChannelResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetApnsSandboxChannelRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetApnsSandboxChannelResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetApnsVoipChannelRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetApnsVoipChannelResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetApnsVoipSandboxChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetApnsVoipSandboxChannelResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetApplicationDateRangeKpiRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetApplicationDateRangeKpiResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetApplicationSettingsRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GetApplicationSettingsResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GetAppRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetAppResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetAppsRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetAppsResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetBaiduChannelRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetBaiduChannelResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetCampaignActivitiesRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetCampaignActivitiesResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetCampaignDateRangeKpiRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetCampaignDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetCampaignRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetCampaignResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetCampaignsRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetCampaignsResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GetCampaignVersionRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GetCampaignVersionResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetCampaignVersionsRequest")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetCampaignVersionsResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetChannelsRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetChannelsResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetEmailChannelRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetEmailChannelResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetEmailTemplateRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetEmailTemplateResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetEndpointRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetEndpointResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetEventStreamRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetEventStreamResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetExportJobRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GetExportJobResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GetExportJobsRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetExportJobsResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetGcmChannelRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetGcmChannelResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetImportJobRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetImportJobResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetImportJobsRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetImportJobsResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetJourneyDateRangeKpiRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetJourneyDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetJourneyExecutionActivityMetricsRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetJourneyExecutionActivityMetricsResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetJourneyExecutionMetricsRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetJourneyExecutionMetricsResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GetJourneyRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GetJourneyResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetPushTemplateRequest")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetPushTemplateResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetRecommenderConfigurationRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetRecommenderConfigurationResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetRecommenderConfigurationsRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetRecommenderConfigurationsResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetSegmentExportJobsRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetSegmentExportJobsResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetSegmentImportJobsRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetSegmentImportJobsResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetSegmentRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetSegmentResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetSegmentsRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GetSegmentsResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GetSegmentVersionRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"GetSegmentVersionResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"GetSegmentVersionsRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"GetSegmentVersionsResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"GetSmsChannelRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"GetSmsChannelResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"GetSmsTemplateRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"GetSmsTemplateResponse")},(hn=Oc=Oc||{}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"GetUserEndpointsRequest")},(vn=Tc=Tc||{}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"GetUserEndpointsResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"GetVoiceChannelRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"GetVoiceChannelResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"GetVoiceTemplateRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"GetVoiceTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"GPSCoordinates")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"GPSPointDimension")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"HoldoutActivity")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"ImportJobRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"ImportJobResource")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"ImportJobResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"ImportJobsResponse")},(_w={}).ALL="ALL",_w.ANY="ANY",_w.NONE="NONE",(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"InternalServerErrorException")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"ItemResponse")},(vn={}).COMPLETED="COMPLETED",vn.COMPLETING="COMPLETING",vn.CREATED="CREATED",vn.FAILED="FAILED",vn.FAILING="FAILING",vn.INITIALIZING="INITIALIZING",vn.PENDING_JOB="PENDING_JOB",vn.PREPARING_FOR_INITIALIZATION="PREPARING_FOR_INITIALIZATION",vn.PROCESSING="PROCESSING",(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"JourneyCustomMessage")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"JourneyDateRangeKpiResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"JourneyEmailMessage")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"JourneyExecutionActivityMetricsResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"JourneyExecutionMetricsResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"JourneyLimits")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"JourneyPushMessage")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"JourneyResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"JourneySchedule")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"JourneySMSMessage")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"JourneysResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"JourneyStateRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"ListJourneysRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"ListJourneysResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"ListRecommenderConfigurationsResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"ListTagsForResourceRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"ListTagsForResourceResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"ListTemplatesRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"ListTemplatesResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"ListTemplateVersionsRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"ListTemplateVersionsResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"Message")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"MessageBody")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"MessageConfiguration")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"MessageRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"MessageResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"MessageResult")},(m={}).PROMOTIONAL="PROMOTIONAL",m.TRANSACTIONAL="TRANSACTIONAL",(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"MethodNotAllowedException")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"MetricDimension")},(hr={}).DELIVERY="DELIVERY",hr.FILTER="FILTER",(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"MultiConditionalBranch")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"MultiConditionalSplitActivity")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"NotFoundException")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"NumberValidateRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"NumberValidateResponse")},(p={}).ALL="ALL",p.ANY="ANY",(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"PayloadTooLargeException")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"PhoneNumberValidateRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"PhoneNumberValidateResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"PublicEndpoint")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"PushMessageActivity")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"PushNotificationTemplateRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"PushNotificationTemplateResponse")},(vn=kc=kc||{}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"PutEventsRequest")},(hr=Lc=Lc||{}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"PutEventsResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"PutEventStreamRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"PutEventStreamResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"QuietTime")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"RandomSplitActivity")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"RandomSplitEntry")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"RawEmail")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"RecencyDimension")},(pi={}).ACTIVE="ACTIVE",pi.INACTIVE="INACTIVE",(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"RecommenderConfigurationResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"RemoveAttributesRequest")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"RemoveAttributesResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"ResultRow")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"ResultRowValue")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"Schedule")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"SegmentBehaviors")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"SegmentCondition")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"SegmentDemographics")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"SegmentDimensions")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"SegmentGroup")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"SegmentGroupList")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"SegmentImportResource")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"SegmentLocation")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"SegmentReference")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"SegmentResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"SegmentsResponse")},(_w={}).DIMENSIONAL="DIMENSIONAL",_w.IMPORT="IMPORT",(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"SendMessagesRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"SendMessagesResponse")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"SendUsersMessageRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"SendUsersMessageResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"SendUsersMessagesRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"SendUsersMessagesResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"Session")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"SetDimension")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"SimpleCondition")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"SimpleEmail")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"SimpleEmailPart")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"SMSChannelRequest")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"SMSChannelResponse")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"SMSMessage")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"SMSMessageActivity")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"SMSTemplateRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"SMSTemplateResponse")},(vn={}).ALL="ALL",vn.ANY="ANY",vn.NONE="NONE",(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"StartCondition")},(rr={}).ACTIVE="ACTIVE",rr.CANCELLED="CANCELLED",rr.CLOSED="CLOSED",rr.COMPLETED="COMPLETED",rr.DRAFT="DRAFT",(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"TagResourceRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"TagsModel")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"Template")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"TemplateActiveVersionRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"TemplateConfiguration")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"TemplateResponse")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"TemplatesResponse")},(yt={}).EMAIL="EMAIL",yt.PUSH="PUSH",yt.SMS="SMS",yt.VOICE="VOICE",(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"TemplateVersionResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"TemplateVersionsResponse")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"TooManyRequestsException")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"TreatmentResource")},(vn={}).ALL="ALL",vn.ANY="ANY",vn.NONE="NONE",(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"UntagResourceRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"UpdateAdmChannelRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"UpdateAdmChannelResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"UpdateApnsChannelRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"UpdateApnsChannelResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"UpdateApnsSandboxChannelRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"UpdateApnsSandboxChannelResponse")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"UpdateApnsVoipChannelRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"UpdateApnsVoipChannelResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"UpdateApnsVoipSandboxChannelRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"UpdateApnsVoipSandboxChannelResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"UpdateApplicationSettingsRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"UpdateApplicationSettingsResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"UpdateAttributesRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"UpdateBaiduChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"UpdateBaiduChannelResponse")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"UpdateCampaignRequest")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"UpdateCampaignResponse")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"UpdateEmailChannelRequest")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"UpdateEmailChannelResponse")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"UpdateEmailTemplateRequest")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"UpdateEmailTemplateResponse")},(dr=Rc=Rc||{}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"UpdateEndpointRequest")},(pi=xc=xc||{}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"UpdateEndpointResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"UpdateEndpointsBatchRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"UpdateEndpointsBatchResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"UpdateGcmChannelRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"UpdateGcmChannelResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"UpdateJourneyRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"UpdateJourneyResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"UpdateJourneyStateRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"UpdateJourneyStateResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"UpdatePushTemplateRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"UpdatePushTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"UpdateRecommenderConfigurationRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"UpdateRecommenderConfigurationResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"UpdateRecommenderConfigurationShape")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"UpdateSegmentRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"UpdateSegmentResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"UpdateSmsChannelRequest")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"UpdateSmsChannelResponse")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"UpdateSmsTemplateRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"UpdateSmsTemplateResponse")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"UpdateTemplateActiveVersionRequest")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"UpdateTemplateActiveVersionResponse")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"UpdateVoiceChannelRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"UpdateVoiceChannelResponse")},(_l={}).filterSensitiveLog=function(e){return Lo({},e)},_l.isa=function(e){return Sc(e,"UpdateVoiceTemplateRequest")},(Qn={}).filterSensitiveLog=function(e){return Lo({},e)},Qn.isa=function(e){return Sc(e,"UpdateVoiceTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Lo({},e)},br.isa=function(e){return Sc(e,"VoiceChannelRequest")},(Yn={}).filterSensitiveLog=function(e){return Lo({},e)},Yn.isa=function(e){return Sc(e,"VoiceChannelResponse")},(p={}).filterSensitiveLog=function(e){return Lo({},e)},p.isa=function(e){return Sc(e,"VoiceMessage")},(dr={}).filterSensitiveLog=function(e){return Lo({},e)},dr.isa=function(e){return Sc(e,"VoiceTemplateRequest")},(pi={}).filterSensitiveLog=function(e){return Lo({},e)},pi.isa=function(e){return Sc(e,"VoiceTemplateResponse")},(yt={}).filterSensitiveLog=function(e){return Lo({},e)},yt.isa=function(e){return Sc(e,"WaitActivity")},(gn={}).filterSensitiveLog=function(e){return Lo({},e)},gn.isa=function(e){return Sc(e,"WaitTime")},(_w={}).filterSensitiveLog=function(e){return Lo({},e)},_w.isa=function(e){return Sc(e,"WriteApplicationSettingsRequest")},(m={}).filterSensitiveLog=function(e){return Lo({},e)},m.isa=function(e){return Sc(e,"WriteCampaignRequest")},(hn={}).filterSensitiveLog=function(e){return Lo({},e)},hn.isa=function(e){return Sc(e,"WriteEventStream")},(vn={}).filterSensitiveLog=function(e){return Lo({},e)},vn.isa=function(e){return Sc(e,"WriteJourneyRequest")},(hr={}).filterSensitiveLog=function(e){return Lo({},e)},hr.isa=function(e){return Sc(e,"WriteSegmentRequest")},(rr={}).filterSensitiveLog=function(e){return Lo({},e)},rr.isa=function(e){return Sc(e,"WriteTreatmentResource")};function jc(e,t){return Object.entries(e).reduce(function(e,t){var n,t=(r=No(t,2))[0],r=r[1];return Lo(Lo({},e),((e={})[t]=Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo({},void 0!==r.AppPackageName&&{AppPackageName:r.AppPackageName}),void 0!==r.AppTitle&&{AppTitle:r.AppTitle}),void 0!==r.AppVersionCode&&{AppVersionCode:r.AppVersionCode}),void 0!==r.Attributes&&{Attributes:(n=r.Attributes,Object.entries(n).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=n,e))},{}))}),void 0!==r.ClientSdkVersion&&{ClientSdkVersion:r.ClientSdkVersion}),void 0!==r.EventType&&{EventType:r.EventType}),void 0!==r.Metrics&&{Metrics:$c(r.Metrics)}),void 0!==r.SdkName&&{SdkName:r.SdkName}),void 0!==r.Session&&{Session:Xc(r.Session)}),void 0!==r.Timestamp&&{Timestamp:r.Timestamp}),e))},{})}var qc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Bc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Vc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},zc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Gc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Kc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Hc=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:rl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Wc=function(e,t){return Lo(Lo({},void 0!==e.UserAttributes&&{UserAttributes:Yc(e.UserAttributes)}),void 0!==e.UserId&&{UserId:e.UserId})},$c=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=n,e))},{})},Jc=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=Lo(Lo({},void 0!==n.Endpoint&&{Endpoint:Zc(n.Endpoint)}),void 0!==n.Events&&{Events:jc(n.Events)}),e))},{})},Yc=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=n.map(function(e){return e}),e))},{})},Zc=function(e,t){return Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Yc(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Dc(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Fc(e.Location)}),void 0!==e.Metrics&&{Metrics:$c(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Wc(e.User)})},Xc=function(e,t){return Lo(Lo(Lo(Lo({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},Qc=function(e,t){return(e||[]).map(function(e){return{__type:"EndpointResponse",Address:void 0!==e.Address&&null!==e.Address?e.Address:void 0,ApplicationId:void 0!==e.ApplicationId&&null!==e.ApplicationId?e.ApplicationId:void 0,Attributes:void 0!==e.Attributes&&null!==e.Attributes?nl(e.Attributes):void 0,ChannelType:void 0!==e.ChannelType&&null!==e.ChannelType?e.ChannelType:void 0,CohortId:void 0!==e.CohortId&&null!==e.CohortId?e.CohortId:void 0,CreationDate:void 0!==e.CreationDate&&null!==e.CreationDate?e.CreationDate:void 0,Demographic:void 0!==e.Demographic&&null!==e.Demographic?{__type:"EndpointDemographic",AppVersion:void 0!==(n=e.Demographic).AppVersion&&null!==n.AppVersion?n.AppVersion:void 0,Locale:void 0!==n.Locale&&null!==n.Locale?n.Locale:void 0,Make:void 0!==n.Make&&null!==n.Make?n.Make:void 0,Model:void 0!==n.Model&&null!==n.Model?n.Model:void 0,ModelVersion:void 0!==n.ModelVersion&&null!==n.ModelVersion?n.ModelVersion:void 0,Platform:void 0!==n.Platform&&null!==n.Platform?n.Platform:void 0,PlatformVersion:void 0!==n.PlatformVersion&&null!==n.PlatformVersion?n.PlatformVersion:void 0,Timezone:void 0!==n.Timezone&&null!==n.Timezone?n.Timezone:void 0}:void 0,EffectiveDate:void 0!==e.EffectiveDate&&null!==e.EffectiveDate?e.EffectiveDate:void 0,EndpointStatus:void 0!==e.EndpointStatus&&null!==e.EndpointStatus?e.EndpointStatus:void 0,Id:void 0!==e.Id&&null!==e.Id?e.Id:void 0,Location:void 0!==e.Location&&null!==e.Location?{__type:"EndpointLocation",City:void 0!==(n=e.Location).City&&null!==n.City?n.City:void 0,Country:void 0!==n.Country&&null!==n.Country?n.Country:void 0,Latitude:void 0!==n.Latitude&&null!==n.Latitude?n.Latitude:void 0,Longitude:void 0!==n.Longitude&&null!==n.Longitude?n.Longitude:void 0,PostalCode:void 0!==n.PostalCode&&null!==n.PostalCode?n.PostalCode:void 0,Region:void 0!==n.Region&&null!==n.Region?n.Region:void 0}:void 0,Metrics:void 0!==e.Metrics&&null!==e.Metrics?el(e.Metrics):void 0,OptOut:void 0!==e.OptOut&&null!==e.OptOut?e.OptOut:void 0,RequestId:void 0!==e.RequestId&&null!==e.RequestId?e.RequestId:void 0,User:void 0!==e.User&&null!==e.User?{__type:"EndpointUser",UserAttributes:void 0!==(t=e.User).UserAttributes&&null!==t.UserAttributes?nl(t.UserAttributes):void 0,UserId:void 0!==t.UserId&&null!==t.UserId?t.UserId:void 0}:void 0};var t,n})},el=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=n,e))},{})},tl=function(e,t){return Object.entries(e).reduce(function(e,t){var n,t=(r=No(t,2))[0],r=r[1];return Lo(Lo({},e),((e={})[t]={__type:"ItemResponse",EndpointItemResponse:void 0!==(t=r).EndpointItemResponse&&null!==t.EndpointItemResponse?{__type:"EndpointItemResponse",Message:void 0!==(r=t.EndpointItemResponse).Message&&null!==r.Message?r.Message:void 0,StatusCode:void 0!==r.StatusCode&&null!==r.StatusCode?r.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?(n=t.EventsItemResponse,Object.entries(n).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]={__type:"EventItemResponse",Message:void 0!==n.Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})):void 0},e))},{})},nl=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=No(t,2))[0],n=n[1];return Lo(Lo({},e),((e={})[t]=(n||[]).map(function(e){return e}),e))},{})},rl=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},il=function(e,t){return i=r=t,void 0===(n=e)&&(n=new Uint8Array),(n instanceof Uint8Array?Promise.resolve(n):i.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,i},ol=function(e,t){function n(e){return 0<=e.indexOf(":")&&(e=e.split(":")[0]),0<=e.indexOf("#")&&(e=e.split("#")[1]),e}var r,i=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?n(e.headers[i]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},sl={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},al={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function ul(t,n,r){return{applyToStack:function(e){e.add(function(o,s){var e=this;return function(i){return function(r){return G(e,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return[4,i(r)];case 1:return t=e.sent().response,[4,s(t,o)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}}(t,r),sl),e.add(function(i,o){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,o(n.input,i)];case 1:return t=e.sent(),[2,r(j(j({},n),{request:t}))]}})})}}}(t,n),al)}}}var cl,ll=(ko(pl,cl=dn),pl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Oc.filterSensitiveLog,outputFilterSensitiveLog:Tc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},pl.prototype.serialize=function(e,t){return s=e,a=t,Ro(void 0,void 0,void 0,function(){var t,n,r,i,o;return xo(this,function(e){switch(e.label){case 0:if(t={"Content-Type":""},n="/v1/apps/{ApplicationId}/users/{UserId}",void 0===s.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=s.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",mc(i)),void 0===s.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((i=s.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return n=n.replace("{UserId}",mc(i)),[4,a.endpoint()];case 1:return o=e.sent(),r=o.hostname,i=void 0===(i=o.protocol)?"https":i,o=o.port,[2,new Zs({protocol:i,hostname:r,port:o,method:"GET",headers:t,path:n,body:void 0})]}})});var s,a},pl.prototype.deserialize=function(e,t){return i=e,o=t,Ro(void 0,void 0,void 0,function(){var n,r;return xo(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&400<=i.statusCode?[2,(d=i,h=o,Ro(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return xo(this,function(e){switch(e.label){case 0:return t=[Lo({},d)],f={},[4,il(d.body,h)];case 1:switch(l=Lo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=ol(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,qc(l)];case 3:return n=Lo.apply(void 0,[Lo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 4:return i=[{}],[4,Bc(l)];case 5:return n=Lo.apply(void 0,[Lo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 6:return o=[{}],[4,Vc(l)];case 7:return n=Lo.apply(void 0,[Lo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 8:return s=[{}],[4,zc(l)];case 9:return n=Lo.apply(void 0,[Lo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 10:return a=[{}],[4,Gc(l)];case 11:return n=Lo.apply(void 0,[Lo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 12:return u=[{}],[4,Kc(l)];case 13:return n=Lo.apply(void 0,[Lo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 14:return c=[{}],[4,Hc(l)];case 15:return n=Lo.apply(void 0,[Lo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Lo(Lo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:rl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:rl(i),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,il(i.body,o)]);case 1:return r=e.sent(),n.EndpointsResponse={__type:"EndpointsResponse",Item:void 0!==(t=r).Item&&null!==t.Item?Qc(t.Item):void 0},[2,Promise.resolve(n)]}var t,d,h})});var i,o},pl);function pl(e){var t=cl.call(this)||this;return t.input=e,t}var fl,dl=(ko(hl,fl=dn),hl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:kc.filterSensitiveLog,outputFilterSensitiveLog:Lc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},hl.prototype.serialize=function(e,t){return u=e,c=t,Ro(void 0,void 0,void 0,function(){var n,r,i,o,s,a;return xo(this,function(e){switch(e.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",mc(s)),void 0!==u.EventsRequest&&(t=u.EventsRequest,i=Lo({},void 0!==t.BatchItem&&{BatchItem:Jc(t.BatchItem)})),void 0===i&&(i={}),i=JSON.stringify(i),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Zs({protocol:s,hostname:o,port:a,method:"POST",headers:n,path:r,body:i})]}var t})});var u,c},hl.prototype.deserialize=function(e,t){return i=e,o=t,Ro(void 0,void 0,void 0,function(){var n,r;return xo(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&400<=i.statusCode?[2,(d=i,h=o,Ro(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return xo(this,function(e){switch(e.label){case 0:return t=[Lo({},d)],f={},[4,il(d.body,h)];case 1:switch(l=Lo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=ol(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,qc(l)];case 3:return n=Lo.apply(void 0,[Lo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 4:return i=[{}],[4,Bc(l)];case 5:return n=Lo.apply(void 0,[Lo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 6:return o=[{}],[4,Vc(l)];case 7:return n=Lo.apply(void 0,[Lo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 8:return s=[{}],[4,zc(l)];case 9:return n=Lo.apply(void 0,[Lo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 10:return a=[{}],[4,Gc(l)];case 11:return n=Lo.apply(void 0,[Lo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 12:return u=[{}],[4,Kc(l)];case 13:return n=Lo.apply(void 0,[Lo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 14:return c=[{}],[4,Hc(l)];case 15:return n=Lo.apply(void 0,[Lo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Lo(Lo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:rl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:rl(i),__type:"PutEventsResponse",EventsResponse:void 0},[4,il(i.body,o)]);case 1:return r=e.sent(),n.EventsResponse={__type:"EventsResponse",Results:void 0!==(t=r).Results&&null!==t.Results?tl(t.Results):void 0},[2,Promise.resolve(n)]}var t,d,h})});var i,o},hl);function hl(e){var t=fl.call(this)||this;return t.input=e,t}var gl,vl=(ko(ml,gl=dn),ml.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Rc.filterSensitiveLog,outputFilterSensitiveLog:xc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},ml.prototype.serialize=function(e,t){return u=e,c=t,Ro(void 0,void 0,void 0,function(){var n,r,i,o,s,a;return xo(this,function(e){switch(e.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",mc(s)),void 0===u.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((s=u.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",mc(s)),void 0!==u.EndpointRequest&&(t=u.EndpointRequest,i=Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo(Lo({},void 0!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&{Attributes:Yc(t.Attributes)}),void 0!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&{Demographic:Dc(t.Demographic)}),void 0!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&{Location:Fc(t.Location)}),void 0!==t.Metrics&&{Metrics:$c(t.Metrics)}),void 0!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&{User:Wc(t.User)})),void 0===i&&(i={}),i=JSON.stringify(i),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Zs({protocol:s,hostname:o,port:a,method:"PUT",headers:n,path:r,body:i})]}var t})});var u,c},ml.prototype.deserialize=function(e,t){return i=e,o=t,Ro(void 0,void 0,void 0,function(){var n,r;return xo(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&400<=i.statusCode?[2,(d=i,h=o,Ro(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return xo(this,function(e){switch(e.label){case 0:return t=[Lo({},d)],f={},[4,il(d.body,h)];case 1:switch(l=Lo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=ol(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,qc(l)];case 3:return n=Lo.apply(void 0,[Lo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 4:return i=[{}],[4,Bc(l)];case 5:return n=Lo.apply(void 0,[Lo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 6:return o=[{}],[4,Vc(l)];case 7:return n=Lo.apply(void 0,[Lo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 8:return s=[{}],[4,zc(l)];case 9:return n=Lo.apply(void 0,[Lo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 10:return a=[{}],[4,Gc(l)];case 11:return n=Lo.apply(void 0,[Lo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 12:return u=[{}],[4,Kc(l)];case 13:return n=Lo.apply(void 0,[Lo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 14:return c=[{}],[4,Hc(l)];case 15:return n=Lo.apply(void 0,[Lo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:rl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Lo(Lo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:rl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:rl(i),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,il(i.body,o)]);case 1:return r=e.sent(),n.MessageBody={__type:"MessageBody",Message:void 0!==(t=r).Message&&null!==t.Message?t.Message:void 0,RequestID:void 0!==t.RequestID&&null!==t.RequestID?t.RequestID:void 0},[2,Promise.resolve(n)]}var t,d,h})});var i,o},ml);function ml(e){var t=gl.call(this)||this;return t.input=e,t}var yl={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new E.StorageHelper).getStorage()};function bl(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function Sl(){return(new Date).getTime()}function wl(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var Cl=new E.ConsoleLogger("StorageCache"),_l=(El.prototype.getModuleName=function(){return"Cache"},El.prototype.checkConfig=function(){wl(this.config.capacityInBytes)||(Cl.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=yl.capacityInBytes),wl(this.config.itemMaxSize)||(Cl.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=yl.itemMaxSize),wl(this.config.defaultTTL)||(Cl.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=yl.defaultTTL),wl(this.config.defaultPriority)||(Cl.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=yl.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Cl.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=yl.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Cl.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=yl.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Cl.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=yl.warningThreshold),5242880<this.config.capacityInBytes&&(Cl.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=yl.capacityInBytes)},El.prototype.fillCacheItem=function(e,t,n){return(t={key:e,data:t,timestamp:Sl(),visitedTime:Sl(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0}).byteSize=bl(JSON.stringify(t)),t.byteSize=bl(JSON.stringify(t)),t},El.prototype.configure=function(e){return e&&(e.keyPrefix&&Cl.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},El);function El(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var Al,Il,Qn=(Al=function(e,t){return(Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Al(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Pl=new E.ConsoleLogger("Cache");function Ol(e){var t=this,e=e?Object.assign({},yl,e):yl;return(t=Il.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Tl=(Qn(Ol,Il=_l),Ol.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Ol.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Ol.prototype._refreshItem=function(e,t){return e.visitedTime=Sl(),this.config.storage.setItem(t,JSON.stringify(e)),e},Ol.prototype._isExpired=function(e){return e=this.config.storage.getItem(e),e=JSON.parse(e),Sl()>=e.expires},Ol.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize,this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},Ol.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Pl.error("Failed to set item "+e)}},Ol.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes;return(e=(1-this.config.warningThreshold)*this.config.capacityInBytes)<t?t:e},Ol.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Ol.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Ol.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);null!=o&&(o=JSON.parse(o),n.push(o))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},Ol.prototype.setItem=function(e,t,n){Pl.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t)if((n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Sl()}).priority<1||5<n.priority)Pl.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,n);if(i.byteSize>this.config.itemMaxSize)Pl.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var o,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(i.byteSize)&&(o=this._findValidKeys(),this._isCacheFull(i.byteSize)&&(s=this._sizeToPop(i.byteSize),this._popOutItems(o,s))),this._setItem(r,i)}catch(e){Pl.warn("setItem failed! "+e)}}else Pl.warn("The value of item should not be undefined!");else Pl.warn("Invalid key: should not be empty or 'CurSize'")},Ol.prototype.getItem=function(e,t){Pl.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Pl.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}return t&&void 0!==t.callback?(null!==(i=t.callback())&&this.setItem(e,i,t),i):null}catch(e){return Pl.warn("getItem failed! "+e),null}},Ol.prototype.removeItem=function(e){Pl.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){Pl.warn("removeItem failed! "+e)}},Ol.prototype.clear=function(){Pl.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Pl.warn("clear failed! "+e)}},Ol.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Ol.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Ol.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==yl.keyPrefix||(Pl.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Sl.toString()),new Ol(e)},new Ol);E.Amplify.register(Tl);function kl(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Ll=new E.ConsoleLogger("EventsBuffer"),Rl=[429,500],xl=[202],Nl=(Ml.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return Ll.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},Ml.prototype.pause=function(){this._pause=!0},Ml.prototype.resume=function(){this._pause=!1},Ml.prototype.updateClient=function(e){this._client=e},Ml.prototype.flush=function(){this._flush=!0},Ml.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},Ml.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},Ml.prototype._putEvents=function(p){return e=this,u=function(){var t,n,r,i,o,s,a,u,c,e;return i=this,o=function(e){switch(e.label){case 0:t=this._bufferToMap(p),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new dl(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}},c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function l(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;c;)try{if(s=1,a&&(u=2&t[0]?a.return:t[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[2&t[0],u.value]),t[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=o.call(i,c)}catch(e){t=[6,e],a=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())});var e,s,a,u},Ml.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=(u=e.params).event,n=u.timestamp,r=u.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,e=t.session,u=r.appId,t=r.endpointId,r=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||u,r[t]||(r[t]={Endpoint:{},Events:{}}),r[t].Events[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:e}}),c},Ml.prototype._handlePutEventsFailure=function(e,t){Ll.debug("_putEvents Failed: ",e),e=e.$metadata&&e.$metadata.httpStatusCode,Rl.includes(e)&&(t=Object.values(t),this._retry(t))},Ml.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var s=(e=kl(e,2))[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=(o=kl(e,2))[0],n=o[1],r=n.StatusCode,i=n.Message,e=a[t],o={EventsResponse:{Results:((o={})[s]={EventsItemResponse:((n={})[t]={StatusCode:r,Message:i},n)},o)}};if(xl.includes(r))e.handlers.resolve(o);else{if(!Rl.includes(r))return r=e.params.event.name,Ll.error("event "+t+" : "+r+" failed with error: "+i),e.handlers.reject(o);u.push(e)}})}),u.length&&this._retry(u)},Ml.prototype._retry=function(e){var i=[];e.forEach(function(e){var t=e.params,n=(r=t.event).eventId,r=r.name;if(0<t.resendLimit--)return Ll.debug("resending event "+n+" : "+r+" with "+t.resendLimit+" retry attempts remaining"),void i.push(((t={})[n]=e,t));Ll.debug("no retry attempts remaining for event "+n+" : "+r)}),(e=this._buffer).unshift.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(kl(arguments[t]));return e}(i))},Ml.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=kl(Object.entries(t),1),n=(t=kl(n[0],2))[0],t=t[1];return e[n]=t,e},{})},Ml);function Ml(e,t){this._pause=!1,this._flush=!1,Ll.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function Ul(e,t){E.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Bl)}function Dl(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Fl(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function jl(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}var ql=function(){return(ql=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Bl="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Vl=new E.ConsoleLogger("AWSPinpointProvider"),zl=[429,500],Gl=[202],Kl="_update_endpoint",Hl="_session.stop",Wl="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,$l=(Jl.prototype.getCategory=function(){return Jl.category},Jl.prototype.getProviderName=function(){return Jl.providerName},Jl.prototype.configure=function(e){var t=this;return Vl.debug("configure Analytics",e),e=e||{},this._config=Object.assign({},this._config,e),this._config.appId&&!this._config.disabled?this._config.endpointId?Ul("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){Vl.debug("setting endpoint id from the cache",e),t._config.endpointId=e,Ul("pinpointProvider_configured",null)}).catch(function(e){Vl.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},Jl.prototype.record=function(n,r){return Dl(this,void 0,void 0,function(){var t;return Fl(this,function(e){switch(e.label){case 0:return Vl.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=g.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(Vl.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},Jl.prototype._sendEndpointUpdate=function(n){return Dl(this,void 0,void 0,function(){var t;return Fl(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},Jl.prototype._putToBuffer=function(e,t){e.event.name!==Kl?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},Jl.prototype._generateSession=function(e){this._sessionId=this._sessionId||g.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=g.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Hl:e=(new Date).getTime(),this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||g.v1(),t.session={Id:this._sessionId,Duration:e-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(e).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||g.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},Jl.prototype._send=function(t,n){return Dl(this,void 0,void 0,function(){return Fl(this,function(e){switch(t.event.name){case Kl:return[2,this._updateEndpoint({params:t,handlers:n})];case Hl:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},Jl.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}};return(r={Endpoint:{}}).Events=((c={})[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},Jl.prototype._pinpointPutEvents=function(o,s){return Dl(this,void 0,void 0,function(){var t,n,r,i;return Fl(this,function(e){switch(e.label){case 0:t=o.event.eventId,n=o.config.endpointId,r=this._generateBatchItemContext(o),r=new dl(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return i=e.sent(),r=i.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,Gl.includes(n)?(Vl.debug("record event success. ",i),[2,s.resolve(i)]):zl.includes(n)?(this._retry(o,s),[3,4]):(Vl.error("Event "+t+" is not accepted, the error is "+r),[2,s.reject(i)]);case 3:return i=e.sent(),this._eventError(i),[2,s.reject(i)];case 4:return[2]}})})},Jl.prototype._pinpointSendStopSession=function(e,t){if(Wl){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},i={url:i="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",body:o=JSON.stringify(o),method:"POST"},r={region:r,service:"mobiletargeting"},r=E.Signer.signUrl(i,n,r,null);return navigator.sendBeacon(r,o)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},Jl.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Vl.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Vl.debug("retry times used up for event "+e.eventName)},Jl.prototype._updateEndpoint=function(a){return Dl(this,void 0,void 0,function(){var t,n,r,i,o,s;return Fl(this,function(e){switch(e.label){case 0:s=a.params,t=a.handlers,n=s.config,i=s.event,r=n.appId,s=n.endpointId,i=this._endpointRequest(n,E.JS.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),s={ApplicationId:r,EndpointId:s,EndpointRequest:i},e.label=1;case 1:return e.trys.push([1,3,,4]),i=new vl(s),[4,this.pinpointClient.send(i)];case 2:return o=e.sent(),Vl.debug("updateEndpoint success",o),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(o),[2];case 3:return o=e.sent(),s={err:o,update_params:s,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},Jl.prototype._handleEndpointUpdateFailure=function(i){return Dl(this,void 0,void 0,function(){var t,n,r;return Fl(this,function(e){switch(t=i.err,n=i.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Vl.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(i)];case 403:return[2,this._handleEndpointUpdateForbidden(i)];default:if(zl.includes(r))return[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]})})},Jl.prototype._handleEndpointUpdateBadRequest=function(s){return Dl(this,void 0,void 0,function(){var t,n,r,i,o;return Fl(this,function(e){switch(e.label){case 0:if(t=s.err,o=s.update_params,n=s.endpointObject,r=t.message,i=o.ApplicationId,o=o.EndpointRequest,!String(r).startsWith("Exceeded maximum endpoint per user count"))return[2,n.handlers.reject(t)];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(i,o.User.UserId)];case 2:return e.sent(),Vl.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(n),[3,4];case 3:return o=e.sent(),Vl.warn("Failed to remove unused endpoints with error: "+o),Vl.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,n.handlers.reject(o)];case 4:return[2]}})})},Jl.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},Jl.prototype._retryEndpointUpdate=function(e,t){Vl.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Vl.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Vl.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Vl.error("Initial endpoint update failed. ")},Jl.prototype._removeUnusedEndpoints=function(l,p){return Dl(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return Fl(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),t=new ll({ApplicationId:l,UserId:p}),[4,this.pinpointClient.send(t)];case 1:for(a=e.sent(),n=a.EndpointsResponse.Item,Vl.debug("get endpoints associated with the userId: "+p+" with data",n),r=n[0],i=1;i<n.length&&(o=Date.parse(r.EffectiveDate),s=Date.parse(n[i].EffectiveDate),!isNaN(o));i++){if(isNaN(s)){r=n[i];break}s<o&&(r=n[i])}a={ApplicationId:l,EndpointId:r.Id,EndpointRequest:{User:{UserId:""}}},e.label=2;case 2:return e.trys.push([2,4,,5]),u=new vl(a),[4,this.pinpointClient.send(u)];case 3:return u=e.sent(),Vl.debug("The old endpoint is updated with an empty string for user id"),[2,u];case 4:throw c=e.sent(),Vl.debug("Failed to update the endpoint",c),c;case 5:return[3,7];case 6:throw c=e.sent(),Vl.debug("Failed to get endpoints associated with the userId: "+p+" with error",c),c;case 7:return[2]}})})},Jl.prototype._initClients=function(r){return Dl(this,void 0,void 0,function(){var t,n;return Fl(this,function(e){return Vl.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Vl.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Vl.debug("init clients with credentials",r),this.pinpointClient=new Mc({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},Jl.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Nl},Jl.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Nl(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},Jl.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},Jl.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},Jl.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},Jl.prototype._customizePinpointClientReq=function(){},Jl.prototype._getEndpointId=function(n){return Dl(this,void 0,void 0,function(){var t;return Fl(this,function(e){switch(e.label){case 0:return[4,Tl.getItem(n)];case 1:return t=e.sent(),Vl.debug("endpointId from cache",t,"type",typeof t),t||(t=g.v1(),Tl.setItem(n,t)),[2,t]}})})},Jl.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},i=jl(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=((t=ql(ql(ql({channelType:r,requestId:g.v1(),effectiveDate:(new Date).toISOString()},o),t),{attributes:ql(ql({},o.attributes),t.attributes),demographic:ql(ql(ql(ql({},e),i),o.demographic),t.demographic),location:ql(ql({},o.location),t.location),metrics:ql(ql({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:ql(ql({},o.userAttributes),t.userAttributes)}})).userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,jl(t,["userId","userAttributes","name","session","eventId","immediate"]));return E.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},Jl.prototype._eventError=function(e){Vl.error("record event failed.",e),Vl.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},Jl.prototype._getCredentials=function(){return Dl(this,void 0,void 0,function(){var t;return Fl(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E.Credentials.get()];case 1:return(t=e.sent())?(Vl.debug("set credentials for analytics",t),[2,E.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),Vl.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},Jl.category="Analytics",Jl.providerName="AWSPinpoint",Jl);function Jl(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=E.ClientDevice.clientInfo()}function Yl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(arguments[t]));return e}var Zl=[],Xl=(Ql.add=function(e,t,n){ep(e,t).set(n)},Ql.remove=function(e,t){ep(e,t).remove()},Ql.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,Yl(e)))}},Ql.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Ql);function Ql(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function ep(t,n){var e=Zl.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Xl(t,n),Zl.push(e)),e}function tp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function np(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var rp=new E.ConsoleLogger("PageViewTracker"),ip="aws-amplify-analytics-prevUrl",op={enable:!1,provider:"AWSPinpoint",getUrl:function(){return E.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},br=(sp.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},sp.prototype._isSameUrl=function(){return sessionStorage.getItem(ip)===this._config.getUrl()&&(rp.debug("the url is same"),!0)},sp.prototype._pageViewTrackDefault=function(){return tp(this,void 0,void 0,function(){var t,n;return np(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(rp.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){rp.debug("Failed to record the page view event",e)}),sessionStorage.setItem(ip,t)),[2]}})})},sp.prototype._trackFunc=function(){return tp(this,void 0,void 0,function(){var t,n;return np(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(rp.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){rp.debug("Failed to record the page view event",e)}),sessionStorage.setItem(ip,t)),[2]}})})},sp.prototype._pageViewTrackSPA=function(){E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Xl.add(history,"pushState",this._trackFunc),Xl.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Xl.remove(history,"pushState"),Xl.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):rp.debug("not in the supported web enviroment")},sp);function sp(e,t){rp.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},op,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var ap=(Yn=E.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null)?Yn.matches||Yn.matchesSelector||Yn.webkitMatchesSelector||Yn.mozMatchesSelector||Yn.msMatchesSelector||Yn.oMatchesSelector:null;function up(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||cp(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||cp(e,n))return 1}}function cp(e,t){if("string"!=typeof t)return!1;if(ap)return ap.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),i=0;n=r[i];i++)if(n===e)return!0;return!1}function lp(e,t,o,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),i=0;n=r[i];i++)1===n.nodeType&&up(n,o)&&(t=n);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,i=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),o=0;r=i[o];o++)if(up(r,e))return r}(e.target,o,!0);t&&s.call(t,e,t)}return void 0===a&&(a={}),e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var pp=new E.ConsoleLogger("EventTracker"),fp={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},p=(dp.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=lp(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},dp.prototype._trackFunc=function(d,h){return e=this,u=function(){var t,n,r,i,o,s,a,u,c,l,p,e;return s=this,a=function(e){switch(e.label){case 0:return t={},n=h.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=h.getAttribute(this._config.selectorPrefix+"name"),(i=h.getAttribute(this._config.selectorPrefix+"attrs"))&&i.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/),t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return o=e.sent(),[3,3];case 2:o=this._config.attributes,e.label=3;case 3:return o=Object.assign({type:d.type,target:d.target.localName+" with id "+d.target.id},o,t),pp.debug("events needed to be recorded",n),pp.debug("attributes needed to be attached",t),n.indexOf(d.type)<0?pp.debug("event "+d.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:o},this._config.provider).catch(function(e){pp.debug("Failed to record the "+d.type+" event', "+e)}),[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function f(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=a.call(s,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())});var e,s,a,u},dp);function dp(e,t){E.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},fp,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),pp.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):pp.debug("not in the supported web environment")}function hp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function gp(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var vp=new E.ConsoleLogger("SessionTracker"),mp={enable:!1,provider:"AWSPinpoint"},yp=!1,dr=(bp.prototype._envCheck=function(){if(!E.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return vp.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return vp.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},bp.prototype._trackFunc=function(){return hp(this,void 0,void 0,function(){var t;return gp(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){vp.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){vp.debug("record session start event failed.",e)}),[2]}})})},bp.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e),t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){vp.debug("record session stop event failed.",e)})})},bp.prototype._sendInitialEvent=function(){return hp(this,void 0,void 0,function(){var t;return gp(this,function(e){switch(e.label){case 0:return yp?(vp.debug("the start session has been sent when the page is loaded"),[2]):(yp=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){vp.debug("record session start event failed.",e)}),[2]}})})},bp.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},bp);function bp(e,t){this._config=Object.assign({},mp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function Sp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function wp(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Cp=function(){return(Cp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_p=new E.ConsoleLogger("AnalyticsClass"),Ep="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ap={pageView:br,event:p,session:dr},Ip=null,pi=(Pp.prototype.getModuleName=function(){return"Analytics"},Pp.prototype.configure=function(e){var n=this;if(!e)return this._config;_p.debug("configure Analytics",e);var t=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(Cp({disabled:n._config.disabled},t))}),0===this._pluggables.length&&this.addPluggable(new $l),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),E.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Ep),_p.debug("current configuration",this._config),this._config},Pp.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=Cp({disabled:this._config.disabled},t);return e.configure(t),t}},Pp.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return _p.debug("No plugin found with providerName",e),null},Pp.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void _p.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},Pp.prototype.disable=function(){this._disabled=!0},Pp.prototype.enable=function(){this._disabled=!1},Pp.prototype.startSession=function(n){return Sp(this,void 0,void 0,function(){var t;return wp(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},Pp.prototype.stopSession=function(n){return Sp(this,void 0,void 0,function(){var t;return wp(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},Pp.prototype.record=function(n,r,i){return Sp(this,void 0,void 0,function(){var t;return wp(this,function(e){return t="string"==typeof n?{event:{name:n,attributes:r,metrics:i},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},Pp.prototype.updateEndpoint=function(n,r){return Sp(this,void 0,void 0,function(){var t;return wp(this,function(e){return t=Cp(Cp({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},Pp.prototype._sendEvent=function(r){var e=this;if(this._disabled)return _p.debug("Analytics has been disabled"),Promise.resolve();var i=r.provider?r.provider:"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===i&&e.record(r,{resolve:t,reject:n})})})},Pp.prototype.autoTrack=function(e,t){var n;Ap[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new Ap[e](this.record,t)):_p.debug("invalid tracker type")},Pp);function Pp(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(Ip=this).record=this.record.bind(this),E.Hub.listen("auth",Lp),E.Hub.listen("storage",Lp),E.Hub.listen("analytics",Lp)}var Op=!1,Tp=!1,kp=!1,Lp=function(e){var t=e.channel,e=e.payload;switch(_p.debug("on hub capsule "+t,e),t){case"auth":xp(e);break;case"storage":Rp(e);break;case"analytics":Np(e)}},Rp=function(e){var e=(t=e.data).attrs,t=t.metrics;e&&kp&&Ip.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){_p.debug("Failed to send the storage event automatically",e)})},xp=function(e){var t=e.event;if(t)switch(e=function(n){return Sp(void 0,void 0,void 0,function(){var t;return wp(this,function(e){switch(e.label){case 0:if(!Tp||!kp)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Ip.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),_p.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})},t){case"signIn":return e("sign_in");case"signUp":return e("sign_up");case"signOut":return e("sign_out");case"signIn_failure":return e("auth_fail");case"configured":Tp=!0,kp&&Mp()}},Np=function(e){(e=e.event)&&"pinpointProvider_configured"===e&&(kp=!0,Tp&&kp&&Mp())},Mp=function(){var e=Ip.configure();!Op&&e.autoSessionRecord&&(Ip.updateEndpoint({immediate:!0}).catch(function(e){_p.debug("Failed to update the endpoint",e)}),Op=!0),Ip.autoTrack("session",{enable:e.autoSessionRecord})},Up=new pi;E.Amplify.register(Up);var Dp=(Fp.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&jp(t),new Fp(t)},Fp.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&jp(e),parseInt(Ju(e),16)*(t?-1:1)},Fp.prototype.toString=function(){return String(this.valueOf())},Fp);function Fp(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function jp(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var qp=(Bp.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=H(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var f=H(o),d=f.next();!d.done;d=f.next()){var h=d.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return l},Bp.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":return(n=new Uint8Array(9))[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":return r=this.fromUtf8(e.value),(i=new DataView(new ArrayBuffer(3+r.byteLength))).setUint8(0,7),i.setUint16(1,r.byteLength,!1),(i=new Uint8Array(i.buffer)).set(r,3),i;case"timestamp":var o=new Uint8Array(9);return o[0]=8,o.set(Dp.fromNumber(e.value.valueOf()).bytes,1),o;case"uuid":if(!Zp.test(e.value))throw new Error("Invalid UUID received: "+e.value);return(o=new Uint8Array(17))[0]=9,o.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Hu))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Hu[r]}return t}(e.value.replace(/\-/g,"")),1),o}},Bp.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:Vp,value:!0};break;case 1:t[i]={type:Vp,value:!1};break;case 2:t[i]={type:zp,value:e.getInt8(n++)};break;case 3:t[i]={type:Gp,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:Kp,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:Hp,value:new Dp(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:r=e.getUint16(n,!1),n+=2,t[i]={type:Wp,value:new Uint8Array(e.buffer,e.byteOffset+n,r)},n+=r;break;case 7:var o=e.getUint16(n,!1);n+=2,t[i]={type:$p,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o))},n+=o;break;case 8:t[i]={type:Jp,value:new Date(new Dp(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:o=new Uint8Array(e.buffer,e.byteOffset+n,16),n+=16,t[i]={type:Yp,value:Ju(o.subarray(0,4))+"-"+Ju(o.subarray(4,6))+"-"+Ju(o.subarray(6,8))+"-"+Ju(o.subarray(8,10))+"-"+Ju(o.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},Bp);function Bp(e,t){this.toUtf8=e,this.fromUtf8=t}(yt={})[yt.boolTrue=0]="boolTrue",yt[yt.boolFalse=1]="boolFalse",yt[yt.byte=2]="byte",yt[yt.short=3]="short",yt[yt.integer=4]="integer",yt[yt.long=5]="long",yt[yt.byteArray=6]="byteArray",yt[yt.string=7]="string",yt[yt.timestamp=8]="timestamp",yt[yt.uuid=9]="uuid";var Vp="boolean",zp="byte",Gp="short",Kp="integer",Hp="long",Wp="binary",$p="string",Jp="timestamp",Yp="uuid",Zp=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Xp=(Qp.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),e=new DataView(o.buffer,o.byteOffset,o.byteLength),t=new l.Crc32;return e.setUint32(0,i,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),e.setUint32(i-4,t.update(o.subarray(8,i-4)).digest(),!1),o},Qp.prototype.unmarshall=function(e){var e=(t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var o=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new l.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,o),body:new Uint8Array(r,n+8+4+o,i-o-16)}}(e)).headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Qp.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Qp);function Qp(e,t){this.headerMarshaller=new qp(e,t)}var ef=(tf.prototype.deserialize=function(e,t){var s,a,u,c,l,n,p=e=(s=e,u=a=0,l=c=null,(n={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:t=s[Symbol.asyncIterator](),e.label=1;case 1:return[4,J(t.next())];case 2:return i=e.sent(),n=i.value,i.done?a?[3,4]:[4,J(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return a!==u?[3,7]:[4,J(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,J(void 0)];case 9:return[2,e.sent()];case 10:o=n.length,r=0,e.label=11;case 11:if(!(r<o))return[3,15];if(!c){if(i=o-r,l=l||new Uint8Array(4),i=Math.min(4-u,i),l.set(n.slice(r,r+i),u),r+=i,(u+=i)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);a=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return o=Math.min(a-u,o-r),c.set(n.slice(r,r+o),u),u+=o,r+=o,a&&a===u?[4,J(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=a=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n),f={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder};return(t={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,J(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(s=n.value,r=f.eventMarshaller.unmarshall(s),"error"!==(i=r.headers[":message-type"].value))return[3,3];throw(s=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,s;case 3:return"exception"!==i?[3,5]:(o=r.headers[":exception-type"].value,(a={})[o]=r,[4,J(f.deserializer(a))]);case 4:if((s=e.sent()).$unknown)throw(a=new Error(f.toUtf8(r.body))).name=o,a;throw s[o];case 5:return"event"!==i?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,J(f.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,J(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c={error:c=e.sent()},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,J(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},tf.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(s),e.label=1;case 1:return[4,J(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,J(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i={error:i=e.sent()},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(o=t.return)?[4,J(o.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[4,J(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},tf);function tf(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Xp(t,e),this.utfEncoder=t}var nf,rf,of=(sf.prototype.deserialize=function(e,t){return e="function"==typeof e[Symbol.asyncIterator]?e:function(o){return Y(this,arguments,function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,o.on("error",function(e){if(t=t||!0,e)throw e}),o.on("data",function(e){r.push(e)}),o.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,J(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(i=e.sent())?[4,J(i)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e),this.universalMarshaller.deserialize(e,t)},sf.prototype.serialize=function(e,t){if(t=this.universalMarshaller.serialize(e,t),"function"==typeof u.Readable.from)return u.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new u.Readable({autoDestroy:!0,objectMode:!0,read:function(){return G(this,void 0,void 0,function(){var n=this;return K(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},sf);function sf(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Xp(t,e),this.universalMarshaller=new ef({utf8Decoder:e,utf8Encoder:t})}function af(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function uf(e){return void 0!==e.redirectSignIn}(gn=nf=nf||{}).Cognito="COGNITO",gn.Google="Google",gn.Facebook="Facebook",gn.Amazon="LoginWithAmazon",gn.Apple="SignInWithApple",(_w=rf=rf||{}).NoConfig="noConfig",_w.MissingAuthConfig="missingAuthConfig",_w.EmptyUsername="emptyUsername",_w.InvalidUsername="invalidUsername",_w.EmptyPassword="emptyPassword",_w.EmptyCode="emptyCode",_w.SignUpError="signUpError",_w.NoMFA="noMFA",_w.InvalidMFA="invalidMFA",_w.EmptyChallengeResponse="emptyChallengeResponse",_w.NoUserSession="noUserSession",_w.Default="default";var cf,lf=((cf=pf.prototype).getUsername=function(){return this.username},cf.getPassword=function(){return this.password},cf.getValidationData=function(){return this.validationData},cf.getAuthParameters=function(){return this.authParameters},cf.getClientMetadata=function(){return this.clientMetadata},pf);function pf(e){var t=(i=e||{}).ValidationData,n=i.Username,r=i.Password,e=i.AuthParameters,i=i.ClientMetadata;this.validationData=t||{},this.authParameters=e||{},this.clientMetadata=i||{},this.username=n,this.password=r}function ff(e,t){null!=e&&this.fromString(e,t)}function df(){return new ff(null)}hn=(m="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(ff.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;0<=--o;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},30):m&&"Netscape"!=navigator.appName?(ff.prototype.am=function(e,t,n,r,i,o){for(;0<=--o;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(ff.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;0<=--o;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},28),ff.prototype.DB=hn,ff.prototype.DM=(1<<hn)-1,ff.prototype.DV=1<<hn,ff.prototype.FV=Math.pow(2,52),ff.prototype.F1=52-hn,ff.prototype.F2=2*hn-52;for(var hf=new Array,gf="0".charCodeAt(0),vf=0;vf<=9;++vf)hf[gf++]=vf;for(gf="a".charCodeAt(0),vf=10;vf<36;++vf)hf[gf++]=vf;for(gf="A".charCodeAt(0),vf=10;vf<36;++vf)hf[gf++]=vf;function mf(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function yf(e){var t=df();return t.fromInt(e),t}function bf(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Sf(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function wf(e){return f.Buffer.from(S.lib.WordArray.random(e).toString(),"hex")}Sf.prototype.convert=function(e){var t=df();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(ff.ZERO)&&this.m.subTo(t,t),t},Sf.prototype.revert=function(e){var t=df();return e.copyTo(t),this.reduce(t),t},Sf.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},Sf.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Sf.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},ff.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},ff.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},ff.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var s=(s=r,null==(s=hf[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&ff.ZERO.subTo(this,this)},ff.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},ff.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},ff.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},ff.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},ff.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},ff.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},ff.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&ff.ZERO.subTo(t,t)},ff.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},ff.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){if((c=this.abs()).t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=df());var i=df(),o=this.s,s=e.s;0<(e=this.DB-bf(r[r.t-1]))?(r.lShiftTo(e,i),c.lShiftTo(e,n)):(r.copyTo(i),c.copyTo(n));var a=i.t,u=i[a-1];if(0!=u){var c=u*(1<<this.F1)+(1<a?i[a-2]>>this.F2:0),l=this.FV/c,p=(1<<this.F1)/c,f=1<<this.F2,d=n.t,h=d-a,g=null==t?df():t;for(i.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),ff.ONE.dlShiftTo(a,g),g.subTo(i,i);i.t<a;)i[i.t++]=0;for(;0<=--h;){var v=n[--d]==u?this.DM:Math.floor(n[d]*l+(n[d-1]+f)*p);if((n[d]+=i.am(0,v,n,h,0,a))<v)for(i.dlShiftTo(h,g),n.subTo(g,n);n[d]<--v;)n.subTo(g,n)}null!=t&&(n.drShiftTo(a,t),o!=s&&ff.ZERO.subTo(t,t)),n.t=a,n.clamp(),0<e&&n.rShiftTo(e,n),o<0&&ff.ZERO.subTo(n,n)}}},ff.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},ff.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},ff.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(i=!0,o=mf(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),0<n&&(i=!0),i&&(o+=mf(n));return i?o:"0"},ff.prototype.negate=function(){var e=df();return ff.ZERO.subTo(this,e),e},ff.prototype.abs=function(){return this.s<0?this.negate():this},ff.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},ff.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+bf(this[this.t-1]^this.s&this.DM)},ff.prototype.mod=function(e){var t=df();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(ff.ZERO)&&e.subTo(t,t),t},ff.prototype.equals=function(e){return 0==this.compareTo(e)},ff.prototype.add=function(e){var t=df();return this.addTo(e,t),t},ff.prototype.subtract=function(e){var t=df();return this.subTo(e,t),t},ff.prototype.multiply=function(e){var t=df();return this.multiplyTo(e,t),t},ff.prototype.divide=function(e){var t=df();return this.divRemTo(e,t,null),t},ff.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=yf(1),s=new Sf(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=df();for(s.sqrTo(a[1],p);u<=l;)a[u]=df(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var f,d,h=e.t-1,g=!0,v=df(),i=bf(e[h])-1;0<=h;){for(c<=i?f=e[h]>>i-c&l:(f=(e[h]&(1<<i+1)-1)<<c-i,0<h&&(f|=e[h-1]>>this.DB+i-c)),u=r;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--h),g)a[f].copyTo(o),g=!1;else{for(;1<u;)s.sqrTo(o,v),s.sqrTo(v,o),u-=2;0<u?s.sqrTo(o,v):(d=o,o=v,v=d),s.mulTo(v,a[f],o)}for(;0<=h&&0==(e[h]&1<<i);)s.sqrTo(o,v),d=o,o=v,v=d,--i<0&&(i=this.DB-1,--h)}return n(null,t=s.revert(o)),t},ff.ZERO=yf(0),ff.ONE=yf(1);var Cf,_f,Ef=((_f=If.prototype).getSmallAValue=function(){return this.smallAValue},_f.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},_f.generateRandomSmallA=function(){return new ff(wf(128).toString("hex"),16).mod(this.N)},_f.generateRandomString=function(){return wf(40).toString("base64")},_f.getRandomPassword=function(){return this.randomPassword},_f.getSaltDevices=function(){return this.SaltToHashDevices},_f.getVerifierDevices=function(){return this.verifierDevices},_f.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString(),e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=wf(16).toString("hex"),this.SaltToHashDevices=this.padHex(new ff(e,16)),this.g.modPow(new ff(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},_f.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(ff.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},_f.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new ff(this.UHexHash,16)},_f.hash=function(e){return e=e instanceof f.Buffer?S.lib.WordArray.create(e):e,e=_(e).toString(),new Array(64-e.length).join("0")+e},_f.hexHash=function(e){return this.hash(f.Buffer.from(e,"hex"))},_f.computehkdf=function(e,t){var n=S.lib.WordArray.create(f.Buffer.concat([this.infoBits,f.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof f.Buffer?S.lib.WordArray.create(e):e,t=t instanceof f.Buffer?S.lib.WordArray.create(t):t,t=A(e,t),t=A(n,t);return f.Buffer.from(t.toString(),"hex").slice(0,16)},_f.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(ff.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(ff.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new ff(this.hexHash(this.padHex(r)+t),16),this.calculateS(t,n,function(e,t){e&&i(e,null),t=o.computehkdf(f.Buffer.from(o.padHex(t),"hex"),f.Buffer.from(o.padHex(o.UValue.toString(16)),"hex")),i(null,t)})},_f.calculateS=function(n,r,i){var o=this;this.g.modPow(n,this.N,function(e,t){e&&i(e,null),r.subtract(o.k.multiply(t)).modPow(o.smallAValue.add(o.UValue.multiply(n)),o.N,function(e,t){e&&i(e,null),i(null,t.mod(o.N))})})},_f.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},_f.padHex=function(e){return(e=e.toString(16)).length%2==1?e="0"+e:-1!=="89ABCDEFabcdef".indexOf(e[0])&&(e="00"+e),e},If),vn=((Cf=Af.prototype).getJwtToken=function(){return this.jwtToken},Cf.getExpiration=function(){return this.payload.exp},Cf.getIssuedAt=function(){return this.payload.iat},Cf.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(f.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},Af);function Af(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function If(e){this.N=new ff("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new ff("2",16),this.k=new ff(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=f.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var Pf,Of,Tf,kf=(Tf=Pf=vn,(Of=Lf).prototype=Object.create(Tf.prototype),(Of.prototype.constructor=Of).__proto__=Tf,Lf);function Lf(e){return e=(void 0===e?{}:e).AccessToken,Pf.call(this,e||"")||this}var Rf,xf,Nf,Mf,Uf,Df,Ff=(Df=Mf=vn,(Uf=rd).prototype=Object.create(Df.prototype),(Uf.prototype.constructor=Uf).__proto__=Df,rd),jf=(nd.prototype.getToken=function(){return this.token},nd),qf=((Nf=td.prototype).getIdToken=function(){return this.idToken},Nf.getRefreshToken=function(){return this.refreshToken},Nf.getAccessToken=function(){return this.accessToken},Nf.getClockDrift=function(){return this.clockDrift},Nf.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},Nf.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},td),Bf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vf=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zf=(ed.prototype.getNowString=function(){var e=new Date,t=Vf[e.getUTCDay()],n=Bf[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},ed),Gf=((xf=Qf.prototype).getValue=function(){return this.Value},xf.setValue=function(e){return this.Value=e,this},xf.getName=function(){return this.Name},xf.setName=function(e){return this.Name=e,this},xf.toString=function(){return JSON.stringify(this)},xf.toJSON=function(){return{Name:this.Name,Value:this.Value}},Qf),Kf={},Hf=(Xf.setItem=function(e,t){return Kf[e]=t,Kf[e]},Xf.getItem=function(e){return Object.prototype.hasOwnProperty.call(Kf,e)?Kf[e]:void 0},Xf.removeItem=function(e){return delete Kf[e]},Xf.clear=function(){return Kf={}},Xf),Wf=(Zf.prototype.getStorage=function(){return this.storageWindow},Zf),$f="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Jf=((Rf=Yf.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},Rf.getSignInUserSession=function(){return this.signInUserSession},Rf.getUsername=function(){return this.username},Rf.getAuthenticationFlowType=function(){return this.authenticationFlowType},Rf.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},Rf.initiateAuth=function(e,r){var i=this,t=e.getAuthParameters();t.USERNAME=this.username,e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,r.customChallenge(e)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})},Rf.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},Rf.authenticateUserDefaultAuth=function(n,a){var o,u,c=this,l=new Ef(this.pool.getUserPoolId().split("_")[1]),p=new zf,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var i=r.ChallengeParameters;c.username=i.USER_ID_FOR_SRP,o=new ff(i.SRP_B,16),u=new ff(i.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),o,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=S.lib.WordArray.create(f.Buffer.concat([f.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),f.Buffer.from(c.username,"utf8"),f.Buffer.from(i.SECRET_BLOCK,"base64"),f.Buffer.from(n,"utf8")])),t=S.lib.WordArray.create(t),t=I.stringify(A(e,t)),o={};o.USERNAME=c.username,o.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,o.TIMESTAMP=n,o.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(o.DEVICE_KEY=c.deviceKey),n=function n(r,i){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(o.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,i)):i(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:o,Session:r.Session,ClientMetadata:s},c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},Rf.authenticateUserPlainUsernamePassword=function(e,n){var r,i=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new Ef(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},Rf.authenticateUserInternal=function(n,t,r){var i=this,e=n.ChallengeName,o=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,o);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,o);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,o);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,o);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:f.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:f.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),void i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:$f},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))}))})}else this.getDeviceResponse(r)},Rf.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new Ef(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username,r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},Rf.getDeviceResponse=function(o,n){var s=this,a=new Ef(this.deviceGroupKey),u=new zf,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&o.onFailure(e),r.SRP_A=t.toString(16),t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return o.onFailure(e);var i=r.ChallengeParameters,t=new ff(i.SRP_B,16),e=new ff(i.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return o.onFailure(e);var n=u.getNowString(),e=S.lib.WordArray.create(f.Buffer.concat([f.Buffer.from(s.deviceGroupKey,"utf8"),f.Buffer.from(s.deviceKey,"utf8"),f.Buffer.from(i.SECRET_BLOCK,"base64"),f.Buffer.from(n,"utf8")])),t=S.lib.WordArray.create(t),e=I.stringify(A(e,t));(t={}).USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey,t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?o.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),o.onSuccess(s.signInUserSession))})})})})},Rf.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},Rf.sendCustomChallengeAnswer=function(e,n,t){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new Ef(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey),t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})},Rf.sendMFACode=function(e,r,t,n){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e,"SOFTWARE_TOKEN_MFA"===(t=t||"SMS_MFA")&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey),n={ChallengeName:t,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n},this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(i.signInUserSession);var t=new Ef(i.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:f.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:f.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),void i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:$f},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))}))})}else i.getDeviceResponse(r)})},Rf.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},Rf.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Rf.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},Rf.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Rf.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},Rf.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},Rf.getUserAttributes=function(o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return o(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var i={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new Gf(i);n.push(i)}return o(null,n)})},Rf.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},Rf.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},Rf.refreshSessionIfPossible=function(){var n=this;return new Promise(function(e){var t=n.signInUserSession.getRefreshToken();t&&t.getToken()?n.refreshSession(t,e):e()})},Rf.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(e))this.fetchUserData().then(function(e){return n.refreshSessionIfPossible().then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(r))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},Rf.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},Rf.isFetchUserDataAndTokenRequired=function(e){return void 0!==(e=(e||{}).bypassCache)&&e},Rf.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},Rf.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Rf.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},Rf.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t=(i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".idToken",n=i+".accessToken",r=i+".refreshToken",i=i+".clockDrift";if(this.storage.getItem(t)){if(t=new Ff({IdToken:this.storage.getItem(t)}),n=new kf({AccessToken:this.storage.getItem(n)}),r=new jf({RefreshToken:this.storage.getItem(r)}),i=parseInt(this.storage.getItem(i),0)||0,(i=new qf({IdToken:t,AccessToken:n,RefreshToken:r,ClockDrift:i})).isValid())return this.signInUserSession=i,e(null,this.signInUserSession);if(!r.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(r,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},Rf.refreshSession=function(n,r,e){var i=this,t={};t.REFRESH_TOKEN=n.getToken();var o="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=o+".LastAuthUser";this.storage.getItem(s)&&(this.username=this.storage.getItem(s),o=o+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(o),t.DEVICE_KEY=this.deviceKey),e={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){return e?("NotAuthorizedException"===e.code&&i.clearCachedUser(),r(e,null)):t?(t=t.AuthenticationResult,Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),i.signInUserSession=i.getCognitoUserSession(t),i.cacheTokens(),r(null,i.signInUserSession)):void 0})},Rf.cacheTokens=function(){var e=(i="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=i+"."+this.username+".accessToken",n=i+"."+this.username+".refreshToken",r=i+"."+this.username+".clockDrift",i=i+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(r,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},Rf.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},Rf.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},Rf.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},Rf.cacheDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.setItem(e,this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},Rf.getCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(t),this.deviceGroupKey=this.storage.getItem(n))},Rf.clearCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n)},Rf.clearCachedTokens=function(){var e=(i="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=i+"."+this.username+".accessToken",n=i+"."+this.username+".refreshToken",r=i+".LastAuthUser",i=i+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i)},Rf.getCognitoUserSession=function(e){var t=new Ff(e),n=new kf(e),e=new jf(e);return new qf({IdToken:t,AccessToken:n,RefreshToken:e})},Rf.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},Rf.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},Rf.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},Rf.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},Rf.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Rf.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Rf.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},Rf.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Rf.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Rf.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e},t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Rf.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},Rf.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},Rf.sendMFASelectionAnswer=function(n,r){var i=this,e={};e.USERNAME=this.username,e.ANSWER=n,e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(i.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},Rf.getUserContextData=function(){return this.pool.getUserContextData(this.username)},Rf.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},Rf.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,(t={}).USERNAME=r.username,t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session},r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),void r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))})},Yf);function Yf(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Wf).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}function Zf(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Hf}}function Xf(){}function Qf(e){var e=(t=void 0===e?{}:e).Name,t=t.Value;this.Name=e||"",this.Value=t||""}function ed(){}function td(e){var t=(r=void 0===e?{}:e).IdToken,n=r.RefreshToken,e=r.AccessToken,r=r.ClockDrift;if(null==e||null==t)throw new Error("Id token and Access Token must be present.");this.idToken=t,this.refreshToken=n,this.accessToken=e,this.clockDrift=void 0===r?this.calculateClockDrift():r}function nd(e){e=(void 0===e?{}:e).RefreshToken,this.token=e||""}function rd(e){return e=(void 0===e?{}:e).IdToken,Mf.call(this,e||"")||this}function id(){}function od(e){var n="function"==typeof Map?new Map:void 0;return(od=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return sd(e,arguments,ud(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),ad(t,e)})(e)}function sd(e,t,n){return(sd=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&ad(r,n.prototype),r}).apply(null,arguments)}function ad(e,t){return(ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ud(e){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cd(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function ld(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Ad)}id.prototype.userAgent="aws-amplify/0.1.x js";function pd(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function fd(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function dd(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var hd,gd,vd,md,yd,bd,Sd=(md=od(Error),bd=md,(yd=Ld).prototype=Object.create(bd.prototype),(yd.prototype.constructor=yd).__proto__=bd,Ld),wd=((vd=kd.prototype).promisifyRequest=function(e,t){var i=this;return new Promise(function(n,r){i.request(e,t,function(e,t){e?r(new Sd(e.message,e.code,e.name,e.statusCode)):n(t)})})},vd.request=function(e,t,r){var i,e={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":id.prototype.userAgent},t=Object.assign({},this.fetchOptions,{headers:e,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return r(e)}).catch(function(e){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return r(t)}return r(e)}try{var n={code:n=i.headers.get("x-amzn-errortype").split(":")[0],name:n,statusCode:i.status,message:i.status?i.status.toString():null};return r(n)}catch(t){return r(e)}})},kd),Cd=((gd=Td.prototype).getUserPoolId=function(){return this.userPoolId},gd.getClientId=function(){return this.clientId},gd.signUp=function(n,e,t,r,i,o){var s=this,o={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:o};this.getUserContextData(n)&&(o.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",o,function(e,t){return e?i(e,null):(e={Username:n,Pool:s,Storage:s.storage},t={user:new Jf(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails},i(null,t))})},gd.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser";return(e=this.storage.getItem(e))?(e={Username:e,Pool:this,Storage:this.storage},new Jf(e)):null},gd.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;return this.advancedSecurityDataCollectionFlag&&(e=t.getData(e,this.userPoolId,this.clientId))?{EncodedData:e}:{}}},Td),_d=((hd=Od.prototype).setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),O.set(e,t,n),O.get(e)},hd.getItem=function(e){return O.get(e)},hd.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),O.remove(e,t)},hd.clear=function(){for(var e=O.get(),t=0;t<e.length;++t)O.remove(e[t]);return{}},Od),Ed=function(){return(Ed=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ad="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Id=new E.ConsoleLogger("OAuth"),Pd=(Rd.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},Rd.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=nf.Cognito);var s=this._generateState(32),a=o?s+"-"+E.urlSafeEncode(o):s;o=a,window.sessionStorage.setItem("oauth_state",o),o=s=this._generateRandom(128),window.sessionStorage.setItem("ouath_pkce_key",o),o=this._generateChallenge(s),s=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Ed(Ed({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:s,state:a},"code"===e?{code_challenge:o}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var e=(t=dd(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),Id.debug("Redirecting to "+e),this._urlOpener(e,n)},Rd.prototype._handleCodeFlow=function(a){return pd(this,void 0,void 0,function(){var n,r,i,o,s;return fd(this,function(e){switch(e.label){case 0:return(n=(w.parse(a).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=dd(t,2))[0],n=n[1];return Ed(Ed({},e),((e={})[t]=n,e))},{code:void 0}).code)?(ld("codeFlow",{},"Retrieving tokens from "+(i="https://"+this._config.domain+"/oauth2/token")),r=uf(this._config)?this._cognitoClientId:this._config.clientID,o=uf(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),r=Ed({grant_type:"authorization_code",code:n,client_id:r,redirect_uri:o},(s=t)?{code_verifier:s}:{}),Id.debug("Calling token endpoint: "+i+" with",r),o=Object.entries(r).map(function(e){var e=(t=dd(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o})]):[2];case 1:return[4,e.sent().json()];case 2:if(s=e.sent(),r=s.access_token,i=s.refresh_token,o=s.id_token,s=s.error)throw new Error(s);return[2,{accessToken:r,refreshToken:i,idToken:o}]}var t})})},Rd.prototype._handleImplicitFlow=function(r){return pd(this,void 0,void 0,function(){var t,n;return fd(this,function(e){return n=(w.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=dd(t,2))[0],n=n[1];return Ed(Ed({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,ld("implicitFlow",{},"Got tokens from "+r),Id.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},Rd.prototype.handleAuthResponse=function(s){return pd(this,void 0,void 0,function(){var t,n,r,i,o;return fd(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),o=s?Ed(Ed({},(w.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=dd(t,2))[0],n=n[1];return e[t]=n,e},{})),(w.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=dd(t,2))[0],n=n[1];return e[t]=n,e},{})):{},t=o.error,n=o.error_description,t)throw new Error(n);return o=this._validateState(o),Id.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Ed.apply(void 0,[Ed.apply(void 0,r.concat([e.sent()])),{state:o}])];case 2:return i=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Ed.apply(void 0,[Ed.apply(void 0,i.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw o=e.sent(),Id.error("Error handling auth response.",o),o;case 6:return[2]}})})},Rd.prototype._validateState=function(e){if(e){var t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},Rd.prototype.signOut=function(){return pd(this,void 0,void 0,function(){var t,n,r;return fd(this,function(e){return t="https://"+this._config.domain+"/logout?",n=uf(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=uf(this._config)?this._config.redirectSignOut:this._config.returnTo,ld("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){return(e=dd(e,2))[0]+"="+e[1]}).join("&"))),Id.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Rd.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Rd.prototype._generateChallenge=function(e){return this._base64URL(_(e))},Rd.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Rd.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Rd.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},Rd);function Od(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}function Td(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,i=t.endpoint,o=t.fetchOptions,s=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");t=n.split("_")[0],this.userPoolId=n,this.clientId=r,this.client=new wd(t,i,o),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new Wf).getStorage()}function kd(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/",n=(n||{}).credentials,this.fetchOptions=n?{credentials:n}:{}}function Ld(e,t,n,r){return(e=md.call(this,e)||this).code=t,e.name=n,e.statusCode=r,e}function Rd(e){var t=e.config,n=e.cognitoClientId,e=void 0===(e=e.scopes)?[]:e;if(this._urlOpener=t.urlOpener||cd,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(hr=Gy=Gy||{}).DEFAULT_MSG="Authentication Error",hr.EMPTY_USERNAME="Username cannot be empty",hr.INVALID_USERNAME="The username should either be a string or one of the sign in types",hr.EMPTY_PASSWORD="Password cannot be empty",hr.EMPTY_CODE="Confirmation code cannot be empty",hr.SIGN_UP_ERROR="Error creating account",hr.NO_MFA="No valid MFA method provided",hr.INVALID_MFA="Invalid MFA type",hr.EMPTY_CHALLENGE="Challenge response cannot be empty",hr.NO_USER_SESSION="Failed to get the session because the user is empty";var xd,Nd,rr=(xd=function(e,t){return(xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Md=new E.ConsoleLogger("AuthError"),Ud=(rr(Dd,Nd=Error),Dd);function Dd(e){var t=this,e=(n=Kd[e]).message,n=n.log;return(t=Nd.call(this,e)||this).constructor=Dd,Object.setPrototypeOf(t,Dd.prototype),t.name="AuthError",t.log=n||e,Md.error(t.log),t}var Fd,jd=(rr(qd,Fd=Ud),qd);function qd(e){return(e=Fd.call(this,e)||this).constructor=qd,Object.setPrototypeOf(e,qd.prototype),e.name="NoUserPoolError",e}function Bd(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Jd)}function Vd(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function zd(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Gd(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Kd={noConfig:{message:Gy.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Gy.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:Gy.EMPTY_USERNAME},invalidUsername:{message:Gy.INVALID_USERNAME},emptyPassword:{message:Gy.EMPTY_PASSWORD},emptyCode:{message:Gy.EMPTY_CODE},signUpError:{message:Gy.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Gy.NO_MFA},invalidMFA:{message:Gy.INVALID_MFA},emptyChallengeResponse:{message:Gy.EMPTY_CHALLENGE},noUserSession:{message:Gy.NO_USER_SESSION},default:{message:Gy.DEFAULT_MSG}},Hd=function(){return(Hd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Wd=new E.ConsoleLogger("AuthClass"),$d="aws.cognito.signin.user.admin",Jd="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function Yd(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=E.Credentials,this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),E.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var Zd=(Yd.prototype.getModuleName=function(){return"Auth"},Yd.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Wd.debug("configure Auth");var n=Object.assign({},this._config,E.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r,i=(d=this._config).userPoolId,o=d.userPoolWebClientId,s=d.cookieStorage,a=d.oauth,u=d.region,c=d.identityPoolId,l=d.mandatorySignIn,p=d.refreshHandlers,f=d.identityPoolRegion,n=d.clientMetadata,d=d.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Wd.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new _d(s):e.ssr?new E.UniversalStorage:(new E.StorageHelper).getStorage();return this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((d={UserPoolId:i,ClientId:o,endpoint:d}).Storage=this._storage,this.userPool=new Cd(d)),this.Credentials.configure({mandatorySignIn:l,region:f||u,userPoolId:i,identityPoolId:c,refreshHandlers:p,storage:this._storage}),(a=a?uf(this._config.oauth)?a:a.awsCognito:void 0)&&(a=Object.assign({cognitoClientId:o,UserPoolId:i,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new Pd({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),r={},function(){if(E.JS.browserOrNode().isBrowser&&window.location)e=(e={url:window.location.href}).url,r[e]||(r[e]=!0,t._handleAuthResponse(e));else if(!E.JS.browserOrNode().isNode)throw new Error("Not supported");var e}()),Bd("configured",null,"The Auth category has been configured successfully"),this._config},Yd.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(rf.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){e={Name:e,Value:p[e]},a.push(e)}),u=e.validationData||null}return o?s?(Wd.debug("signUp attrs:",a),Wd.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(o,s,a,u,function(e,t){e?(Bd("signUp_failure",e,o+" failed to signup"),r(e)):(Bd("signUp",t,o+" has signed up successfully"),n(t))},i)})):this.rejectAuthError(rf.EmptyPassword):this.rejectAuthError(rf.EmptyUsername)},Yd.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(rf.EmptyUsername);if(!t)return this.rejectAuthError(rf.EmptyCode);var i,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,r){o.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},i)})},Yd.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(rf.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(n,r){i.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},Yd.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(rf.InvalidUsername);void 0!==t&&Wd.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}return r?(n=new lf({Username:r,Password:i,ValidationData:o,ClientMetadata:n}),i?this.signInWithPassword(n):this.signInWithoutPassword(n)):this.rejectAuthError(rf.EmptyUsername)},Yd.prototype.authCallbacks=function(i,o,s){var e=this,a=this;return{onSuccess:function(r){return Vd(e,void 0,void 0,function(){var t,n;return zd(this,function(e){switch(e.label){case 0:Wd.debug(r),delete i.challengeName,delete i.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Wd.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Wd.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),Bd("signIn",a.user=n,"A user "+i.getUsername()+" has been signed in"),o(n),[3,8];case 7:return n=e.sent(),Wd.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Wd.debug("signIn failure",e),Bd("signIn_failure",e,i.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){Wd.debug("signIn custom challenge answer required"),i.challengeName="CUSTOM_CHALLENGE",i.challengeParam=e,o(i)},mfaRequired:function(e,t){Wd.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Wd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)},newPasswordRequired:function(e,t){Wd.debug("signIn new password"),i.challengeName="NEW_PASSWORD_REQUIRED",i.challengeParam={userAttributes:e,requiredAttributes:t},o(i)},totpRequired:function(e,t){Wd.debug("signIn totpRequired"),i.challengeName=e,i.challengeParam=t,o(i)},selectMFAType:function(e,t){Wd.debug("signIn selectMFAType",e),i.challengeName=e,i.challengeParam=t,o(i)}}},Yd.prototype.signInWithPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return new Promise(function(e,t){i.authenticateUser(n,r.authCallbacks(i,e,t))})},Yd.prototype.signInWithoutPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){i.initiateAuth(n,r.authCallbacks(i,e,t))})},Yd.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Wd.debug("get MFA Options failed",e),void r(e)):(Wd.debug("get MFA options success",t),void n(t))})})},Yd.prototype.getPreferredMFA=function(t,i){var o=this;return new Promise(function(n,r){var e=!!i&&i.bypassCache;t.getUserData(function(e,t){return e?(Wd.debug("getting preferred mfa failed",e),void r(e)):(t=o._getMfaTypeFromUserData(t))?void n(t):void r("invalid MFA Type")},{bypassCache:e})})},Yd.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Wd.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},Yd.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){return e?(Wd.debug("getting user data failed",e),void r(e)):void n(t)},t)})},Yd.prototype.setPreferredMFA=function(o,s){return Vd(this,void 0,void 0,function(){var t,n,r,i;return zd(this,function(e){switch(e.label){case 0:return[4,this._getUserData(o,{bypassCache:!0})];case 1:switch(i=e.sent(),n=t=null,s){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return t={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(i=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===i)t={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==i)return[2,this.rejectAuthError(rf.InvalidMFA)];n={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?t={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(n={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Wd.debug("no validmfa method provided"),[2,this.rejectAuthError(rf.NoMFA)];case 7:return[2,new Promise(function(r,i){o.setUserMfaPreference(t,n,function(e,n){return e?(Wd.debug("Set user mfa preference error",e),i(e)):(Wd.debug("Set user mfa success",n),Wd.debug("Caching the latest user data into local"),void o.getUserData(function(e,t){return e?(Wd.debug("getting user data failed",e),i(e)):r(n)},{bypassCache:!0}))})})]}})})},Yd.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Wd.debug("disable mfa failed",e),void r(e)):(Wd.debug("disable mfa succeed",t),void n(t))})})},Yd.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Wd.debug("enable mfa failed",e),void r(e)):(Wd.debug("enable mfa succeed",t),void n(t))})})},Yd.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Wd.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Wd.debug("associateSoftwareToken sucess",e),t(e)}})})},Yd.prototype.verifyTotpToken=function(e,r){return Wd.debug("verfication totp token",e,r),new Promise(function(t,n){e.verifySoftwareToken(r,"My TOTP device",{onFailure:function(e){Wd.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Wd.debug("verifyTotpToken success",e),t(e)}})})},Yd.prototype.confirmSignIn=function(i,e,n,o){var s=this;if(void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(rf.EmptyCode);var a=this;return new Promise(function(r,t){i.sendMFACode(e,{onSuccess:function(n){return Vd(s,void 0,void 0,function(){var t;return zd(this,function(e){switch(e.label){case 0:Wd.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Wd.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Wd.debug("cannot get cognito credentials",t),[3,6];case 5:return Bd("signIn",a.user=i,i+" has signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Wd.debug("confirm signIn failure",e),t(e)}},n,o)})},Yd.prototype.completeNewPassword=function(i,e,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(rf.EmptyPassword);var a=this;return new Promise(function(r,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return Vd(s,void 0,void 0,function(){var t;return zd(this,function(e){switch(e.label){case 0:Wd.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Wd.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Wd.debug("cannot get cognito credentials",t),[3,6];case 5:return Bd("signIn",a.user=i,i+" has signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Wd.debug("completeNewPassword failure",e),Bd("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Wd.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,r(i)},mfaSetup:function(e,t){Wd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)},totpRequired:function(e,t){Wd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)}},o)})},Yd.prototype.sendCustomChallengeAnswer=function(n,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,o.authCallbacks(n,e,t),i)}):this.rejectAuthError(rf.EmptyChallengeResponse):this.rejectNoUserPool()},Yd.prototype.updateUserAttributes=function(o,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,i){e.userSession(o).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}o.updateAttributes(u,function(e,t){return e?i(e):r(t)},a)})})},Yd.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},Yd.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},Yd.prototype.currentUserPoolUser=function(o){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return Vd(e,void 0,void 0,function(){var a,t=this;return zd(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Wd.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Wd.debug("OAuth signIn in progress timeout"),E.Hub.remove("auth",r),t()},1e4);function r(e){"cognitoHostedUI"!==(e=e.payload.event)&&"cognitoHostedUI_failure"!==e||(Wd.debug("OAuth signIn resolved: "+e),clearTimeout(n),E.Hub.remove("auth",r),t())}E.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?a.getSession(function(r,i){return Vd(t,void 0,void 0,function(){var t,n,s=this;return zd(this,function(e){switch(e.label){case 0:return r?(Wd.debug("Failed to get the user session",r),c(r),[2]):(t=!!o&&o.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return(void 0===(n=i.getAccessToken().decodePayload().scope)?"":n).split(" ").includes($d)?(a.getUserData(function(e,t){if(e)return Wd.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],i=0;i<t.UserAttributes.length;i++){var o={Name:t.UserAttributes[i].Name,Value:t.UserAttributes[i].Value},o=new Gf(o);r.push(o)}return e=s.attributesToObject(r),Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t}),[2]):(Wd.debug("Unable to get the user data because the "+$d+" is not in the scopes of the access token"),[2,u(a)])}})})}):(Wd.debug("Failed to get user from user pool"),c("No current user")),[2]}})})}).catch(function(e){return Wd.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},Yd.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},Yd.prototype.currentAuthenticatedUser=function(o){return Vd(this,void 0,void 0,function(){var t,n,r,i;return zd(this,function(e){switch(e.label){case 0:Wd.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw i=e.sent(),Wd.debug("Failed to sync cache info into memory",i),i;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Hd(Hd({},n.user),{token:n.token}))}catch(e){Wd.debug("cannot load federated user from auth storage")}return t?(this.user=t,Wd.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Wd.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(o)];case 7:return r=e.sent(),[3,9];case 8:throw"No userPool"===(i=e.sent())&&Wd.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Wd.debug("The user is not authenticated by the error",i),"not authenticated";case 9:return this.user=r,[2,this.user]}})})},Yd.prototype.currentSession=function(){var r=this;return Wd.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Wd.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Wd.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},Yd.prototype.userSession=function(i){return i?new Promise(function(n,r){Wd.debug("Getting the session from this user:",i),i.getSession(function(e,t){return e?(Wd.debug("Failed to get the session from user",i),void r(e)):(Wd.debug("Succeed to get the user session",t),void n(t))})}):(Wd.debug("the user is null"),this.rejectAuthError(rf.NoUserSession))},Yd.prototype.currentUserCredentials=function(){return Vd(this,void 0,void 0,function(){var t,n,r=this;return zd(this,function(e){switch(e.label){case 0:Wd.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Wd.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Wd.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,this.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Wd.debug("getting session success",e),r.Credentials.set(e,"session")}).catch(function(e){return Wd.debug("getting session failed",e),r.Credentials.set(null,"guest")})]}})})},Yd.prototype.currentCredentials=function(){return Wd.debug("getting current credentials"),this.Credentials.get()},Yd.prototype.verifyUserAttribute=function(n,r,i){return void 0===i&&(i=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)},clientMetadata:i})})},Yd.prototype.verifyUserAttributeSubmit=function(e,r,i){return i?new Promise(function(t,n){e.verifyAttribute(r,i,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(rf.EmptyCode)},Yd.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},Yd.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},Yd.prototype.cognitoIdentitySignOut=function(s,a){return Vd(this,void 0,void 0,function(){var t,i,o=this;return zd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Wd.debug("Failed to sync cache info into memory",t),t;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(s&&s.global)Wd.debug("user global sign out",a),a.getSession(function(e,t){return e?(Wd.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(Wd.debug("global sign out success"),!i)return n();o.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Wd.debug("global sign out failed",e),r(e)}})});else{if(Wd.debug("user sign out",a),a.signOut(),!i)return n();o.oAuthSignOutRedirect(n,r)}})]}})})},Yd.prototype.oAuthSignOutRedirect=function(e,t){E.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},Yd.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},Yd.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},Yd.prototype.signOut=function(n){return Vd(this,void 0,void 0,function(){var t;return zd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Wd.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Wd.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Wd.debug("no Congito User pool"),e.label=8;case 8:return Bd("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},Yd.prototype.cleanCachedItems=function(){return Vd(this,void 0,void 0,function(){return zd(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},Yd.prototype.changePassword=function(t,i,o,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(i,o,function(e,t){return e?(Wd.debug("change password failure",e),r(e)):n(t)},s)})})},Yd.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(rf.EmptyUsername);var i=this.createCognitoUser(r);return new Promise(function(t,n){i.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Wd.debug("forgot password failure",e),Bd("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Bd("forgotPassword",i,r+" has initiated forgot password flow"),t(e)}},e)})},Yd.prototype.forgotPasswordSubmit=function(n,r,i,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(rf.EmptyUsername);if(!r)return this.rejectAuthError(rf.EmptyCode);if(!i)return this.rejectAuthError(rf.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,i,{onSuccess:function(){Bd("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Bd("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},o)})},Yd.prototype.currentUserInfo=function(){return Vd(this,void 0,void 0,function(){var t,n,r,i,o;return zd(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Wd.debug(e)})];case 1:if(!(o=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(o)];case 3:r=e.sent(),i=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),Wd.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:o.getUsername(),attributes:i}];case 8:return i=e.sent(),Wd.debug("currentUserInfo error",i),[2,{}];case 9:return"federated"===t?[2,(o=this.user)||{}]:[2]}})})},Yd.prototype.federatedSignIn=function(l,p,f){return Vd(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return zd(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return af(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:nf.Cognito},i=af(r)?r.provider:r.customProvider,af(r),a=r.customState,this._config.userPoolId&&(s=uf(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=uf(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,i,a)),[3,4]):[3,1];case 1:i=l;try{(o=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Wd.warn("There is already a signed in user: "+o+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:i,token:s,identity_id:a,user:f,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return Bd("signIn",c=e.sent(),"A user "+c.username+" has been signed in"),Wd.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},Yd.prototype._handleAuthResponse=function(c){return Vd(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return zd(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Wd.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Bd("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(E.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(w.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){return"code"===(e=Gd(e,1)[0])||"error"===e}),r=!!(w.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){return"access_token"===(e=Gd(e,1)[0])||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=e.sent(),s=i.accessToken,u=i.idToken,o=i.refreshToken,a=i.state,i=new qf({IdToken:new Ff({IdToken:u}),RefreshToken:new jf({RefreshToken:o}),AccessToken:new kf({AccessToken:s})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(i,"session")]:[3,5];case 4:u=e.sent(),Wd.debug("AWS credentials",u),e.label=5;case 5:return o=/-/.test(a),(s=this.createCognitoUser(i.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(i),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Bd("signIn",s,"A user "+s.getUsername()+" has been signed in"),Bd("cognitoHostedUI",s,"A user "+s.getUsername()+" has been signed in via Cognito Hosted UI"),o&&(a=a.split("-").splice(1).join("-"),Bd("customOAuthState",E.urlSafeDecode(a),"State for user "+s.getUsername())),[2,u];case 6:return u=e.sent(),Wd.debug("Error in cognito hosted auth response",u),Bd("signIn_failure",u,"The OAuth response flow failed"),Bd("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),Bd("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},Yd.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},Yd.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value}),t},Yd.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};return t.Storage=this._storage,e=this._config.authenticationFlowType,t=new Jf(t),e&&t.setAuthenticationFlowType(e),t},Yd.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},Yd.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?rf.NoConfig:rf.MissingAuthConfig},Yd.prototype.rejectAuthError=function(e){return Promise.reject(new Ud(e))},Yd.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new jd(e))},new Yd(null));E.Amplify.register(Zd);var Xd=function(e,t){return(Xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Qd(e,t){function n(){this.constructor=e}Xd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var eh=function(){return(eh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function th(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function nh(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var rh,ih=(F(oh,rh=u.Writable),oh.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},oh);function oh(e,t){return(t=rh.call(this,t)||this).hash=e,t}function sh(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length}function ah(e){return yh(e)?e.replace(/fips-|-fips/,""):e}function uh(e){var t=e.match(gh);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function ch(e){var t=e.baseHostname;return gh.test(t)?"string"==typeof e.bucketName?Sh(e):{bucketEndpoint:!0,hostname:bh(e)}:{bucketEndpoint:!1,hostname:t}}function lh(e,t){return e===t||ah(e)===t||e===ah(t)}var ph=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,fh=/(\d+\.){3}\d+/,dh=/\.\./,hh=/\./,gh=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,vh=/^s3(-external-1)?\.amazonaws\.com$/,mh="amazonaws.com",yh=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},bh=function(e){var t=(l=W((p=e.baseHostname,vh.test(p)?[p.replace("."+mh,""),mh]:uh(p)),2))[0],n=l[1],r=e.pathStyleEndpoint,i=e.dualstackEndpoint,o=e.accelerateEndpoint,s=e.tlsCompatible,a=void 0===s||s,u=e.useArnRegion,c=e.bucketName,l=void 0===(p=e.clientPartition)?"aws":p,p=void 0===(s=e.clientSigningRegion)?t:s;if(r)throw new Error("Path-style S3 endpoint is not supported when bucket is an Access Point ARN");if(o)throw new Error("Accelerate is not supported when bucket is an Access Point ARN");if(!a)throw new Error("Access Point can only be used with https");return e=c.service,s=c.partition,r=c.accountId,o=c.region,c=c.resource,function(){if("s3"!==e)throw new Error("Expect 's3' in access point ARN service component")}(),function(e,t){if(""===e)throw new Error("Access point ARN region is empty");if(!t.useArnRegion&&!lh(e,t.clientRegion)&&!lh(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&yh(e))throw new Error("Access point endpoint does not support FIPS region")}(o,{useArnRegion:u,clientRegion:t,clientSigningRegion:p}),function(e){if(s!==e.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+s+'" but expected "'+e.clientPartition+'"')}({clientPartition:l}),function(){if(!/[0-9]{12}/.exec(r))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(),function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&hh.test(e))throw new Error("Invalid DNS label "+e)}((c=function(e){if(0!==e.indexOf("accesspoint:")&&0!==e.indexOf("accesspoint/"))throw new Error("Access point ARN resource should begin with 'accesspoint/'");if(2!==(e=e.split(e["accesspoint".length])).length||""===e[1])throw new Error("Access Point ARN should have one resource accesspoint/{accesspointname}");return e[1]}(c))+"-"+r,{tlsCompatible:a}),c+"-"+r+".s3-accesspoint"+(i?".dualstack":"")+"."+(u?o:t)+"."+n},Sh=function(e){var t=void 0!==(o=e.accelerateEndpoint)&&o,n=e.baseHostname,r=e.bucketName,i=void 0!==(a=e.dualstackEndpoint)&&a,o=void 0!==(s=e.pathStyleEndpoint)&&s,s=void 0===(a=e.tlsCompatible)||a,e=(a=W((e=n,vh.test(e)?["us-east-1",mh]:uh(e)),2))[0],a=a[1];return o||(o=r,!ph.test(o)||fh.test(o)||dh.test(o))||s&&hh.test(r)?{bucketEndpoint:!1,hostname:i?"s3.dualstack."+e+"."+a:n}:(t?n="s3-accelerate"+(i?".dualstack":"")+"."+a:i&&(n="s3.dualstack."+e+"."+a),{bucketEndpoint:!0,hostname:r+"."+n})};function wh(t){return{applyToStack:function(e){e.addRelativeTo(function(g){var e=this;return function(d,h){return function(f){return G(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p;return K(this,function(e){switch(e.label){case 0:return c=f.input.Bucket,t=g.bucketEndpoint,n=f.request,Zs.isInstance(n)?g.bucketEndpoint?(n.hostname=c,[3,6]):[3,1]:[3,7];case 1:return sh(c)?(r=function(e){if((e=e.split(":")).length<6||"arn"!==e[0])throw new Error("Malformed ARN");return{partition:(e=W(e))[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(c),o=ah,[4,g.region()]):[3,5];case 2:return i=o.apply(void 0,[e.sent()]),[4,g.regionInfoProvider(i)];case 3:return u=e.sent()||{},s=u.partition,a=u.signingRegion,[4,g.useArnRegion()];case 4:return u=e.sent(),p=ch({bucketName:r,baseHostname:n.hostname,accelerateEndpoint:g.useAccelerateEndpoint,dualstackEndpoint:g.useDualstackEndpoint,pathStyleEndpoint:g.forcePathStyle,tlsCompatible:"https:"===n.protocol,useArnRegion:u,clientPartition:s,clientSigningRegion:a}),l=p.hostname,p=p.bucketEndpoint,u&&i!==r.region&&(h.signing_region=r.region),n.hostname=l,t=p,[3,6];case 5:c=ch({bucketName:c,baseHostname:n.hostname,accelerateEndpoint:g.useAccelerateEndpoint,dualstackEndpoint:g.useDualstackEndpoint,pathStyleEndpoint:g.forcePathStyle,tlsCompatible:"https:"===n.protocol}),l=c.hostname,p=c.bucketEndpoint,n.hostname=l,t=p,e.label=6;case 6:t&&(n.path=n.path.replace(/^(\/)?[^\/]+/,""),""===n.path&&(n.path="/")),e.label=7;case 7:return[2,d(j(j({},f),{request:n}))]}})})}}}(t),Ch)}}}var Ch={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},_h="AWS_S3_USE_ARN_REGION",Eh="s3_use_arn_region",Qn={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,_h)){if("true"===e[_h])return!0;if("false"===e[_h])return!1;throw new Error("Cannot load env "+_h+'. Expected "true" or "false", got '+e[_h]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Eh)){if("true"===e[Eh])return!0;if("false"===e[Eh])return!1;throw new Error("Cannot load shared config entry "+Eh+'. Expected "true" or "false", got '+e[Eh]+".")}},default:!1},Ah="s3.{region}.amazonaws.com",Ih=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Ph=new Set(["cn-north-1","cn-northwest-1"]),Oh=new Set(["us-iso-east-1"]),Th=new Set(["us-isob-east-1"]),kh=new Set(["us-gov-east-1","us-gov-west-1"]),Lh=eh(eh({},{apiVersion:"2006-03-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Ih.has(e)&&(n={hostname:Ah.replace("{region}",e),partition:"aws"}),Ph.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Oh.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Th.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),kh.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Ah.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1}),{runtime:"node",base64Decoder:su,base64Encoder:au,bodyLengthChecker:uu,credentialDefaultProvider:Bs,defaultUserAgent:cu("@aws-sdk/client-s3","1.0.0-gamma.8"),eventStreamSerdeProvider:function(e){return new of(e)},maxAttempts:nr(C),md5:b.bind(null,"md5"),region:nr(Jn,lr),requestHandler:new Xe,sha256:b.bind(null,"sha256"),streamCollector:Je,streamHasher:function(o,s){return new Promise(function(e,t){var n,r,i;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new o,i=new ih(r),n.pipe(i),n.on("error",function(e){i.end(),t(e)}),i.on("error",t),i.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},urlParser:ou,useArnRegion:nr(Qn),utf8Decoder:lu,utf8Encoder:pu});var Rh={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"};var xh,Nh,Mh,Uh,Dh,Fh,jh,qh,Bh,Vh,zh,Gh,Kh,Hh,Wh,$h,Jh,Yh,Zh,Xh,Qh,eg,tg,ng,rg,ig,og,sg,ag,ug,cg,lg,pg,fg,dg,hg,gg={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},vg=(Qd(mg,xh=St),mg.prototype.destroy=function(){xh.prototype.destroy.call(this)},mg);function mg(e){var t,n,r,i=this,o=eh(eh({},Lh),e),s=Uo(o),a=sc(Mo(s)),u=(o=void 0!==(e=(t=u=ua(a)).bucketEndpoint)&&e,a=void 0!==(s=t.forcePathStyle)&&s,e=void 0!==(u=t.useAccelerateEndpoint)&&u,u=void 0!==(s=t.useDualstackEndpoint)&&s,n=void 0!==(s=t.useArnRegion)&&s,j(j({},t),{bucketEndpoint:o,forcePathStyle:a,useAccelerateEndpoint:e,useDualstackEndpoint:u,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}})),u=j(j({},u),{eventStreamMarshaller:u.eventStreamSerdeProvider(u)});return(i=xh.call(this,u)||this).config=u,i.middlewareStack.use(cc(i.config)),i.middlewareStack.use(Ws(i.config)),i.middlewareStack.use(pc(i.config)),i.middlewareStack.use(Su(i.config)),i.middlewareStack.use((i.config,{applyToStack:function(e){e.add(function(){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){if("string"==typeof(t=n.input.Bucket)&&!sh(t)&&0<=t.indexOf("/"))throw(t=new Error("Bucket name shouldn't contain '/', received '"+t+"'")).name="InvalidBucketName",t;return[2,r(j({},n))]})})}}}(),gg)}})),i.middlewareStack.use((r=i.config,{applyToStack:function(e){e.add(function(i){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){return t=n.request,Zs.isInstance(t)&&t.body&&"node"===i.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(r),Rh)}})),i.middlewareStack.use(Cu(i.config)),i.middlewareStack.use(_u(i.config)),i}(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"AbortIncompleteMultipartUpload")},(Yn=Nh=Nh||{}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"AbortMultipartUploadOutput")},(br=Mh=Mh||{}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"AbortMultipartUploadRequest")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"AccelerateConfiguration")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"AccessControlPolicy")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"AccessControlTranslation")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"AnalyticsAndOperator")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"AnalyticsConfiguration")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"AnalyticsExportDestination")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"AnalyticsFilter")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"AnalyticsS3BucketDestination")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"Bucket")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"BucketAlreadyExists")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"BucketAlreadyOwnedByYou")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"BucketLifecycleConfiguration")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"BucketLoggingStatus")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"CommonPrefix")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"CompletedMultipartUpload")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"CompletedPart")},(p=Uh=Uh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},p.isa=function(e){return Sc(e,"CompleteMultipartUploadOutput")},(dr=Dh=Dh||{}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"CompleteMultipartUploadRequest")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"Condition")},(yt=Fh=Fh||{}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"ContinuationEvent")},(gn={}).filterSensitiveLog=function(e){return eh(eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc})},gn.isa=function(e){return Sc(e,"CopyObjectOutput")},(_w={}).filterSensitiveLog=function(e){return eh(eh(eh(eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc}),e.SSECustomerKey&&{SSECustomerKey:Nc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Nc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc})},_w.isa=function(e){return Sc(e,"CopyObjectRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"CopyObjectResult")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"CopyPartResult")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"CORSConfiguration")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"CORSRule")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"CreateBucketConfiguration")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"CreateBucketOutput")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"CreateBucketRequest")},(_l=jh=jh||{}).filterSensitiveLog=function(e){return eh(eh(eh({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},_l.isa=function(e){return Sc(e,"CreateMultipartUploadOutput")},(Yn=qh=qh||{}).filterSensitiveLog=function(e){return eh(eh(eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc}),e.SSECustomerKey&&{SSECustomerKey:Nc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc})},Yn.isa=function(e){return Sc(e,"CreateMultipartUploadRequest")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"CSVInput")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"CSVOutput")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"DefaultRetention")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"Delete")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"DeleteBucketAnalyticsConfigurationRequest")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"DeleteBucketCorsRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"DeleteBucketEncryptionRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"DeleteBucketInventoryConfigurationRequest")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"DeleteBucketLifecycleRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"DeleteBucketMetricsConfigurationRequest")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"DeleteBucketPolicyRequest")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"DeleteBucketReplicationRequest")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"DeleteBucketRequest")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"DeleteBucketTaggingRequest")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"DeleteBucketWebsiteRequest")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"DeletedObject")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"DeleteMarkerEntry")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"DeleteMarkerReplication")},(dr=Bh=Bh||{}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"DeleteObjectOutput")},(pi=Vh=Vh||{}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"DeleteObjectRequest")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"DeleteObjectsOutput")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"DeleteObjectsRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"DeleteObjectTaggingOutput")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"DeleteObjectTaggingRequest")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"DeletePublicAccessBlockRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"Destination")},(hr=zh=zh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.KMSKeyId&&{KMSKeyId:Nc})},hr.isa=function(e){return Sc(e,"Encryption")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"EncryptionConfiguration")},(Gy=Gh=Gh||{}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"EndEvent")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"Error")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"ErrorDocument")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"ExistingObjectReplication")},(br={}).IGNORE="IGNORE",br.NONE="NONE",br.USE="USE",(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"FilterRule")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"GetBucketAccelerateConfigurationOutput")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"GetBucketAccelerateConfigurationRequest")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"GetBucketAclOutput")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"GetBucketAclRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"GetBucketAnalyticsConfigurationOutput")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"GetBucketAnalyticsConfigurationRequest")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"GetBucketCorsOutput")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"GetBucketCorsRequest")},(hr={}).filterSensitiveLog=function(e){return eh(eh({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:cg.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},hr.isa=function(e){return Sc(e,"GetBucketEncryptionOutput")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"GetBucketEncryptionRequest")},(Gy={}).filterSensitiveLog=function(e){return eh(eh({},e),e.InventoryConfiguration&&{InventoryConfiguration:Wh.filterSensitiveLog(e.InventoryConfiguration)})},Gy.isa=function(e){return Sc(e,"GetBucketInventoryConfigurationOutput")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"GetBucketInventoryConfigurationRequest")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"GetBucketLifecycleConfigurationOutput")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"GetBucketLifecycleConfigurationRequest")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"GetBucketLocationOutput")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"GetBucketLocationRequest")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"GetBucketLoggingOutput")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"GetBucketLoggingRequest")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"GetBucketMetricsConfigurationOutput")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"GetBucketMetricsConfigurationRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"GetBucketNotificationConfigurationRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"GetBucketPolicyOutput")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"GetBucketPolicyRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"GetBucketPolicyStatusOutput")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"GetBucketPolicyStatusRequest")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"GetBucketReplicationOutput")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"GetBucketReplicationRequest")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"GetBucketRequestPaymentOutput")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"GetBucketRequestPaymentRequest")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"GetBucketTaggingOutput")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"GetBucketTaggingRequest")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"GetBucketVersioningOutput")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"GetBucketVersioningRequest")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"GetBucketWebsiteOutput")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"GetBucketWebsiteRequest")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"GetObjectAclOutput")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"GetObjectAclRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"GetObjectLegalHoldOutput")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"GetObjectLegalHoldRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"GetObjectLockConfigurationOutput")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"GetObjectLockConfigurationRequest")},(rr=Kh=Kh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},rr.isa=function(e){return Sc(e,"GetObjectOutput")},(Gy=Hh=Hh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSECustomerKey&&{SSECustomerKey:Nc})},Gy.isa=function(e){return Sc(e,"GetObjectRequest")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"GetObjectRetentionOutput")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"GetObjectRetentionRequest")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"GetObjectTaggingOutput")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"GetObjectTaggingRequest")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"GetObjectTorrentOutput")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"GetObjectTorrentRequest")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"GetPublicAccessBlockOutput")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"GetPublicAccessBlockRequest")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"GlacierJobParameters")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"Grant")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"Grantee")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"HeadBucketRequest")},(vn={}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},vn.isa=function(e){return Sc(e,"HeadObjectOutput")},(hr={}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSECustomerKey&&{SSECustomerKey:Nc})},hr.isa=function(e){return Sc(e,"HeadObjectRequest")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"IndexDocument")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"Initiator")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"InputSerialization")},(_l=Wh=Wh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.Destination&&{Destination:$h.filterSensitiveLog(e.Destination)})},_l.isa=function(e){return Sc(e,"InventoryConfiguration")},(Yn=$h=$h||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.S3BucketDestination&&{S3BucketDestination:Yh.filterSensitiveLog(e.S3BucketDestination)})},Yn.isa=function(e){return Sc(e,"InventoryDestination")},(br=Jh=Jh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMS&&{SSEKMS:pg.filterSensitiveLog(e.SSEKMS)})},br.isa=function(e){return Sc(e,"InventoryEncryption")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"InventoryFilter")},(dr=Yh=Yh||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.Encryption&&{Encryption:Jh.filterSensitiveLog(e.Encryption)})},dr.isa=function(e){return Sc(e,"InventoryS3BucketDestination")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"InventorySchedule")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"JSONInput")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"JSONOutput")},(_w={}).DOCUMENT="DOCUMENT",_w.LINES="LINES",(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"LambdaFunctionConfiguration")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"LifecycleExpiration")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"LifecycleRule")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"LifecycleRuleAndOperator")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"LifecycleRuleFilter")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"ListBucketAnalyticsConfigurationsOutput")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"ListBucketAnalyticsConfigurationsRequest")},(_l={}).filterSensitiveLog=function(e){return eh(eh({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return Wh.filterSensitiveLog(e)})})},_l.isa=function(e){return Sc(e,"ListBucketInventoryConfigurationsOutput")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"ListBucketInventoryConfigurationsRequest")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"ListBucketMetricsConfigurationsOutput")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"ListBucketMetricsConfigurationsRequest")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"ListBucketsOutput")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"ListMultipartUploadsOutput")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"ListMultipartUploadsRequest")},(gn=Zh=Zh||{}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"ListObjectsOutput")},(_w=Xh=Xh||{}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"ListObjectsRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"ListObjectsV2Output")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"ListObjectsV2Request")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"ListObjectVersionsOutput")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"ListObjectVersionsRequest")},(rr=Qh=Qh||{}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"ListPartsOutput")},(Gy=eg=eg||{}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"ListPartsRequest")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"LoggingEnabled")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"MetadataEntry")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"Metrics")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"MetricsAndOperator")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"MetricsConfiguration")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"MetricsFilter")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"MultipartUpload")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"NoncurrentVersionExpiration")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"NoncurrentVersionTransition")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"NoSuchBucket")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"NoSuchKey")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"NoSuchUpload")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"NotificationConfiguration")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"NotificationConfigurationFilter")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"Object")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"ObjectAlreadyInActiveTierError")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"ObjectIdentifier")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"ObjectLockConfiguration")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"ObjectLockLegalHold")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"ObjectLockRetention")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"ObjectLockRule")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"ObjectNotInActiveTierError")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"ObjectVersion")},(yt=tg=tg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.S3&&{S3:ag.filterSensitiveLog(e.S3)})},yt.isa=function(e){return Sc(e,"OutputLocation")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"OutputSerialization")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"Owner")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"ParquetInput")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"Part")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"PolicyStatus")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"Progress")},(rr=ng=ng||{}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"ProgressEvent")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"PublicAccessBlockConfiguration")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"PutBucketAccelerateConfigurationRequest")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"PutBucketAclRequest")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"PutBucketAnalyticsConfigurationRequest")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"PutBucketCorsRequest")},(p={}).filterSensitiveLog=function(e){return eh(eh({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:cg.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},p.isa=function(e){return Sc(e,"PutBucketEncryptionRequest")},(dr={}).filterSensitiveLog=function(e){return eh(eh({},e),e.InventoryConfiguration&&{InventoryConfiguration:Wh.filterSensitiveLog(e.InventoryConfiguration)})},dr.isa=function(e){return Sc(e,"PutBucketInventoryConfigurationRequest")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"PutBucketLifecycleConfigurationRequest")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"PutBucketLoggingRequest")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"PutBucketMetricsConfigurationRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"PutBucketNotificationConfigurationRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"PutBucketPolicyRequest")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"PutBucketReplicationRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"PutBucketRequestPaymentRequest")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"PutBucketTaggingRequest")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"PutBucketVersioningRequest")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"PutBucketWebsiteRequest")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"PutObjectAclOutput")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"PutObjectAclRequest")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"PutObjectLegalHoldOutput")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"PutObjectLegalHoldRequest")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"PutObjectLockConfigurationOutput")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"PutObjectLockConfigurationRequest")},(pi=rg=rg||{}).filterSensitiveLog=function(e){return eh(eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc})},pi.isa=function(e){return Sc(e,"PutObjectOutput")},(yt=ig=ig||{}).filterSensitiveLog=function(e){return eh(eh(eh(eh({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Nc}),e.SSECustomerKey&&{SSECustomerKey:Nc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},yt.isa=function(e){return Sc(e,"PutObjectRequest")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"PutObjectRetentionOutput")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"PutObjectRetentionRequest")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"PutObjectTaggingOutput")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"PutObjectTaggingRequest")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"PutPublicAccessBlockRequest")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"QueueConfiguration")},(rr={}).ALWAYS="ALWAYS",rr.ASNEEDED="ASNEEDED",(Gy=og=og||{}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"RecordsEvent")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"Redirect")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"RedirectAllRequestsTo")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"ReplicationConfiguration")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"ReplicationRule")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"ReplicationRuleAndOperator")},(dr={}).filterSensitiveLog=function(e){return eh({},e)},dr.isa=function(e){return Sc(e,"ReplicationRuleFilter")},(pi={}).filterSensitiveLog=function(e){return eh({},e)},pi.isa=function(e){return Sc(e,"ReplicationTime")},(yt={}).filterSensitiveLog=function(e){return eh({},e)},yt.isa=function(e){return Sc(e,"ReplicationTimeValue")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"RequestPaymentConfiguration")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"RequestProgress")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"RestoreObjectOutput")},(hn={}).filterSensitiveLog=function(e){return eh(eh({},e),e.RestoreRequest&&{RestoreRequest:sg.filterSensitiveLog(e.RestoreRequest)})},hn.isa=function(e){return Sc(e,"RestoreObjectRequest")},(vn=sg=sg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.OutputLocation&&{OutputLocation:tg.filterSensitiveLog(e.OutputLocation)})},vn.isa=function(e){return Sc(e,"RestoreRequest")},(hr={}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"RoutingRule")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"S3KeyFilter")},(Gy=ag=ag||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.Encryption&&{Encryption:zh.filterSensitiveLog(e.Encryption)})},Gy.isa=function(e){return Sc(e,"S3Location")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"ScanRange")},(_l={}).visit=function(e,t){return void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.End?t.End(e.End):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Records?t.Records(e.Records):void 0!==e.Cont?t.Cont(e.Cont):t._(e.$unknown[0],e.$unknown[1])},_l.filterSensitiveLog=function(e){var t;return void 0!==e.Stats?{Stats:fg.filterSensitiveLog(e.Stats)}:void 0!==e.End?{End:Gh.filterSensitiveLog(e.End)}:void 0!==e.Progress?{Progress:ng.filterSensitiveLog(e.Progress)}:void 0!==e.Records?{Records:og.filterSensitiveLog(e.Records)}:void 0!==e.Cont?{Cont:Fh.filterSensitiveLog(e.Cont)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Yn={}).filterSensitiveLog=function(e){return eh(eh({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},Yn.isa=function(e){return Sc(e,"SelectObjectContentOutput")},(br={}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSECustomerKey&&{SSECustomerKey:Nc})},br.isa=function(e){return Sc(e,"SelectObjectContentRequest")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"SelectParameters")},(dr=ug=ug||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Nc})},dr.isa=function(e){return Sc(e,"ServerSideEncryptionByDefault")},(pi=cg=cg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.Rules&&{Rules:e.Rules.map(function(e){return lg.filterSensitiveLog(e)})})},pi.isa=function(e){return Sc(e,"ServerSideEncryptionConfiguration")},(yt=lg=lg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:ug.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},yt.isa=function(e){return Sc(e,"ServerSideEncryptionRule")},(gn={}).filterSensitiveLog=function(e){return eh({},e)},gn.isa=function(e){return Sc(e,"SourceSelectionCriteria")},(_w=pg=pg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.KeyId&&{KeyId:Nc})},_w.isa=function(e){return Sc(e,"SSEKMS")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"SseKmsEncryptedObjects")},(hn={}).filterSensitiveLog=function(e){return eh({},e)},hn.isa=function(e){return Sc(e,"SSES3")},(vn={}).filterSensitiveLog=function(e){return eh({},e)},vn.isa=function(e){return Sc(e,"Stats")},(hr=fg=fg||{}).filterSensitiveLog=function(e){return eh({},e)},hr.isa=function(e){return Sc(e,"StatsEvent")},(rr={}).filterSensitiveLog=function(e){return eh({},e)},rr.isa=function(e){return Sc(e,"StorageClassAnalysis")},(Gy={}).filterSensitiveLog=function(e){return eh({},e)},Gy.isa=function(e){return Sc(e,"StorageClassAnalysisDataExport")},(Qn={}).filterSensitiveLog=function(e){return eh({},e)},Qn.isa=function(e){return Sc(e,"Tag")},(_l={}).filterSensitiveLog=function(e){return eh({},e)},_l.isa=function(e){return Sc(e,"Tagging")},(Yn={}).filterSensitiveLog=function(e){return eh({},e)},Yn.isa=function(e){return Sc(e,"TargetGrant")},(br={}).filterSensitiveLog=function(e){return eh({},e)},br.isa=function(e){return Sc(e,"TopicConfiguration")},(p={}).filterSensitiveLog=function(e){return eh({},e)},p.isa=function(e){return Sc(e,"Transition")},(dr={}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},dr.isa=function(e){return Sc(e,"UploadPartCopyOutput")},(pi={}).filterSensitiveLog=function(e){return eh(eh(eh({},e),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Nc}),e.SSECustomerKey&&{SSECustomerKey:Nc})},pi.isa=function(e){return Sc(e,"UploadPartCopyRequest")},(yt=dg=dg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Nc})},yt.isa=function(e){return Sc(e,"UploadPartOutput")},(gn=hg=hg||{}).filterSensitiveLog=function(e){return eh(eh({},e),e.SSECustomerKey&&{SSECustomerKey:Nc})},gn.isa=function(e){return Sc(e,"UploadPartRequest")},(_w={}).filterSensitiveLog=function(e){return eh({},e)},_w.isa=function(e){return Sc(e,"VersioningConfiguration")},(m={}).filterSensitiveLog=function(e){return eh({},e)},m.isa=function(e){return Sc(e,"WebsiteConfiguration")};var yg=(bg.prototype.withName=function(e){return this.name=e,this},bg.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},bg.prototype.addChildNode=function(e){return this.children.push(e),this},bg.prototype.removeAttribute=function(e){return delete this.attributes[e],this},bg.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=H(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},bg);function bg(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var Sg=(wg.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},wg);function wg(e){this.value=e}function Cg(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function _g(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var Eg,Ag=function(n,e){return th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:kg(n)},n.body,[2,t]})})},Ig=function(n,e){return th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:kg(n)},n.body,[2,t]})})},Pg=function(n,e){return th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:kg(n)},n.body,[2,t]})})},Og=function(e,t){return e.map(function(e){var t,n=e;return e=new yg("CompletedPart"),void 0!==n.ETag&&(t=new yg("ETag").addChildNode(new Sg(n.ETag)).withName("ETag"),e.addChildNode(t)),void 0!==n.PartNumber&&(t=new yg("PartNumber").addChildNode(new Sg(String(n.PartNumber))).withName("PartNumber"),e.addChildNode(t)),e.withName("member")})},Tg=function(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},kg=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Lg=function(e,t){return Cg(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=T.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}});return(t=t[e=Object.keys(t)[0]])["#text"]&&(t[e]=t["#text"],delete t["#text"]),bc(t)}return{}});var n},Rg=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},xg=(Qd(Ng,Eg=dn),Ng.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Mh.filterSensitiveLog,outputFilterSensitiveLog:Nh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Ng.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh({"Content-Type":""},_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",mc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(mc).join("/")),r=eh({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Ng.prototype.deserialize=function(e,t){return n=e,r=t,th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,(a=n,u=r,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},a)],s={},[4,Lg(a.body,u)];case 1:switch(i=eh.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Rg(a,i.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,Pg(i)];case 3:return n=eh.apply(void 0,[eh.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:kg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=eh(eh({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:kg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})}))]:(t={$metadata:kg(n),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Cg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var a,u})});var n,r},Ng);function Ng(e){var t=Eg.call(this)||this;return t.input=e,t}var Mg,Ug=(Qd(Dg,Mg=dn),Dg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Dh.filterSensitiveLog,outputFilterSensitiveLog:Uh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Dg.prototype.serialize=function(e,t){return l=e,p=t,th(void 0,void 0,void 0,function(){var r,i,o,s,a,u,c;return nh(this,function(e){switch(e.label){case 0:if(r=eh({"Content-Type":"application/xml"},_g(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),i="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((a=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(i=i.replace("{Bucket}",mc(a)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((a=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return i=i.replace("{Key+}",a.split("/").map(mc).join("/")),o=eh({},void 0!==l.UploadId&&{uploadId:l.UploadId}),void 0!==l.MultipartUpload&&(t=l.MultipartUpload,n=new yg("CompletedMultipartUpload"),void 0!==t.Parts&&Og(t.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),s='<?xml version="1.0" encoding="UTF-8"?>',(u=n).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=u.toString()),[4,p.endpoint()];case 1:return c=e.sent(),a=c.hostname,u=void 0===(u=c.protocol)?"https":u,c=c.port,[2,new Zs({protocol:u,hostname:a,port:c,method:"POST",headers:r,path:i,query:o,body:s})]}var t,n})});var l,p},Dg.prototype.deserialize=function(e,t){return o=e,s=t,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&400<=o.statusCode?[2,(r=o,i=s,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:kg(o),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==o.headers["x-amz-version-id"]&&(t.VersionId=o.headers["x-amz-version-id"]),void 0!==o.headers["x-amz-request-charged"]&&(t.RequestCharged=o.headers["x-amz-request-charged"]),void 0!==o.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=o.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==o.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=o.headers["x-amz-server-side-encryption"]),void 0!==o.headers["x-amz-expiration"]&&(t.Expiration=o.headers["x-amz-expiration"]),[4,Lg(o.body,s)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}var r,i})});var o,s},Dg);function Dg(e){var t=Mg.call(this)||this;return t.input=e,t}function Fg(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(h){return function(d){return G(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return K(this,function(e){switch(e.label){case 0:t=j({},d.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=H(o),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(i=r.value,(o=t[i.target])?(u=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):"string"==typeof o?g.utf8Decoder(o):new Uint8Array(o),c=g.base64Encoder(u),(o=new g.md5).update(u),s=[j({},t)],(f={})[i.target]=c,a=i.hash,c=(u=g).base64Encoder,[4,o.digest()]):[3,4]);case 3:t=j.apply(void 0,s.concat([(f[a]=c.apply(u,[e.sent()]),f)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l={error:l=e.sent()},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},d),{input:t}))]}})})}}}(t),qg)}}}var jg,qg={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},Bg=(Qd(Vg,jg=dn),Vg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:qh.filterSensitiveLog,outputFilterSensitiveLog:jh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Vg.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh({"Content-Type":""},_g(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),_g(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),_g(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),_g(a.Tagging)&&{"x-amz-tagging":a.Tagging}),_g(a.ACL)&&{"x-amz-acl":a.ACL}),_g(a.Expires)&&{Expires:Ic(a.Expires).toString()}),_g(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),_g(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),_g(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),_g(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),_g(a.CacheControl)&&{"Cache-Control":a.CacheControl}),_g(a.ContentType)&&{"Content-Type":a.ContentType}),_g(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),_g(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),_g(a.ContentLanguage)&&{"Content-Language":a.ContentLanguage}),_g(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),_g(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),_g(a.ContentDisposition)&&{"Content-Disposition":a.ContentDisposition}),_g(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),_g(a.ContentEncoding)&&{"Content-Encoding":a.ContentEncoding}),_g(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),_g(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),_g(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=a.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",mc(o)),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Vg.prototype.deserialize=function(e,t){return o=e,s=t,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&400<=o.statusCode?[2,(r=o,i=s,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:kg(o),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==o.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=o.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==o.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=o.headers["x-amz-server-side-encryption-context"]),void 0!==o.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=o.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==o.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=o.headers["x-amz-abort-rule-id"]),void 0!==o.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=o.headers["x-amz-server-side-encryption"]),void 0!==o.headers["x-amz-request-charged"]&&(t.RequestCharged=o.headers["x-amz-request-charged"]),void 0!==o.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(o.headers["x-amz-abort-date"])),void 0!==o.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=o.headers["x-amz-server-side-encryption-aws-kms-key-id"]),[4,Lg(o.body,s)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var r,i})});var o,s},Vg);function Vg(e){var t=jg.call(this)||this;return t.input=e,t}var zg,Gg=(Qd(Kg,zg=dn),Kg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Vh.filterSensitiveLog,outputFilterSensitiveLog:Bh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Kg.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh(eh(eh({"Content-Type":""},_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),_g(a.MFA)&&{"x-amz-mfa":a.MFA}),_g(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",mc(o)),r=eh({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Kg.prototype.deserialize=function(e,t){return n=e,o=t,th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,(r=n,i=o,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:kg(n),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),[4,Cg(n.body,o)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,i})});var n,o},Kg);function Kg(e){var t=zg.call(this)||this;return t.input=e,t}var Hg,Wg=(Qd($g,Hg=dn),$g.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Hh.filterSensitiveLog,outputFilterSensitiveLog:Kh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},$g.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh(eh(eh(eh(eh(eh(eh(eh(eh({"Content-Type":""},_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),_g(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),_g(a.IfNoneMatch)&&{"If-None-Match":a.IfNoneMatch}),_g(a.IfMatch)&&{"If-Match":a.IfMatch}),_g(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),_g(a.Range)&&{Range:a.Range}),_g(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),_g(a.IfModifiedSince)&&{"If-Modified-Since":Ic(a.IfModifiedSince).toString()}),_g(a.IfUnmodifiedSince)&&{"If-Unmodified-Since":Ic(a.IfUnmodifiedSince).toString()}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",mc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(mc).join("/")),r=eh(eh(eh(eh(eh(eh(eh(eh({"x-id":"GetObject"},void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},$g.prototype.deserialize=function(e,t){return r=e,i=t,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,(a=r,u=i,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},a)],s={},[4,Lg(a.body,u)];case 1:switch(i=eh.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Rg(a,i.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return r=[{}],[4,Ig(i)];case 3:return n=eh.apply(void 0,[eh.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:kg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=eh(eh({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:kg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})}))]:(t={$metadata:kg(r),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)]);var a,u})});var r,i},$g);function $g(e){var t=Hg.call(this)||this;return t.input=e,t}var Jg,Yg=(Qd(Zg,Jg=dn),Zg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Xh.filterSensitiveLog,outputFilterSensitiveLog:Zh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Zg.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh({"Content-Type":""},_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",mc(o)),r=eh(eh(eh(eh(eh({},void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.Prefix&&{prefix:a.Prefix}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Delimiter&&{delimiter:a.Delimiter}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Zg.prototype.deserialize=function(e,t){return r=e,i=t,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,(a=r,u=i,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},a)],s={},[4,Lg(a.body,u)];case 1:switch(i=eh.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Rg(a,i.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,Ag(i)];case 3:return n=eh.apply(void 0,[eh.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:kg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=eh(eh({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:kg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})}))]:(t={$metadata:kg(r),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Lg(r.body,i)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=(yc(n.CommonPrefixes)||[]).map(function(e){return t={__type:"CommonPrefix",Prefix:void 0},void 0!==e.Prefix&&(t.Prefix=e.Prefix),t;var t})),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=(yc(n.Contents)||[]).map(function(e){return t={__type:"Object",Owner:void 0,StorageClass:void 0,LastModified:void 0,ETag:void 0,Size:void 0,Key:void 0},void 0!==e.Owner&&(t.Owner=Tg(e.Owner)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.Key&&(t.Key=e.Key),t;var t})),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}var a,u})});var r,i},Zg);function Zg(e){var t=Jg.call(this)||this;return t.input=e,t}var Xg,Qg=(Qd(ev,Xg=dn),ev.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:eg.filterSensitiveLog,outputFilterSensitiveLog:Qh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},ev.prototype.serialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return nh(this,function(e){switch(e.label){case 0:if(t=eh({"Content-Type":""},_g(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",mc(o)),r=eh(eh(eh({"x-id":"ListParts"},void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker.toString()}),void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},ev.prototype.deserialize=function(e,t){return a=e,u=t,th(void 0,void 0,void 0,function(){var o,s;return nh(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&400<=a.statusCode?[2,(r=a,i=u,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(o={$metadata:kg(a),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==a.headers["x-amz-abort-rule-id"]&&(o.AbortRuleId=a.headers["x-amz-abort-rule-id"]),void 0!==a.headers["x-amz-abort-date"]&&(o.AbortDate=new Date(a.headers["x-amz-abort-date"])),void 0!==a.headers["x-amz-request-charged"]&&(o.RequestCharged=a.headers["x-amz-request-charged"]),[4,Lg(a.body,u)]);case 1:return void 0!==(s=e.sent()).Bucket&&(o.Bucket=s.Bucket),void 0!==s.Initiator&&(o.Initiator=(t=s.Initiator,n={__type:"Initiator",ID:void 0,DisplayName:void 0},void 0!==t.ID&&(n.ID=t.ID),void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),n)),void 0!==s.IsTruncated&&(o.IsTruncated="true"==s.IsTruncated),void 0!==s.Key&&(o.Key=s.Key),void 0!==s.MaxParts&&(o.MaxParts=parseInt(s.MaxParts)),void 0!==s.NextPartNumberMarker&&(o.NextPartNumberMarker=parseInt(s.NextPartNumberMarker)),void 0!==s.Owner&&(o.Owner=Tg(s.Owner)),void 0!==s.PartNumberMarker&&(o.PartNumberMarker=parseInt(s.PartNumberMarker)),""===s.Part&&(o.Parts=[]),void 0!==s.Part&&(o.Parts=(yc(s.Part)||[]).map(function(e){return t={__type:"Part",ETag:void 0,PartNumber:void 0,LastModified:void 0,Size:void 0},void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t;var t})),void 0!==s.StorageClass&&(o.StorageClass=s.StorageClass),void 0!==s.UploadId&&(o.UploadId=s.UploadId),[2,Promise.resolve(o)]}var t,n,r,i})});var a,u},ev);function ev(e){var t=Xg.call(this)||this;return t.input=e,t}var tv,nv=(Qd(rv,tv=dn),rv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:ig.filterSensitiveLog,outputFilterSensitiveLog:rg.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},rv.prototype.serialize=function(e,t){return u=e,c=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return nh(this,function(e){switch(e.label){case 0:if(t=eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh(eh({"Content-Type":"application/octet-stream"},_g(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),_g(u.Tagging)&&{"x-amz-tagging":u.Tagging}),_g(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),_g(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),_g(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),_g(u.Expires)&&{Expires:Ic(u.Expires).toString()}),_g(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),_g(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),_g(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),_g(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),_g(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),_g(u.ContentDisposition)&&{"Content-Disposition":u.ContentDisposition}),_g(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),_g(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),_g(u.ContentEncoding)&&{"Content-Encoding":u.ContentEncoding}),_g(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),_g(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),_g(u.CacheControl)&&{"Cache-Control":u.CacheControl}),_g(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),_g(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),_g(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),_g(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),_g(u.ContentLanguage)&&{"Content-Language":u.ContentLanguage}),_g(u.ACL)&&{"x-amz-acl":u.ACL}),_g(u.ContentType)&&{"Content-Type":u.ContentType}),_g(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=u.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",mc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(mc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Zs({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},rv.prototype.deserialize=function(e,t){return n=e,o=t,th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,(r=n,i=o,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:kg(n),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),[4,Cg(n.body,o)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,i})});var n,o},rv);function rv(e){var t=tv.call(this)||this;return t.input=e,t}var iv,ov=(Qd(sv,iv=dn),sv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(wh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:hg.filterSensitiveLog,outputFilterSensitiveLog:dg.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},sv.prototype.serialize=function(e,t){return u=e,c=t,th(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return nh(this,function(e){switch(e.label){case 0:if(t=eh(eh(eh(eh(eh(eh({"Content-Type":"application/octet-stream"},_g(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),_g(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),_g(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),_g(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),_g(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),_g(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",mc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(mc).join("/")),r=eh(eh({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Zs({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},sv.prototype.deserialize=function(e,t){return n=e,o=t,th(void 0,void 0,void 0,function(){var t;return nh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,(r=n,i=o,th(void 0,void 0,void 0,function(){var t,n;return nh(this,function(e){switch(e.label){case 0:return t=[eh({},r)],n={},[4,Lg(r.body,i)];case 1:return t=eh.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Rg(r,t.body),t=t.body,n=t.code||t.Code||n,t=eh(eh({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:kg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:kg(n),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),[4,Cg(n.body,o)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,i})});var n,o},sv);function sv(e){var t=iv.call(this)||this;return t.input=e,t}function av(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,e=e.hostname;return r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i),(n=n?ha(n):"")&&"?"!==n[0]&&(n="?"+n),r+"//"+e+i+n}var uv=(cv.prototype.presign=function(t,e){void 0===e&&(e={});var n=e.unsignableHeaders,r=void 0===n?new Set:n,i=q(e,["unsignableHeaders"]);return G(this,void 0,void 0,function(){return K(this,function(e){return r.add("content-type"),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r},i))]})})},cv);function cv(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e),this.signer=new ec(e)}var lv=new E.ConsoleLogger("axios-http-handler"),pv="sendProgress",fv=(dv.prototype.destroy=function(){},dv.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;!e.query||(s=ha(e.query))&&(i+="?"+s);var o,s=e.port,s=e.protocol+"//"+e.hostname+(s?":"+s:"")+i;return(i={}).url=s,i.method=e.method,i.headers=e.headers,delete i.headers.host,e.body?i.data=e.body:i.headers["Content-Type"]&&(i.data=null),r&&(i.onUploadProgress=function(e){r.emit(pv,e),lv.debug(e)}),i.responseType="blob",n=[k.request(i).then(function(e){return{response:new Js({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw lv.error(e),e}),(void 0===(o=n)&&(o=0),new Promise(function(e,t){o&&setTimeout(function(){var e=new Error("Request did not complete within "+o+" ms");e.name="TimeoutError",t(e)},o)}))],Promise.race(n)},dv);function dv(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}for(var hv={},gv=new Array(64),vv=0,mv="A".charCodeAt(0),yv="Z".charCodeAt(0);vv+mv<=yv;vv++){var bv=String.fromCharCode(vv+mv);gv[hv[bv]=vv]=bv}for(mv="a".charCodeAt(vv=0),yv="z".charCodeAt(0);vv+mv<=yv;vv++){var bv=String.fromCharCode(vv+mv),Sv=vv+26;gv[hv[bv]=Sv]=bv}for(vv=0;vv<10;vv++)hv[vv.toString(10)]=vv+52,bv=vv.toString(10),Sv=vv+52,gv[hv[bv]=Sv]=bv;gv[hv["+"]=62]="+",gv[hv["/"]=63]="/";function wv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Cv(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var _v=function(){return(_v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ev=new E.ConsoleLogger("AWSS3ProviderManagedUpload"),Av=(Iv.prototype.upload=function(){return wv(this,void 0,void 0,function(){var t,n,r,i,o;return Cv(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new nv(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=5;case 5:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),o=this.createParts(i),[4,this.uploadParts(r,o)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},Iv.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new L.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},Iv.prototype.createMultiPartUpload=function(){return wv(this,void 0,void 0,function(){var t;return Cv(this,function(e){switch(e.label){case 0:return t=new Bg(this.params),[4,this._createNewS3Client(this.opts)];case 1:return[4,e.sent().send(t)];case 2:return t=e.sent(),Ev.debug(t.UploadId),[2,t.UploadId]}})})},Iv.prototype.uploadParts=function(l,p){return wv(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return Cv(this,function(e){switch(e.label){case 0:a=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(i=n.value,this.setupEventListener(i),r={PartNumber:i.partNumber,Body:i.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new ov(r),[4,this._createNewS3Client(this.opts,i.emitter)]);case 3:i=e.sent(),a.push(i.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u={error:u=e.sent()},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(a)];case 9:for(o=e.sent(),s=0;s<o.length;s++)this.multiPartMap.push({PartNumber:p[s].partNumber,ETag:o[s].ETag});return[3,11];case 10:return a=e.sent(),Ev.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 11:return[2]}})})},Iv.prototype.finishMultiPartUpload=function(r){return wv(this,void 0,void 0,function(){var t,n;return Cv(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new Ug(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),Ev.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},Iv.prototype.checkIfUploadCancelled=function(r){return wv(this,void 0,void 0,function(){var t,n;return Cv(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Iv.prototype.cancelUpload=function(){this.cancel=!0},Iv.prototype.cleanup=function(r){return wv(this,void 0,void 0,function(){var t,n;return Cv(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new xg(n))];case 2:return e.sent(),[4,t.send(new Qg(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Iv.prototype.setupEventListener=function(t){var n=this;t.emitter.on(pv,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Iv.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(pv,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Iv.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Iv.prototype.validateAndSanitizeBody=function(n){return wv(this,void 0,void 0,function(){return Cv(this,function(e){switch(e.label){case 0:return this.isGenericObject(n)?[2,JSON.stringify(n)]:[3,1];case 1:return this.isBlob(n)?E.Platform.isReactNative?[4,(t=n,("function"==typeof Blob&&t instanceof Blob?function(r){return G(this,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var i=new FileReader;i.onloadend=function(){if(2!==i.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=i.result)&&void 0!==t?t:"",t=-1<(t=e.indexOf(","))?t+1:e.length;n(e.substring(t))},i.onabort=function(){return r(new Error("Read aborted"))},i.onerror=function(){return r(i.error)},i.readAsDataURL(t)}))];case 1:return n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var i=0,o=0,s=r,a=r+3;s<=a;s++)"="!==e[s]?(i|=hv[e[s]]<<6*(a-s),o+=6):i>>=6;var u=r/4*3;i>>=o%8;for(var c=Math.floor(o/8),l=0;l<c;l++){var p=8*(c-l-1);n.setUint8(u+l,(i&255<<p)>>p)}}return new Uint8Array(t)}(n=e.sent()),[2,new Uint8Array(n)]}var t})})}:function(s){return G(this,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),i=s.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,i.read()];case 2:return o=e.sent(),r=o.done,(i=o.value)&&(o=t,(t=new Uint8Array(o.length+i.length)).set(o),t.set(i,o.length)),n=r,[3,1];case 3:return[2,t]}})})})(t))]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,n]}var t})})},Iv.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},Iv.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Iv.prototype._createNewS3Client=function(i,o){return wv(this,void 0,void 0,function(){var t,n,r;return Cv(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=i.region,r=i.dangerouslyConnectToHttpEndpointForTesting,(r=new vg(_v(_v({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new fv({},o),customUserAgent:E.getAmplifyUserAgent(),urlParser:ou}))).middlewareStack.remove("contentLengthMiddleware"),[2,r]}})})},Iv.prototype._getCredentials=function(){return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),Ev.debug("set credentials for storage",e),e)}).catch(function(e){return Ev.warn("ensure credentials error",e),!1})},Iv);function Iv(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Pv(e,t,n,r,i){e&&(n={attrs:n},r&&(n.metrics=r),E.Hub.dispatch("storage",{event:t,data:n,message:i},"Storage",Rv))}function Ov(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Tv(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var kv=function(){return(kv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Lv=new E.ConsoleLogger("AWSS3Provider"),Rv="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",xv=(Nv.prototype.getCategory=function(){return Nv.CATEGORY},Nv.prototype.getProviderName=function(){return Nv.PROVIDER_NAME},Nv.prototype.configure=function(e){return Lv.debug("configure Storage",e),e&&(e=E.Parser.parseMobilehubConfig(e),this._config=Object.assign({},this._config,e.Storage),this._config.bucket||Lv.debug("Do not have bucket yet")),this._config},Nv.prototype.get=function(v,m){return Ov(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return Tv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(d=Object.assign({},this._config,m),t=d.bucket,l=d.download,n=d.cacheControl,r=d.contentDisposition,i=d.contentEncoding,o=d.contentLanguage,s=d.contentType,a=d.expires,u=d.track,c=this._prefix(d),c+=v,d=this._createNewS3Client(d),Lv.debug("get "+v+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),i&&(c.ResponseContentEncoding=i),o&&(c.ResponseContentLanguage=o),s&&(c.ResponseContentType=s),!0!==l)return[3,5];l=new Wg(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,d.send(l)];case 3:return p=e.sent(),Pv(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+v),[2,p];case 4:throw p=e.sent(),Pv(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=a||900,e.label=6;case 6:return e.trys.push([6,9,,10]),f=new uv(kv({},d.config)),[4,function(i,o){return G(this,void 0,void 0,function(){var t,n,r=this;return K(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return G(r,void 0,void 0,function(){return K(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=i.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,o.resolveMiddleware(n,i.config,void 0)(o).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(d,new Wg(c))];case 7:return d=e.sent(),h=av,[4,f.presign(d,{expiresIn:c.Expires})];case 8:return g=h.apply(void 0,[e.sent()]),Pv(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+g),[2,g];case 9:throw g=e.sent(),Lv.warn("get signed url error",g),Pv(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+v),g;case 10:return[2]}})})},Nv.prototype.put=function(b,S,w){return Ov(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v,m,y;return Tv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];m=Object.assign({},this._config,w),t=m.bucket,n=m.track,r=m.progressCallback,h=m.contentType,i=m.contentDisposition,o=m.cacheControl,s=m.expires,a=m.metadata,u=m.tagging,c=m.acl,l=m.serverSideEncryption,p=m.SSECustomerAlgorithm,f=m.SSECustomerKey,d=m.SSECustomerKeyMD5,v=m.SSEKMSKeyId,g=h||"binary/octet-stream",h=this._prefix(m),h+=b,Lv.debug("put "+b+" to "+h),g={Bucket:t,Key:h,Body:S,ContentType:g},o&&(g.CacheControl=o),i&&(g.ContentDisposition=i),s&&(g.Expires=s),a&&(g.Metadata=a),u&&(g.Tagging=u),l&&(g.ServerSideEncryption=l,p&&(g.SSECustomerAlgorithm=p),f&&(g.SSECustomerKey=f),d&&(g.SSECustomerKeyMD5=d),v&&(g.SSEKMSKeyId=v)),v=new L.EventEmitter,m=new Av(g,m,v),c&&(g.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),v.on("sendProgress",function(e){r&&("function"==typeof r?r(e):Lv.warn("progressCallback should be a function, not a "+typeof r))}),[4,m.upload()];case 3:return y=e.sent(),Lv.debug("upload result",y),Pv(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw y=e.sent(),Lv.warn("error uploading",y),Pv(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),y;case 5:return[2]}})})},Nv.prototype.remove=function(s,a){return Ov(this,void 0,void 0,function(){var t,n,r,i,o;return Tv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,a),t=r.bucket,n=r.track,i=this._prefix(r),i+=s,r=this._createNewS3Client(r),Lv.debug("remove "+s+" from "+i),i=new Gg({Bucket:t,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=e.sent(),Pv(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,o];case 4:throw o=e.sent(),Pv(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+o),o;case 5:return[2]}})})},Nv.prototype.list=function(u,c){return Ov(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return Tv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];o=Object.assign({},this._config,c),t=o.bucket,n=o.track,s=o.maxKeys,r=this._prefix(o),i=r+u,o=this._createNewS3Client(o),Lv.debug("list "+u+" from "+i),s=new Yg({Bucket:t,Prefix:i,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.send(s)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Pv(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),Lv.debug("list",a),[2,a];case 4:throw a=e.sent(),Lv.warn("list error",a),Pv(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},Nv.prototype._ensureCredentials=function(){var t=this;return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),Lv.debug("set credentials for storage",e),t._config.credentials=e,!0)}).catch(function(e){return Lv.warn("ensure credentials error",e),!1})},Nv.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},e=e.identityId||t.identityId,t=(void 0!==r.private?r.private:"private/")+e+"/",e=(void 0!==r.protected?r.protected:"protected/")+e+"/",r=void 0!==r.public?r.public:"public/";switch(n){case"private":return t;case"protected":return e;default:return r}},Nv.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new vg(kv(kv({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()},i),{requestHandler:new fv({},t)}))},Nv.CATEGORY="Storage",Nv.PROVIDER_NAME="AWSS3",Nv);function Nv(e){this._config=e||{},Lv.debug("Storage Options",this._config)}function Mv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Uv(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Dv=function(){return(Dv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Fv=new E.ConsoleLogger("StorageClass"),jv="AWSS3",qv=(Bv.prototype.getModuleName=function(){return"Storage"},Bv.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Bv.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Fv.debug("No plugin found with providerName",t),null):e},Bv.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Bv.prototype.configure=function(e){var t=this;if(Fv.debug("configure Storage"),!e)return this._config;function n(t){return o.some(function(e){return e===t})}var r=E.Parser.parseMobilehubConfig(e),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return i&&i.find(n)&&!r.Storage[jv]&&(r.Storage[jv]={}),Object.entries(r.Storage).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2))[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[jv][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=Dv(Dv({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new xv),this._config},Bv.prototype.get=function(r,i){return Mv(this,void 0,void 0,function(){var t,n;return Uv(this,function(e){return t=void 0===(n=(i||{}).provider)?jv:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Fv.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.get(r,i)]})})},Bv.prototype.put=function(r,i,o){return Mv(this,void 0,void 0,function(){var t,n;return Uv(this,function(e){return t=void 0===(n=(o||{}).provider)?jv:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Fv.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.put(r,i,o)]})})},Bv.prototype.remove=function(r,i){return Mv(this,void 0,void 0,function(){var t,n;return Uv(this,function(e){return t=void 0===(n=(i||{}).provider)?jv:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Fv.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.remove(r,i)]})})},Bv.prototype.list=function(r,i){return Mv(this,void 0,void 0,function(){var t,n;return Uv(this,function(e){return t=void 0===(n=(i||{}).provider)?jv:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Fv.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.list(r,i)]})})},Bv);function Bv(){this._config={},this._pluggables=[],Fv.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var Vv=function(){return(Vv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},zv=new E.ConsoleLogger("Storage"),Gv=null,Kv=function(){if(Gv)return Gv;zv.debug("Create Storage Instance, debug"),(Gv=new qv).vault=new qv;var n=Gv.configure;return Gv.configure=function(e){zv.debug("storage configure called");var t=Vv({},n.call(Gv,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Vv(Vv({},t[e]),{level:"private"}))}),zv.debug("storage vault configure called"),Gv.vault.configure(t)},Gv}();E.Amplify.register(Kv);function Hv(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}var Wv=function(){return(Wv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$v=new E.ConsoleLogger("RestClient"),Jv=(Yv.prototype.ajax=function(y,b,S){return e=this,u=function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,e,v=this;return l=this,p=function(e){switch(e.label){case 0:return $v.debug(b,y),t="us-east-1",n="execute-api",r=void 0,"string"==typeof y?(o=this._parseUrl(y),c=y):(c=y.endpoint,r=y.custom_header,t=y.region,n=y.service,o=this._parseUrl(y.endpoint)),i={method:b,url:c,host:o.host,path:o.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},o={},E.Platform.isReactNative&&(s=E.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":s}),s=Object.assign({},S),a=s.response,s.body&&(o["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(s.body)),s.responseType&&(i.responseType=s.responseType),s.withCredentials&&(i.withCredentials=s.withCredentials),s.timeout&&(i.timeout=s.timeout),s.cancellableToken&&(i.cancelToken=s.cancellableToken.token),i.signerServiceInfo=s.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return i.headers=Wv(Wv(Wv({},o),u),s.headers),(c=w.parse(c,!0,!0)).search,c=Hv(c,["search"]),i.url=w.format(Wv(Wv({},c),{query:Wv(Wv({},c.query),s.queryStringParameters||{})})),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,a)]):[2,this.Credentials.get().then(function(e){return v._signed(Wv({},i),e,a,{region:t,service:n}).catch(function(e){if(E.DateUtils.isClockSkewError(e)){var t=(n=e.response.headers)&&(n.date||n.Date),n=new Date(t),t=E.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(E.DateUtils.isClockSkewed(t,n))return E.DateUtils.setClockOffset(n.getTime()-t.getTime()),v.ajax(y,b,S)}throw e})},function(e){return $v.debug("No credentials available, the request will be unsigned"),v._request(i,a)})]}},g={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]},e={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function m(t){return function(e){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;g;)try{if(f=1,d&&(h=2&t[0]?d.return:t[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,t[1])).done)return h;switch(d=0,h&&(t=[2&t[0],h.value]),t[0]){case 0:case 1:h=t;break;case 4:return g.label++,{value:t[1],done:!1};case 5:g.label++,d=t[1],t=[0];continue;case 7:t=g.ops.pop(),g.trys.pop();continue;default:if(!(h=0<(h=g.trys).length&&h[h.length-1])&&(6===t[0]||2===t[0])){g=0;continue}if(3===t[0]&&(!h||t[1]>h[0]&&t[1]<h[3])){g.label=t[1];break}if(6===t[0]&&g.label<h[1]){g.label=h[1],h=t;break}if(h&&g.label<h[2]){g.label=h[2],g.ops.push(t);break}h[2]&&g.ops.pop(),g.trys.pop();continue}t=p.call(l,g)}catch(e){t=[6,e],d=0}finally{f=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())});var e,s,a,u},Yv.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Yv.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Yv.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Yv.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Yv.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Yv.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Yv.prototype.cancel=function(e,t){return(e=this._cancelTokenMap.get(e))&&e.cancel(t),!0},Yv.prototype.isCancel=function(e){return k.isCancel(e)},Yv.prototype.getCancellableToken=function(){return k.CancelToken.source()},Yv.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},Yv.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Yv.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,r=e.signerServiceInfo,e=Hv(e,["signerServiceInfo"]),o=o||this._region||this._options.region,i=i||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},i={region:o,service:i},r=Object.assign(i,r);return(r=E.Signer.sign(e,t,r)).data&&(r.body=r.data),$v.debug("Signed Request: ",r),delete r.headers.host,k(r).then(function(e){return n?e:e.data}).catch(function(e){throw $v.debug(e),e})},Yv.prototype._request=function(e,t){return void 0===t&&(t=!1),k(e).then(function(e){return t?e:e.data}).catch(function(e){throw $v.debug(e),e})},Yv.prototype._parseUrl=function(e){return{host:(e=e.split("/"))[2],path:"/"+e.slice(3).join("/")}},Yv);function Yv(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=E.Credentials,this._options=e,$v.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var Zv=function(){return(Zv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Xv=new E.ConsoleLogger("RestAPI"),Qv=(em.prototype.getModuleName=function(){return"RestAPI"},em.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}(t,["API"]),t=Zv(Zv({},t),e);return Xv.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Xv.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},em.prototype.createInstance=function(){return Xv.debug("create Rest API instance"),this._api=new Jv(this._options),this._api.Credentials=this.Credentials,!0},em.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.get(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.post(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.put(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.patch(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.del(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);return o.cancellableToken=i,o=this._api.head(r,o),this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},em.prototype.isCancel=function(e){return this._api.isCancel(e)},em.prototype.cancel=function(e,t){return this._api.cancel(e,t)},em.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._api.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,i,o,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((c=c.apply(e,s||[])).next())});var e,s,a,c},em.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");if(!(n=n.find(function(e){return e.name===t})))throw new Error("API "+t+" does not exist");return e={endpoint:n.endpoint+e},"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},em);function em(e){this._api=null,this.Credentials=E.Credentials,this._options=e,Xv.debug("API Options",this._options)}function tm(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function nm(e,t){var n=rm(o=e.locationOffset.column-1)+e.body,r=t.line-1,i=e.locationOffset.line-1,i=t.line+i,o=1===t.line?o:0,o=t.column+o,n=n.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(i,":").concat(o,")\n")+function(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=0,r=!0,i=!1,e=void 0;try{for(var o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)var s=s.value[0],n=Math.max(n,s.length)}catch(t){i=!0,e=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw e}}return t.map(function(e){var t=e[0],e=e[1];return rm(n-t.length)+t+e}).join("\n")}([["".concat(i-1,": "),n[r-1]],["".concat(i,": "),n[r]],["",rm(o-1)+"^"],["".concat(i+1,": "),n[1+r]]])}function rm(e){return Array(e+1).join(" ")}function im(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0;!(t=n)&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;!c&&a&&(c=a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),c&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return tm(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(tm(t.loc.source,t.loc.start)),e},[])),s=s||o&&o.extensions,Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:o},extensions:{value:s||void 0,enumerable:Boolean(s)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,im):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}hn=new Qv(null),E.Amplify.register(hn),im.prototype=Object.create(Error.prototype,{constructor:{value:im},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o=e.nodes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var s=s.value;s.loc&&t.push(nm(s.loc.source,tm(s.loc.source,s.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var a=e.source,u=!0,r=!1,i=void 0;try{for(var c=e.locations[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){var l=l.value;t.push(nm(a,l))}}catch(e){r=!0,i=e}finally{try{u||null==c.return||c.return()}finally{if(r)throw i}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var om={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},sm={};function am(e){return Boolean(e&&"string"==typeof e.kind)}function um(e){return function(e,t,n){var r=2<arguments.length&&void 0!==n?n:om,i=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,f=[],d=[],h=e;do{var g=++a===s.length,v=g&&0!==u.length;if(g){if(l=0===d.length?void 0:f[f.length-1],c=p,p=d.pop(),v){if(o)c=c.slice();else{var m,y={};for(m in c)c.hasOwnProperty(m)&&(y[m]=c[m]);c=y}for(var b=0,S=0;S<u.length;S++){var w=u[S][0],C=u[S][1];o&&(w-=b),o&&null===C?(c.splice(w,1),b++):c[w]=C}}a=i.index,s=i.keys,u=i.edits,o=i.inArray,i=i.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:h))continue;p&&f.push(l)}var _=void 0;if(!Array.isArray(c)){if(!am(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t){var n=e[t];if(n){if(!g&&"function"==typeof n)return n;if("function"==typeof(n=g?n.leave:n.enter))return n}else if(e=g?e.leave:e.enter){if("function"==typeof e)return e;if("function"==typeof(t=e[t]))return t}}(t,c.kind);if(E){if((_=E.call(t,c,l,p,f,d))===sm)break;if(!1===_){if(!g){f.pop();continue}}else if(void 0!==_&&(u.push([l,_]),!g)){if(!am(_)){f.pop();continue}c=_}}}void 0===_&&v&&u.push([l,c]),g?f.pop():(i={inArray:o,index:a,keys:s,edits:u,prev:i},s=(o=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&d.push(p),p=c)}while(void 0!==i);return 0!==u.length&&(h=u[u.length-1][1]),h}(e,{leave:cm})}var cm={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return pm(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=dm("(",pm(e.variableDefinitions,", "),")"),i=pm(e.directives," "),e=e.selectionSet;return n||i||r||"query"!==t?pm([t,pm([n,r]),i,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+dm(" = ",r)+dm(" ",pm(e," "))},SelectionSet:function(e){return fm(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,e=e.selectionSet;return pm([dm("",t,": ")+n+dm("(",pm(r,", "),")"),pm(i," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+dm(" ",pm(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return pm(["...",dm("on ",t),pm(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(dm("(",pm(r,", "),")")," ")+"on ".concat(n," ").concat(dm("",pm(i," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:hm(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+pm(e.values,", ")+"]"},ObjectValue:function(e){return"{"+pm(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+dm("(",pm(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return pm(["schema",pm(t," "),fm(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:lm(function(e){return pm(["scalar",e.name,pm(e.directives," ")]," ")}),ObjectTypeDefinition:lm(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return pm(["type",t,dm("implements ",pm(n," & ")),pm(r," "),fm(e)]," ")}),FieldDefinition:lm(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?dm("(",pm(n,", "),")"):dm("(\n",hm(pm(n,"\n")),"\n)"))+": "+r+dm(" ",pm(e," "))}),InputValueDefinition:lm(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return pm([t+": "+n,dm("= ",r),pm(e," ")]," ")}),InterfaceTypeDefinition:lm(function(e){var t=e.name,n=e.directives,e=e.fields;return pm(["interface",t,pm(n," "),fm(e)]," ")}),UnionTypeDefinition:lm(function(e){var t=e.name,n=e.directives,e=e.types;return pm(["union",t,pm(n," "),e&&0!==e.length?"= "+pm(e," | "):""]," ")}),EnumTypeDefinition:lm(function(e){var t=e.name,n=e.directives,e=e.values;return pm(["enum",t,pm(n," "),fm(e)]," ")}),EnumValueDefinition:lm(function(e){return pm([e.name,pm(e.directives," ")]," ")}),InputObjectTypeDefinition:lm(function(e){var t=e.name,n=e.directives,e=e.fields;return pm(["input",t,pm(n," "),fm(e)]," ")}),DirectiveDefinition:lm(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?dm("(",pm(n,", "),")"):dm("(\n",hm(pm(n,"\n")),"\n)"))+" on "+pm(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return pm(["extend schema",pm(t," "),fm(e)]," ")},ScalarTypeExtension:function(e){return pm(["extend scalar",e.name,pm(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return pm(["extend type",t,dm("implements ",pm(n," & ")),pm(r," "),fm(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return pm(["extend interface",t,pm(n," "),fm(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return pm(["extend union",t,pm(n," "),e&&0!==e.length?"= "+pm(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return pm(["extend enum",t,pm(n," "),fm(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return pm(["extend input",t,pm(n," "),fm(e)]," ")}};function lm(t){return function(e){return pm([e.description,t(e)],"\n")}}function pm(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function fm(e){return e&&0!==e.length?"{\n"+hm(pm(e,"\n"))+"\n}":""}function dm(e,t,n){return t?e+t+(n||""):""}function hm(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function gm(e){return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(t){return t&&"object"===gm(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(vm).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(vm(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function mm(e,t){if(!e)throw new Error(t)}function ym(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bm(e,t,n){ym(this,"body",void 0),ym(this,"name",void 0),ym(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||mm(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||mm(0,"column in locationOffset is 1-indexed and must be positive")}function Sm(e,t,n){return new im("Syntax Error: ".concat(n),void 0,e,[t])}function wm(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function Cm(e){return wm(e)===e.length}function _m(){return this.lastToken=this.token,this.token=this.lookahead()}function Em(){var e=this.token;if(e.kind!==Am.EOF)for(;(e=e.next||(e.next=function(e,t){var n,u=e.source,r=u.body,i=r.length,o=function(e,t,n){for(var r=e.length,i=t;i<r;){var o=Pm.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===Pm.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,e=1+o-e.lineStart;if(i<=o)return new Tm(Am.EOF,i,i,s,e,t);switch(i=Pm.call(r,o)){case 33:return new Tm(Am.BANG,o,o+1,s,e,t);case 35:return function(e,t,n,r){for(var i,o=u.body,s=e;null!==(i=Pm.call(o,++s))&&(31<i||9===i););return new Tm(Am.COMMENT,e,s,t,n,r,Om.call(o,e+1,s))}(o,s,e,t);case 36:return new Tm(Am.DOLLAR,o,o+1,s,e,t);case 38:return new Tm(Am.AMP,o,o+1,s,e,t);case 40:return new Tm(Am.PAREN_L,o,o+1,s,e,t);case 41:return new Tm(Am.PAREN_R,o,o+1,s,e,t);case 46:if(46===Pm.call(r,o+1)&&46===Pm.call(r,o+2))return new Tm(Am.SPREAD,o,o+3,s,e,t);break;case 58:return new Tm(Am.COLON,o,o+1,s,e,t);case 61:return new Tm(Am.EQUALS,o,o+1,s,e,t);case 64:return new Tm(Am.AT,o,o+1,s,e,t);case 91:return new Tm(Am.BRACKET_L,o,o+1,s,e,t);case 93:return new Tm(Am.BRACKET_R,o,o+1,s,e,t);case 123:return new Tm(Am.BRACE_L,o,o+1,s,e,t);case 124:return new Tm(Am.PIPE,o,o+1,s,e,t);case 125:return new Tm(Am.BRACE_R,o,o+1,s,e,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var i=u.body,o=i.length,s=e+1,a=0;s!==o&&null!==(a=Pm.call(i,s))&&(95===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122);)++s;return new Tm(Am.NAME,e,s,t,n,r,Om.call(i,e,s))}(o,s,e,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,n=!1;if(45===a&&(a=Pm.call(s,++u)),48===a){if(48<=(a=Pm.call(s,++u))&&a<=57)throw Sm(e,u,"Invalid number, unexpected digit after 0: ".concat(km(a),"."))}else u=Lm(e,u,a),a=Pm.call(s,u);return 46===a&&(n=!0,a=Pm.call(s,++u),u=Lm(e,u,a),a=Pm.call(s,u)),69!==a&&101!==a||(n=!0,43!==(a=Pm.call(s,++u))&&45!==a||(a=Pm.call(s,++u)),u=Lm(e,u,a)),new Tm(n?Am.FLOAT:Am.INT,t,u,r,i,o,Om.call(s,t,u))}(u,o,i,s,e,t);case 34:return(34===Pm.call(r,o+1)&&34===Pm.call(r,o+2)?function(e,t,n,r,i){for(var o=e.body,s=t+3,a=s,u=0,c="";s<o.length&&null!==(u=Pm.call(o,s));){if(34===u&&34===Pm.call(o,s+1)&&34===Pm.call(o,s+2))return c+=Om.call(o,a,s),new Tm(Am.BLOCK_STRING,t,s+3,n,r,i,function(){for(var e=c.split(/\r\n|[\n\r]/g),t=null,n=1;n<e.length;n++){var r=e[n],i=wm(r);if(i<r.length&&(null===t||i<t)&&0===(t=i))break}if(t)for(var o=1;o<e.length;o++)e[o]=e[o].slice(t);for(;0<e.length&&Cm(e[0]);)e.shift();for(;0<e.length&&Cm(e[e.length-1]);)e.pop();return e.join("\n")}());if(u<32&&9!==u&&10!==u&&13!==u)throw Sm(e,s,"Invalid character within String: ".concat(km(u),"."));92===u&&34===Pm.call(o,s+1)&&34===Pm.call(o,s+2)&&34===Pm.call(o,s+3)?(c+=Om.call(o,a,s)+'"""',a=s+=4):++s}throw Sm(e,s,"Unterminated string.")}:function(e,t,n,r,i){for(var o,s,a,u,c=e.body,l=t+1,p=l,f=0,d="";l<c.length&&null!==(f=Pm.call(c,l))&&10!==f&&13!==f;){if(34===f)return d+=Om.call(c,p,l),new Tm(Am.STRING,t,l+1,n,r,i,d);if(f<32&&9!==f)throw Sm(e,l,"Invalid character within String: ".concat(km(f),"."));if(++l,92===f){switch(d+=Om.call(c,p,l-1),f=Pm.call(c,l)){case 34:d+='"';break;case 47:d+="/";break;case 92:d+="\\";break;case 98:d+="\b";break;case 102:d+="\f";break;case 110:d+="\n";break;case 114:d+="\r";break;case 116:d+="\t";break;case 117:var h=(o=Pm.call(c,l+1),s=Pm.call(c,l+2),a=Pm.call(c,l+3),u=Pm.call(c,l+4),Rm(o)<<12|Rm(s)<<8|Rm(a)<<4|Rm(u));if(h<0)throw Sm(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));d+=String.fromCharCode(h),l+=4;break;default:throw Sm(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(f),"."))}p=++l}}throw Sm(e,l,"Unterminated string.")})(u,o,s,e,t)}throw Sm(u,o,(n=i)<32&&9!==n&&10!==n&&13!==n?"Cannot contain the invalid character ".concat(km(n),"."):39!==n?"Cannot parse the unexpected character ".concat(km(n),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}(this,e))).kind===Am.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(bm.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Am=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Im(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var Pm=String.prototype.charCodeAt,Om=String.prototype.slice;function Tm(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function km(e){return isNaN(e)?Am.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Lm(e,t,n){var r=e.body,i=t,o=n;if(48<=o&&o<=57){for(;48<=(o=Pm.call(r,++i))&&o<=57;);return i}throw Sm(e,i,"Invalid number, expected digit but got: ".concat(km(o),"."))}function Rm(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Tm.prototype.toJSON=Tm.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var xm=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Nm=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Mm(e,t){var n="string"==typeof e?new bm(e):e;if(!(n instanceof bm))throw new TypeError("Must provide Source. Received: ".concat(vm(n)));return n=(t=n={source:e=n,options:n=t||{},lastToken:t=new Tm(Am.SOF,0,0,0,0,null),token:t,line:1,lineStart:0,advance:_m,lookahead:Em}).token,{kind:xm.DOCUMENT,definitions:_y(t,Am.SOF,Dm,Am.EOF),loc:vy(t,n)}}function Um(e){var t=Sy(e,Am.NAME);return{kind:xm.NAME,value:t.value,loc:vy(e,t)}}function Dm(e){if(yy(e,Am.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Fm(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return ry(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Am.NAME)switch(t.value){case"schema":return function(e){var t=e.token;wy(e,"extend"),wy(e,"schema");var n=ey(e,!0),r=yy(e,Am.BRACE_L)?_y(e,Am.BRACE_L,sy,Am.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:xm.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:vy(e,t)};throw Cy(e)}(e);case"scalar":return function(e){var t=e.token;wy(e,"extend"),wy(e,"scalar");var n=Um(e),r=ey(e,!0);if(0!==r.length)return{kind:xm.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:vy(e,t)};throw Cy(e)}(e);case"type":return function(e){var t=e.token;wy(e,"extend"),wy(e,"type");var n=Um(e),r=ay(e),i=ey(e,!0),o=uy(e);if(0!==r.length||0!==i.length||0!==o.length)return{kind:xm.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:vy(e,t)};throw Cy(e)}(e);case"interface":return function(e){var t=e.token;wy(e,"extend"),wy(e,"interface");var n=Um(e),r=ey(e,!0),i=uy(e);if(0!==r.length||0!==i.length)return{kind:xm.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:vy(e,t)};throw Cy(e)}(e);case"union":return function(e){var t=e.token;wy(e,"extend"),wy(e,"union");var n=Um(e),r=ey(e,!0),i=fy(e);if(0!==r.length||0!==i.length)return{kind:xm.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:vy(e,t)};throw Cy(e)}(e);case"enum":return function(e){var t=e.token;wy(e,"extend"),wy(e,"enum");var n=Um(e),r=ey(e,!0),i=dy(e);if(0!==r.length||0!==i.length)return{kind:xm.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:vy(e,t)};throw Cy(e)}(e);case"input":return function(e){var t=e.token;wy(e,"extend"),wy(e,"input");var n=Um(e),r=ey(e,!0),i=gy(e);if(0!==r.length||0!==i.length)return{kind:xm.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:vy(e,t)};throw Cy(e)}(e)}throw Cy(e,t)}(e)}else{if(yy(e,Am.BRACE_L))return Fm(e);if(iy(e))return ry(e)}throw Cy(e)}function Fm(e){if(yy(e,Am.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return jm(e);case"fragment":return n=(t=e).token,wy(t,"fragment"),t.options.experimentalFragmentVariables?{kind:xm.FRAGMENT_DEFINITION,name:Jm(t),variableDefinitions:Bm(t),typeCondition:(wy(t,"on"),ny(t)),directives:ey(t,!1),selectionSet:Gm(t),loc:vy(t,n)}:{kind:xm.FRAGMENT_DEFINITION,name:Jm(t),typeCondition:(wy(t,"on"),ny(t)),directives:ey(t,!1),selectionSet:Gm(t),loc:vy(t,n)}}else if(yy(e,Am.BRACE_L))return jm(e);var t,n;throw Cy(e)}function jm(e){var t=e.token;if(yy(e,Am.BRACE_L))return{kind:xm.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Gm(e),loc:vy(e,t)};var n,r=qm(e);return yy(e,Am.NAME)&&(n=Um(e)),{kind:xm.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Bm(e),directives:ey(e,!1),selectionSet:Gm(e),loc:vy(e,t)}}function qm(e){var t=Sy(e,Am.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw Cy(e,t)}function Bm(e){return yy(e,Am.PAREN_L)?_y(e,Am.PAREN_L,Vm,Am.PAREN_R):[]}function Vm(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:xm.VARIABLE_DEFINITION,variable:zm(e),type:(Sy(e,Am.COLON),ty(e)),defaultValue:by(e,Am.EQUALS)?Ym(e,!0):void 0,directives:ey(e,!0),loc:vy(e,t)}:{kind:xm.VARIABLE_DEFINITION,variable:zm(e),type:(Sy(e,Am.COLON),ty(e)),defaultValue:by(e,Am.EQUALS)?Ym(e,!0):void 0,loc:vy(e,t)}}function zm(e){var t=e.token;return Sy(e,Am.DOLLAR),{kind:xm.VARIABLE,name:Um(e),loc:vy(e,t)}}function Gm(e){var t=e.token;return{kind:xm.SELECTION_SET,selections:_y(e,Am.BRACE_L,Km,Am.BRACE_R),loc:vy(e,t)}}function Km(e){return(yy(e,Am.SPREAD)?function(e){var t,n=e.token;return Sy(e,Am.SPREAD),yy(e,Am.NAME)&&"on"!==e.token.value?{kind:xm.FRAGMENT_SPREAD,name:Jm(e),directives:ey(e,!1),loc:vy(e,n)}:("on"===e.token.value&&(e.advance(),t=ny(e)),{kind:xm.INLINE_FRAGMENT,typeCondition:t,directives:ey(e,!1),selectionSet:Gm(e),loc:vy(e,n)})}:function(e){var t,n=e.token,r=Um(e),r=by(e,Am.COLON)?(t=r,Um(e)):r;return{kind:xm.FIELD,alias:t,name:r,arguments:Hm(e,!1),directives:ey(e,!1),selectionSet:yy(e,Am.BRACE_L)?Gm(e):void 0,loc:vy(e,n)}})(e)}function Hm(e,t){return t=t?$m:Wm,yy(e,Am.PAREN_L)?_y(e,Am.PAREN_L,t,Am.PAREN_R):[]}function Wm(e){var t=e.token;return{kind:xm.ARGUMENT,name:Um(e),value:(Sy(e,Am.COLON),Ym(e,!1)),loc:vy(e,t)}}function $m(e){var t=e.token;return{kind:xm.ARGUMENT,name:Um(e),value:(Sy(e,Am.COLON),Xm(e)),loc:vy(e,t)}}function Jm(e){if("on"===e.token.value)throw Cy(e);return Um(e)}function Ym(e,t){var n,r,i,o=e.token;switch(o.kind){case Am.BRACKET_L:return r=t,i=(n=e).token,r=r?Xm:Qm,{kind:xm.LIST,values:function(e,t,n,r){Sy(e,t);for(var i=[];!by(e,r);)i.push(n(e));return i}(n,Am.BRACKET_L,r,Am.BRACKET_R),loc:vy(n,i)};case Am.BRACE_L:return function(e,t){var n=e.token;Sy(e,Am.BRACE_L);for(var r,i,o,s=[];!by(e,Am.BRACE_R);)s.push((i=t,o=(r=e).token,{kind:xm.OBJECT_FIELD,name:Um(r),value:(Sy(r,Am.COLON),Ym(r,i)),loc:vy(r,o)}));return{kind:xm.OBJECT,fields:s,loc:vy(e,n)}}(e,t);case Am.INT:return e.advance(),{kind:xm.INT,value:o.value,loc:vy(e,o)};case Am.FLOAT:return e.advance(),{kind:xm.FLOAT,value:o.value,loc:vy(e,o)};case Am.STRING:case Am.BLOCK_STRING:return Zm(e);case Am.NAME:return"true"===o.value||"false"===o.value?(e.advance(),{kind:xm.BOOLEAN,value:"true"===o.value,loc:vy(e,o)}):"null"===o.value?(e.advance(),{kind:xm.NULL,loc:vy(e,o)}):(e.advance(),{kind:xm.ENUM,value:o.value,loc:vy(e,o)});case Am.DOLLAR:if(!t)return zm(e)}throw Cy(e)}function Zm(e){var t=e.token;return e.advance(),{kind:xm.STRING,value:t.value,block:t.kind===Am.BLOCK_STRING,loc:vy(e,t)}}function Xm(e){return Ym(e,!0)}function Qm(e){return Ym(e,!1)}function ey(e,t){for(var n,r,i,o=[];yy(e,Am.AT);)o.push((r=t,i=(n=e).token,Sy(n,Am.AT),{kind:xm.DIRECTIVE,name:Um(n),arguments:Hm(n,r),loc:vy(n,i)}));return o}function ty(e){var t=e.token,n=by(e,Am.BRACKET_L)?(n=ty(e),Sy(e,Am.BRACKET_R),{kind:xm.LIST_TYPE,type:n,loc:vy(e,t)}):ny(e);return by(e,Am.BANG)?{kind:xm.NON_NULL_TYPE,type:n,loc:vy(e,t)}:n}function ny(e){var t=e.token;return{kind:xm.NAMED_TYPE,name:Um(e),loc:vy(e,t)}}function ry(e){var t=iy(e)?e.lookahead():e.token;if(t.kind===Am.NAME)switch(t.value){case"schema":return function(e){var t=e.token;wy(e,"schema");var n=ey(e,!0),r=_y(e,Am.BRACE_L,sy,Am.BRACE_R);return{kind:xm.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:vy(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=oy(e);wy(e,"scalar");var r=Um(e),i=ey(e,!0);return{kind:xm.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:vy(e,t)}}(e);case"type":return function(e){var t=e.token,n=oy(e);wy(e,"type");var r=Um(e),i=ay(e),o=ey(e,!0),s=uy(e);return{kind:xm.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:vy(e,t)}}(e);case"interface":return function(e){var t=e.token,n=oy(e);wy(e,"interface");var r=Um(e),i=ey(e,!0),o=uy(e);return{kind:xm.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:vy(e,t)}}(e);case"union":return function(e){var t=e.token,n=oy(e);wy(e,"union");var r=Um(e),i=ey(e,!0),o=fy(e);return{kind:xm.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:vy(e,t)}}(e);case"enum":return function(e){var t=e.token,n=oy(e);wy(e,"enum");var r=Um(e),i=ey(e,!0),o=dy(e);return{kind:xm.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:vy(e,t)}}(e);case"input":return function(e){var t=e.token,n=oy(e);wy(e,"input");var r=Um(e),i=ey(e,!0),o=gy(e);return{kind:xm.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:vy(e,t)}}(e);case"directive":return function(e){var t=e.token,n=oy(e);wy(e,"directive"),Sy(e,Am.AT);var r=Um(e),i=ly(e);wy(e,"on");var o=function(e){by(e,Am.PIPE);for(var t=[];t.push(function(e){var t=e.token,n=Um(e);if(Nm.hasOwnProperty(n.value))return n;throw Cy(e,t)}(e)),by(e,Am.PIPE););return t}(e);return{kind:xm.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:vy(e,t)}}(e)}throw Cy(e,t)}function iy(e){return yy(e,Am.STRING)||yy(e,Am.BLOCK_STRING)}function oy(e){if(iy(e))return Zm(e)}function sy(e){var t=e.token,n=qm(e);Sy(e,Am.COLON);var r=ny(e);return{kind:xm.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:vy(e,t)}}function ay(e){var t=[];if("implements"===e.token.value)for(e.advance(),by(e,Am.AMP);t.push(ny(e)),by(e,Am.AMP)||e.options.allowLegacySDLImplementsInterfaces&&yy(e,Am.NAME););return t}function uy(e){return e.options.allowLegacySDLEmptyFields&&yy(e,Am.BRACE_L)&&e.lookahead().kind===Am.BRACE_R?(e.advance(),e.advance(),[]):yy(e,Am.BRACE_L)?_y(e,Am.BRACE_L,cy,Am.BRACE_R):[]}function cy(e){var t=e.token,n=oy(e),r=Um(e),i=ly(e);Sy(e,Am.COLON);var o=ty(e),s=ey(e,!0);return{kind:xm.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:vy(e,t)}}function ly(e){return yy(e,Am.PAREN_L)?_y(e,Am.PAREN_L,py,Am.PAREN_R):[]}function py(e){var t=e.token,n=oy(e),r=Um(e);Sy(e,Am.COLON);var i,o=ty(e);by(e,Am.EQUALS)&&(i=Xm(e));var s=ey(e,!0);return{kind:xm.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:vy(e,t)}}function fy(e){var t=[];if(by(e,Am.EQUALS))for(by(e,Am.PIPE);t.push(ny(e)),by(e,Am.PIPE););return t}function dy(e){return yy(e,Am.BRACE_L)?_y(e,Am.BRACE_L,hy,Am.BRACE_R):[]}function hy(e){var t=e.token,n=oy(e),r=Um(e),i=ey(e,!0);return{kind:xm.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:vy(e,t)}}function gy(e){return yy(e,Am.BRACE_L)?_y(e,Am.BRACE_L,py,Am.BRACE_R):[]}function vy(e,t){if(!e.options.noLocation)return new my(t,e.lastToken,e.source)}function my(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function yy(e,t){return e.token.kind===t}function by(e,t){return(t=e.token.kind===t)&&e.advance(),t}function Sy(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw Sm(e.source,n.start,"Expected ".concat(t,", found ").concat(Im(n)))}function wy(e,t){var n=e.token;if(n.kind===Am.NAME&&n.value===t)return e.advance(),n;throw Sm(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Im(n)))}function Cy(e,t){return t=t||e.token,Sm(e.source,t.start,"Unexpected ".concat(Im(t)))}function _y(e,t,n,r){Sy(e,t);for(var i=[n(e)];!by(e,r);)i.push(n(e));return i}my.prototype.toJSON=my.prototype.inspect=function(){return{start:this.start,end:this.end}};var Ey=R,Ay=function(){return(Ay=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Iy=new E.ConsoleLogger("AbstractPubSubProvider"),vn=(Py.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Ay(Ay({},e),this._config),Iy.debug("configure "+this.getProviderName(),this._config),this.options},Py.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Py.prototype,"options",{get:function(){return Ay({},this._config)},enumerable:!0,configurable:!0}),Py);function Py(e){void 0===e&&(e={}),this._config=e}function Oy(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Ty(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ky(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}var Ly,hr=(Ly=function(e,t){return(Ly=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ly(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ry=function(){return(Ry=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},xy=new E.ConsoleLogger("MqttOverWSProvider"),Ny=(My.prototype.get=function(n,r){return Oy(this,void 0,void 0,function(){var t;return Ty(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(My.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),My.prototype.remove=function(e){this.promises.delete(e)},My);function My(){this.promises=new Map}var Uy,Dy="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",rr=(hr(Fy,Uy=vn),Object.defineProperty(Fy.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(Fy.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(Fy.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(Fy.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Fy.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Dy]},Fy.prototype.getProviderName=function(){return"MqttOverWSProvider"},Fy.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,e=ky(e,["clientId","errorCode"]);if(0!==r){xy.warn(n,JSON.stringify(Ry({errorCode:r},e),null,2));var i=[];if(!(e=this._clientIdObservers.get(n)))return;e.forEach(function(n){n.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&i.push(t)})}),this._clientIdObservers.delete(n),i.forEach(function(e){t._topicObservers.delete(e)})}},Fy.prototype.newClient=function(e){var t=e.url,i=e.clientId;return Oy(this,void 0,void 0,function(){var n,r=this;return Ty(this,function(e){switch(e.label){case 0:return xy.debug("Creating new MQTT client",i),(n=new x.Client(t,i)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=ky(e,["errorCode"]);r.onDisconnect(Ry({clientId:i,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},Fy.prototype.connect=function(n,r){return void 0===r&&(r={}),Oy(this,void 0,void 0,function(){var t=this;return Ty(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Ry(Ry({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},Fy.prototype.disconnect=function(n){return Oy(this,void 0,void 0,function(){var t;return Ty(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},Fy.prototype.publish=function(o,s){return Oy(this,void 0,void 0,function(){var t,n,r,i;return Ty(this,function(e){switch(e.label){case 0:return t=[].concat(o),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return i=e.sent(),xy.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return i.send(e,n)}),[2]}})})},Fy.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,a){!function(e){for(var t=a.split("/"),n=t.length,r=e.split("/"),i=0;i<n;++i){var o=t[i],s=r[i];if("#"===o)return r.length>=n;if("+"!==o&&o!==s)return}return n===r.length}(t)||r.push(e)});var i=JSON.parse(n);"object"==typeof i&&(i[Dy]=t),r.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){xy.warn("Error handling message",e,n)}},Fy.prototype.subscribe=function(e,a){var n=this;void 0===a&&(a={});var u=[].concat(e);return xy.debug("Subscribing to topic(s)",u.join(",")),new Ey(function(i){var o;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=a.clientId,s=void 0===e?n.clientId:e;return(e=(e=n._clientIdObservers.get(s))||new Set).add(i),n._clientIdObservers.set(s,e),Oy(n,void 0,void 0,function(){var t,n,r;return Ty(this,function(e){switch(e.label){case 0:return void 0!==(t=a.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(s,{url:r})];case 5:return o=e.sent(),u.forEach(function(e){o.subscribe(e)}),[3,7];case 6:return r=e.sent(),i.error(r),[3,7];case 7:return[2]}})}),function(){return xy.debug("Unsubscribing from topic(s)",u.join(",")),o&&(n._clientIdObservers.get(s).delete(i),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),o.isConnected()&&o.unsubscribe(e))})),null}})},Fy);function Fy(e){return void 0===e&&(e={}),(e=Uy.call(this,Ry(Ry({},e),{clientId:e.clientId||g.v4()}))||this)._clientsQueue=new Ny,e._topicObservers=new Map,e._clientIdObservers=new Map,e}function jy(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function qy(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function By(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Vy,zy,Gy=(Vy=function(e,t){return(Vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Vy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ky=new E.ConsoleLogger("AWSAppSyncProvider"),Hy=(Gy(Wy,zy=rr),Object.defineProperty(Wy.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),Wy.prototype.getProviderName=function(){return"AWSAppSyncProvider"},Wy.prototype.publish=function(e,t,n){return jy(this,void 0,void 0,function(){return qy(this,function(e){throw new Error("Operation not supported")})})},Wy.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return By(e,2)[1].clientId===t}).map(function(e){return By(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},Wy.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},Wy.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return By(e,2)[1].clientId===n}).map(function(e){return By(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},Wy.prototype.disconnect=function(t){return jy(this,void 0,void 0,function(){return qy(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,zy.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},Wy.prototype.subscribe=function(e,o){var n=this;void 0===o&&(o={});var t=new Ey(function(a){var r=[].concat(e);return Ky.debug("Subscribing to topic(s)",r.join(",")),jy(n,void 0,void 0,function(){var i,t,n=this;return qy(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=o.mqttConnections,i=void 0===t?[]:t,t=o.newSubscriptions,t=Object.entries(t).map(function(e){var t=By(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(By(arguments[t]));return e}(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=i.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var i=(e=By(e,2))[0],o=(e=e[1]).url,s=e.topics;return jy(n,void 0,void 0,function(){var t,n,r=this;return qy(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(i,{clientId:i,url:o})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){Ky.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return Ey.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var t=(n=By(t,2))[0],n=n[1];return e[r||t]=n,e},{}),e})},Wy);function Wy(){var e=null!==zy&&zy.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function $y(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Jy(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Yy,Zy,Xy,Qy,Qn=(Yy=function(e,t){return(Yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Yy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eb=function(){return(eb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tb=new E.Logger("AWSAppSyncRealTimeProvider"),nb="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",rb=[400,401,403];(_l=Zy=Zy||{}).GQL_CONNECTION_INIT="connection_init",_l.GQL_CONNECTION_ERROR="connection_error",_l.GQL_CONNECTION_ACK="connection_ack",_l.GQL_START="start",_l.GQL_START_ACK="start_ack",_l.GQL_DATA="data",_l.GQL_CONNECTION_KEEP_ALIVE="ka",_l.GQL_STOP="stop",_l.GQL_COMPLETE="complete",_l.GQL_ERROR="error",(Yn=Xy=Xy||{})[Yn.PENDING=0]="PENDING",Yn[Yn.CONNECTED=1]="CONNECTED",Yn[Yn.FAILED=2]="FAILED",(br=Qy=Qy||{})[br.CLOSED=0]="CLOSED",br[br.READY=1]="READY",br[br.CONNECTING=2]="CONNECTING";var ib,ob={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},sb=(Qn(ab,ib=vn),ab.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},ab.prototype.newClient=function(){throw new Error("Not used here")},ab.prototype.publish=function(e,t,n){return $y(this,void 0,void 0,function(){return Jy(this,function(e){throw new Error("Operation not supported")})})},ab.prototype.subscribe=function(e,t){var r=this,i=t.appSyncGraphqlEndpoint;return new Ey(function(e){if(i){var n=g.v4();return r._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:n}),function(){return $y(r,void 0,void 0,function(){var t;return Jy(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==Xy.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),tb.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}e.error({errors:[eb({},new im("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(ab.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),ab.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var m=e.options,y=e.observer,b=e.subscriptionId;return $y(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v=this;return Jy(this,function(e){switch(e.label){case 0:return t=m.appSyncGraphqlEndpoint,n=m.authenticationType,r=m.query,i=m.variables,o=m.apiKey,s=m.region,p=m.graphql_headers,a=void 0===p?function(){return{}}:p,l=m.additionalHeaders,u=void 0===l?{}:l,c=Xy.PENDING,p={query:r,variables:i},this.subscriptionObserverMap.set(b,{observer:y,query:r,variables:i,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s})];case 1:return f=[eb.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:g=eb.apply(void 0,[eb.apply(void 0,[eb.apply(void 0,f.concat([e.sent()])),u]),((g={})[E.USER_AGENT_HEADER]=E.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:eb({},g)}},type:Zy.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),tb.debug({err:h}),d=h.message,h=void 0===d?"":d,y.error({errors:[eb({},new im("Connection failed: "+h))]}),y.complete(),"function"==typeof(d=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&d(),[2];case 6:return h=this.subscriptionObserverMap.get(b),d=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:y,subscriptionState:c,variables:i,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:d,startAckTimeoutId:setTimeout(function(){v._timeoutStartSubscriptionAck.call(v,b)},15e3)}),this.awsRealTimeSocket.send(g),[2]}})})},ab.prototype._waitForSubscriptionToBeConnected=function(a){return $y(this,void 0,void 0,function(){var s=this;return Jy(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===Xy.PENDING?[2,new Promise(function(e,t){var n=(o=s.subscriptionObserverMap.get(a)).observer,r=o.subscriptionState,i=o.variables,o=o.query;s.subscriptionObserverMap.set(a,{observer:n,subscriptionState:r,variables:i,query:o,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},ab.prototype._sendUnsubscriptionMessage=function(e){try{var t;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Qy.READY&&(t={id:e,type:Zy.GQL_STOP},t=JSON.stringify(t),this.awsRealTimeSocket.send(t))}catch(e){tb.debug({err:e})}},ab.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},ab.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(tb.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Qy.CLOSED):this.socketStatus=Qy.CLOSED)},ab.prototype._handleIncomingSubscriptionMessage=function(e){tb.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=void 0===(o=(a=JSON.parse(e.data)).id)?"":o,n=a.payload,r=a.type,i=void 0===(s=(u=this.subscriptionObserverMap.get(t)||{}).observer)?null:s,o=void 0===(e=u.query)?"":e,s=void 0===(a=u.variables)?{}:a,e=u.startAckTimeoutId,a=u.subscriptionReadyCallback,u=u.subscriptionFailedCallback;if(tb.debug({id:t,observer:i,query:o,variables:s}),r===Zy.GQL_DATA&&n&&n.data)i?i.next(n):tb.debug("observer not found for id: "+t);else if(r!==Zy.GQL_START_ACK){if(r===Zy.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,db.TIMEOUT_DISCONNECT),this.keepAliveTimeout));r===Zy.GQL_ERROR&&(c=Xy.FAILED,this.subscriptionObserverMap.set(t,{observer:i,query:o,variables:s,startAckTimeoutId:e,subscriptionReadyCallback:a,subscriptionFailedCallback:u,subscriptionState:c}),i.error({errors:[eb({},new im("Connection failed: "+JSON.stringify(n)))]}),clearTimeout(e),i.complete(),"function"==typeof u&&u())}else{tb.debug("subscription ready for "+JSON.stringify({query:o,variables:s})),"function"==typeof a&&a(),clearTimeout(e),r=db.SUBSCRIPTION_ACK,n={query:o,variables:s},e="Connection established for subscription",E.Hub.dispatch("api",{event:r,data:n,message:e},"PubSub",nb);var c=Xy.CONNECTED;this.subscriptionObserverMap.set(t,{observer:i,query:o,variables:s,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:a,subscriptionFailedCallback:u})}},ab.prototype._errorDisconnect=function(t){tb.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){(e=e.observer)&&!e.closed&&e.error({errors:[eb({},new im(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Qy.CLOSED},ab.prototype._timeoutStartSubscriptionAck=function(e){var t=(r=this.subscriptionObserverMap.get(e)||{}).observer,n=r.query,r=r.variables;t&&(this.subscriptionObserverMap.set(e,{observer:t,query:n,variables:r,subscriptionState:Xy.FAILED}),t&&!t.closed&&(t.error({errors:[eb({},new im("Subscription timeout "+JSON.stringify({query:n,variables:r})))]}),t.complete()),tb.debug("timeoutStartSubscription",JSON.stringify({query:n,variables:r})))},ab.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==Qy.READY)return new Promise(function(s,a){return $y(t,void 0,void 0,function(){var t,n,r,i,o;return Jy(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:s,rej:a}),this.socketStatus!==Qy.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=Qy.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),i="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:i,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=f.Buffer.from(r).toString("base64"),i=f.Buffer.from(i).toString("base64"),i=t+"?header="+r+"&payload="+i,[4,this._initializeRetryableHandshake({awsRealTimeUrl:i})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res,tb.debug("Notifying connection successful"),e()}),this.socketStatus=Qy.READY,this.promiseArray=[],[3,5];case 4:throw o=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(o)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Qy.CLOSED,o;case 5:return[2]}})})})},ab.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return $y(this,void 0,void 0,function(){return Jy(this,function(e){switch(e.label){case 0:return tb.debug("Initializaling retryable Handshake"),[4,E.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},ab.prototype._initializeHandshake=function(e){var i=e.awsRealTimeUrl;return $y(this,void 0,void 0,function(){var t,n,r,s=this;return Jy(this,function(e){switch(e.label){case 0:tb.debug("Initializing handshake "+i),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(i,"graphql-ws");n.onerror=function(){tb.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,i){var o=!1;s.awsRealTimeSocket.onerror=function(e){tb.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){tb.debug("WebSocket closed "+e.reason),i(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){tb.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=void 0===(e=(void 0===(e=t.payload)?{}:e).connectionTimeoutMs)?3e5:e;if(n===Zy.GQL_CONNECTION_ACK)return o=!0,s.keepAliveTimeout=e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){tb.debug(e),s._errorDisconnect(db.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){tb.debug("WebSocket closed "+e.reason),s._errorDisconnect(db.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===Zy.GQL_CONNECTION_ERROR&&(n=void 0===(n=(t=void 0===(n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(void 0===(t=(void 0===(n=t.payload)?{}:n).errors)?[]:t,1)[0])?{}:n).errorType)?"":n,t=t.errorCode,i({errorType:n,errorCode:void 0===t?0:t}))};var e={type:Zy.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){o||i(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,rb.includes(r)?new E.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},ab.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region;return $y(this,void 0,void 0,function(){var t,n;return Jy(this,function(e){switch(e.label){case 0:return n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r])?(tb.debug("Authentication type "+r+" not supported"),[2,""]):(n=w.parse(s).host,[4,t({payload:i,canonicalUri:o,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n})]);case 1:return[2,e.sent()]}})})},ab.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return $y(this,void 0,void 0,function(){return Jy(this,function(e){switch(e.label){case 0:return[4,Zd.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},ab.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return $y(this,void 0,void 0,function(){var t,n;return Jy(this,function(e){switch(e.label){case 0:return[4,Tl.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,Zd.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},ab.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return $y(this,void 0,void 0,function(){var t;return Jy(this,function(e){return t=(t=new Date).toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},ab.prototype._awsRealTimeIAMHeader=function(e){var i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return $y(this,void 0,void 0,function(){var t,n,r;return Jy(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,E.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+o,data:i,method:"POST",headers:eb({},ob)},[2,E.Signer.sign(r,n,t).headers]}})})},ab.prototype._ensureCredentials=function(){return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),tb.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0)}).catch(function(e){return tb.warn("ensure credentials error",e),!1})},ab);function ab(){var e=null!==ib&&ib.apply(this,arguments)||this;return e.socketStatus=Qy.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function ub(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function cb(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var lb=E.browserOrNode().isNode,pb=new E.ConsoleLogger("PubSub");function fb(e){this._options=e,pb.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var db,hb=(Object.defineProperty(fb.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Hy(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(fb.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new sb(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),fb.prototype.getModuleName=function(){return"PubSub"},fb.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return pb.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},fb.prototype.addPluggable=function(t){return ub(this,void 0,void 0,function(){return cb(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},fb.prototype.getProviderByName=function(t){return t===E.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},fb.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;if(!(e=this.getProviderByName(t)))throw new Error("Could not find provider named "+t);return[e]},fb.prototype.publish=function(t,n,r){return ub(this,void 0,void 0,function(){return cb(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},fb.prototype.subscribe=function(t,r){if(lb)throw new Error("Subscriptions are not supported in Node");pb.debug("subscribe options",r);var i=this.getProviders(r);return new Ey(function(n){var e=i.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new fb(null));E.Amplify.register(hb),(p=db=db||{}).CONNECTION_CLOSED="Connection closed",p.TIMEOUT_DISCONNECT="Timeout disconnect",p.SUBSCRIPTION_ACK="Subscription ack";function gb(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function vb(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function mb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var yb=function(){return(yb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},bb=new E.ConsoleLogger("GraphQLAPI"),Sb=(wb.prototype.getModuleName=function(){return"GraphQLAPI"},wb.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}(t,["API"]),e=yb(yb({},t),e);return bb.debug("configure GraphQL API",{opt:e}),e.aws_project_region&&(e=Object.assign({},e,{region:e.aws_project_region,header:{}})),void 0!==e.graphql_headers&&"function"!=typeof e.graphql_headers&&(bb.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},wb.prototype.createInstance=function(){return bb.debug("create Rest instance"),this._options?(this._api=new Jv(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},wb.prototype._headerBasedAuth=function(s){return gb(this,void 0,void 0,function(){var t,n,r,i,o;return vb(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},s||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!n)throw new Error("No api-key configured");return r={Authorization:null,"X-Api-Key":n},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,12];case 4:return o=void 0,[4,Tl.getItem("federatedInfo")];case 5:return(i=e.sent())?(o=i.token,[3,8]):[3,6];case 6:return[4,Zd.currentAuthenticatedUser()];case 7:(i=e.sent())&&(o=i.token),e.label=8;case 8:if(!o)throw new Error("No federated jwt");return r={Authorization:o},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return o=e.sent(),r={Authorization:o.getAccessToken().getJwtToken()},[3,12];case 11:return r={Authorization:null},[3,12];case 12:return[2,r]}})})},wb.prototype.getGraphqlOperationType=function(e){return e=Mm(e),mb(e.definitions,1)[0].operation},wb.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=Mm("string"==typeof n?n:um(n));switch(e=(void 0===(r=mb(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0])?{}:r).operation){case"query":case"mutation":return r={cancellableToken:n=this._api.getCancellableToken()},r=this._graphql({query:s,variables:i,authMode:o},t,r),this._api.updateRequestToBeCancellable(r,n),r;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+e)},wb.prototype._graphql=function(e,v,m){var y=e.query,b=e.variables,S=e.authMode;return void 0===v&&(v={}),void 0===m&&(m={}),gb(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return vb(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,i=a.graphql_endpoint,o=a.graphql_endpoint_iam_region,s=[{}],(a=!i)?[4,this._headerBasedAuth(S)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[yb.apply(void 0,s.concat([a]))],(c=i)?o?[4,this._headerBasedAuth(S)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[yb.apply(void 0,u.concat([c]))],[4,r({query:y,variables:b})];case 9:if(f=yb.apply(void 0,[yb.apply(void 0,[yb.apply(void 0,p.concat([e.sent()])),v]),!i&&((g={})["x-amz-user-agent"]=E.Constants.userAgent,g)]),g={query:um(y),variables:b},f=Object.assign({headers:f,body:g,signerServiceInfo:{service:i?"execute-api":"appsync",region:i?o:t}},m),!(g=i||n))throw{data:{},errors:[new im("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,f)];case 11:return d=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return d={data:{},errors:[new im(h.message)]},[3,13];case 13:if((h=d.errors)&&h.length)throw d;return[2,d]}})})},wb.prototype.isCancel=function(e){return this._api.isCancel(e)},wb.prototype.cancel=function(e,t){return this._api.cancel(e,t)},wb.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=(u=this._options).aws_appsync_region,s=u.aws_appsync_graphqlEndpoint,a=u.aws_appsync_authenticationType,e=u.aws_appsync_apiKey,u=void 0===(u=u.graphql_headers)?function(){return{}}:u,a=i||a||"AWS_IAM";if(hb&&"function"==typeof hb.subscribe)return hb.subscribe("",{provider:E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:s,authenticationType:a,apiKey:e,query:um(n),region:o,variables:r,graphql_headers:u,additionalHeaders:t});throw bb.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},wb.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){return!!e&&(e=t.Credentials.shear(e),bb.debug("set credentials for api",e),!0)}).catch(function(e){return bb.warn("ensure credentials error",e),!1})},wb);function wb(e){this._api=null,this.Auth=Zd,this.Cache=Tl,this.Credentials=E.Credentials,this._options=e,bb.debug("API Options",this._options)}dr=new Sb(null),E.Amplify.register(dr);var Cb=function(){return(Cb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_b=new E.ConsoleLogger("API");function Eb(e){this.Auth=Zd,this.Cache=Tl,this.Credentials=E.Credentials,this._options=e,this._restApi=new Qv(e),this._graphqlApi=new Sb(e),_b.debug("API Options",this._options)}var Ab=(Eb.prototype.getModuleName=function(){return"API"},Eb.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return Cb(Cb({},t),e)},Eb.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},Eb.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},Eb.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},Eb.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},Eb.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},Eb.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},Eb.prototype.isCancel=function(e){return this._restApi.isCancel(e)},Eb.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},Eb.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._restApi.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,i,o,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((c=c.apply(e,s||[])).next())});var e,s,a,c},Eb.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},Eb.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},new Eb(null));E.Amplify.register(Ab);var Ib=function(){return(Ib=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pb=new E.ConsoleLogger("AbstractInteractionsProvider"),pi=(Ob.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Ib(Ib({},this._config),e),Pb.debug("configure "+this.getProviderName(),this._config),this.options},Ob.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(Ob.prototype,"options",{get:function(){return Ib({},this._config)},enumerable:!0,configurable:!0}),Ob);function Ob(e){void 0===e&&(e={}),this._config=e}var Tb=function(e,t){return(Tb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function kb(e,t){function n(){this.constructor=e}Tb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Lb=function(){return(Lb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Rb(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function xb(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Nb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Mb,Ub,Db,Fb,jb,qb,Bb,Vb="runtime.lex.{region}.amazonaws.com",zb=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Gb=new Set(["cn-north-1","cn-northwest-1"]),Kb=new Set(["us-iso-east-1"]),Hb=new Set(["us-isob-east-1"]),Wb=new Set(["us-gov-east-1","us-gov-west-1"]),$b=Lb(Lb({},{apiVersion:"2016-11-28",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:zb.has(e)&&(n={hostname:Vb.replace("{region}",e),partition:"aws",signingService:"lex"}),Gb.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Kb.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Hb.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Wb.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Vb.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"node",base64Decoder:su,base64Encoder:au,bodyLengthChecker:uu,credentialDefaultProvider:Bs,defaultUserAgent:cu("@aws-sdk/client-lex-runtime-service","1.0.0-gamma.8"),maxAttempts:nr(C),region:nr(Jn,lr),requestHandler:new Xe,sha256:b.bind(null,"sha256"),streamCollector:Je,urlParser:ou,utf8Decoder:lu,utf8Encoder:pu}),Jb=(kb(Yb,Mb=St),Yb.prototype.destroy=function(){Mb.prototype.destroy.call(this)},Yb);function Yb(e){var t=this,e=ua(e=sc(Mo(e=Uo(e=Lb(Lb({},$b),e)))));return(t=Mb.call(this,e)||this).config=e,t.middlewareStack.use(cc(t.config)),t.middlewareStack.use(Ws(t.config)),t.middlewareStack.use(pc(t.config)),t.middlewareStack.use(Su(t.config)),t.middlewareStack.use(Cu(t.config)),t.middlewareStack.use(_u(t.config)),t}function Zb(e){return(e||[]).map(function(e){return{__type:"GenericAttachment",attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?(e.buttons||[]).map(function(e){return{__type:"Button",text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}}):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}(yt={}).filterSensitiveLog=function(e){return Lb({},e)},yt.isa=function(e){return Sc(e,"BadGatewayException")},(gn={}).filterSensitiveLog=function(e){return Lb({},e)},gn.isa=function(e){return Sc(e,"BadRequestException")},(_w={}).filterSensitiveLog=function(e){return Lb({},e)},_w.isa=function(e){return Sc(e,"Button")},(m={}).CONFIRMED="Confirmed",m.DENIED="Denied",m.NONE="None",(hn={}).filterSensitiveLog=function(e){return Lb({},e)},hn.isa=function(e){return Sc(e,"ConflictException")},(R={}).filterSensitiveLog=function(e){return Lb({},e)},R.isa=function(e){return Sc(e,"DeleteSessionRequest")},(hr={}).filterSensitiveLog=function(e){return Lb({},e)},hr.isa=function(e){return Sc(e,"DeleteSessionResponse")},(Gy={}).filterSensitiveLog=function(e){return Lb({},e)},Gy.isa=function(e){return Sc(e,"DependencyFailedException")},(rr=Ub=Ub||{}).filterSensitiveLog=function(e){return Lb(Lb(Lb({},e),e.message&&{message:Nc}),e.slots&&{slots:Nc})},rr.isa=function(e){return Sc(e,"DialogAction")},(_l={}).CLOSE="Close",_l.CONFIRM_INTENT="ConfirmIntent",_l.DELEGATE="Delegate",_l.ELICIT_INTENT="ElicitIntent",_l.ELICIT_SLOT="ElicitSlot",(Yn={}).CONFIRM_INTENT="ConfirmIntent",Yn.ELICIT_INTENT="ElicitIntent",Yn.ELICIT_SLOT="ElicitSlot",Yn.FAILED="Failed",Yn.FULFILLED="Fulfilled",Yn.READY_FOR_FULFILLMENT="ReadyForFulfillment",(br={}).FAILED="Failed",br.FULFILLED="Fulfilled",br.READY_FOR_FULFILLMENT="ReadyForFulfillment",(Qn={}).filterSensitiveLog=function(e){return Lb({},e)},Qn.isa=function(e){return Sc(e,"GenericAttachment")},(vn={}).filterSensitiveLog=function(e){return Lb({},e)},vn.isa=function(e){return Sc(e,"GetSessionRequest")},(p={}).filterSensitiveLog=function(e){return Lb(Lb(Lb(Lb({},e),e.dialogAction&&{dialogAction:Ub.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Db.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Nc})},p.isa=function(e){return Sc(e,"GetSessionResponse")},(dr=Db=Db||{}).filterSensitiveLog=function(e){return Lb(Lb({},e),e.slots&&{slots:Nc})},dr.isa=function(e){return Sc(e,"IntentSummary")},(C={}).filterSensitiveLog=function(e){return Lb({},e)},C.isa=function(e){return Sc(e,"InternalFailureException")},(nr={}).filterSensitiveLog=function(e){return Lb({},e)},nr.isa=function(e){return Sc(e,"LimitExceededException")},(Jn={}).filterSensitiveLog=function(e){return Lb({},e)},Jn.isa=function(e){return Sc(e,"LoopDetectedException")},(lr={}).COMPOSITE="Composite",lr.CUSTOM_PAYLOAD="CustomPayload",lr.PLAIN_TEXT="PlainText",lr.SSML="SSML",(Xe={}).filterSensitiveLog=function(e){return Lb({},e)},Xe.isa=function(e){return Sc(e,"NotAcceptableException")},(b={}).filterSensitiveLog=function(e){return Lb({},e)},b.isa=function(e){return Sc(e,"NotFoundException")},(Je=Fb=Fb||{}).filterSensitiveLog=function(e){return Lb(Lb(Lb({},e),e.sessionAttributes&&{sessionAttributes:Nc}),e.requestAttributes&&{requestAttributes:Nc})},Je.isa=function(e){return Sc(e,"PostContentRequest")},(St=jb=jb||{}).filterSensitiveLog=function(e){return Lb(Lb({},e),e.message&&{message:Nc})},St.isa=function(e){return Sc(e,"PostContentResponse")},(yt=qb=qb||{}).filterSensitiveLog=function(e){return Lb(Lb(Lb(Lb({},e),e.inputText&&{inputText:Nc}),e.sessionAttributes&&{sessionAttributes:Nc}),e.requestAttributes&&{requestAttributes:Nc})},yt.isa=function(e){return Sc(e,"PostTextRequest")},(gn=Bb=Bb||{}).filterSensitiveLog=function(e){return Lb(Lb(Lb(Lb({},e),e.message&&{message:Nc}),e.slots&&{slots:Nc}),e.sessionAttributes&&{sessionAttributes:Nc})},gn.isa=function(e){return Sc(e,"PostTextResponse")},(_w={}).filterSensitiveLog=function(e){return Lb(Lb(Lb(Lb({},e),e.dialogAction&&{dialogAction:Ub.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Db.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Nc})},_w.isa=function(e){return Sc(e,"PutSessionRequest")},(m={}).filterSensitiveLog=function(e){return Lb(Lb({},e),e.message&&{message:Nc})},m.isa=function(e){return Sc(e,"PutSessionResponse")},(hn={}).filterSensitiveLog=function(e){return Lb({},e)},hn.isa=function(e){return Sc(e,"RequestTimeoutException")},(R={}).filterSensitiveLog=function(e){return Lb({},e)},R.isa=function(e){return Sc(e,"ResponseCard")},(hr={}).filterSensitiveLog=function(e){return Lb({},e)},hr.isa=function(e){return Sc(e,"SentimentResponse")},(Gy={}).filterSensitiveLog=function(e){return Lb({},e)},Gy.isa=function(e){return Sc(e,"UnsupportedMediaTypeException")};function Xb(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Nb(t,2))[0],n=n[1];return Lb(Lb({},e),((e={})[t]=n,e))},{})}function Qb(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Nb(t,2))[0],n=n[1];return Lb(Lb({},e),((e={})[t]=n,e))},{})}function eS(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var tS,nS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:dS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},rS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},iS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},oS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:dS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},sS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},aS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:dS(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},uS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:dS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},cS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},lS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},pS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},fS=function(r,e){return Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:dS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},dS=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},hS=function(e,t){return i=r=t,void 0===(n=e)&&(n=new Uint8Array),(n instanceof Uint8Array?Promise.resolve(n):i.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,i},gS=function(e,t){function n(e){return 0<=e.indexOf(":")&&(e=e.split(":")[0]),0<=e.indexOf("#")&&(e=e.split("#")[1]),e}var r,i=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?n(e.headers[i]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},vS=(kb(mS,tS=dn),mS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Fb.filterSensitiveLog,outputFilterSensitiveLog:jb.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},mS.prototype.serialize=function(e,t){return a=e,u=t,Rb(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return xb(this,function(e){switch(e.label){case 0:if(t=Lb(Lb(Lb(Lb({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},eS(a.sessionAttributes)&&{"x-amz-lex-session-attributes":Cc.fromObject(a.sessionAttributes)}),eS(a.requestAttributes)&&{"x-amz-lex-request-attributes":Cc.fromObject(a.requestAttributes)}),eS(a.accept)&&{Accept:a.accept}),eS(a.contentType)&&{"Content-Type":a.contentType}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",mc(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",mc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return n=n.replace("{botAlias}",mc(o)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},mS.prototype.deserialize=function(e,t){return r=e,i=t,Rb(void 0,void 0,void 0,function(){var t,n;return xb(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,(m=r,y=i,Rb(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v;return xb(this,function(e){switch(e.label){case 0:return t=[Lb({},m)],v={},[4,hS(m.body,y)];case 1:switch(h=Lb.apply(void 0,t.concat([(v.body=e.sent(),v)])),g="UnknownError",g=gS(m,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,nS(h)];case 3:return n=Lb.apply(void 0,[Lb.apply(void 0,r.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 4:return i=[{}],[4,rS(h)];case 5:return n=Lb.apply(void 0,[Lb.apply(void 0,i.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 6:return o=[{}],[4,iS(h)];case 7:return n=Lb.apply(void 0,[Lb.apply(void 0,o.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 8:return s=[{}],[4,oS(h)];case 9:return n=Lb.apply(void 0,[Lb.apply(void 0,s.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 10:return a=[{}],[4,sS(h)];case 11:return n=Lb.apply(void 0,[Lb.apply(void 0,a.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 12:return u=[{}],[4,aS(h)];case 13:return n=Lb.apply(void 0,[Lb.apply(void 0,u.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 14:return c=[{}],[4,uS(h)];case 15:return n=Lb.apply(void 0,[Lb.apply(void 0,c.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 16:return l=[{}],[4,cS(h)];case 17:return n=Lb.apply(void 0,[Lb.apply(void 0,l.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 18:return p=[{}],[4,lS(h)];case 19:return n=Lb.apply(void 0,[Lb.apply(void 0,p.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 20:return f=[{}],[4,pS(h)];case 21:return n=Lb.apply(void 0,[Lb.apply(void 0,f.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 22:return d=[{}],[4,fS(h)];case 23:return n=Lb.apply(void 0,[Lb.apply(void 0,d.concat([e.sent()])),{name:g,$metadata:dS(m)}]),[3,25];case 24:h=h.body,g=h.code||h.Code||g,n=Lb(Lb({},h),{name:""+g,message:h.message||h.Message||g,$fault:"client",$metadata:dS(m)}),e.label=25;case 25:return g=n.message||n.Message||g,n.message=g,delete n.Message,[2,Promise.reject(Object.assign(new Error(g),n))]}})}))]:(t={$metadata:dS(r),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new Cc(r.headers["x-amz-lex-slots"])),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new Cc(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),n=r.body,t.audioStream=n,[2,Promise.resolve(t)]);var m,y})});var r,i},mS);function mS(e){var t=tS.call(this)||this;return t.input=e,t}var yS,bS=(kb(SS,yS=dn),SS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(ul(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:qb.filterSensitiveLog,outputFilterSensitiveLog:Bb.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},SS.prototype.serialize=function(e,t){return a=e,u=t,Rb(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return xb(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",mc(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",mc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return n=n.replace("{botAlias}",mc(o)),r=JSON.stringify(Lb(Lb(Lb({},void 0!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&{requestAttributes:Xb(a.requestAttributes)}),void 0!==a.sessionAttributes&&{sessionAttributes:Xb(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=void 0===(o=s.protocol)?"https":o,s=s.port,[2,new Zs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},SS.prototype.deserialize=function(e,t){return o=e,s=t,Rb(void 0,void 0,void 0,function(){var r,i;return xb(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&400<=o.statusCode?[2,(h=o,g=s,Rb(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d;return xb(this,function(e){switch(e.label){case 0:return t=[Lb({},h)],d={},[4,hS(h.body,g)];case 1:switch(p=Lb.apply(void 0,t.concat([(d.body=e.sent(),d)])),f="UnknownError",f=gS(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,nS(p)];case 3:return n=Lb.apply(void 0,[Lb.apply(void 0,r.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 4:return i=[{}],[4,rS(p)];case 5:return n=Lb.apply(void 0,[Lb.apply(void 0,i.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 6:return o=[{}],[4,iS(p)];case 7:return n=Lb.apply(void 0,[Lb.apply(void 0,o.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 8:return s=[{}],[4,oS(p)];case 9:return n=Lb.apply(void 0,[Lb.apply(void 0,s.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 10:return a=[{}],[4,sS(p)];case 11:return n=Lb.apply(void 0,[Lb.apply(void 0,a.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 12:return u=[{}],[4,aS(p)];case 13:return n=Lb.apply(void 0,[Lb.apply(void 0,u.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 14:return c=[{}],[4,uS(p)];case 15:return n=Lb.apply(void 0,[Lb.apply(void 0,c.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 16:return l=[{}],[4,lS(p)];case 17:return n=Lb.apply(void 0,[Lb.apply(void 0,l.concat([e.sent()])),{name:f,$metadata:dS(h)}]),[3,19];case 18:p=p.body,f=p.code||p.Code||f,n=Lb(Lb({},p),{name:""+f,message:p.message||p.Message||f,$fault:"client",$metadata:dS(h)}),e.label=19;case 19:return f=n.message||n.Message||f,n.message=f,delete n.Message,[2,Promise.reject(Object.assign(new Error(f),n))]}})}))]:(r={$metadata:dS(o),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,hS(o.body,s)]);case 1:return void 0!==(i=e.sent()).dialogState&&null!==i.dialogState&&(r.dialogState=i.dialogState),void 0!==i.intentName&&null!==i.intentName&&(r.intentName=i.intentName),void 0!==i.message&&null!==i.message&&(r.message=i.message),void 0!==i.messageFormat&&null!==i.messageFormat&&(r.messageFormat=i.messageFormat),void 0!==i.responseCard&&null!==i.responseCard&&(r.responseCard={__type:"ResponseCard",contentType:void 0!==(n=i.responseCard).contentType&&null!==n.contentType?n.contentType:void 0,genericAttachments:void 0!==n.genericAttachments&&null!==n.genericAttachments?Zb(n.genericAttachments):void 0,version:void 0!==n.version&&null!==n.version?n.version:void 0}),void 0!==i.sentimentResponse&&null!==i.sentimentResponse&&(r.sentimentResponse={__type:"SentimentResponse",sentimentLabel:void 0!==(t=i.sentimentResponse).sentimentLabel&&null!==t.sentimentLabel?t.sentimentLabel:void 0,sentimentScore:void 0!==t.sentimentScore&&null!==t.sentimentScore?t.sentimentScore:void 0}),void 0!==i.sessionAttributes&&null!==i.sessionAttributes&&(r.sessionAttributes=Qb(i.sessionAttributes)),void 0!==i.sessionId&&null!==i.sessionId&&(r.sessionId=i.sessionId),void 0!==i.slotToElicit&&null!==i.slotToElicit&&(r.slotToElicit=i.slotToElicit),void 0!==i.slots&&null!==i.slots&&(r.slots=Qb(i.slots)),[2,Promise.resolve(r)]}var t,n,h,g})});var o,s},SS);function SS(e){var t=yS.call(this)||this;return t.input=e,t}var wS,CS,rr=(wS=function(e,t){return(wS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_S=function(){return(_S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ES=new E.ConsoleLogger("AWSLexProvider"),AS=(rr(IS,CS=pi),IS.prototype.getProviderName=function(){return"AWSLexProvider"},IS.prototype.reportBotStatus=function(e,t){var n=this;ES.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},IS.prototype.sendMessage=function(h,g){return e=this,u=function(){var t,n,r,i,o,s,a,u,c,l,p,f,e;return a=this,u=function(e){switch(e.label){case 0:return this._config[h]?[4,E.Credentials.get()]:[2,Promise.reject("Bot "+h+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new Jb({region:this._config[h].region,credentials:t,customUserAgent:E.getAmplifyUserAgent()}),"string"!=typeof g)return[3,6];i={botAlias:this._config[h].alias,botName:h,inputText:g,userId:t.identityId},ES.debug("postText to lex",g),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new bS(i),[4,this.lexRuntimeServiceClient.send(n)];case 3:return o=e.sent(),this.reportBotStatus(o,h),[2,o];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=g.content,r=g.options.messageType,i="voice"===r?{botAlias:this._config[h].alias,botName:h,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[h].alias,botName:h,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},ES.debug("postContent to lex",g),e.label=7;case 7:return e.trys.push([7,10,,11]),i=new vS(i),[4,this.lexRuntimeServiceClient.send(i)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((o=e.sent()).audioStream)];case 9:return s=e.sent(),this.reportBotStatus(o,h),[2,_S(_S({},o),{audioStream:s})];case 10:return s=e.sent(),[2,Promise.reject(s)];case 11:return[2]}},f={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(c)throw new TypeError("Generator is already executing.");for(;f;)try{if(c=1,l&&(p=2&t[0]?l.return:t[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,t[1])).done)return p;switch(l=0,p&&(t=[2&t[0],p.value]),t[0]){case 0:case 1:p=t;break;case 4:return f.label++,{value:t[1],done:!1};case 5:f.label++,l=t[1],t=[0];continue;case 7:t=f.ops.pop(),f.trys.pop();continue;default:if(!(p=0<(p=f.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){f=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){f.label=t[1];break}if(6===t[0]&&f.label<p[1]){f.label=p[1],p=t;break}if(p&&f.label<p[2]){f.label=p[2],f.ops.push(t);break}p[2]&&f.ops.pop(),f.trys.pop();continue}t=u.call(a,f)}catch(e){t=[6,e],l=0}finally{c=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())});var e,s,a,u},IS.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},IS);function IS(e){return void 0===e&&(e={}),(e=CS.call(this,e)||this)._botsCompleteCallback={},e}var PS=function(){return(PS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},OS=new E.ConsoleLogger("Interactions");function TS(e){this._options=e,OS.debug("Interactions Options",this._options),this._pluggables={}}var kS=(TS.prototype.getModuleName=function(){return"Interactions"},TS.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};OS.debug("configure Interactions",{opt:e}),this._options=PS(PS({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new AS),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},TS.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},TS.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,i,o,s,a,e;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())});var e,s,a,u},TS.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new TS(null));E.Amplify.register(kS);var LS=function(){return(LS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},RS=new E.ConsoleLogger("AbstractXRProvider"),_l=(xS.prototype.configure=function(e){return void 0===e&&(e={}),this._config=LS(LS({},e),this._config),RS.debug("configure "+this.getProviderName(),this._config),this.options},xS.prototype.getCategory=function(){return"XR"},Object.defineProperty(xS.prototype,"options",{get:function(){return LS({},this._config)},enumerable:!0,configurable:!0}),xS);function xS(e){void 0===e&&(e={}),this._config=e}var NS,MS,br=((Yn=(NS=function(e,t){return(NS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}NS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(US,MS=Error),US);function US(){return null!==MS&&MS.apply(this,arguments)||this}var DS,FS=(Yn(jS,DS=br),jS);function jS(){return null!==DS&&DS.apply(this,arguments)||this}var qS,BS=(Yn(VS,qS=br),VS);function VS(){return null!==qS&&qS.apply(this,arguments)||this}var zS,GS=(Yn(KS,zS=br),KS);function KS(){return null!==zS&&zS.apply(this,arguments)||this}var HS,WS=(Yn($S,HS=br),$S);function $S(){return null!==HS&&HS.apply(this,arguments)||this}var JS,YS=(Yn(ZS,JS=br),ZS);function ZS(){return null!==JS&&JS.apply(this,arguments)||this}var XS,QS=(Yn(ew,XS=br),ew);function ew(){return null!==XS&&XS.apply(this,arguments)||this}function tw(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function nw(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var rw,iw,Qn=(rw=function(e,t){return(rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ow=function(){return(ow=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},sw=new E.ConsoleLogger("SumerianProvider"),aw=(Qn(uw,iw=_l),uw.prototype.getProviderName=function(){return"SumerianProvider"},uw.prototype.loadScript=function(r){return tw(this,void 0,void 0,function(){return nw(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},uw.prototype.loadScene=function(w,C,_){return tw(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v,m,y,b,S;return nw(this,function(e){switch(e.label){case 0:if(!w)throw a="No scene name passed into loadScene",sw.error(a),new YS(a);if(!C)throw a="No dom element id passed into loadScene",sw.error(a),new WS(a);if(!(t=document.getElementById(C)))throw a="DOM element id, "+C+" not found",sw.error(a),new WS(a);if(!(n=this.getScene(w)).sceneConfig)throw a="No scene config configured for scene: "+w,sw.error(a),new YS(a);if(r=n.sceneConfig.url,i=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))u=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw a="No region configured for scene: "+w,sw.error(a),new YS(a);u=this.options.region}h={region:u,customUserAgent:E.Constants.userAgent+"-SumerianScene"},o={headers:{"X-Amz-User-Agent":E.Constants.userAgent}},s=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,E.Credentials.get()];case 2:return a=e.sent(),a={secret_key:(h.credentials=a).secretAccessKey,access_key:a.accessKeyId,session_token:a.sessionToken},u={region:u,service:"sumerian"},u=E.Signer.sign({method:"GET",url:r},a,u),o.headers=ow(ow({},o.headers),u.headers),s=u.url,[3,4];case 3:return e.sent(),sw.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(s,o)];case 5:return[4,(c=e.sent()).json()];case 6:if(l=e.sent(),403===c.status)throw l.message?(sw.error("Failure to authenticate user: "+l.message),new YS("Failure to authenticate user: "+l.message)):(sw.error("Failure to authenticate user"),new YS("Failure to authenticate user"));return f=l.bundleData[i],[4,fetch(f.url,{headers:f.headers})];case 7:return[4,e.sent().json()];case 8:p=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(p[i].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw d=e.sent(),sw.error(d),new YS(d);case 12:return f=_.progressCallback?_.progressCallback:void 0,d=n.publishParamOverrides?n.publishParamOverrides:void 0,h={element:t,sceneId:i,sceneBundle:p,apiResponse:l,progressCallback:f,publishParamOverrides:d,awsSDKConfigOverride:h},[4,window.SumerianBootstrapper.loadScene(h)];case 13:g=e.sent(),n.sceneController=g,n.isLoaded=!0;try{for(v=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(g.sceneLoadWarnings),m=v.next();!m.done;m=v.next())y=m.value,sw.warn("loadScene warning: "+y)}catch(e){b={error:e}}finally{try{m&&!m.done&&(S=v.return)&&S.call(v)}finally{if(b)throw b.error}}return[2]}})})},uw.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},uw.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw sw.error(t),new FS(t)}if(!e)throw t="No scene name was passed",sw.error(t),new BS(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",sw.error(t),new BS(t)},uw.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw sw.error(t),new FS(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",sw.error(t),new BS(t);if(n=n.sceneController)return n;throw t="Scene controller for '"+e+"' has not been loaded",sw.error(t),new GS(t)},uw.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},uw.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},uw.prototype.start=function(e){this.getSceneController(e).start()},uw.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},uw.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},uw.prototype.isMuted=function(e){return this.getSceneController(e).muted},uw.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},uw.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},uw.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},uw);function uw(e){return void 0===e&&(e={}),iw.call(this,e)||this}function cw(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function lw(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var pw=new E.ConsoleLogger("XR");function fw(e){this._options=e,pw.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new aw)}var dw=(fw.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return pw.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2))[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},fw.prototype.addPluggable=function(t){return cw(this,void 0,void 0,function(){return lw(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},fw.prototype.loadScene=function(t,n,r,i){return void 0===r&&(r={}),void 0===i&&(i=this._defaultProvider),cw(this,void 0,void 0,function(){return lw(this,function(e){switch(e.label){case 0:if(!this._pluggables[i])throw new QS("Provider '"+i+"' not configured");return[4,this._pluggables[i].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},fw.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},fw.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},fw.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},fw.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},fw.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},fw.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},fw.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},fw.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},fw.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new QS("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},fw.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new QS("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},fw.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new QS("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new fw(null));E.Amplify.register(dw);var hw=(gw.prototype.auth=function(){return this._auth||Zd},gw.prototype.analytics=function(){return this._analytics||Up},gw.prototype.storage=function(){return this._storage||Kv},gw.prototype.api=function(){return this._api||Ab},gw.prototype.interactions=function(){return this._interactions||kS},gw.prototype.cache=function(){return this._cache},gw.prototype.pubsub=function(){return this._pubsub||hb},gw.prototype.logger=function(e,t){return new this._logger(e,t)},gw.prototype.xr=function(){return this._xr||dw},gw.prototype.i18n=function(){return this._i18n},gw.prototype.authState=function(){return this._authState},gw.prototype.setAuthState=function(e){this._authState.next(e)},gw.decorators=[{type:d.Injectable}],gw.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:["modules"]},{type:d.Optional}]}]},gw);function gw(e){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v,m;void 0===e&&(e={}),this.modules=e,this._authState=new Te,this.authStateChange$=this._authState.asObservable(),e=e||U,t=this._authState,n=e.Auth,m=t,n.currentAuthenticatedUser().then(function(e){Oo.debug("has authenticated user",e),m.next({state:"signedIn",user:e})}).catch(function(e){Oo.debug("no authenticated user",e),m.next({state:"signedOut",user:null})}),r=t,i=E.Amplify.configure(null),y.has(i,"Auth.oauth")&&E.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,Oo.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),o=t,a=(s=n).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Oo.debug("signIn success"),e.challengeName?(Oo.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?o.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?o.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?o.next({state:"confirmSignIn",user:e}):Oo.debug("warning: unhandled challengeName "+e.challengeName)):o.next({state:"signedIn",user:e}),e}).catch(function(e){throw Oo.debug("signIn error",e),e})},u=t,l=(c=n).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Oo.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Oo.debug("signOut error",e),e})},p=t,d=(f=n).signUp,f.signUp=function(t,e,n,r){return d.call(f,t,e,n,r).then(function(e){return Oo.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Oo.debug("signUp error",e),e})},h=t,v=(g=n).confirmSignUp,g.confirmSignUp=function(t,e){return v.call(g,t,e).then(function(e){return Oo.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Oo.debug("confirmSignUp error",e),e})},this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=E.I18n,this._logger=E.Logger}var vw=(mw.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(mw.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(mw.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(mw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),mw.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},mw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},mw.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],mw.ctorParameters=function(){return[{type:hw}]},mw.propDecorators={hide:[{type:d.Input}],data:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},mw);function mw(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var yw,bw,Sw=((vn=(yw=function(e,t){return(yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(ww,bw=vw),ww.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],ww.ctorParameters=function(){return[{type:hw}]},ww);function ww(e){var t=bw.call(this,e)||this;return t.amplifyService=e,t}function Cw(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}Cw.prototype.ngOnInit=function(){this.loadComponent()},Cw.prototype.ngOnDestroy=function(){},Cw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(Sw,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new Po(vw,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Cw.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Cw.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},Cw.propDecorators={framework:[{type:d.Input}],hide:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},p=Cw;var dr="sumerian-scene-container",C="sumerian-scene",nr="sumerian-scene-loading",Jn="sumerian-scene-loading-logo",lr="sumerian-scene-loading-scene-name",Xe="sumerian-scene-loading-bar",b="sumerian-scene-error-text",Je="sumerian-scene-bar",St="sumerian-scene-actions",yt={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},gn={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},_w={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},m={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},hn={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},R={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},Gy={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},dn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+(hr={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"}).section+'">\n    <div class="amplify-form-body" data-test="'+hr.bodySection+'">\n    <div class="amplify-form-header" data-test="'+hr.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+hr.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+hr.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+hr.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Ew=(Object.defineProperty(Aw.prototype,"data",{set:function(e){this.hide=(e.hide?e:this).hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(Aw.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),Aw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Aw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Aw.prototype.setCode=function(e){this.code=e},Aw.prototype.onConfirm=function(){var t=this,e=this._authState.user,n="SOFTWARE_TOKEN_MFA"===(n=e.challengeName)?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},Aw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Aw.prototype.onAlertClose=function(){this._setError(null)},Aw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Aw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:dn}]}],Aw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},Aw.propDecorators={data:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}]},Aw);function Aw(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var Iw,Pw,rr=(Iw=function(e,t){return(Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Iw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pi='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+hr.section+'">\n  <div class="amplify-form-body" data-test="'+hr.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+hr.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+hr.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+hr.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Ow=(rr(Tw,Pw=Ew),Tw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:pi}]}],Tw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},Tw);function Tw(e){var t=Pw.call(this,e)||this;return t.amplifyService=e,t}function kw(e){this.componentFactoryResolver=e,this.hide=[]}function Lw(e,t){return 0<e.filter(function(e){return e===t}).length}function Rw(e,t){return"+"+e+t.replace(/[-()]/g,"")}kw.prototype.ngOnInit=function(){this.loadComponent()},kw.prototype.ngOnDestroy=function(){},kw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(Ow,{authState:this.authState,hide:this.hide}):new Po(Ew,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},kw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],kw.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},kw.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},Yn=kw;var xw={email:"Email",phone_number:"Phone Number",username:"Username"},br='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+R.section+'">\n  <div class="amplify-form-body" data-test="'+R.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+R.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+R.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+R.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+R.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+R.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+R.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',Nw=(Object.defineProperty(Mw.prototype,"data",{set:function(e){this.hide=(e.hide?e:this).hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Mw.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Mw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Mw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Mw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Mw.prototype.setUsername=function(e){this.username=e},Mw.prototype.setCode=function(e){this.code=e},Mw.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},Mw.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},Mw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Mw.prototype.onAlertClose=function(){this._setError(null)},Mw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Mw.prototype.getUsernameLabel=function(){return xw[this._usernameAttributes]||this._usernameAttributes},Mw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:br}]}],Mw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},Mw.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},Mw);function Mw(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var Uw,Dw,Qn=(Uw=function(e,t){return(Uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Uw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_l='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+R.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+R.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+R.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+R.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label  class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+R.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+R.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+R.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+R.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Fw=(Qn(jw,Dw=Nw),jw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:_l}]}],jw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},jw);function jw(e){var t=Dw.call(this,e)||this;return t.amplifyService=e,t}var qw,vn=(Bw.prototype.ngOnInit=function(){this.loadComponent()},Bw.prototype.ngOnDestroy=function(){},Bw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(Fw,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Po(Nw,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Bw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Bw.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},Bw.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},Bw);function Bw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(dn=qw=qw||{}).EMAIL="email",dn.PHONE_NUMBER="phone_number",dn.USERNAME="username";var hr='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+yt.section+'">\n    <div class="amplify-form-body" data-test="'+yt.bodySection+'">\n      <div class="amplify-form-header" data-test="'+yt.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+yt.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+yt.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+yt.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+yt.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+yt.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Vw=(Object.defineProperty(zw.prototype,"data",{set:function(e){this.hide=(e.hide?e:this).hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=Lw(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(zw.prototype,"authState",{set:function(e){this._authState=e,this._show=Lw(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(zw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),zw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},zw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},zw.prototype.setUsername=function(e){this.username=e},zw.prototype.setPassword=function(e){this.password=e},zw.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},zw.prototype.onAlertClose=function(){this._setError(null)},zw.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},zw.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},zw.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},zw.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},zw.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},zw.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case qw.EMAIL:return this.email;case qw.PHONE_NUMBER:return Rw(this.country_code,this.local_phone_number);default:return this.username}},zw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in-core",template:hr}]}],zw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},zw.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},zw);function zw(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var Gw,Kw,rr=(Gw=function(e,t){return(Gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Gw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pi='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+yt.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+yt.bodySection+'">\n    <div class="amplify-form-header" data-test="'+yt.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+yt.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+yt.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+yt.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+yt.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Hw=(rr(Ww,Kw=Vw),Ww.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:pi}]}],Ww.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},Ww);function Ww(e){var t=Kw.call(this,e)||this;return t.amplifyService=e,t}function $w(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}$w.prototype.ngOnInit=function(){this.loadComponent()},$w.prototype.ngOnDestroy=function(){},$w.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new Po(Hw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Po(Vw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},$w.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],$w.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},$w.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},br=$w;var Jw=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],Yw=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],Zw=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],R='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+gn.section+'">\n    <div class="amplify-form-body" data-test="'+gn.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+gn.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+gn.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+gn.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+gn.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Xw=(Object.defineProperty(Qw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===qw.EMAIL?(this.signUpFields=Yw,this.defaultSignUpFields=Yw):this._usernameAttributes===qw.PHONE_NUMBER&&(this.signUpFields=Zw,this.defaultSignUpFields=Zw),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(Qw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===qw.EMAIL?(this.signUpFields=Yw,this.defaultSignUpFields=Yw):this._usernameAttributes===qw.PHONE_NUMBER&&(this.signUpFields=Zw,this.defaultSignUpFields=Zw)},enumerable:!0,configurable:!0}),Object.defineProperty(Qw.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(Qw.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Qw.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},Qw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Qw.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=Rw(this.country_code,this.local_phone_number));var r=(e=Object.keys(this.user)).map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},Qw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Qw.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},Qw.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},Qw.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},Qw.prototype.onAlertClose=function(){this._setError(null)},Qw.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},Qw.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},Qw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Qw.prototype.getUsernameLabel=function(){return xw[this._usernameAttributes]||this._usernameAttributes},Qw.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},Qw.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up-core",template:R}]}],Qw.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},Qw.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],usernameAttributes:[{type:d.Input}],authState:[{type:d.Input}],signUpConfig:[{type:d.Input}]},Qw);function Qw(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=Jw,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var eC,tC,Qn=(eC=function(e,t){return(eC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}eC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_l='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+gn.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+gn.bodySection+'">\n    <div class="amplify-form-header" data-test="'+gn.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+gn.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+gn.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+gn.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+gn.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',nC=(Qn(rC,tC=Xw),rC.prototype.setProp=function(e){return this.user[e.name]=e.value},rC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:_l}]}],rC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},rC);function rC(e){var t=tC.call(this,e)||this;return t.amplifyService=e,t}function iC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}iC.prototype.ngOnInit=function(){this.loadComponent()},iC.prototype.ngOnDestroy=function(){},iC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(nC,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Po(Xw,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},iC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],iC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},iC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},dn=iC;var hr='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+_w.section+'">\n  <div class="amplify-form-body" data-test="'+_w.bodySection+'">\n  <div class="amplify-form-header" data-test="'+_w.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+_w.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+_w.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+_w.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',oC=(Object.defineProperty(sC.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(sC.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=(e.hide?e:this).hide},enumerable:!0,configurable:!0}),sC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},sC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},sC.prototype.setPassword=function(e){this.password=e},sC.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},sC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},sC.prototype.onAlertClose=function(){this._setError(null)},sC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},sC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password-core",template:hr}]}],sC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},sC.propDecorators={authState:[{type:d.Input}],hide:[{type:d.Input}],data:[{type:d.Input}]},sC);function sC(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var aC,uC,yt=(aC=function(e,t){return(aC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}aC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rr='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+_w.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+_w.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+_w.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+_w.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+_w.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+_w.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',cC=(yt(lC,uC=oC),lC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:rr}]}],lC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},lC);function lC(e){var t=uC.call(this,e)||this;return t.amplifyService=e,t}function pC(e){this.componentFactoryResolver=e,this.hide=[]}pC.prototype.ngOnInit=function(){this.loadComponent()},pC.prototype.ngOnDestroy=function(){},pC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(cC,{authState:this.authState,hide:this.hide}):new Po(oC,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},pC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],pC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},pC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},pi=pC;var R='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+hn.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",fC=(Object.defineProperty(dC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),dC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},dC.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},dC.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===qw.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===qw.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},dC.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},dC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings-core",template:R}]}],dC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},dC.propDecorators={authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},dC);function dC(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var hC,gC,gn=(hC=function(e,t){return(hC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}hC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Qn='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+hn.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",vC=(gn(mC,gC=fC),mC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings-ionic",template:Qn}]}],mC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},mC);function mC(e){var t=gC.call(this,e)||this;return t.amplifyService=e,t}function yC(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}yC.prototype.ngOnInit=function(){this.loadComponent()},yC.prototype.ngOnDestroy=function(){},yC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(vC,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new Po(fC,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},yC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],yC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},yC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},_l=yC;var hr='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+Gy.section+'">\n    <div class="amplify-form-body" data-test="'+Gy.bodySection+'">\n    <div class="amplify-form-header" data-test="'+Gy.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+Gy.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+Gy.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+Gy.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+Gy.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+Gy.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+Gy.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',bC=(Object.defineProperty(SC.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=(e.hide?e:this).hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),SC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(SC.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),SC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(SC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),SC.prototype.setCode=function(e){this.code=e},SC.prototype.setPassword=function(e){this.password=e},SC.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case qw.EMAIL:return this.email;case qw.PHONE_NUMBER:return Rw(this.country_code,this.local_phone_number);default:return this.username}},SC.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},SC.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},SC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},SC.prototype.onAlertClose=function(){this._setError(null)},SC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},SC.prototype.getUsernameLabel=function(){return xw[this._usernameAttributes]||this._usernameAttributes},SC.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},SC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password-core",template:hr}]}],SC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},SC.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},SC);function SC(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var wC,CC,_w=(wC=function(e,t){return(wC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),yt='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Gy.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+Gy.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+Gy.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+Gy.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+Gy.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+Gy.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+Gy.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',_C=(_w(EC,CC=bC),EC.prototype.onCodeChange=function(e){this.country_code=e},EC.prototype.onNumberChange=function(e){this.local_phone_number=e},EC.prototype.setUsername=function(e){this.username=e},EC.prototype.setEmail=function(e){this.email=e},EC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:yt}]}],EC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},EC);function EC(e){var t=CC.call(this,e)||this;return t.amplifyService=e,t}function AC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}AC.prototype.ngOnInit=function(){this.loadComponent()},AC.prototype.ngOnDestroy=function(){},AC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(_C,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Po(bC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},AC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],AC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},AC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},rr=AC;var IC=function(){return(IC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},R='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+m.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+m.usernameInput+'"\n        />\n    </div>\n</div>\n',hn=(Object.defineProperty(PC.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(PC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(PC.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),PC.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},PC.prototype.ngOnDestroy=function(){},PC.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},PC.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},PC.prototype.getUsernameLabel=function(){return xw[this._usernameAttributes]||this._usernameAttributes},PC.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},PC.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(IC({},e))},PC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-username-field-core",template:R}]}],PC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},PC.propDecorators={data:[{type:d.Input}],usernameAttributes:[{type:d.Input}],placeholder:[{type:d.Input}],usernameFieldChanged:[{type:d.Output}]},PC);function PC(e){this.amplifyService=e,this._usernameAttributes=qw.USERNAME,this._placeholder="",this.usernameFieldChanged=new d.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var OC=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],gn='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+m.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+m.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',Qn=(Object.defineProperty(TC.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(TC.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),TC.prototype.ngOnInit=function(){},TC.prototype.ngOnDestroy=function(){},TC.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},TC.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},TC.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},TC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-phone-field-core",template:gn}]}],TC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},TC.propDecorators={data:[{type:d.Input}],placeholder:[{type:d.Input}],label:[{type:d.Input}],required:[{type:d.Input}],defaultCountryCode:[{type:d.Input}],phoneFieldChanged:[{type:d.Output}]},TC);function TC(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new d.EventEmitter,this._countries=OC}var kC=(LC.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},LC.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(LC.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(LC.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(LC.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),LC.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},LC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],LC.ctorParameters=function(){return[{type:hw}]},LC.propDecorators={selected:[{type:d.Output}],data:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}]},LC);function LC(e){this.amplifyService=e,this._options={},this.selected=new d.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var RC,xC,NC=((hr=(RC=function(e,t){return(RC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}RC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(MC,xC=kC),MC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],MC.ctorParameters=function(){return[{type:hw}]},MC);function MC(e){var t=xC.call(this,e)||this;return t.amplifyService=e,t}function UC(e){this.componentFactoryResolver=e,this.selected=new d.EventEmitter}UC.prototype.ngOnInit=function(){this.loadComponent()},UC.prototype.ngOnDestroy=function(){},UC.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(NC,{path:this.path,options:this.options}):new Po(kC,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},UC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],UC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},UC.propDecorators={framework:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}],selected:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[ft]}]},Gy=UC;var DC=(Object.defineProperty(FC.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(FC.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(FC.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),FC.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},FC.prototype.onImageClicked=function(){this.selected.emit(this.url)},FC.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},FC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],FC.ctorParameters=function(){return[{type:hw}]},FC.propDecorators={selected:[{type:d.Output}],data:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}]},FC);function FC(e){this.amplifyService=e,this._options={},this.selected=new d.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var jC,qC,BC=((_w=(jC=function(e,t){return(jC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(VC,qC=DC),VC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],VC.ctorParameters=function(){return[{type:hw}]},VC);function VC(e){var t=qC.call(this,e)||this;return t.amplifyService=e,t}function zC(e){this.componentFactoryResolver=e,this.selected=new d.EventEmitter}zC.prototype.ngOnInit=function(){this.loadComponent()},zC.prototype.ngOnDestroy=function(){},zC.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(BC,{path:this.path,options:this.options}):new Po(DC,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},zC.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],zC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},zC.propDecorators={framework:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}],selected:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[ft]}]},yt=zC;var GC=(Object.defineProperty(KC.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(KC.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(KC.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(KC.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),KC.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},KC.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result,t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},KC.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},KC.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},KC.prototype.onPhotoError=function(){this.hasPhoto=!1},KC.prototype.onAlertClose=function(){this._setError(null)},KC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},KC.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],KC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},KC.propDecorators={url:[{type:d.Input}],storageOptions:[{type:d.Input}],path:[{type:d.Input}],data:[{type:d.Input}],picked:[{type:d.Output}],loaded:[{type:d.Output}],uploaded:[{type:d.Output}]},KC);function KC(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new d.EventEmitter,this.loaded=new d.EventEmitter,this.uploaded=new d.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var HC,WC,$C=((R=(HC=function(e,t){return(HC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}HC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(JC,WC=GC),JC.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],JC.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},JC);function JC(e){var t=WC.call(this,e)||this;return t.amplifyService=e,t}function YC(e){this.componentFactoryResolver=e,this.picked=new d.EventEmitter,this.loaded=new d.EventEmitter,this.uploaded=new d.EventEmitter}YC.prototype.ngOnInit=function(){this.loadComponent()},YC.prototype.ngOnDestroy=function(){},YC.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po($C,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new Po(GC,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},YC.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],YC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},YC.propDecorators={framework:[{type:d.Input}],url:[{type:d.Input}],path:[{type:d.Input}],storageOptions:[{type:d.Input}],picked:[{type:d.Output}],loaded:[{type:d.Output}],uploaded:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[ft]}]},gn=YC;function ZC(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function XC(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var QC={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},e_={silenceDetectionConfig:{time:2e3,amplitude:.2}},t_=(Object.defineProperty(n_.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!N.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!N.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!N.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",QC.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",QC.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(n_.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(n_.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(n_.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),n_.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},n_.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},n_.prototype.onInputChange=function(e){this.inputText=e},n_.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},n_.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=QC.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=QC.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},n_.prototype.onError=function(e){this.logger.error(e)},n_.prototype.lexResponseHandler=function(){return ZC(this,void 0,void 0,function(){var t;return XC(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=QC.SPEAKING.MESSAGE,this.micText=QC.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},n_.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=QC.LISTENING.MESSAGE,e.micText=QC.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=QC.INITIAL.MESSAGE,e.micText=QC.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=QC.INITIAL.MESSAGE,this.micText=QC.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},n_.prototype.micButtonHandler=function(){return ZC(this,void 0,void 0,function(){return XC(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=QC.LISTENING.MESSAGE,this.micText=QC.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},n_.decorators=[{type:d.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],n_.ctorParameters=function(){return[{type:d.ChangeDetectorRef},{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},n_.propDecorators={complete:[{type:d.Output}],data:[{type:d.Input}],bot:[{type:d.Input}],title:[{type:d.Input}],clearOnComplete:[{type:d.Input}]},n_);function n_(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=QC.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=QC.INITIAL.ICON,this.voiceConfig=e_,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new d.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=QC.SENDING.MESSAGE,n.audioInput=e,n.micText=QC.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var r_,i_,o_=((hr=(r_=function(e,t){return(r_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(s_,i_=t_),s_.decorators=[{type:d.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],s_.ctorParameters=function(){return[{type:d.ChangeDetectorRef},{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},s_);function s_(e,t){return(e=i_.call(this,e,t)||this).amplifyService=t,e}function a_(e){this.componentFactoryResolver=e,this.complete=new d.EventEmitter}function u_(){}a_.prototype.ngOnInit=function(){this.loadComponent()},a_.prototype.ngOnDestroy=function(){},a_.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(o_,e):new Po(t_,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component);(e=this.componentHost.viewContainerRef).clear(),(r=e.createComponent(r)).instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},a_.decorators=[{type:d.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],a_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},a_.propDecorators={framework:[{type:d.Input}],bot:[{type:d.Input}],title:[{type:d.Input}],clearComplete:[{type:d.Input}],conversationModeOn:[{type:d.Input}],voiceConfig:[{type:d.Input}],voiceEnabled:[{type:d.Input}],textEnabled:[{type:d.Input}],complete:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[ft]}]},_w=a_,Object.defineProperty(u_.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),u_.decorators=[{type:d.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],u_.propDecorators={title:[{type:d.Input}]},R=u_;function c_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function l_(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var hr='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+dr+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+C+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+nr+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+Je+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+St+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',p_=(Object.defineProperty(f_.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),f_.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},f_.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},f_.prototype.loadAndStartScene=function(){return c_(this,void 0,void 0,function(){var t,n=this;return l_(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},f_.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},f_.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},f_.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},f_.prototype.maximize=function(){return c_(this,void 0,void 0,function(){var t;return l_(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},f_.prototype.minimize=function(){return c_(this,void 0,void 0,function(){var t;return l_(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},f_.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-core",template:hr}]}],f_.ctorParameters=function(){return[{type:hw}]},f_.propDecorators={sceneName:[{type:d.Input}],data:[{type:d.Input}]},f_);function f_(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){e*=100,t.loadPercentage=e},this.amplifyUI=M,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var d_,h_,Je='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+dr+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+C+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+nr+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+Je+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+St+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',g_=((hr=(d_=function(e,t){return(d_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(v_,h_=p_),v_.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-ionic",template:Je}]}],v_.ctorParameters=function(){return[{type:hw}]},v_);function v_(e){var t=h_.call(this,e)||this;return t.amplifyService=e,t}function m_(e){this.componentFactoryResolver=e}function y_(){this.AmplifyUI=M}function b_(){}m_.prototype.ngOnInit=function(){this.loadComponent()},m_.prototype.ngOnDestroy=function(){},m_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Po(g_,{sceneName:this.sceneName}):new Po(p_,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},m_.decorators=[{type:d.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],m_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},m_.propDecorators={framework:[{type:d.Input}],sceneName:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[ft]}]},St=m_,hr='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Jn+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+lr+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+b+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+Xe+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",y_.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-loading-core",template:hr}]}],y_.ctorParameters=function(){return[]},y_.propDecorators={loadPercentage:[{type:d.Input}],sceneName:[{type:d.Input}],sceneError:[{type:d.Input}]},hr=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},St=[p,vw,Yn,Ew,vn,Nw,br,Vw,dn,Xw,pi,oC,_l,fC,rr,bC,hn,Qn,Gy,kC,yt,DC,gn,GC,_w,t_,R,St,p_,Je=y_],b_.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,Sn],declarations:hr([ft],St),entryComponents:hr(St),providers:[],exports:hr(St)}]}],ft=b_;var S_,w_,hr=(S_=function(e,t){return(S_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}S_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),St='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+m.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+m.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',Qn=(hr(C_,w_=Qn),C_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:St}]}],C_.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},C_);function C_(e){var t=w_.call(this,e)||this;return t.amplifyService=e,t}var __,E_,St=(__=function(e,t){return(__=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}__(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+m.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+m.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',hn=(St(A_,E_=hn),A_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-username-field-ionic",template:m}]}],A_.ctorParameters=function(){return[{type:hw,decorators:[{type:d.Inject,args:[hw]}]}]},A_);function A_(e){var t=E_.call(this,e)||this;return t.amplifyService=e,t}var I_,P_,Xe='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Jn+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+lr+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+b+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+Xe+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",Je=((m=(I_=function(e,t){return(I_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}I_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(O_,P_=Je),O_.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-loading-ionic",template:Xe}]}],O_.ctorParameters=function(){return[]},O_);function O_(){return P_.call(this)||this}function T_(){}Xe=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Je=[Sw,Ow,Fw,_C,vC,Hw,nC,hn,Qn,cC,$C,NC,BC,o_,g_,Je],T_.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,Sn],declarations:Xe(Je),entryComponents:Xe(Je),providers:[hw],schemas:[d.CUSTOM_ELEMENTS_SCHEMA],exports:Xe(Je)}]}],Je=T_,e.AmplifyAngularModule=ft,e.AmplifyIonicModule=Je,e.AmplifyModules=function(e){return new hw(e)},e.AmplifyService=hw,Object.defineProperty(e,"__esModule",{value:!0})});