!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,d,t,E,m,h,f,g,a,i,o,s,n,v,y,u,r,c,l,p,b,S,w,C,_,A,I,P,O,T,k,L,R,x,N,M){"use strict";var U="default"in E?E.default:E;p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function q(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function B(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,n,s):i(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function V(n,r){return function(e,t){r(e,t,n)}}function z(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function G(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function K(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function Y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){i[r]&&(s[r]=function(n){return new Promise(function(e,t){1<o.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=i[e](t)).value instanceof J?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Z(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=H(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(i){return new Promise(function(e,t){var n,r;i=s[o](i),n=e,e=t,r=i.done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function X(e){return"function"==typeof e}var Q=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Q=e},get useDeprecatedSynchronousErrorHandling(){return Q}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function ie(e){return null!==e&&"object"==typeof e}var oe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),se=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o){e[o].remove(this)}if(X(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){t=e instanceof oe?ae(e.errors):[e]}}if(re(i))for(var o=-1,s=i.length;++o<s;){var a=i[o];if(ie(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof oe?t=t.concat(ae(e.errors)):t.push(e)}}if(t)throw new oe(t)}},u.prototype.add=function(e){var t,n=e;if(!e)return u.EMPTY;switch(typeof e){case"function":n=new u(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(t=n,(n=new u)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}e=n._parentOrParents;if(null===e)n._parentOrParents=this;else if(e instanceof u){if(e===this)return n;n._parentOrParents=[e,this]}else{if(-1!==e.indexOf(this))return n;e.push(this)}e=this._subscriptions;return null===e?this._subscriptions=[n]:e.push(n),n},u.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},u.EMPTY=((e=new u).closed=!0,e),u}();function ae(e){return e.reduce(function(e,t){return e.concat(t instanceof oe?t.errors:t)},[])}var ue=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ce=function(i){function o(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof o?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new le(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new le(r,e,t,n)}return r}return F(o,i),o.prototype[ue]=function(){return this},o.create=function(e,t,n){n=new o(e,t,n);return n.syncErrorThrowable=!1,n},o.prototype.next=function(e){this.isStopped||this._next(e)},o.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(e){this.destination.next(e)},o.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},o}(se),le=function(s){function e(e,t,n,r){var i,o=s.call(this)||this;o._parentSubscriber=e;e=o;return X(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==ne&&(X((e=Object.create(t)).unsubscribe)&&o.add(e.unsubscribe.bind(e)),e.unsubscribe=o.unsubscribe.bind(o))),o._context=e,o._next=i,o._error=n,o._complete=r,o}return F(e,s),e.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},e.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return ee.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(te(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(ce);var pe=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function fe(e){return e}var de=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof ce)return e;if(e[ue])return e[ue]()}return e||t||n?new ce(e,t,n):new ce(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof ce?n:null}return 1}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=he(e))(function(e,t){var n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[pe]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?fe:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},n.prototype.toPromise=function(e){var r=this;return new(e=he(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function he(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var ge=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ve=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return F(e,r),e.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},e}(se),me=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return F(e,n),e}(ce),ye=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return F(e,t),e.prototype[ue]=function(){return new me(this)},e.prototype.lift=function(e){var t=new be(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new ge;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new ge;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ge;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ge;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new ge;return this.hasError?(e.error(this.thrownError),se.EMPTY):this.isStopped?(e.complete(),se.EMPTY):(this.observers.push(e),new ve(this,e))},e.prototype.asObservable=function(){var e=new de;return e.source=this,e},e.create=function(e,t){return new be(e,t)},e}(de),be=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return F(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):se.EMPTY},e}(ye);function Se(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new we(t,n))}}var we=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ce(e,this.project,this.thisArg))},e}(),Ce=function(r){function e(e,t,n){e=r.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=n||e,e}return F(e,r),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(ce);function _e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ee=_e(),Ae=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ie(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Pe=function(e){if(e&&"function"==typeof e[pe])return o=e,function(e){var t=o[pe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ae(e))return i=e,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()};if(Ie(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[Ee])return r=e,function(t){for(var e=r[Ee]();;){var n=void 0;try{n=e.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,i,o,e=ie(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Oe(e,t){if(null!=e){if((n=e)&&"function"==typeof n[pe])return a=e,u=t,new de(function(t){var n=new se;return n.add(u.schedule(function(){var e=a[pe]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ie(e))return o=e,s=t,new de(function(t){var n=new se;return n.add(s.schedule(function(){return o.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Ae(e))return r=e,i=t,new de(function(e){var t=new se,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ee]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new de(function(r){var i,e=new se;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ee](),e.add(n.schedule(function(){if(!r.closed){try{var e=i.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,i,o,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Te(e,t){return t?Oe(e,t):e instanceof de?e:new de(Pe(e))}function ke(u,c){return new de(function(r){var i=u.length;if(0!==i)for(var o=new Array(i),s=0,a=0,e=0;e<i;e++)!function(t){var e=Te(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),o[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==i&&n||(a===i&&r.next(c?c.reduce(function(e,t,n){return e[t]=o[n],e},{}):o),r.complete())}}))}(e);else r.complete()})}var Le=null;var Re=(Object.defineProperty(xe.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),xe);function xe(){this.resourceLoaderType=null}var Ne,Me=(F(Ue,Ne=Re),Ue.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Ue.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Ue.prototype.supportsDOMEvents=function(){return!0},Ue.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Ue.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Ue.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Ue.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Ue);function Ue(){var t=Ne.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var De,Fe={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},je={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};d["ɵglobal"].Node&&(De=d["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Be,Ve=(F(ze,Be=Me),ze.prototype.parse=function(e){throw new Error("parse not implemented")},ze.makeCurrent=function(){var e;e=new ze,Le=Le||e},ze.prototype.hasProperty=function(e,t){return t in e},ze.prototype.setProperty=function(e,t,n){e[t]=n},ze.prototype.getProperty=function(e,t){return e[t]},ze.prototype.invoke=function(e,t,n){e[t].apply(e,n)},ze.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},ze.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},ze.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},ze.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(ze.prototype,"attrToPropMap",{get:function(){return Fe},enumerable:!0,configurable:!0}),ze.prototype.contains=function(e,t){return De.call(e,t)},ze.prototype.querySelector=function(e,t){return e.querySelector(t)},ze.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},ze.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},ze.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},ze.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},ze.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},ze.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},ze.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},ze.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},ze.prototype.getInnerHTML=function(e){return e.innerHTML},ze.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},ze.prototype.getOuterHTML=function(e){return e.outerHTML},ze.prototype.nodeName=function(e){return e.nodeName},ze.prototype.nodeValue=function(e){return e.nodeValue},ze.prototype.type=function(e){return e.type},ze.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},ze.prototype.firstChild=function(e){return e.firstChild},ze.prototype.nextSibling=function(e){return e.nextSibling},ze.prototype.parentElement=function(e){return e.parentNode},ze.prototype.childNodes=function(e){return e.childNodes},ze.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},ze.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},ze.prototype.appendChild=function(e,t){e.appendChild(t)},ze.prototype.removeChild=function(e,t){e.removeChild(t)},ze.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},ze.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},ze.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},ze.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},ze.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},ze.prototype.setInnerHTML=function(e,t){e.innerHTML=t},ze.prototype.getText=function(e){return e.textContent},ze.prototype.setText=function(e,t){e.textContent=t},ze.prototype.getValue=function(e){return e.value},ze.prototype.setValue=function(e,t){e.value=t},ze.prototype.getChecked=function(e){return e.checked},ze.prototype.setChecked=function(e,t){e.checked=t},ze.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},ze.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},ze.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},ze.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},ze.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},ze.prototype.createScriptTag=function(e,t,n){n=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return n.setAttribute(e,t),n},ze.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},ze.prototype.createShadowRoot=function(e){return e.createShadowRoot()},ze.prototype.getShadowRoot=function(e){return e.shadowRoot},ze.prototype.getHost=function(e){return e.host},ze.prototype.clone=function(e){return e.cloneNode(!0)},ze.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},ze.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},ze.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},ze.prototype.addClass=function(e,t){e.classList.add(t)},ze.prototype.removeClass=function(e,t){e.classList.remove(t)},ze.prototype.hasClass=function(e,t){return e.classList.contains(t)},ze.prototype.setStyle=function(e,t,n){e.style[t]=n},ze.prototype.removeStyle=function(e,t){e.style[t]=""},ze.prototype.getStyle=function(e,t){return e.style[t]},ze.prototype.hasStyle=function(e,t,n){t=this.getStyle(e,t)||"";return n?t==n:0<t.length},ze.prototype.tagName=function(e){return e.tagName},ze.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},ze.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},ze.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},ze.prototype.getAttribute=function(e,t){return e.getAttribute(t)},ze.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},ze.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},ze.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},ze.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},ze.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},ze.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},ze.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},ze.prototype.getDefaultDocument=function(){return document},ze.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},ze.prototype.getTitle=function(e){return e.title},ze.prototype.setTitle=function(e,t){e.title=t||""},ze.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},ze.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},ze.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},ze.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},ze.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},ze.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},ze.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},ze.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},ze.prototype.adoptNode=function(e){return document.adoptNode(e)},ze.prototype.getHref=function(e){return e.getAttribute("href")},ze.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&qe.hasOwnProperty(t)&&(t=qe[t]))}return je[t]||t},ze.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},ze.prototype.getHistory=function(){return window.history},ze.prototype.getLocation=function(){return window.location},ze.prototype.getBaseHref=function(e){var t=function(){if(!Ke&&!(Ke=document.querySelector("base")))return null;return Ke.getAttribute("href")}();return null==t?null:function(e){Ge=Ge||document.createElement("a");return Ge.setAttribute("href",e),"/"===Ge.pathname.charAt(0)?Ge.pathname:"/"+Ge.pathname}(t)},ze.prototype.resetBaseElement=function(){Ke=null},ze.prototype.getUserAgent=function(){return window.navigator.userAgent},ze.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},ze.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},ze.prototype.getComputedStyle=function(e){return getComputedStyle(e)},ze.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},ze.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},ze.prototype.supportsCookies=function(){return!0},ze.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},ze.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},ze);function ze(){return null!==Be&&Be.apply(this,arguments)||this}var Ge,Ke=null;var He=t.DOCUMENT;function We(){return window.history.pushState}var $e,Je=(F(Ye,$e=t.PlatformLocation),Ye.prototype._init=function(){this.location=Le.getLocation(),this._history=Le.getHistory()},Ye.prototype.getBaseHrefFromDOM=function(){return Le.getBaseHref(this._doc)},Ye.prototype.onPopState=function(e){Le.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},Ye.prototype.onHashChange=function(e){Le.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(Ye.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),Ye.prototype.pushState=function(e,t,n){We()?this._history.pushState(e,t,n):this.location.hash=n},Ye.prototype.replaceState=function(e,t,n){We()?this._history.replaceState(e,t,n):this.location.hash=n},Ye.prototype.forward=function(){this._history.forward()},Ye.prototype.back=function(){this._history.back()},Ye.decorators=[{type:d.Injectable}],Ye.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]},Ye);function Ye(e){var t=$e.call(this)||this;return t._doc=e,t._init(),t}Ze.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},Ze.prototype.addTags=function(e,n){var r=this;return void 0===n&&(n=!1),e?e.reduce(function(e,t){return t&&e.push(r._getOrCreateElement(t,n)),e},[]):[]},Ze.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},Ze.prototype.getTags=function(e){if(!e)return[];e=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return e?[].slice.call(e):[]},Ze.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);t=this.getTag(t);return t?this._setMetaElementAttributes(e,t):this._getOrCreateElement(e,!0)},Ze.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},Ze.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},Ze.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),n=this.getTag(n);if(n&&this._containsAttributes(e,n))return n}n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);e=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(e,n),n},Ze.prototype._setMetaElementAttributes=function(t,n){var r=this;return Object.keys(t).forEach(function(e){return r._dom.setAttribute(n,e,t[e])}),n},Ze.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},Ze.prototype._containsAttributes=function(t,n){var r=this;return Object.keys(t).every(function(e){return r._dom.getAttribute(n,e)===t[e]})},Ze.decorators=[{type:d.Injectable}],Ze.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]};function Ze(e){this._doc=e,this._dom=Le}new d.InjectionToken("TRANSITION_ID");var Xe=(Qe.init=function(){d.setTestabilityGetter(new Qe)},Qe.prototype.addToWindow=function(n){d["ɵglobal"].getAngularTestability=function(e,t){void 0===t&&(t=!0);t=n.findTestabilityInTree(e,t);if(null==t)throw new Error("Could not find testability for element.");return t},d["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},d["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()};d["ɵglobal"].frameworkStabilizers||(d["ɵglobal"].frameworkStabilizers=[]),d["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){i=i||e,0==--r&&t(i)}var e=d["ɵglobal"].getAllAngularTestabilities(),r=e.length,i=!1;e.forEach(function(e){e.whenStable(n)})})},Qe.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Le.isShadowRoot(t)?this.findTestabilityInTree(e,Le.getHost(t),!0):this.findTestabilityInTree(e,Le.parentElement(t),!0):null},Qe);function Qe(){}et.prototype.getTitle=function(){return Le.getTitle(this._doc)},et.prototype.setTitle=function(e){Le.setTitle(this._doc,e)},et.decorators=[{type:d.Injectable}],et.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]};function et(e){this._doc=e}function tt(e,t){"undefined"!=typeof COMPILED&&COMPILED||((d["ɵglobal"].ng=d["ɵglobal"].ng||{})[e]=t)}var nt={ApplicationRef:d.ApplicationRef,NgZone:d.NgZone};function rt(e){return d.getDebugNode(e)}d.APP_INITIALIZER,d.NgProbeToken,new d.Optional;var it=new d.InjectionToken("EventManagerPlugins"),ot=(st.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},st.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},st.prototype.getZone=function(){return this._zone},st.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},st.decorators=[{type:d.Injectable}],st.ctorParameters=function(){return[{type:Array,decorators:[{type:d.Inject,args:[it]}]},{type:d.NgZone}]},st);function st(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var at=(ut.prototype.addGlobalEventListener=function(e,t,n){e=Le.getGlobalEventTarget(this._doc,e);if(!e)throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},ut);function ut(e){this._doc=e}var ct=(lt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},lt.prototype.onStylesAdded=function(e){},lt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},lt.decorators=[{type:d.Injectable}],lt.ctorParameters=function(){return[]},lt);function lt(){this._stylesSet=new Set}var pt,ft=(F(dt,pt=ct),dt.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},dt.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},dt.prototype.removeHost=function(e){this._hostNodes.delete(e)},dt.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},dt.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Le.remove(e)})},dt.decorators=[{type:d.Injectable}],dt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]},dt);function dt(e){var t=pt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gt=/%COMP%/g,vt="_nghost-%COMP%",mt="_ngcontent-%COMP%";function yt(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?yt(e,i,n):(i=i.replace(gt,e),n.push(i))}return n}function bt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}St.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case d.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new It(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case d.ViewEncapsulation.Native:return new Tt(this.eventManager,this.sharedStylesHost,e,t);default:return this.rendererByCompId.has(t.id)||(e=yt(t.id,t.styles,[]),this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)),this.defaultRenderer}},St.prototype.begin=function(){},St.prototype.end=function(){},St.decorators=[{type:d.Injectable}],St.ctorParameters=function(){return[{type:ot},{type:ft}]};function St(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new wt(e)}var wt=(Ct.prototype.destroy=function(){},Ct.prototype.createElement=function(e,t){return t?document.createElementNS(ht[t],e):document.createElement(e)},Ct.prototype.createComment=function(e){return document.createComment(e)},Ct.prototype.createText=function(e){return document.createTextNode(e)},Ct.prototype.appendChild=function(e,t){e.appendChild(t)},Ct.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Ct.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Ct.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Ct.prototype.parentNode=function(e){return e.parentNode},Ct.prototype.nextSibling=function(e){return e.nextSibling},Ct.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=ht[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Ct.prototype.removeAttribute=function(e,t,n){var r;n?(r=ht[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Ct.prototype.addClass=function(e,t){e.classList.add(t)},Ct.prototype.removeClass=function(e,t){e.classList.remove(t)},Ct.prototype.setStyle=function(e,t,n,r){r&d.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&d.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Ct.prototype.removeStyle=function(e,t,n){n&d.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Ct.prototype.setProperty=function(e,t,n){Et(t,"property"),e[t]=n},Ct.prototype.setValue=function(e,t){e.nodeValue=t},Ct.prototype.listen=function(e,t,n){return Et(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bt(n)):this.eventManager.addEventListener(e,t,bt(n))},Ct);function Ct(e){this.eventManager=e,this.data=Object.create(null)}var _t="@".charCodeAt(0);function Et(e,t){if(e.charCodeAt(0)===_t)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var At,It=(F(Pt,At=wt),Pt.prototype.applyToHost=function(e){At.prototype.setAttribute.call(this,e,this.hostAttr,"")},Pt.prototype.createElement=function(e,t){t=At.prototype.createElement.call(this,e,t);return At.prototype.setAttribute.call(this,t,this.contentAttr,""),t},Pt);function Pt(e,t,n){var r=At.call(this,e)||this,e=yt((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,mt.replace(gt,e)),r.hostAttr=(n=n.id,vt.replace(gt,n)),r}var Ot,Tt=(F(kt,Ot=wt),kt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},kt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},kt.prototype.appendChild=function(e,t){return Ot.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},kt.prototype.insertBefore=function(e,t,n){return Ot.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},kt.prototype.removeChild=function(e,t){return Ot.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},kt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Ot.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},kt);function kt(e,t,n,r){var i=Ot.call(this,e)||this;i.sharedStylesHost=t,i.hostEl=n,i.component=r,i.shadowRoot=n.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=yt(r.id,r.styles,[]),s=0;s<o.length;s++){var a=document.createElement("style");a.textContent=o[s],i.shadowRoot.appendChild(a)}return i}var Lt,Rt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},xt=Rt("addEventListener"),Nt=Rt("removeEventListener"),Mt={},Ut="removeEventListener",Dt="__zone_symbol__propagationStopped",Ft="__zone_symbol__stopImmediatePropagation",jt="undefined"!=typeof Zone&&Zone[Rt("BLACK_LISTED_EVENTS")];jt&&(Lt={},jt.forEach(function(e){Lt[e]=e}));function qt(e){return!!Lt&&Lt.hasOwnProperty(e)}function Bt(e){var t=Mt[e.type];if(t){t=this[t];if(t){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,i=t.slice(),o=0;o<i.length&&!0!==e[Dt];o++){(r=i[o]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}}}var Vt;F(zt,Vt=at),zt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Ft]||(e=Event.prototype[Ft]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Dt]=!0),e&&e.apply(this,arguments)}))},zt.prototype.supports=function(e){return!0},zt.prototype.addEventListener=function(e,t,n){var r=this,i=e[xt],o=n;if(!i||d.NgZone.isInAngularZone()&&!qt(t))e.addEventListener(t,o,!1);else{var n=(n=Mt[t])||(Mt[t]=Rt("ANGULAR"+t+"FALSE")),i=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=qt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:o});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===o){a=!0;break}a||s.push({zone:n,handler:o})}i||e[xt](t,Bt,!1)}return function(){return r.removeEventListener(e,t,o)}},zt.prototype.removeEventListener=function(e,t,n){var r=e[Nt];if(!r)return e[Ut].apply(e,[t,n,!1]);var i=Mt[t],o=i&&e[i];if(!o)return e[Ut].apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Bt,!1]):e[Ut].apply(e,[t,n,!1])},zt.decorators=[{type:d.Injectable}],zt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]},{type:d.NgZone}]};function zt(e,t){e=Vt.call(this,e)||this;return e.ngZone=t,e.patchEvent(),e}var Gt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Kt=new d.InjectionToken("HammerGestureConfig"),Ht=(Wt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Wt.decorators=[{type:d.Injectable}],Wt.ctorParameters=function(){return[]},Wt);function Wt(){this.events=[],this.overrides={}}var $t;F(Jt,$t=at),Jt.prototype.supports=function(e){if(!Gt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Jt.prototype.addEventListener=function(n,r,i){var o=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){i(e)})}var t=o._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Jt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Jt.decorators=[{type:d.Injectable}],Jt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]},{type:Ht,decorators:[{type:d.Inject,args:[Kt]}]}]};function Jt(e,t){e=$t.call(this,e)||this;return e._config=t,e}var Yt,Zt=["alt","control","meta","shift"],Xt={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};F(Qt,Yt=at),Qt.prototype.supports=function(e){return null!=Qt.parseEventName(e)},Qt.prototype.addEventListener=function(e,t,n){var r=Qt.parseEventName(t),i=Qt.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Le.onAndCancel(e,r.domEventName,i)})},Qt.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=Qt._normalizeKey(n.pop()),r="";if(Zt.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length)return null;e={};return e.domEventName=t,e.fullKey=r,e},Qt.getEventFullKey=function(t){var n="",r=Le.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Zt.forEach(function(e){e!=r&&(0,Xt[e])(t)&&(n+=e+".")}),n+=r},Qt.eventCallback=function(t,n,r){return function(e){Qt.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},Qt._normalizeKey=function(e){return"esc"!==e?e:"escape"},Qt.decorators=[{type:d.Injectable}],Qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]};function Qt(e){return Yt.call(this,e)||this}var en=(tn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);t=t.response.body;return t.removeChild(t.firstChild),t},tn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},tn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},tn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var i=t[e];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},tn);function tn(e,t){this.defaultDoc=e,this.DOM=t;e=this.DOM.createHtmlDocument();this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var nn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function on(e){return(e=String(e)).match(nn)||e.match(rn)?e:(d.isDevMode()&&Le.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function sn(e){for(var t={},n=0,r=e.split(",");n<r.length;n++){t[r[n]]=!0}return t}function an(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o,s=i[r];for(o in s)s.hasOwnProperty(o)&&(n[o]=!0)}return n}var un=sn("area,br,col,hr,img,wbr"),cn=sn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ln=sn("rp,rt"),pn=an(ln,cn),fn=an(cn,sn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dn=an(ln,sn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hn=an(un,fn,dn,pn),gn=sn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vn=sn("srcset"),mn=sn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yn=an(gn,vn,mn),bn=(Sn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Sn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();yn.hasOwnProperty(n)?(gn[n]&&(e=on(e)),vn[n]&&(n=e,e=(n=String(n)).split(",").map(function(e){return on(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(En(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Sn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(e)&&!un.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},Sn.prototype.chars=function(e){this.buf.push(En(e))},Sn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Sn);function Sn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Le}var wn,Cn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_n=/([^\#-~ |!])/g;function En(e){return e.replace(/&/g,"&amp;").replace(Cn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_n,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var An=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),In=/^url\(([^)]+)\)$/;function Pn(e){if(!(e=String(e).trim()))return"";var t=e.match(In);return t&&on(t[1])===t[1]||e.match(An)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(d.isDevMode()&&Le.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var On;F(Tn,On=function(){}),Tn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case d.SecurityContext.NONE:return t;case d.SecurityContext.HTML:return t instanceof xn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=Le,r=null;try{wn=wn||new en(e,n);var i=t?String(t):"",r=wn.getInertBodyElement(i),o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable")}while(o--,i=s,s=n.getInnerHTML(r),r=wn.getInertBodyElement(i),i!==s);var a=new bn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return d.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var f=p[l];n.removeChild(c,f)}}}(this._doc,String(t)));case d.SecurityContext.STYLE:return t instanceof Un?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Pn(t));case d.SecurityContext.SCRIPT:if(t instanceof jn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case d.SecurityContext.URL:return t instanceof Kn||t instanceof Vn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),on(String(t)));case d.SecurityContext.RESOURCE_URL:if(t instanceof Kn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Tn.prototype.checkNotSafeValue=function(e,t){if(e instanceof kn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Tn.prototype.bypassSecurityTrustHtml=function(e){return new xn(e)},Tn.prototype.bypassSecurityTrustStyle=function(e){return new Un(e)},Tn.prototype.bypassSecurityTrustScript=function(e){return new jn(e)},Tn.prototype.bypassSecurityTrustUrl=function(e){return new Vn(e)},Tn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Kn(e)},Tn.decorators=[{type:d.Injectable}],Tn.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[He]}]}]};function Tn(e){var t=On.call(this)||this;return t._doc=e,t}var kn=(Ln.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Ln);function Ln(e){this.changingThisBreaksApplicationSecurity=e}var Rn,xn=(F(Nn,Rn=kn),Nn.prototype.getTypeName=function(){return"HTML"},Nn);function Nn(){return null!==Rn&&Rn.apply(this,arguments)||this}var Mn,Un=(F(Dn,Mn=kn),Dn.prototype.getTypeName=function(){return"Style"},Dn);function Dn(){return null!==Mn&&Mn.apply(this,arguments)||this}var Fn,jn=(F(qn,Fn=kn),qn.prototype.getTypeName=function(){return"Script"},qn);function qn(){return null!==Fn&&Fn.apply(this,arguments)||this}var Bn,Vn=(F(zn,Bn=kn),zn.prototype.getTypeName=function(){return"URL"},zn);function zn(){return null!==Bn&&Bn.apply(this,arguments)||this}var Gn,Kn=(F(Hn,Gn=kn),Hn.prototype.getTypeName=function(){return"ResourceURL"},Hn);function Hn(){return null!==Gn&&Gn.apply(this,arguments)||this}var Wn=[{provide:d.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:d.PLATFORM_INITIALIZER,useValue:function(){Ve.makeCurrent(),Xe.init()},multi:!0},{provide:t.PlatformLocation,useClass:Je,deps:[He]},{provide:He,useFactory:function(){return document},deps:[]}];d.createPlatformFactory(d.platformCore,"browser",Wn);$n.init=function(e){var t=new $n;return t.store=e,t},$n.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},$n.prototype.set=function(e,t){this.store[e]=t},$n.prototype.remove=function(e){delete this.store[e]},$n.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},$n.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},$n.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},$n.decorators=[{type:d.Injectable}],$n.ctorParameters=function(){return[]};function $n(){this.store={},this.onSerializeCallbacks={}}new d.Version("5.2.11");var Jn=(Object.defineProperty(Yn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Yn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Yn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Yn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},Yn);function Yn(){}var Zn,Xn=(F(Qn,Zn=Jn),Object.defineProperty(Qn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Qn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Qn);function Qn(){return null!==Zn&&Zn.apply(this,arguments)||this}function er(e){return null==e||0===e.length}var tr=new d.InjectionToken("NgValidators"),nr=new d.InjectionToken("NgAsyncValidators"),rr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ir=(or.min=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},or.max=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},or.required=function(e){return er(e.value)?{required:!0}:null},or.requiredTrue=function(e){return!0===e.value?null:{required:!0}},or.email=function(e){return er(e.value)||rr.test(e.value)?null:{email:!0}},or.minLength=function(t){return function(e){if(er(e.value))return null;e=e.value?e.value.length:0;return e<t?{minlength:{requiredLength:t,actualLength:e}}:null}},or.maxLength=function(t){return function(e){e=e.value?e.value.length:0;return t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},or.pattern=function(e){if(!e)return or.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){if(er(e.value))return null;e=e.value;return n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}}}},or.nullValidator=function(e){return null},or.compose=function(e){if(!e)return null;var n=e.filter(sr);return 0==n.length?null:function(e){return ur((t=e,n.map(function(e){return e(t)})));var t}},or.composeAsync=function(e){if(!e)return null;var n=e.filter(sr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return ke(n,null);if(ie(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return ke(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return ke(e,null);var i=e.pop();return ke(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(Se(function(e){return i.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(ar))).pipe(Se(ur))}},or);function or(){}function sr(e){return null!=e}function ar(e){e=d["ɵisPromise"](e)?Te(e):e;if(!d["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function ur(e){e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{});return 0===Object.keys(e).length?null:e}var cr=new d.InjectionToken("NgValueAccessor"),lr={provide:cr,useExisting:d.forwardRef(function(){return pr}),multi:!0},pr=(fr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},fr.prototype.registerOnChange=function(e){this.onChange=e},fr.prototype.registerOnTouched=function(e){this.onTouched=e},fr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[lr]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],fr));function fr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var dr={provide:cr,useExisting:d.forwardRef(function(){return gr}),multi:!0};var hr=new d.InjectionToken("CompositionEventMode"),gr=(vr.prototype.writeValue=function(e){e=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},vr.prototype.registerOnChange=function(e){this.onChange=e},vr.prototype.registerOnTouched=function(e){this.onTouched=e},vr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},vr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},vr.prototype._compositionStart=function(){this._composing=!0},vr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},B([d.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[dr]}),V(2,d.Optional()),V(2,d.Inject(hr)),z("design:paramtypes",[d.Renderer2,d.ElementRef,Boolean])],vr));function vr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=Le?Le.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function mr(t){return t.validate?function(e){return t.validate(e)}:t}function yr(t){return t.validate?function(e){return t.validate(e)}:t}var br={provide:cr,useExisting:d.forwardRef(function(){return Sr}),multi:!0},Sr=(wr.prototype.writeValue=function(e){e=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},wr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},wr.prototype.registerOnTouched=function(e){this.onTouched=e},wr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[br]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],wr));function wr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function Cr(){throw new Error("unimplemented")}var _r,Er=(F(Ar,_r=Jn),Object.defineProperty(Ar.prototype,"validator",{get:Cr,enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"asyncValidator",{get:Cr,enumerable:!0,configurable:!0}),Ar);function Ar(){var e=null!==_r&&_r.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}p={provide:cr,useExisting:d.forwardRef(function(){return Pr}),multi:!0},Ir.prototype.add=function(e,t){this._accessors.push([e,t])},Ir.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},Ir.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},Ir.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},b=B([d.Injectable()],Ir);function Ir(){this._accessors=[]}var Pr=(Or.prototype.ngOnInit=function(){this._control=this._injector.get(Er),this._checkName(),this._registry.add(this._control,this)},Or.prototype.ngOnDestroy=function(){this._registry.remove(this)},Or.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Or.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Or.prototype.fireUncheck=function(e){this.writeValue(e)},Or.prototype.registerOnTouched=function(e){this.onTouched=e},Or.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Or.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Or.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},B([d.Input(),z("design:type",String)],Or.prototype,"name",void 0),B([d.Input(),z("design:type",String)],Or.prototype,"formControlName",void 0),B([d.Input(),z("design:type",Object)],Or.prototype,"value",void 0),B([d.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[p]}),z("design:paramtypes",[d.Renderer2,d.ElementRef,b,d.Injector])],Or));function Or(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var S={provide:cr,useExisting:d.forwardRef(function(){return Tr}),multi:!0},Tr=(kr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},kr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},kr.prototype.registerOnTouched=function(e){this.onTouched=e},kr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([d.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[S]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],kr));function kr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Lr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Rr='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',xr='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',Nr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Mr='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',Ur=(Dr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Lr)},Dr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Rr+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Nr)},Dr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Lr)},Dr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Rr)},Dr.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+xr)},Dr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Dr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Dr);function Dr(){}C={provide:cr,useExisting:d.forwardRef(function(){return jr}),multi:!0};function Fr(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var jr=(Object.defineProperty(qr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),qr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);e=Fr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},qr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},qr.prototype.registerOnTouched=function(e){this.onTouched=e},qr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},qr.prototype._registerOption=function(){return(this._idCounter++).toString()},qr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},qr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},B([d.Input(),z("design:type",Function),z("design:paramtypes",[Function])],qr.prototype,"compareWith",null),B([d.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[C]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],qr));function qr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=d["ɵlooseIdentical"]}Object.defineProperty(Br.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Fr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Br.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Br.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Br.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([d.Input("ngValue"),z("design:type",Object),z("design:paramtypes",[Object])],Br.prototype,"ngValue",null),B([d.Input("value"),z("design:type",Object),z("design:paramtypes",[Object])],Br.prototype,"value",null),Re=B([d.Directive({selector:"option"}),V(2,d.Optional()),V(2,d.Host()),z("design:paramtypes",[d.ElementRef,d.Renderer2,jr])],Br);function Br(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}Me={provide:cr,useExisting:d.forwardRef(function(){return zr}),multi:!0};function Vr(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var zr=(Object.defineProperty(Gr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Gr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Gr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var i=n.item(r),o=a._getOptionValue(i.value);t.push(o)}else for(n=e.options,r=0;r<n.length;r++){(i=n.item(r)).selected&&(o=a._getOptionValue(i.value),t.push(o))}a.value=t,s(t)}},Gr.prototype.registerOnTouched=function(e){this.onTouched=e},Gr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Gr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Gr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Gr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},B([d.Input(),z("design:type",Function),z("design:paramtypes",[Function])],Gr.prototype,"compareWith",null),B([d.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[Me]}),z("design:paramtypes",[d.Renderer2,d.ElementRef])],Gr));function Gr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=d["ɵlooseIdentical"]}Object.defineProperty(Kr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Vr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Vr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Kr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Kr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Kr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([d.Input("ngValue"),z("design:type",Object),z("design:paramtypes",[Object])],Kr.prototype,"ngValue",null),B([d.Input("value"),z("design:type",Object),z("design:paramtypes",[Object])],Kr.prototype,"value",null),ct=B([d.Directive({selector:"option"}),V(2,d.Optional()),V(2,d.Host()),z("design:paramtypes",[d.ElementRef,d.Renderer2,zr])],Kr);function Kr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Hr(e,t){return $(t.path,[e])}function Wr(t,n){var r,i,o,e,s;t||Zr(n,"Cannot find control with"),n.valueAccessor||Zr(n,"No value accessor for form control with"),t.validator=ir.compose([t.validator,n.validator]),t.asyncValidator=ir.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(i=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&$r(r,i)}),o=n,t.registerOnChange(function(e,t){o.valueAccessor.writeValue(e),t&&o.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&$r(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function $r(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Jr(e,t){null==e&&Zr(t,"Cannot find control with"),e.validator=ir.compose([e.validator,t.validator]),e.asyncValidator=ir.composeAsync([e.asyncValidator,t.asyncValidator])}function Yr(e){return Zr(e,"There is no FormControl instance attached to form control element with")}function Zr(e,t){e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+e)}function Xr(e){return null!=e?ir.compose(e.map(mr)):null}function Qr(e){return null!=e?ir.composeAsync(e.map(yr)):null}function ei(e,t){if(e.hasOwnProperty("model")){e=e.model;return e.isFirstChange()||!d["ɵlooseIdentical"](t,e.currentValue)}}var ti=[pr,Tr,Sr,jr,zr,Pr];function ni(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function ri(n,e){if(!e)return null;Array.isArray(e)||Zr(n,"Value accessor was not provided as an array for form control with");var r=void 0,i=void 0,o=void 0;return e.forEach(function(e){var t;e.constructor===gr?r=e:(t=e,ti.some(function(e){return t.constructor===e})?(i&&Zr(n,"More than one built-in value accessor matches form control with"),i=e):(o&&Zr(n,"More than one custom value accessor matches form control with"),o=e))}),o||i||r||(Zr(n,"No valid value accessor for form control with"),null)}function ii(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function oi(e,t,n,r){d.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Ur.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var si,ai=(F(ui,si=Xn),ui.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},ui.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(ui.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ui.prototype,"path",{get:function(){return Hr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ui.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ui.prototype,"validator",{get:function(){return Xr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(ui.prototype,"asyncValidator",{get:function(){return Qr(this._asyncValidators)},enumerable:!0,configurable:!0}),ui.prototype._checkParentType=function(){},ui);function ui(){return null!==si&&si.apply(this,arguments)||this}Object.defineProperty(ci.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(ci.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),jt=ci;function ci(e){this._cd=e}var li,at={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},cn=(F(pi,li=jt),B([d.Directive({selector:"[formControlName],[ngModel],[formControl]",host:at}),V(0,d.Self()),z("design:paramtypes",[Er])],pi));function pi(e){return li.call(this,e)||this}var fi,ln=(F(di,fi=jt),B([d.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:at}),V(0,d.Self()),z("design:paramtypes",[Xn])],di));function di(e){return fi.call(this,e)||this}var hi="VALID",gi="INVALID",vi="PENDING",mi="DISABLED";function yi(e){e=Si(e)?e.validators:e;return Array.isArray(e)?Xr(e):e||null}function bi(e,t){e=Si(t)?t.asyncValidators:e;return Array.isArray(e)?Qr(e):e||null}function Si(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}Object.defineProperty(wi.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"valid",{get:function(){return this.status===hi},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"invalid",{get:function(){return this.status===gi},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"pending",{get:function(){return this.status==vi},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"disabled",{get:function(){return this.status===mi},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"enabled",{get:function(){return this.status!==mi},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(wi.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),wi.prototype.setValidators=function(e){this.validator=yi(e)},wi.prototype.setAsyncValidators=function(e){this.asyncValidator=bi(e)},wi.prototype.clearValidators=function(){this.validator=null},wi.prototype.clearAsyncValidators=function(){this.asyncValidator=null},wi.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},wi.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},wi.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},wi.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},wi.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=vi)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},wi.prototype.disable=function(t){void 0===t&&(t={}),this.status=mi,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},wi.prototype.enable=function(t){void 0===t&&(t={}),this.status=hi,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},wi.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},wi.prototype.setParent=function(e){this._parent=e},wi.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==hi&&this.status!==vi||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},wi.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},wi.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?mi:hi},wi.prototype._runValidator=function(){return this.validator?this.validator(this):null},wi.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=vi,e=ar(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},wi.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},wi.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},wi.prototype.get=function(e){return t=this,n=".",null==(e=e)?null:(e instanceof Array||(e=e.split(n)),e instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof Ii?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Ti&&e.at(t)||null},t));var t,n},wi.prototype.getError=function(e,t){t=t?this.get(t):this;return t&&t.errors?t.errors[e]:null},wi.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(wi.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),wi.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},wi.prototype._initObservables=function(){this.valueChanges=new d.EventEmitter,this.statusChanges=new d.EventEmitter},wi.prototype._calculateStatus=function(){return this._allControlsDisabled()?mi:this.errors?gi:this._anyControlsHaveStatus(vi)?vi:this._anyControlsHaveStatus(gi)?gi:hi},wi.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},wi.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},wi.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},wi.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},wi.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},wi.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},wi.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},wi.prototype._setUpdateStrategy=function(e){Si(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},fn=wi;function wi(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var Ci,_i=(F(Ei,Ci=fn),Ei.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},Ei.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},Ei.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},Ei.prototype._updateValue=function(){},Ei.prototype._anyControls=function(e){return!1},Ei.prototype._allControlsDisabled=function(){return this.disabled},Ei.prototype.registerOnChange=function(e){this._onChange.push(e)},Ei.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},Ei.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},Ei.prototype._forEachChild=function(e){},Ei.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},Ei.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},Ei);function Ei(e,t,n){void 0===e&&(e=null);n=Ci.call(this,yi(t),bi(n,t))||this;return n._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var Ai,Ii=(F(Pi,Ai=fn),Pi.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Pi.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Pi.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Pi.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Pi.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Pi.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Pi.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Pi.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Pi.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof _i?t.value:t.getRawValue(),e})},Pi.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Pi.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Pi.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Pi.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Pi.prototype._updateValue=function(){this.value=this._reduceValue()},Pi.prototype._anyControls=function(n){var r=this,i=!1;return this._forEachChild(function(e,t){i=i||r.contains(t)&&n(e)}),i},Pi.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Pi.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Pi.prototype._allControlsDisabled=function(){var t,e;try{for(var n=H(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var i=r.value;if(this.controls[i].enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<Object.keys(this.controls).length||this.disabled},Pi.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Pi);function Pi(e,t,n){n=Ai.call(this,yi(t),bi(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Oi,Ti=(F(ki,Oi=fn),ki.prototype.at=function(e){return this.controls[e]},ki.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},ki.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},ki.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},ki.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(ki.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),ki.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},ki.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},ki.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},ki.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof _i?e.value:e.getRawValue()})},ki.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},ki.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},ki.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},ki.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},ki.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},ki.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},ki.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},ki.prototype._allControlsDisabled=function(){var t,e;try{for(var n=H(this.controls),r=n.next();!r.done;r=n.next()){if(r.value.enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<this.controls.length||this.disabled},ki.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},ki);function ki(e,t,n){n=Oi.call(this,yi(t),bi(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Li,dn={provide:Xn,useExisting:d.forwardRef(function(){return xi})},Ri=Promise.resolve(null),xi=(F(Ni,Li=Xn),Ni.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(Ni.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Ni.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Ni.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Ni.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),Ni.prototype.addControl=function(t){var n=this;Ri.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Wr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},Ni.prototype.getControl=function(e){return this.form.get(e.path)},Ni.prototype.removeControl=function(t){var n=this;Ri.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),ii(n._directives,t)})},Ni.prototype.addFormGroup=function(n){var r=this;Ri.then(function(){var e=r._findContainer(n.path),t=new Ii({});Jr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},Ni.prototype.removeFormGroup=function(t){var n=this;Ri.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},Ni.prototype.getFormGroup=function(e){return this.form.get(e.path)},Ni.prototype.updateModel=function(e,t){var n=this;Ri.then(function(){n.form.get(e.path).setValue(t)})},Ni.prototype.setValue=function(e){this.control.setValue(e)},Ni.prototype.onSubmit=function(e){return this.submitted=!0,ni(this.form,this._directives),this.ngSubmit.emit(e),!1},Ni.prototype.onReset=function(){this.resetForm()},Ni.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Ni.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},Ni.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},B([d.Input("ngFormOptions"),z("design:type",Object)],Ni.prototype,"options",void 0),B([d.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[dn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(tr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),z("design:paramtypes",[Array,Array])],Ni));function Ni(e,t){var n=Li.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new d.EventEmitter,n.form=new Ii({},Xr(e),Qr(t)),n}var Mi=(Ui.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Lr+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+Mr)},Ui.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Nr)},Ui.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Ui.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Nr)},Ui);function Ui(){}var Di,Fi,pn={provide:Xn,useExisting:d.forwardRef(function(){return ji})},ji=(F(qi,Di=ai),(Fi=qi).prototype._checkParentType=function(){this._parent instanceof Fi||this._parent instanceof xi||Mi.modelGroupParentException()},B([d.Input("ngModelGroup"),z("design:type",String)],qi.prototype,"name",void 0),Fi=B([d.Directive({selector:"[ngModelGroup]",providers:[pn],exportAs:"ngModelGroup"}),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(tr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(nr)),z("design:paramtypes",[Xn,Array,Array])],qi));function qi(e,t,n){var r=Di.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Bi,mn={provide:Er,useExisting:d.forwardRef(function(){return zi})},Vi=Promise.resolve(null),zi=(F(Gi,Bi=Er),Gi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),ei(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Gi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Gi.prototype,"path",{get:function(){return this._parent?Hr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Gi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Gi.prototype,"validator",{get:function(){return Xr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Gi.prototype,"asyncValidator",{get:function(){return Qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Gi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Gi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Gi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Gi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Gi.prototype._setUpStandalone=function(){Wr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Gi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Gi.prototype._checkParentType=function(){!(this._parent instanceof ji)&&this._parent instanceof ai?Mi.formGroupNameException():this._parent instanceof ji||this._parent instanceof xi||Mi.modelParentException()},Gi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Mi.missingNameException()},Gi.prototype._updateValue=function(e){var t=this;Vi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Gi.prototype._updateDisabled=function(e){var t=this,e=e.isDisabled.currentValue,n=""===e||e&&"false"!==e;Vi.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},B([d.Input(),z("design:type",String)],Gi.prototype,"name",void 0),B([d.Input("disabled"),z("design:type",Boolean)],Gi.prototype,"isDisabled",void 0),B([d.Input("ngModel"),z("design:type",Object)],Gi.prototype,"model",void 0),B([d.Input("ngModelOptions"),z("design:type",Object)],Gi.prototype,"options",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],Gi.prototype,"update",void 0),B([d.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[mn],exportAs:"ngModel"}),V(0,d.Optional()),V(0,d.Host()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(tr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(nr)),V(3,d.Optional()),V(3,d.Self()),V(3,d.Inject(cr)),z("design:paramtypes",[Xn,Array,Array,Array])],Gi));function Gi(e,t,n,r){var i=Bi.call(this)||this;return i.control=new _i,i._registered=!1,i.update=new d.EventEmitter,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=ri(i,r),i}var Ki,Hi,Wi=new d.InjectionToken("NgModelWithFormControlWarning"),Je={provide:Er,useExisting:d.forwardRef(function(){return $i})},$i=(F(Ji,Ki=Er),Hi=Ji,Object.defineProperty(Ji.prototype,"isDisabled",{set:function(e){Ur.disabledAttrWarning()},enumerable:!0,configurable:!0}),Ji.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Wr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),ei(e,this.viewModel)&&(oi("formControl",Hi,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Ji.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Ji.prototype,"validator",{get:function(){return Xr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ji.prototype,"asyncValidator",{get:function(){return Qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ji.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Ji.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Ji.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Ji._ngModelWarningSentOnce=!1,B([d.Input("formControl"),z("design:type",_i)],Ji.prototype,"form",void 0),B([d.Input("disabled"),z("design:type",Boolean),z("design:paramtypes",[Boolean])],Ji.prototype,"isDisabled",null),B([d.Input("ngModel"),z("design:type",Object)],Ji.prototype,"model",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],Ji.prototype,"update",void 0),Hi=B([d.Directive({selector:"[formControl]",providers:[Je],exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(tr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(cr)),V(3,d.Optional()),V(3,d.Inject(Wi)),z("design:paramtypes",[Array,Array,Array,Object])],Ji));function Ji(e,t,n,r){var i=Ki.call(this)||this;return i._ngModelWarningConfig=r,i.update=new d.EventEmitter,i._ngModelWarningSent=!1,i._rawValidators=e||[],i._rawAsyncValidators=t||[],i.valueAccessor=ri(i,n),i}var Yi,Wn={provide:Xn,useExisting:d.forwardRef(function(){return Zi})},Zi=(F(Xi,Yi=Xn),Xi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Xi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Xi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Xi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Xi.prototype.addControl=function(e){var t=this.form.get(e.path);return Wr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Xi.prototype.getControl=function(e){return this.form.get(e.path)},Xi.prototype.removeControl=function(e){ii(this.directives,e)},Xi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Jr(t,e),t.updateValueAndValidity({emitEvent:!1})},Xi.prototype.removeFormGroup=function(e){},Xi.prototype.getFormGroup=function(e){return this.form.get(e.path)},Xi.prototype.addFormArray=function(e){var t=this.form.get(e.path);Jr(t,e),t.updateValueAndValidity({emitEvent:!1})},Xi.prototype.removeFormArray=function(e){},Xi.prototype.getFormArray=function(e){return this.form.get(e.path)},Xi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Xi.prototype.onSubmit=function(e){return this.submitted=!0,ni(this.form,this.directives),this.ngSubmit.emit(e),!1},Xi.prototype.onReset=function(){this.resetForm()},Xi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Xi.prototype._updateDomValue=function(){var i=this;this.directives.forEach(function(e){var t,n,r=i.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return Yr(n)}),n.valueAccessor.registerOnTouched(function(){return Yr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Wr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Xi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Xi.prototype._updateValidators=function(){var e=Xr(this._validators);this.form.validator=ir.compose([this.form.validator,e]);e=Qr(this._asyncValidators);this.form.asyncValidator=ir.composeAsync([this.form.asyncValidator,e])},Xi.prototype._checkFormPresent=function(){this.form||Ur.missingFormException()},B([d.Input("formGroup"),z("design:type",Ii)],Xi.prototype,"form",void 0),B([d.Output(),z("design:type",Object)],Xi.prototype,"ngSubmit",void 0),B([d.Directive({selector:"[formGroup]",providers:[Wn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),V(0,d.Optional()),V(0,d.Self()),V(0,d.Inject(tr)),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(nr)),z("design:paramtypes",[Array,Array])],Xi));function Xi(e,t){var n=Yi.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new d.EventEmitter,n}var Qi,lr={provide:Xn,useExisting:d.forwardRef(function(){return eo})},eo=(F(to,Qi=ai),to.prototype._checkParentType=function(){oo(this._parent)&&Ur.groupParentException()},B([d.Input("formGroupName"),z("design:type",String)],to.prototype,"name",void 0),B([d.Directive({selector:"[formGroupName]",providers:[lr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(tr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(nr)),z("design:paramtypes",[Xn,Array,Array])],to));function to(e,t,n){var r=Qi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var no,dr={provide:Xn,useExisting:d.forwardRef(function(){return ro})},ro=(F(io,no=Xn),io.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},io.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(io.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"path",{get:function(){return Hr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"validator",{get:function(){return Xr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"asyncValidator",{get:function(){return Qr(this._asyncValidators)},enumerable:!0,configurable:!0}),io.prototype._checkParentType=function(){oo(this._parent)&&Ur.arrayParentException()},B([d.Input("formArrayName"),z("design:type",String)],io.prototype,"name",void 0),B([d.Directive({selector:"[formArrayName]",providers:[dr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(tr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(nr)),z("design:paramtypes",[Xn,Array,Array])],io));function io(e,t,n){var r=no.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function oo(e){return!(e instanceof eo||e instanceof Zi||e instanceof ro)}var so,ao,hr={provide:Er,useExisting:d.forwardRef(function(){return uo})},uo=(F(co,so=Er),ao=co,Object.defineProperty(co.prototype,"isDisabled",{set:function(e){Ur.disabledAttrWarning()},enumerable:!0,configurable:!0}),co.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),ei(e,this.viewModel)&&(oi("formControlName",ao,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},co.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},co.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(co.prototype,"path",{get:function(){return Hr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"validator",{get:function(){return Xr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"asyncValidator",{get:function(){return Qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),co.prototype._checkParentType=function(){!(this._parent instanceof eo)&&this._parent instanceof ai?Ur.ngModelGroupException():this._parent instanceof eo||this._parent instanceof Zi||this._parent instanceof ro||Ur.controlParentException()},co.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},co._ngModelWarningSentOnce=!1,B([d.Input("formControlName"),z("design:type",String)],co.prototype,"name",void 0),B([d.Input("disabled"),z("design:type",Boolean),z("design:paramtypes",[Boolean])],co.prototype,"isDisabled",null),B([d.Input("ngModel"),z("design:type",Object)],co.prototype,"model",void 0),B([d.Output("ngModelChange"),z("design:type",Object)],co.prototype,"update",void 0),ao=B([d.Directive({selector:"[formControlName]",providers:[hr]}),V(0,d.Optional()),V(0,d.Host()),V(0,d.SkipSelf()),V(1,d.Optional()),V(1,d.Self()),V(1,d.Inject(tr)),V(2,d.Optional()),V(2,d.Self()),V(2,d.Inject(nr)),V(3,d.Optional()),V(3,d.Self()),V(3,d.Inject(cr)),V(4,d.Optional()),V(4,d.Inject(Wi)),z("design:paramtypes",[Xn,Array,Array,Array,Object])],co));function co(e,t,n,r,i){var o=so.call(this)||this;return o._ngModelWarningConfig=i,o._added=!1,o.update=new d.EventEmitter,o._ngModelWarningSent=!1,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=ri(o,r),o}var br={provide:tr,useExisting:d.forwardRef(function(){return lo}),multi:!0},Jn={provide:tr,useExisting:d.forwardRef(function(){return ho}),multi:!0},lo=(Object.defineProperty(po.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),po.prototype.validate=function(e){return this.required?ir.required(e):null},po.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([d.Input(),z("design:type",Object),z("design:paramtypes",[Object])],po.prototype,"required",null),B([d.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[br],host:{"[attr.required]":'required ? "" : null'}})],po));function po(){}var fo,ho=(F(go,fo=lo),go.prototype.validate=function(e){return this.required?ir.requiredTrue(e):null},B([d.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[Jn],host:{"[attr.required]":'required ? "" : null'}})],go));function go(){return null!==fo&&fo.apply(this,arguments)||this}var p={provide:tr,useExisting:d.forwardRef(function(){return vo}),multi:!0},vo=(Object.defineProperty(mo.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),mo.prototype.validate=function(e){return this._enabled?ir.email(e):null},mo.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([d.Input(),z("design:type",Object),z("design:paramtypes",[Object])],mo.prototype,"email",null),B([d.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[p]})],mo));function mo(){}var S={provide:tr,useExisting:d.forwardRef(function(){return yo}),multi:!0},yo=(bo.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},bo.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},bo.prototype.registerOnValidatorChange=function(e){this._onChange=e},bo.prototype._createValidator=function(){this._validator=ir.minLength(parseInt(this.minlength,10))},B([d.Input(),z("design:type",String)],bo.prototype,"minlength",void 0),B([d.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[S],host:{"[attr.minlength]":"minlength ? minlength : null"}})],bo));function bo(){}var C={provide:tr,useExisting:d.forwardRef(function(){return So}),multi:!0},So=(wo.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},wo.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},wo.prototype.registerOnValidatorChange=function(e){this._onChange=e},wo.prototype._createValidator=function(){this._validator=ir.maxLength(parseInt(this.maxlength,10))},B([d.Input(),z("design:type",String)],wo.prototype,"maxlength",void 0),B([d.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[C],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],wo));function wo(){}var Me={provide:tr,useExisting:d.forwardRef(function(){return Co}),multi:!0},Co=(_o.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},_o.prototype.validate=function(e){return this._validator(e)},_o.prototype.registerOnValidatorChange=function(e){this._onChange=e},_o.prototype._createValidator=function(){this._validator=ir.pattern(this.pattern)},B([d.Input(),z("design:type",Object)],_o.prototype,"pattern",void 0),B([d.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Me],host:{"[attr.pattern]":"pattern ? pattern : null"}})],_o));function _o(){}Eo.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new Ii(n,e,t)},Eo.prototype.control=function(e,t,n){return new _i(e,t,n)},Eo.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new Ti(e,t,n)},Eo.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},Eo.prototype._createControl=function(e){if(e instanceof _i||e instanceof Ii||e instanceof Ti)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},jt=B([d.Injectable()],Eo);function Eo(){}new d.Version("6.1.10");function Ao(){}at=[B([d.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],Ao),Re,ct,gr,Sr,Tr,pr,jr,zr,Pr,cn,ln,lo,yo,So,Co,ho,vo],fn=[zi,ji,xi],dn=[$i,Zi,uo,eo,ro],pn=B([d.NgModule({declarations:at,exports:at})],Io);function Io(){}mn=B([d.NgModule({declarations:fn,providers:[b],exports:[pn,fn]})],Po);function Po(){}var Oo;(Oo=To).withConfig=function(e){return{ngModule:Oo,providers:[{provide:Wi,useValue:e.warnOnNgModelWithFormControl}]}},Oo=B([d.NgModule({declarations:[dn],providers:[jt,b],exports:[pn,dn]})],To);function To(){}ko.decorators=[{type:d.Directive,args:[{selector:"[component-host]"}]}],ko.ctorParameters=function(){return[{type:d.ViewContainerRef}]},Je=ko;function ko(e){this.viewContainerRef=e}var Lo=function(e,t){this.component=e,this.data=t},Ro=new E.Logger("AuthDecorator");function xo(e,t){var n,r,i,o,s,a,u,c,l,p,f,d,h,g,v;n=e,t.currentAuthenticatedUser().then(function(e){Ro.debug("has authenticated user",e),n.next({state:"signedIn",user:e})}).catch(function(e){Ro.debug("no authenticated user",e),n.next({state:"signedOut",user:null})}),r=e,i=E.Amplify.configure(null),m.has(i,"Auth.oauth")&&E.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,Ro.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),o=e,a=(s=t).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Ro.debug("signIn success"),e.challengeName?(Ro.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?o.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?o.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?o.next({state:"confirmSignIn",user:e}):Ro.debug("warning: unhandled challengeName "+e.challengeName)):o.next({state:"signedIn",user:e}),e}).catch(function(e){throw Ro.debug("signIn error",e),e})},u=e,l=(c=t).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Ro.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Ro.debug("signOut error",e),e})},p=e,d=(f=t).signUp,f.signUp=function(t,e,n,r){return d.call(f,t,e,n,r).then(function(e){return Ro.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Ro.debug("signUp error",e),e})},h=e,v=(g=t).confirmSignUp,g.confirmSignUp=function(t,e){return v.call(g,t,e).then(function(e){return Ro.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Ro.debug("confirmSignUp error",e),e})}}var No=function(e,t){return(No=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Mo(e,t){function n(){this.constructor=e}No(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Uo=function(){return(Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Do(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Fo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function jo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function qo(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Vo(e):function(){return zo(e)}})}function Bo(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:Go(e.region)})}var Vo=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},zo=function(r){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=r.tls,t=void 0===t||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},Wn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},lr={preferredFile:"credentials"},Go=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},dr="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ko(){throw new Error("setTimeout has not been defined")}function Ho(){throw new Error("clearTimeout has not been defined")}var Wo=Ko,$o=Ho;function Jo(t){if(Wo===setTimeout)return setTimeout(t,0);if((Wo===Ko||!Wo)&&setTimeout)return Wo=setTimeout,setTimeout(t,0);try{return Wo(t,0)}catch(e){try{return Wo.call(null,t,0)}catch(e){return Wo.call(this,t,0)}}}"function"==typeof dr.setTimeout&&(Wo=setTimeout),"function"==typeof dr.clearTimeout&&($o=clearTimeout);var Yo,Zo=[],Xo=!1,Qo=-1;function es(){Xo&&Yo&&(Xo=!1,Yo.length?Zo=Yo.concat(Zo):Qo=-1,Zo.length&&ts())}function ts(){if(!Xo){var e=Jo(es);Xo=!0;for(var t=Zo.length;t;){for(Yo=Zo,Zo=[];++Qo<t;)Yo&&Yo[Qo].run();Qo=-1,t=Zo.length}Yo=null,Xo=!1,function(t){if($o===clearTimeout)return clearTimeout(t);if(($o===Ho||!$o)&&clearTimeout)return $o=clearTimeout,clearTimeout(t);try{$o(t)}catch(e){try{return $o.call(null,t)}catch(e){return $o.call(this,t)}}}(e)}}function ns(e,t){this.fun=e,this.array=t}ns.prototype.run=function(){this.fun.apply(null,this.array)};function rs(){}hr=rs,nr=rs,cr=rs,Xn=rs,br=rs,Jn=rs,p=rs;var is=dr.performance||{},os=is.now||is.mozNow||is.msNow||is.oNow||is.webkitNow||function(){return(new Date).getTime()};var ss=new Date;var as,us={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Zo.push(new ns(e,t)),1!==Zo.length||Xo||Jo(ts)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:hr,addListener:nr,once:cr,off:Xn,removeListener:br,removeAllListeners:Jn,emit:p,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*os.call(is),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ss)/1e3}},cs=(F(ls,as=Error),ls);function ls(e,t){void 0===t&&(t=!0);e=as.call(this,e)||this;return e.tryNextLink=t,e}function ps(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new cs("No providers in chain"));try{for(var r=H(o),i=r.next();!i.done;i=r.next()){!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}function fs(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return G(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}var ds="AWS_ACCESS_KEY_ID",hs="AWS_SECRET_ACCESS_KEY",gs="AWS_SESSION_TOKEN",vs="AWS_CREDENTIAL_EXPIRATION";function ms(t){return new Promise(function(r,i){var e=g.request(j({method:"GET"},t));e.on("error",function(e){i(Object.assign(new cs("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){i(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode,t=void 0===t?400:t;(t<200||300<=t)&&i(Object.assign(new cs("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(f.Buffer.concat(n))})}),e.end()})}var ys=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},bs=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},Ss=function(e){var t=e.maxRetries,t=void 0===t?0:t,e=e.timeout;return{maxRetries:t,timeout:void 0===e?1e3:e}},ws=function(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n},Cs="AWS_CONTAINER_CREDENTIALS_FULL_URI",_s="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Es="AWS_CONTAINER_AUTHORIZATION_TOKEN";function As(e){var t=this;void 0===e&&(e={});var e=Ss(e),i=e.timeout,n=e.maxRetries;return function(){return function(){if(us.env[_s])return Promise.resolve({hostname:Is,path:us.env[_s]});if(us.env[Cs]){var e=h.parse(us.env[Cs]);return e.hostname&&e.hostname in Ps?e.protocol&&e.protocol in Os?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new cs(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new cs(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new cs("The container metadata credential provider cannot be used unless the "+_s+" or "+Cs+" environment variable is set",!1))}().then(function(r){return ws(function(){return G(t,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,function(e,t){{var n;us.env[Es]&&(n=t.headers,(n=void 0===n?{}:n).Authorization=us.env[Es],t.headers=n)}return ms(j(j({},t),{timeout:e})).then(function(e){return e.toString()})}(i,r)];case 1:if(t=n.apply(t,[e.sent()]),!ys(t))throw new cs("Invalid response received from instance metadata service.");return[2,bs(t)]}})})},n)})}}var Is="169.254.170.2",Ps={localhost:!0,"127.0.0.1":!0},Os={"http:":!0,"https:":!0};var Ts="169.254.169.254",ks="/latest/meta-data/iam/security-credentials/",Ls=function(e){void 0===e&&(e={});function r(t,i){return G(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return[4,ws(function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,xs(i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)];case 1:return r=e.sent().trim(),[2,ws(function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Ns(r,i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)]}})})}var o=!1,e=Ss(e),i=e.timeout,s=e.maxRetries;return function(){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return o?[2,r(s,{timeout:i})]:[3,1];case 1:t=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,Rs({timeout:i})];case 3:return t=e.sent().toString(),[3,5];case 4:if(400===(null==(n=e.sent())?void 0:n.statusCode))throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==n.message&&![403,404,405].includes(n.statusCode)||(o=!0),[2,r(s,{timeout:i})];case 5:return[2,r(s,{timeout:i,headers:{"x-aws-ec2-metadata-token":t}})]}})})}},Rs=function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,ms(j(j({},t),{host:Ts,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})})},xs=function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,ms(j(j({},t),{host:Ts,path:ks}))];case 1:return[2,e.sent().toString()]}})})},Ns=function(r,i){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,ms(j(j({},i),{host:Ts,path:ks+r}))];case 1:if(t=n.apply(t,[e.sent().toString()]),!ys(t))throw new cs("Invalid response received from instance metadata service.");return[2,bs(t)]}})})},Ms="AWS_SHARED_CREDENTIALS_FILE",Us="AWS_CONFIG_FILE",Ds=function(){return{}};function Fs(e){void 0===e&&(e={});var t=e.filepath,t=void 0===t?us.env[Ms]||o.join(zs(),".aws","credentials"):t,e=e.configFilepath,e=void 0===e?us.env[Us]||o.join(zs(),".aws","config"):e;return Promise.all([Vs(e).then(Bs).then(qs).catch(Ds),Vs(t).then(Bs).catch(Ds)]).then(function(e){e=W(e,2);return{configFile:e[0],credentialsFile:e[1]}})}var js=/^profile\s(["'])?([^\1]+)\1$/;function qs(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=void 0;"default"===s?r.default=e.default:(a=js.exec(s))&&((a=W(a,3))[0],a[1],(a=a[2])&&(r[a]=e[s]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Bs(e){var t,n,r,i={};try{for(var o=H(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a=s.value,u=(a=a.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);u?r=u[1]:!r||(a=a.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Vs(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function zs(){var e=us.env,t=e.HOME,n=e.USERPROFILE,r=e.HOMEPATH,e=e.HOMEDRIVE,e=void 0===e?"C:"+o.sep:e;return t||n||(r?""+e+r:i.homedir())}var Gs="default",Ks="AWS_PROFILE";function Hs(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function Ws(t){return void 0===t&&(t={}),function(){return Js(t).then(function(e){return function p(f,d,h,g){void 0===g&&(g={});return G(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:if(n=d[f],0<Object.keys(g).length&&Hs(n))return[2,Ys(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,i=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,o=n.source_profile,!h.roleAssumer)throw new cs("Profile "+f+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(o in g)throw new cs("Detected a cycle attempting to resolve credentials for profile "+$s(h)+". Profiles visited: "+Object.keys(g).join(", "),!1);if(l=p(o,d,h,j(j({},g),((l={})[o]=!0,l))),s={RoleArn:i,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!h.mfaCodeProvider)throw new cs("Profile "+f+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,h.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=h).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(Hs(n))return[2,Ys(n)];throw new cs("Profile "+f+" could not be found or parsed in shared credentials file.")}var t})})}($s(t),e,t)})}}function $s(e){return e.profile||us.env[Ks]||Gs}function Js(e){var t=e.loadedConfig;return(void 0===t?Fs(e):t).then(function(e){var t=e.configFile,e=e.credentialsFile;return j(j({},t),e)})}function Ys(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Zs(t){return void 0===t&&(t={}),function(){return Js(t).then(function(e){return function(u,r){return G(this,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return(n=r[u],r[u])?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){s.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){var t;try{t=JSON.parse(e)}catch(e){throw Error("Profile "+u+" credential_process returned invalid JSON.")}var n=t.Version,r=t.AccessKeyId,i=t.SecretAccessKey,o=t.SessionToken,s=t.Expiration;if(1!==n)throw Error("Profile "+u+" credential_process did not return Version 1.");if(void 0===r||void 0===i)throw Error("Profile "+u+" credential_process returned invalid credentials.");if(s){var a=new Date;if(new Date(s)<a)throw Error("Profile "+u+" credential_process returned expired credentials.");a=Math.floor(new Date(s).valueOf()/1e3)}return{accessKeyId:r,secretAccessKey:i,sessionToken:o,expirationUnix:a}}).catch(function(e){throw new cs(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new cs("Profile "+u+" did not contain credential_process.");case 3:return[3,5];case 4:throw new cs("Profile "+u+" could not be found in shared credentials file.");case 5:return[2]}var t})})}($s(t),e)})}}var Xs="AWS_EC2_METADATA_DISABLED";function Qs(e){void 0===e&&(e={});var t=e.profile,e=(void 0===t?us.env[Ks]:t)?Ws(e):ps(function(){var e=us.env[ds],t=us.env[hs],n=us.env[vs];return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:us.env[gs],expiration:n?new Date(n):void 0}):Promise.reject(new cs("Unable to find environment variable credentials."))},Ws(e),Zs(e),function(e){if(us.env[_s]||us.env[Cs])return As(e);if(us.env[Xs])return function(){return Promise.reject(new cs("EC2 Instance Metadata Service access disabled"))};return Ls(e)}(e));return fs(e,function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})}function ea(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function ta(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!ea(e))throw new Error("argument passed to fromArrayBuffer was not an ArrayBuffer");if("function"==typeof f.Buffer.from&&f.Buffer.from!==Uint8Array.from)return f.Buffer.from(e,t,n);if(0!==t||n!==e.byteLength)throw new Error("Unable to convert TypedArray to Buffer in Node "+us.version);return new f.Buffer(e)}function na(e,t){if("string"!=typeof e)throw new Error("argument passed to fromString was not a string");return"function"==typeof f.Buffer.from&&f.Buffer.from!==Uint8Array.from?f.Buffer.from(e,t):new f.Buffer(e,t)}ra.prototype.update=function(e,t){this.hash.update(ia(e,t))},ra.prototype.digest=function(){return Promise.resolve(this.hash.digest())},S=ra;function ra(e,t){this.hash=t?n.createHmac(e,ia(t)):n.createHash(e)}function ia(e,t){return f.Buffer.isBuffer(e)?e:"string"==typeof e?na(e,t):ArrayBuffer.isView(e)?ta(e.buffer,e.byteOffset,e.byteLength):ta(e)}function oa(t){return{applyToStack:function(e){var r;e.add((r=t,function(n){return function(t){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,r.retryStrategy.retry(n,t)]})})}}),sa)}}}var sa={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},aa=(ua.isInstance=function(e){if(!e)return!1;return"number"==typeof e.statusCode&&"object"==typeof e.headers},ua);function ua(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var ca=(la.isInstance=function(e){if(!e)return!1;return"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},la.prototype.clone=function(){var r,e=new la(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},la);function la(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function pa(e){return va.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function fa(e){function t(e){return"TimeoutError"===e.name?10:5}function n(e){return t(e)<=i}var r=e,i=e;return Object.freeze({hasRetryTokens:n,retrieveRetryTokens:function(e){if(!n(e))throw new Error("No retry token available");e=t(e);return i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:1,i=Math.min(i,r)}})}function da(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function ha(e){return!!e&&(void 0!==e.$retryable||(t=e,ga.includes(t.name))||pa(e)||(e=e,ma.includes(e.name)||ya.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)));var t}var ga=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],va=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],ma=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ya=[500,502,503,504],ba=(Sa.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},Sa.prototype.getMaxAttempts=function(){return G(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},Sa.prototype.retry=function(p,f){return G(this,void 0,void 0,function(){var o,s,a,u,c,l,t;return K(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=f.request,ca.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=v.v4()),t=function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),ca.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(f)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(o),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return(r=e.sent(),s++,l.shouldRetry(r,s,u))?(o=l.retryQuota.retrieveRetryTokens(r),i=l.delayDecider(pa(r)?500:100,s),a+=i,[4,new Promise(function(e){return setTimeout(e,i)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},Sa);function Sa(e,t){this.maxAttemptsProvider=e,this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:ha,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:da,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:fa(500)}function wa(e){var t=Aa(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new ba(t)})}function Ca(t){return"function"==typeof t?function(){return G(void 0,void 0,void 0,function(){return K(this,function(e){return[2,t()]})})}:(e=t,function(){return Promise.resolve(e)});var e}var _a="AWS_MAX_ATTEMPTS",Ea="max_attempts",C={environmentVariableSelector:function(e){var t=e[_a];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Environment variable "+_a+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[Ea];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Shared config file entry "+Ea+' mast be a number, got "'+t+'"');return e}},default:3},Aa=function(e){if(void 0===e&&(e=3),"number"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},tr=function(e,t){var n,r=e.environmentVariableSelector,i=e.configFileSelector,e=e.default;return void 0===t&&(t={}),fs(ps((n=r,function(){return G(void 0,void 0,void 0,function(){var t;return K(this,function(e){try{if(void 0===(t=n(us.env)))throw new Error;return[2,t]}catch(e){throw new cs(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),function(s,e){void 0===e&&(e={});var t=e.preferredFile,a=void 0===t?"config":t,u=q(e,["preferredFile"]);return function(){return G(void 0,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return t=u.loadedConfig,r=void 0===t?Fs(u):t,n=u.profile,t=void 0===n?us.env.AWS_PROFILE||"default":n,[4,r];case 1:n=e.sent(),r=n.configFile,n=n.credentialsFile,n=n[t]||{},r=r[t]||{},i="config"===a?j(j({},n),r):j(j({},r),n);try{if(void 0===(o=s(i)))throw new Error;return[2,o]}catch(e){throw new cs(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+s)}return[2]}})})}}(i,t),Ca(e)))};function Ia(e){return encodeURIComponent(e).replace(/[!'()*]/g,Pa)}function Pa(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}function Oa(e){var t,n,r=[];try{for(var i=H(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=Ia(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Ia(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+Ia(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function Ta(e,t){t instanceof u.Readable?t.pipe(e):t?e.end(t):e.end()}ka.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},ka.prototype.handle=function(p,e){var f=this,d=e.abortSignal;return new Promise(function(t,n){if(null!=d&&d.aborted){var e=new Error("Request aborted");return e.name="AbortError",void n(e)}var r,i,o,s,a,u,c="https:"===p.protocol,e=Oa(p.query||{}),e={headers:p.headers,host:p.hostname,method:p.method,path:e?p.path+"?"+e:p.path,port:p.port,agent:c?f.httpsAgent:f.httpAgent},l=(c?y:g).request(e,function(e){e=new aa({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.headers),body:e});t({response:e})});l.on("error",n),e=l,r=n,void 0===(i=f.connectionTimeout)&&(i=0),i&&e.on("socket",function(e){var t,n=this;e.connecting&&(t=setTimeout(function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+i+" ms");e.name="TimeoutError",r(e)},i),e.on("connect",function(){clearTimeout(t)}))}),e=l,o=n,void 0===(s=f.socketTimeout)&&(s=0),e.setTimeout(s,function(){this.abort();var e=new Error("Connection timed out after "+s+" ms");e.name="TimeoutError",o(e)}),d&&(d.onabort=function(){l.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),a=l,"100-continue"===((u=p).headers.Expect||u.headers.expect)?a.on("continue",function(){Ta(a,u.body)}):Ta(a,u.body)})},Me=ka;function ka(e){var t=void 0===e?{}:e,n=t.connectionTimeout,r=t.socketTimeout,e=t.httpAgent,t=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=n,this.socketTimeout=r;this.httpAgent=e||new g.Agent({keepAlive:!0}),this.httpsAgent=t||new y.Agent({keepAlive:!0})}var La=[],Ra=[],xa="undefined"!=typeof Uint8Array?Uint8Array:Array,Na=!1;function Ma(){Na=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)La[t]=e[t],Ra[e.charCodeAt(t)]=t;Ra["-".charCodeAt(0)]=62,Ra["_".charCodeAt(0)]=63}function Ua(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(La[(r=r)>>18&63]+La[r>>12&63]+La[r>>6&63]+La[63&r]);return i.join("")}function Da(e){var t;Na||Ma();for(var n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(Ua(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],i+=La[t>>2],i+=La[t<<4&63],i+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i+=La[t>>10],i+=La[t>>4&63],i+=La[t<<2&63],i+="="),o.push(i),o.join("")}function Fa(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,f=n?-1:1,n=e[t+p];for(p+=f,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=c}return(n?-1:1)*s*Math.pow(2,o-r)}function ja(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+f]=255&s,f+=d,s/=256,u-=8);e[n+f-d]|=128*o}var qa={}.toString,Ba=Array.isArray||function(e){return"[object Array]"==qa.call(e)};function Va(){return Ga.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function za(e,t){if(Va()<t)throw new RangeError("Invalid typed array length");return Ga.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ga.prototype:(null===e&&(e=new Ga(t)),e.length=t),e}function Ga(e,t,n){if(!(Ga.TYPED_ARRAY_SUPPORT||this instanceof Ga))return new Ga(e,t,n);if("number"!=typeof e)return Ka(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Wa(this,e)}function Ka(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Ga.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ga.prototype:e=$a(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Ga.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Za(t,n),n=(e=za(e,r)).write(t,n);n!==r&&(e=e.slice(0,n));return e}(e,t,n):function(e,t){if(Ya(t)){var n=0|Ja(t.length);return 0===(e=za(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?za(e,0):$a(e,t);if("Buffer"===t.type&&Ba(t.data))return $a(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ha(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Wa(e,t){if(Ha(t),e=za(e,t<0?0:0|Ja(t)),!Ga.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function $a(e,t){var n=t.length<0?0:0|Ja(t.length);e=za(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ja(e){if(e>=Va())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Va().toString(16)+" bytes");return 0|e}function Ya(e){return null!=e&&e._isBuffer}function Za(e,t){if(Ya(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return hu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return gu(e).length;default:if(r)return hu(e).length;t=(""+t).toLowerCase(),r=!0}}function Xa(e,t,n){var r,i,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return iu(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?Da(r):Da(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function Qa(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function eu(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Ga.from(t,r)),Ya(t))return 0===t.length?-1:tu(e,t,n,r,i);if("number"==typeof t)return t&=255,Ga.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):tu(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function tu(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(s<n+a&&(n=s-a),l=n;0<=l;l--){for(var p=!0,f=0;f<a;f++)if(u(e,l+f)!==u(t,f)){p=!1;break}if(p)return l}return-1}function nu(e,t,n,r){return vu(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function ru(e,t,n,r){return vu(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function iu(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=ou)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ou));return n}(r)}Ga.TYPED_ARRAY_SUPPORT=void 0===dr.TYPED_ARRAY_SUPPORT||dr.TYPED_ARRAY_SUPPORT,Ga.poolSize=8192,Ga._augment=function(e){return e.__proto__=Ga.prototype,e},Ga.from=function(e,t,n){return Ka(null,e,t,n)},Ga.TYPED_ARRAY_SUPPORT&&(Ga.prototype.__proto__=Uint8Array.prototype,Ga.__proto__=Uint8Array),Ga.alloc=function(e,t,n){return r=null,t=t,n=n,Ha(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?za(r,e).fill(t,n):za(r,e).fill(t):za(r,e);var r},Ga.allocUnsafe=function(e){return Wa(null,e)},Ga.allocUnsafeSlow=function(e){return Wa(null,e)},Ga.isBuffer=function(e){return null!=e&&(!!e._isBuffer||mu(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&mu(e.slice(0,0))}(e))},Ga.compare=function(e,t){if(!Ya(e)||!Ya(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ga.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ga.concat=function(e,t){if(!Ba(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ga.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=Ga.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!Ya(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},Ga.byteLength=Za,Ga.prototype._isBuffer=!0,Ga.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Qa(this,t,t+1);return this},Ga.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Qa(this,t,t+3),Qa(this,t+1,t+2);return this},Ga.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Qa(this,t,t+7),Qa(this,t+1,t+6),Qa(this,t+2,t+5),Qa(this,t+3,t+4);return this},Ga.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?iu(this,0,e):Xa.apply(this,arguments)},Ga.prototype.equals=function(e){if(!Ya(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ga.compare(this,e)},Ga.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Ga.prototype.compare=function(e,t,n,r,i){if(!Ya(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Ga.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ga.prototype.indexOf=function(e,t,n){return eu(this,e,t,n,!0)},Ga.prototype.lastIndexOf=function(e,t,n){return eu(this,e,t,n,!1)},Ga.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,vu(hu(e,(o=this).length-s),o,s,a);case"ascii":return nu(this,e,t,n);case"latin1":case"binary":return nu(this,e,t,n);case"base64":return o=this,s=t,a=n,vu(gu(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ru(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},Ga.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ou=4096;function su(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function au(e,t,n,r,i,o){if(!Ya(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function uu(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function cu(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function lu(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function pu(e,t,n,r,i){return i||lu(e,0,n,4),ja(e,t,n,r,23,4),n+4}function fu(e,t,n,r,i){return i||lu(e,0,n,8),ja(e,t,n,r,52,8),n+8}Ga.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Ga.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Ga.prototype;else for(var r=t-e,i=new Ga(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},Ga.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||su(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Ga.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||su(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},Ga.prototype.readUInt8=function(e,t){return t||su(e,1,this.length),this[e]},Ga.prototype.readUInt16LE=function(e,t){return t||su(e,2,this.length),this[e]|this[e+1]<<8},Ga.prototype.readUInt16BE=function(e,t){return t||su(e,2,this.length),this[e]<<8|this[e+1]},Ga.prototype.readUInt32LE=function(e,t){return t||su(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ga.prototype.readUInt32BE=function(e,t){return t||su(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ga.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||su(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},Ga.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||su(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},Ga.prototype.readInt8=function(e,t){return t||su(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ga.prototype.readInt16LE=function(e,t){t||su(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},Ga.prototype.readInt16BE=function(e,t){t||su(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},Ga.prototype.readInt32LE=function(e,t){return t||su(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ga.prototype.readInt32BE=function(e,t){return t||su(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ga.prototype.readFloatLE=function(e,t){return t||su(e,4,this.length),Fa(this,e,!0,23,4)},Ga.prototype.readFloatBE=function(e,t){return t||su(e,4,this.length),Fa(this,e,!1,23,4)},Ga.prototype.readDoubleLE=function(e,t){return t||su(e,8,this.length),Fa(this,e,!0,52,8)},Ga.prototype.readDoubleBE=function(e,t){return t||su(e,8,this.length),Fa(this,e,!1,52,8)},Ga.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||au(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Ga.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||au(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},Ga.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,1,255,0),Ga.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ga.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,2,65535,0),Ga.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):uu(this,e,t,!0),t+2},Ga.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,2,65535,0),Ga.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):uu(this,e,t,!1),t+2},Ga.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,4,4294967295,0),Ga.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):cu(this,e,t,!0),t+4},Ga.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,4,4294967295,0),Ga.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):cu(this,e,t,!1),t+4},Ga.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||au(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ga.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||au(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ga.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,1,127,-128),Ga.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ga.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,2,32767,-32768),Ga.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):uu(this,e,t,!0),t+2},Ga.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,2,32767,-32768),Ga.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):uu(this,e,t,!1),t+2},Ga.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,4,2147483647,-2147483648),Ga.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):cu(this,e,t,!0),t+4},Ga.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||au(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ga.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):cu(this,e,t,!1),t+4},Ga.prototype.writeFloatLE=function(e,t,n){return pu(this,e,t,!0,n)},Ga.prototype.writeFloatBE=function(e,t,n){return pu(this,e,t,!1,n)},Ga.prototype.writeDoubleLE=function(e,t,n){return fu(this,e,t,!0,n)},Ga.prototype.writeDoubleBE=function(e,t,n){return fu(this,e,t,!1,n)},Ga.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!Ga.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Ga.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ga.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=Ya(e)?e:hu(new Ga(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var du=/[^+\/0-9A-Za-z-_]/g;function hu(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function gu(e){return function(e){var t,n,r,i;Na||Ma();var o=e.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[o-2]?2:"="===e[o-1]?1:0,i=new xa(3*o/4-r),t=0<r?o-4:o;for(var s=0,a=0;a<t;a+=4,0)n=Ra[e.charCodeAt(a)]<<18|Ra[e.charCodeAt(a+1)]<<12|Ra[e.charCodeAt(a+2)]<<6|Ra[e.charCodeAt(a+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=255&n;return 2==r?(n=Ra[e.charCodeAt(a)]<<2|Ra[e.charCodeAt(a+1)]>>4,i[s++]=255&n):1==r&&(n=Ra[e.charCodeAt(a)]<<10|Ra[e.charCodeAt(a+1)]<<4|Ra[e.charCodeAt(a+2)]>>2,i[s++]=n>>8&255,i[s++]=255&n),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(du,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function vu(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function mu(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var yu,bu=(F(Su,yu=u.Writable),Su.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},Su);function Su(){var e=null!==yu&&yu.apply(this,arguments)||this;return e.bufferedBytes=[],e}Re=function(e){return new Promise(function(t,n){var r=new bu;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Ga.concat(this.bufferedBytes));t(e)})})};function wu(e){var t,n=h.parse(e),r=void 0===(i=n.hostname)?"localhost":i,e=void 0===(o=n.pathname)?"/":o,i=n.port,o=void 0===(o=n.protocol)?"https:":o;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=H(e.split("&")),o=i.next();!o.done;o=i.next()){var s=W(o.value.split("="),2),a=s[0],s=s[1],s=void 0===s?null:s,a=decodeURIComponent(a),s=s&&decodeURIComponent(s);a in r?Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:i?parseInt(i):void 0,protocol:o,path:e,query:t}}function Cu(e){e=na(e,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function _u(e){return ta(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function Eu(e){return e?"string"==typeof e?Ga.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}function Au(e,t){var n=c.platform+"/"+c.version;return c.env.AWS_EXECUTION_ENV&&(n+=" exec-env/"+c.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+e+"/"+t+" "+n}function Iu(e){e=na(e,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)}function Pu(e){return ta(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Ou="pinpoint.{region}.amazonaws.com",Tu=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ku=new Set(["cn-north-1","cn-northwest-1"]),Lu=new Set(["us-iso-east-1"]),Ru=new Set(["us-isob-east-1"]),xu=new Set(["us-gov-east-1","us-gov-west-1"]),Nu=Uo(Uo({},{apiVersion:"2016-12-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:Tu.has(e)&&(n={hostname:Ou.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),ku.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Lu.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ru.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),xu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Ou.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"node",base64Decoder:Cu,base64Encoder:_u,bodyLengthChecker:Eu,credentialDefaultProvider:Qs,defaultUserAgent:Au("@aws-sdk/client-pinpoint","1.0.0-gamma.8"),maxAttempts:tr(C),region:tr(Wn,lr),requestHandler:new Me,sha256:S.bind(null,"sha256"),streamCollector:Re,urlParser:wu,utf8Decoder:Iu,utf8Encoder:Pu}),Mu="content-length";function Uu(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(o){return G(e,void 0,void 0,function(){var t,n,r,i;return K(this,function(e){return t=o.request,ca.isInstance(t)&&(i=t.body,n=t.headers,i&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(Mu)&&void 0!==(r=a(i))&&(t.headers=j(j({},t.headers),((i={})[Mu]=String(r),i)))),[2,s(j(j({},o),{request:t}))]})})}}}(t.bodyLengthChecker),Du)}}}var Du={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"};function Fu(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return G(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){return ca.isInstance(r.request)&&(t=r.request,n=(o.requestHandler.metadata||{}).handlerProtocol,0<=(void 0===n?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,i(r)]})})}}),qu)}}}function ju(e){return{applyToStack:function(e){e.add(function(u,c){return function(a){return G(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:return t=c.logger,n=c.inputFilterSensitiveLog,r=c.outputFilterSensitiveLog,[4,u(a)];case 1:return(i=e.sent(),t)?(s=i.output,o=s.$metadata,s=q(s,["$metadata"]),"function"==typeof t.debug&&(t.debug({httpRequest:a.request}),t.debug({httpResponse:i.response})),"function"==typeof t.info&&t.info({$metadata:o,input:n(a.input),output:r(s)}),[2,i]):[2,i]}})})}},Bu)}}}var qu={name:"hostHeaderMiddleware",step:"build",tags:["HOST"]},Bu={name:"loggerMiddleware",tags:["LOGGER"],step:"finalizeRequest"},Vu="X-Amz-Date",zu="X-Amz-Signature",Gu="X-Amz-Security-Token",Ku="authorization",Hu=Vu.toLowerCase(),Wu=[Ku,Hu,"date"],$u=zu.toLowerCase(),Ju="x-amz-content-sha256",Yu=Gu.toLowerCase(),Zu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Xu=/^proxy-/,Qu=/^sec-/,ec="AWS4-HMAC-SHA256",tc="AWS4-HMAC-SHA256-PAYLOAD",nc="aws4_request",rc={},ic=[];function oc(e,t,n){return e+"/"+t+"/"+n+"/"+nc}function sc(a,u,c,l,p){var f=c+":"+l+":"+p+":"+u.accessKeyId+":"+u.sessionToken;if(f in rc)return rc[f];for(ic.push(f);50<ic.length;)delete rc[ic.shift()];return rc[f]=new Promise(function(e,t){var n,r,i=Promise.resolve("AWS4"+u.secretAccessKey);try{for(var o=H([c,l,p,nc]),s=o.next();!s.done;s=o.next()){!function(t){(i=i.then(function(e){return function(e,t,n){t=new e(t);return t.update(n),t.digest()}(a,e,t)})).catch(function(){})}(s.value)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}i.then(e,function(e){delete rc[f],t(e)})})}for(var ac={},uc={},cc=0;cc<256;cc++){var lc=cc.toString(16).toLowerCase();1===lc.length&&(lc="0"+lc),ac[cc]=lc,uc[lc]=cc}function pc(e){for(var t="",n=0;n<e.byteLength;n++)t+=ac[e[n]];return t}function fc(e,t,n){var r,i,o=e.headers,s={};try{for(var a=H(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Zu||null!=t&&t.has(l)||Xu.test(l)||Qu.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function dc(e,u){var c=e.headers,l=e.body;return G(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:try{for(t=H(Object.keys(c)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Ju)return[2,c[r]]}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||ea(l)?((i=new u).update(l),o=pc,[4,i.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function hc(e){var r,t=e.headers,n=e.query,e=q(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function gc(e){var t,n;e="function"==typeof e.clone?e.clone():hc(e);try{for(var r=H(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Wu.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function vc(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var mc=(yc.prototype.presign=function(v,m){return void 0===m&&(m={}),G(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return K(this,function(e){switch(e.label){case 0:return s=m.signingDate,a=void 0===s?new Date:s,i=m.expiresIn,t=void 0===i?3600:i,n=m.unsignableHeaders,r=m.signableHeaders,s=m.signingRegion,i=m.signingService,[4,this.credentialProvider()];case 1:return(o=e.sent(),null==s)?[3,2]:(u=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:u=e.sent(),e.label=4;case 4:return(s=u,u=bc(a),a=u.longDate,u=u.shortDate,604800<t)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(h=oc(u,s,null!=i?i:this.service),c=function(e){var t,n,r="function"==typeof e.clone?e.clone():hc(e),i=r.headers,o=void 0===(r=r.query)?{}:r;try{for(var s=H(Object.keys(i)),a=s.next();!a.done;a=s.next()){var u=a.value;"x-amz-"===u.toLowerCase().substr(0,6)&&(o[u]=i[u],delete i[u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return j(j({},e),{headers:i,query:o})}(gc(v)),o.sessionToken&&(c.query[Gu]=o.sessionToken),c.query["X-Amz-Algorithm"]=ec,c.query["X-Amz-Credential"]=o.accessKeyId+"/"+h,c.query[Vu]=a,c.query["X-Amz-Expires"]=t.toString(10),g=fc(c,n,r),c.query["X-Amz-SignedHeaders"]=Sc(g),l=c.query,p=zu,f=this.getSignature,d=[a,h,this.getSigningKey(o,s,u,i)],h=this.createCanonicalRequest,g=[c,g],[4,dc(v,this.sha256)]);case 5:return[4,f.apply(this,d.concat([h.apply(this,g.concat([e.sent()]))]))];case 6:return l[p]=e.sent(),[2,c]}})})},yc.prototype.sign=function(t,n){return G(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},yc.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,f=t.signingRegion,d=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return null==f?[3,1]:(n=f,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,i=bc(l),o=i.shortDate,r=i.longDate,i=oc(o,t,null!=d?d:this.service),[4,dc({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(o=new this.sha256).update(u),s=pc,[4,o.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[tc,r,i,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:d})]}})})},yc.prototype.signString=function(a,e){var t=void 0===e?{}:e,e=t.signingDate,u=void 0===e?new Date:e,c=t.signingRegion,l=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==c)?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=bc(u).shortDate,o=(i=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(i=new(o.apply(i,[void 0,e.sent()]))).update(a),s=pc,[4,i.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},yc.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,f=t.signableHeaders,d=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return G(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=gc(l),a=bc(p),o=a.longDate,s=a.shortDate,a=oc(s,n,null!=g?g:this.service),i.headers[Hu]=o,t.sessionToken&&(i.headers[Yu]=t.sessionToken),[4,dc(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=H(Object.keys(t)),o=i.next();!o.done;o=i.next()){if(e===o.value.toLowerCase())return 1}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(Ju,i.headers)&&this.applyChecksum&&(i.headers[Ju]=c),u=fc(i,d,f),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Ku]=ec+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+Sc(u)+", Signature="+c,[2,i]}})})},yc.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,i=[],o={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next()){!function(n){if(n.toLowerCase()===$u)return;i.push(n);var e=r[n];"string"==typeof e?o[n]=Ia(n)+"="+Ia(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([Ia(n)+"="+Ia(t)])},[]).join("&"))}(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},yc.prototype.createStringToSign=function(n,r,i){return G(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,ec+"\n"+n+"\n"+r+"\n"+pc(t)]}})})},yc.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},yc.prototype.getSignature=function(o,s,a,u){return G(this,void 0,void 0,function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(o,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),i=pc,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},yc.prototype.getSigningKey=function(e,t,n,r){return sc(this.sha256,e,n,t,r||this.service)},yc);function yc(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=wc(r),this.credentialProvider=Cc(n)}var bc=function(e){e=vc(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},Sc=function(e){return Object.keys(e).sort().join(";")},wc=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},Cc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function _c(r){var e=this,i=Ec(r.credentials||r.credentialDefaultProvider(r)),t=r.signingEscapePath,o=void 0===t||t,n=r.systemClockOffset,t=void 0===n?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?Ec(r.signer):function(){return Ec(r.region)().then(function(t){return G(e,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=W(e,2),n=t[0],e=t[1],t=n.signingRegion,t=void 0===t?r.signingRegion:t,n=n.signingService,n=void 0===n?r.signingName:n;return r.signingRegion=r.signingRegion||t||e,r.signingName=r.signingName||n,new mc({credentials:i,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:o})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:o,credentials:i,signer:n})}function Ec(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var Ac=function(e){return new Date(Date.now()+e)};function Ic(c){return function(a,u){return function(s){return G(this,void 0,void 0,function(){var n,r,i,o;return K(this,function(e){switch(e.label){case 0:return ca.isInstance(s.request)?"function"!=typeof c.signer?[3,2]:[4,c.signer()]:[2,a(s)];case 1:return n=e.sent(),[3,3];case 2:n=c.signer,e.label=3;case 3:return n=n,r=a,i=[j({},s)],o={},[4,n.sign(s.request,{signingDate:new Date(Date.now()+c.systemClockOffset),signingRegion:u.signing_region,signingService:u.signing_service})];case 4:return[4,r.apply(void 0,[j.apply(void 0,i.concat([(o.request=e.sent(),o)]))])];case 5:return i=e.sent(),o=i.response.headers,(o=o&&(o.date||o.Date))&&(o=Date.parse(o),t=o,e=c.systemClockOffset,3e5<=Math.abs(Ac(e).getTime()-t)&&(c.systemClockOffset=o-Date.now())),[2,i]}var t})})}}}function Pc(t){return{applyToStack:function(e){e.addRelativeTo(Ic(t),Oc)}}}var Oc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};function Tc(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(e){var t=e.request;if(!ca.isInstance(t))return i(e);var n=t.headers,r="node"===o.runtime?"user-agent":"x-amz-user-agent";return n[r]?n[r]+=" "+o.defaultUserAgent:n[r]=""+o.defaultUserAgent,o.customUserAgent&&(n[r]+=" "+o.customUserAgent),i(j(j({},e),{request:t}))}}),kc)}}}var kc={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},Lc=function(){function t(t){function e(e){return!e.name||e.name!==t||(n=!0,a.delete(t),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function n(t){function e(e){return e.middleware!==t||(n=!0,e.name&&a.delete(e.name),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function r(t){return i.forEach(function(e){t.add(e.middleware,j({},e))}),o.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}function s(){var t=[],n=[],r={};return i.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),t.push(e)}),o.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),n.push(e)}),n.forEach(function(e){if(e.toMiddleware){var t=r[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),t.sort(function(e,t){return Rc[t.step]-Rc[e.step]||xc[t.priority||"normal"]-xc[e.priority||"normal"]}).map(u).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware})}var i=[],o=[],a=new Set,u=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t},c={add:function(e,t){void 0===t&&(t={});var n=t.name,t=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(a.has(n))throw new Error("Duplicate middleware name '"+n+"'");a.add(n)}i.push(t)},addRelativeTo:function(e,t){var n=t.name,t=j({middleware:e},t);if(n){if(a.has(n))throw new Error("Duplicated middleware name '"+n+"'");a.add(n)}o.push(t)},clone:function(){return r(Lc())},use:function(e){e.applyToStack(c)},remove:function(e){return("string"==typeof e?t:n)(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!t||!t.includes(n)||(e&&a.delete(e),!(r=!0))}var r=!1;return i=i.filter(e),o=o.filter(e),r},concat:function(e){var t=r(Lc());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=H(s().reverse()),o=i.next();!o.done;o=i.next()){e=(0,o.value)(e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return c},Rc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},xc={high:3,normal:2,low:1},ct=(Nc.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,r=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return r(e).then(function(e){return e.output});r(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},Nc.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},Nc);function Nc(e){this.middlewareStack=Lc(),this.config=e}cn=function(){this.middlewareStack=Lc()};function Mc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function Uc(e){return Array.isArray(e)?e:[e]}var Dc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Dc(e[t]));return e};function Fc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"object"==typeof e&&("__type"in e&&-1<t.indexOf(e.__type)||"name"in e&&-1<t.indexOf(e.name))}ln=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};ln.prototype=Object.create(String.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ln,String);var jc,qc=(F(Bc,jc=ln),Bc.prototype.deserializeJSON=function(){return JSON.parse(jc.prototype.toString.call(this))},Bc.prototype.toJSON=function(){return jc.prototype.toString.call(this)},Bc.fromObject=function(e){return e instanceof Bc?e:e instanceof String||"string"==typeof e?new Bc(e):new Bc(JSON.stringify(e))},Bc);function Bc(){return null!==jc&&jc.apply(this,arguments)||this}var Vc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Gc(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return Vc[r]+", "+(i<10?"0"+i:""+i)+" "+zc[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Kc,Hc,Wc,$c,Jc,Yc,Zc,Xc="***SensitiveInformation***",Qc=(Mo(el,Kc=ct),el.prototype.destroy=function(){Kc.prototype.destroy.call(this)},el);function el(e){var t=this,e=Uo(Uo({},Nu),e),e=Bo(e),e=_c(qo(e)),e=wa(e);return(t=Kc.call(this,e)||this).config=e,t.middlewareStack.use(Pc(t.config)),t.middlewareStack.use(oa(t.config)),t.middlewareStack.use(Tc(t.config)),t.middlewareStack.use(Uu(t.config)),t.middlewareStack.use(Fu(t.config)),t.middlewareStack.use(ju(t.config)),t}(at={}).ADM="ADM",at.APNS="APNS",at.APNS_SANDBOX="APNS_SANDBOX",at.APNS_VOIP="APNS_VOIP",at.APNS_VOIP_SANDBOX="APNS_VOIP_SANDBOX",at.BAIDU="BAIDU",at.CUSTOM="CUSTOM",at.EMAIL="EMAIL",at.GCM="GCM",at.PUSH="PUSH",at.SMS="SMS",at.VOICE="VOICE",(fn={}).DEEP_LINK="DEEP_LINK",fn.OPEN_APP="OPEN_APP",fn.URL="URL",(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"ActivitiesResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"Activity")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"ActivityResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"AddressConfiguration")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"ADMChannelRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"ADMChannelResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"ADMMessage")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"AndroidPushNotificationTemplate")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"APNSChannelRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"APNSChannelResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"APNSMessage")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"APNSPushNotificationTemplate")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"APNSSandboxChannelRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"APNSSandboxChannelResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"APNSVoipChannelRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"APNSVoipChannelResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"APNSVoipSandboxChannelRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"APNSVoipSandboxChannelResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"ApplicationDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"ApplicationResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"ApplicationSettingsResource")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"ApplicationsResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"AttributeDimension")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"AttributesResource")},(Jn={}).EXCLUSIVE="EXCLUSIVE",Jn.INCLUSIVE="INCLUSIVE",(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"BadRequestException")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"BaiduChannelRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"BaiduChannelResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"BaiduMessage")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"BaseKpiResult")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"CampaignCustomMessage")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"CampaignDateRangeKpiResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"CampaignEmailMessage")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"CampaignEventFilter")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"CampaignHook")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"CampaignLimits")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"CampaignResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"CampaignSmsMessage")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"CampaignsResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"CampaignState")},(p={}).COMPLETED="COMPLETED",p.DELETED="DELETED",p.EXECUTING="EXECUTING",p.PAUSED="PAUSED",p.PENDING_NEXT_RUN="PENDING_NEXT_RUN",p.SCHEDULED="SCHEDULED",(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"ChannelResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"ChannelsResponse")},(at={}).ADM="ADM",at.APNS="APNS",at.APNS_SANDBOX="APNS_SANDBOX",at.APNS_VOIP="APNS_VOIP",at.APNS_VOIP_SANDBOX="APNS_VOIP_SANDBOX",at.BAIDU="BAIDU",at.CUSTOM="CUSTOM",at.EMAIL="EMAIL",at.GCM="GCM",at.PUSH="PUSH",at.SMS="SMS",at.VOICE="VOICE",(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"Condition")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"ConditionalSplitActivity")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"CreateApplicationRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"CreateAppRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"CreateAppResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"CreateCampaignRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"CreateCampaignResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"CreateEmailTemplateRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"CreateEmailTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"CreateExportJobRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"CreateExportJobResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"CreateImportJobRequest")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"CreateImportJobResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"CreateJourneyRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"CreateJourneyResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"CreatePushTemplateRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"CreatePushTemplateResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"CreateRecommenderConfigurationRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"CreateRecommenderConfigurationResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"CreateRecommenderConfigurationShape")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"CreateSegmentRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"CreateSegmentResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"CreateSmsTemplateRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"CreateSmsTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"CreateTemplateMessageBody")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"CreateVoiceTemplateRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"CreateVoiceTemplateResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"CustomDeliveryConfiguration")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"CustomMessageActivity")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"DefaultMessage")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"DefaultPushNotificationMessage")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"DefaultPushNotificationTemplate")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"DeleteAdmChannelRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"DeleteAdmChannelResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"DeleteApnsChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"DeleteApnsChannelResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"DeleteApnsSandboxChannelRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"DeleteApnsSandboxChannelResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"DeleteApnsVoipChannelRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"DeleteApnsVoipChannelResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"DeleteApnsVoipSandboxChannelRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"DeleteApnsVoipSandboxChannelResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"DeleteAppRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"DeleteAppResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"DeleteBaiduChannelRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"DeleteBaiduChannelResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"DeleteCampaignRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"DeleteCampaignResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"DeleteEmailChannelRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"DeleteEmailChannelResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"DeleteEmailTemplateRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"DeleteEmailTemplateResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"DeleteEndpointRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"DeleteEndpointResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"DeleteEventStreamRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"DeleteEventStreamResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"DeleteGcmChannelRequest")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"DeleteGcmChannelResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"DeleteJourneyRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"DeleteJourneyResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"DeletePushTemplateRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"DeletePushTemplateResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"DeleteRecommenderConfigurationRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"DeleteRecommenderConfigurationResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"DeleteSegmentRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"DeleteSegmentResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"DeleteSmsChannelRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"DeleteSmsChannelResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"DeleteSmsTemplateRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"DeleteSmsTemplateResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"DeleteUserEndpointsRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"DeleteUserEndpointsResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"DeleteVoiceChannelRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"DeleteVoiceChannelResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"DeleteVoiceTemplateRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"DeleteVoiceTemplateResponse")},(jt={}).DUPLICATE="DUPLICATE",jt.OPT_OUT="OPT_OUT",jt.PERMANENT_FAILURE="PERMANENT_FAILURE",jt.SUCCESSFUL="SUCCESSFUL",jt.TEMPORARY_FAILURE="TEMPORARY_FAILURE",jt.THROTTLED="THROTTLED",jt.UNKNOWN_FAILURE="UNKNOWN_FAILURE",(b={}).EXCLUSIVE="EXCLUSIVE",b.INCLUSIVE="INCLUSIVE",(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"DirectMessageConfiguration")},(dn={}).DAY_14="DAY_14",dn.DAY_30="DAY_30",dn.DAY_7="DAY_7",dn.HR_24="HR_24",(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"EmailChannelRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"EmailChannelResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"EmailMessage")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"EmailMessageActivity")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"EmailTemplateRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"EmailTemplateResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"EndpointBatchItem")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"EndpointBatchRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"EndpointDemographic")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"EndpointItemResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"EndpointLocation")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"EndpointMessageResult")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"EndpointRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"EndpointResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"EndpointSendConfiguration")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"EndpointsResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"EndpointUser")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"Event")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"EventCondition")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"EventDimensions")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"EventItemResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"EventsBatch")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"EventsRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"EventsResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"EventStream")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"ExportJobRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"ExportJobResource")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"ExportJobResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"ExportJobsResponse")},(dn={}).ENDPOINT="ENDPOINT",dn.SYSTEM="SYSTEM",(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"ForbiddenException")},(nr={}).CSV="CSV",nr.JSON="JSON",(cr={}).DAILY="DAILY",cr.EVENT="EVENT",cr.HOURLY="HOURLY",cr.MONTHLY="MONTHLY",cr.ONCE="ONCE",cr.WEEKLY="WEEKLY",(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GCMChannelRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GCMChannelResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GCMMessage")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetAdmChannelRequest")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetAdmChannelResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetApnsChannelRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetApnsChannelResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetApnsSandboxChannelRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetApnsSandboxChannelResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetApnsVoipChannelRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetApnsVoipChannelResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetApnsVoipSandboxChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetApnsVoipSandboxChannelResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetApplicationDateRangeKpiRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetApplicationDateRangeKpiResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetApplicationSettingsRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GetApplicationSettingsResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GetAppRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetAppResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetAppsRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetAppsResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetBaiduChannelRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetBaiduChannelResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetCampaignActivitiesRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetCampaignActivitiesResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetCampaignDateRangeKpiRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetCampaignDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetCampaignRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetCampaignResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetCampaignsRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetCampaignsResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GetCampaignVersionRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GetCampaignVersionResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetCampaignVersionsRequest")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetCampaignVersionsResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetChannelsRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetChannelsResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetEmailChannelRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetEmailChannelResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetEmailTemplateRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetEmailTemplateResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetEndpointRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetEndpointResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetEventStreamRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetEventStreamResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetExportJobRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GetExportJobResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GetExportJobsRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetExportJobsResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetGcmChannelRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetGcmChannelResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetImportJobRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetImportJobResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetImportJobsRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetImportJobsResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetJourneyDateRangeKpiRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetJourneyDateRangeKpiResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetJourneyExecutionActivityMetricsRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetJourneyExecutionActivityMetricsResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetJourneyExecutionMetricsRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetJourneyExecutionMetricsResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GetJourneyRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GetJourneyResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetPushTemplateRequest")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetPushTemplateResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetRecommenderConfigurationRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetRecommenderConfigurationResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetRecommenderConfigurationsRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetRecommenderConfigurationsResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetSegmentExportJobsRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetSegmentExportJobsResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetSegmentImportJobsRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetSegmentImportJobsResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetSegmentRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetSegmentResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetSegmentsRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GetSegmentsResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GetSegmentVersionRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"GetSegmentVersionResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"GetSegmentVersionsRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"GetSegmentVersionsResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"GetSmsChannelRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"GetSmsChannelResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"GetSmsTemplateRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"GetSmsTemplateResponse")},(pn=Hc=Hc||{}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"GetUserEndpointsRequest")},(dn=Wc=Wc||{}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"GetUserEndpointsResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"GetVoiceChannelRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"GetVoiceChannelResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"GetVoiceTemplateRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"GetVoiceTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"GPSCoordinates")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"GPSPointDimension")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"HoldoutActivity")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"ImportJobRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"ImportJobResource")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"ImportJobResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"ImportJobsResponse")},(jt={}).ALL="ALL",jt.ANY="ANY",jt.NONE="NONE",(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"InternalServerErrorException")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"ItemResponse")},(dn={}).COMPLETED="COMPLETED",dn.COMPLETING="COMPLETING",dn.CREATED="CREATED",dn.FAILED="FAILED",dn.FAILING="FAILING",dn.INITIALIZING="INITIALIZING",dn.PENDING_JOB="PENDING_JOB",dn.PREPARING_FOR_INITIALIZATION="PREPARING_FOR_INITIALIZATION",dn.PROCESSING="PROCESSING",(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"JourneyCustomMessage")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"JourneyDateRangeKpiResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"JourneyEmailMessage")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"JourneyExecutionActivityMetricsResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"JourneyExecutionMetricsResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"JourneyLimits")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"JourneyPushMessage")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"JourneyResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"JourneySchedule")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"JourneySMSMessage")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"JourneysResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"JourneyStateRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"ListJourneysRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"ListJourneysResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"ListRecommenderConfigurationsResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"ListTagsForResourceRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"ListTagsForResourceResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"ListTemplatesRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"ListTemplatesResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"ListTemplateVersionsRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"ListTemplateVersionsResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"Message")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"MessageBody")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"MessageConfiguration")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"MessageRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"MessageResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"MessageResult")},(b={}).PROMOTIONAL="PROMOTIONAL",b.TRANSACTIONAL="TRANSACTIONAL",(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"MethodNotAllowedException")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"MetricDimension")},(hr={}).DELIVERY="DELIVERY",hr.FILTER="FILTER",(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"MultiConditionalBranch")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"MultiConditionalSplitActivity")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"NotFoundException")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"NumberValidateRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"NumberValidateResponse")},(p={}).ALL="ALL",p.ANY="ANY",(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"PayloadTooLargeException")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"PhoneNumberValidateRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"PhoneNumberValidateResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"PublicEndpoint")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"PushMessageActivity")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"PushNotificationTemplateRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"PushNotificationTemplateResponse")},(dn=$c=$c||{}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"PutEventsRequest")},(hr=Jc=Jc||{}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"PutEventsResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"PutEventStreamRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"PutEventStreamResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"QuietTime")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"RandomSplitActivity")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"RandomSplitEntry")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"RawEmail")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"RecencyDimension")},(ln={}).ACTIVE="ACTIVE",ln.INACTIVE="INACTIVE",(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"RecommenderConfigurationResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"RemoveAttributesRequest")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"RemoveAttributesResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"ResultRow")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"ResultRowValue")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"Schedule")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"SegmentBehaviors")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"SegmentCondition")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"SegmentDemographics")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"SegmentDimensions")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"SegmentGroup")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"SegmentGroupList")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"SegmentImportResource")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"SegmentLocation")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"SegmentReference")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"SegmentResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"SegmentsResponse")},(jt={}).DIMENSIONAL="DIMENSIONAL",jt.IMPORT="IMPORT",(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"SendMessagesRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"SendMessagesResponse")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"SendUsersMessageRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"SendUsersMessageResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"SendUsersMessagesRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"SendUsersMessagesResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"Session")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"SetDimension")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"SimpleCondition")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"SimpleEmail")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"SimpleEmailPart")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"SMSChannelRequest")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"SMSChannelResponse")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"SMSMessage")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"SMSMessageActivity")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"SMSTemplateRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"SMSTemplateResponse")},(dn={}).ALL="ALL",dn.ANY="ANY",dn.NONE="NONE",(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"StartCondition")},(nr={}).ACTIVE="ACTIVE",nr.CANCELLED="CANCELLED",nr.CLOSED="CLOSED",nr.COMPLETED="COMPLETED",nr.DRAFT="DRAFT",(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"TagResourceRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"TagsModel")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"Template")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"TemplateActiveVersionRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"TemplateConfiguration")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"TemplateResponse")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"TemplatesResponse")},(at={}).EMAIL="EMAIL",at.PUSH="PUSH",at.SMS="SMS",at.VOICE="VOICE",(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"TemplateVersionResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"TemplateVersionsResponse")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"TooManyRequestsException")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"TreatmentResource")},(dn={}).ALL="ALL",dn.ANY="ANY",dn.NONE="NONE",(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"UntagResourceRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"UpdateAdmChannelRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"UpdateAdmChannelResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"UpdateApnsChannelRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"UpdateApnsChannelResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"UpdateApnsSandboxChannelRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"UpdateApnsSandboxChannelResponse")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"UpdateApnsVoipChannelRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"UpdateApnsVoipChannelResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"UpdateApnsVoipSandboxChannelRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"UpdateApnsVoipSandboxChannelResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"UpdateApplicationSettingsRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"UpdateApplicationSettingsResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"UpdateAttributesRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"UpdateBaiduChannelRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"UpdateBaiduChannelResponse")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"UpdateCampaignRequest")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"UpdateCampaignResponse")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"UpdateEmailChannelRequest")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"UpdateEmailChannelResponse")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"UpdateEmailTemplateRequest")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"UpdateEmailTemplateResponse")},(dr=Yc=Yc||{}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"UpdateEndpointRequest")},(ln=Zc=Zc||{}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"UpdateEndpointResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"UpdateEndpointsBatchRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"UpdateEndpointsBatchResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"UpdateGcmChannelRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"UpdateGcmChannelResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"UpdateJourneyRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"UpdateJourneyResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"UpdateJourneyStateRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"UpdateJourneyStateResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"UpdatePushTemplateRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"UpdatePushTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"UpdateRecommenderConfigurationRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"UpdateRecommenderConfigurationResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"UpdateRecommenderConfigurationShape")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"UpdateSegmentRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"UpdateSegmentResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"UpdateSmsChannelRequest")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"UpdateSmsChannelResponse")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"UpdateSmsTemplateRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"UpdateSmsTemplateResponse")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"UpdateTemplateActiveVersionRequest")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"UpdateTemplateActiveVersionResponse")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"UpdateVoiceChannelRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"UpdateVoiceChannelResponse")},(cr={}).filterSensitiveLog=function(e){return Uo({},e)},cr.isa=function(e){return Fc(e,"UpdateVoiceTemplateRequest")},(Xn={}).filterSensitiveLog=function(e){return Uo({},e)},Xn.isa=function(e){return Fc(e,"UpdateVoiceTemplateResponse")},(br={}).filterSensitiveLog=function(e){return Uo({},e)},br.isa=function(e){return Fc(e,"VoiceChannelRequest")},(Jn={}).filterSensitiveLog=function(e){return Uo({},e)},Jn.isa=function(e){return Fc(e,"VoiceChannelResponse")},(p={}).filterSensitiveLog=function(e){return Uo({},e)},p.isa=function(e){return Fc(e,"VoiceMessage")},(dr={}).filterSensitiveLog=function(e){return Uo({},e)},dr.isa=function(e){return Fc(e,"VoiceTemplateRequest")},(ln={}).filterSensitiveLog=function(e){return Uo({},e)},ln.isa=function(e){return Fc(e,"VoiceTemplateResponse")},(at={}).filterSensitiveLog=function(e){return Uo({},e)},at.isa=function(e){return Fc(e,"WaitActivity")},(fn={}).filterSensitiveLog=function(e){return Uo({},e)},fn.isa=function(e){return Fc(e,"WaitTime")},(jt={}).filterSensitiveLog=function(e){return Uo({},e)},jt.isa=function(e){return Fc(e,"WriteApplicationSettingsRequest")},(b={}).filterSensitiveLog=function(e){return Uo({},e)},b.isa=function(e){return Fc(e,"WriteCampaignRequest")},(pn={}).filterSensitiveLog=function(e){return Uo({},e)},pn.isa=function(e){return Fc(e,"WriteEventStream")},(dn={}).filterSensitiveLog=function(e){return Uo({},e)},dn.isa=function(e){return Fc(e,"WriteJourneyRequest")},(hr={}).filterSensitiveLog=function(e){return Uo({},e)},hr.isa=function(e){return Fc(e,"WriteSegmentRequest")},(nr={}).filterSensitiveLog=function(e){return Uo({},e)},nr.isa=function(e){return Fc(e,"WriteTreatmentResource")};function tl(e,t){return Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})}function nl(e,t){return Uo(Uo(Uo(Uo(Uo(Uo({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})}function rl(e,t){return n=t,void 0===(e=e)&&(e=new Uint8Array),(e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var il=function(d,h){return Do(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return Fo(this,function(e){switch(e.label){case 0:return t=[Uo({},d)],f={},[4,Nl(d.body,h)];case 1:switch(l=Uo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=Ml(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,al(l)];case 3:return n=Uo.apply(void 0,[Uo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 4:return i=[{}],[4,ul(l)];case 5:return n=Uo.apply(void 0,[Uo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 6:return o=[{}],[4,cl(l)];case 7:return n=Uo.apply(void 0,[Uo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 8:return s=[{}],[4,ll(l)];case 9:return n=Uo.apply(void 0,[Uo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 10:return a=[{}],[4,pl(l)];case 11:return n=Uo.apply(void 0,[Uo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 12:return u=[{}],[4,fl(l)];case 13:return n=Uo.apply(void 0,[Uo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 14:return c=[{}],[4,dl(l)];case 15:return n=Uo.apply(void 0,[Uo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Uo(Uo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:xl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},ol=function(d,h){return Do(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return Fo(this,function(e){switch(e.label){case 0:return t=[Uo({},d)],f={},[4,Nl(d.body,h)];case 1:switch(l=Uo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=Ml(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,al(l)];case 3:return n=Uo.apply(void 0,[Uo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 4:return i=[{}],[4,ul(l)];case 5:return n=Uo.apply(void 0,[Uo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 6:return o=[{}],[4,cl(l)];case 7:return n=Uo.apply(void 0,[Uo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 8:return s=[{}],[4,ll(l)];case 9:return n=Uo.apply(void 0,[Uo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 10:return a=[{}],[4,pl(l)];case 11:return n=Uo.apply(void 0,[Uo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 12:return u=[{}],[4,fl(l)];case 13:return n=Uo.apply(void 0,[Uo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 14:return c=[{}],[4,dl(l)];case 15:return n=Uo.apply(void 0,[Uo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Uo(Uo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:xl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},sl=function(d,h){return Do(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return Fo(this,function(e){switch(e.label){case 0:return t=[Uo({},d)],f={},[4,Nl(d.body,h)];case 1:switch(l=Uo.apply(void 0,t.concat([(f.body=e.sent(),f)])),p="UnknownError",p=Ml(d,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,al(l)];case 3:return n=Uo.apply(void 0,[Uo.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 4:return i=[{}],[4,ul(l)];case 5:return n=Uo.apply(void 0,[Uo.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 6:return o=[{}],[4,cl(l)];case 7:return n=Uo.apply(void 0,[Uo.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 8:return s=[{}],[4,ll(l)];case 9:return n=Uo.apply(void 0,[Uo.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 10:return a=[{}],[4,pl(l)];case 11:return n=Uo.apply(void 0,[Uo.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 12:return u=[{}],[4,fl(l)];case 13:return n=Uo.apply(void 0,[Uo.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 14:return c=[{}],[4,dl(l)];case 15:return n=Uo.apply(void 0,[Uo.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:xl(d)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Uo(Uo({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:xl(d)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},al=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},ul=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},cl=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},ll=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},pl=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},fl=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},dl=function(r,e){return Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:xl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},hl=function(e,t){return Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:wl(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:tl(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:nl(e.Location)}),void 0!==e.Metrics&&{Metrics:ml(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:gl(e.User)})},gl=function(e,t){return Uo(Uo({},void 0!==e.UserAttributes&&{UserAttributes:wl(e.UserAttributes)}),void 0!==e.UserId&&{UserId:e.UserId})},vl=function(e,t){return Uo({},void 0!==e.BatchItem&&{BatchItem:Sl(e.BatchItem)})},ml=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=n,e))},{})},yl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=n,e))},{})},bl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo({},void 0!==(n=n).AppPackageName&&{AppPackageName:n.AppPackageName}),void 0!==n.AppTitle&&{AppTitle:n.AppTitle}),void 0!==n.AppVersionCode&&{AppVersionCode:n.AppVersionCode}),void 0!==n.Attributes&&{Attributes:yl(n.Attributes)}),void 0!==n.ClientSdkVersion&&{ClientSdkVersion:n.ClientSdkVersion}),void 0!==n.EventType&&{EventType:n.EventType}),void 0!==n.Metrics&&{Metrics:ml(n.Metrics)}),void 0!==n.SdkName&&{SdkName:n.SdkName}),void 0!==n.Session&&{Session:_l(n.Session)}),void 0!==n.Timestamp&&{Timestamp:n.Timestamp}),e))},{})},Sl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=Uo(Uo({},void 0!==(n=n).Endpoint&&{Endpoint:Cl(n.Endpoint)}),void 0!==n.Events&&{Events:bl(n.Events)}),e))},{})},wl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=n.map(function(e){return e}),e))},{})},Cl=function(e,t){return Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo(Uo({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:wl(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:tl(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:nl(e.Location)}),void 0!==e.Metrics&&{Metrics:ml(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:gl(e.User)})},_l=function(e,t){return Uo(Uo(Uo(Uo({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},El=function(e,t){return{__type:"EndpointsResponse",Item:void 0!==e.Item&&null!==e.Item?Pl(e.Item):void 0}},Al=function(e,t){return{__type:"EndpointUser",UserAttributes:void 0!==e.UserAttributes&&null!==e.UserAttributes?Ll(e.UserAttributes):void 0,UserId:void 0!==e.UserId&&null!==e.UserId?e.UserId:void 0}},Il=function(e,t){return{__type:"EventsResponse",Results:void 0!==e.Results&&null!==e.Results?kl(e.Results):void 0}},Pl=function(e,t){return(e||[]).map(function(e){return{__type:"EndpointResponse",Address:void 0!==(e=e).Address&&null!==e.Address?e.Address:void 0,ApplicationId:void 0!==e.ApplicationId&&null!==e.ApplicationId?e.ApplicationId:void 0,Attributes:void 0!==e.Attributes&&null!==e.Attributes?Ll(e.Attributes):void 0,ChannelType:void 0!==e.ChannelType&&null!==e.ChannelType?e.ChannelType:void 0,CohortId:void 0!==e.CohortId&&null!==e.CohortId?e.CohortId:void 0,CreationDate:void 0!==e.CreationDate&&null!==e.CreationDate?e.CreationDate:void 0,Demographic:void 0!==e.Demographic&&null!==e.Demographic?{__type:"EndpointDemographic",AppVersion:void 0!==(t=e.Demographic).AppVersion&&null!==t.AppVersion?t.AppVersion:void 0,Locale:void 0!==t.Locale&&null!==t.Locale?t.Locale:void 0,Make:void 0!==t.Make&&null!==t.Make?t.Make:void 0,Model:void 0!==t.Model&&null!==t.Model?t.Model:void 0,ModelVersion:void 0!==t.ModelVersion&&null!==t.ModelVersion?t.ModelVersion:void 0,Platform:void 0!==t.Platform&&null!==t.Platform?t.Platform:void 0,PlatformVersion:void 0!==t.PlatformVersion&&null!==t.PlatformVersion?t.PlatformVersion:void 0,Timezone:void 0!==t.Timezone&&null!==t.Timezone?t.Timezone:void 0}:void 0,EffectiveDate:void 0!==e.EffectiveDate&&null!==e.EffectiveDate?e.EffectiveDate:void 0,EndpointStatus:void 0!==e.EndpointStatus&&null!==e.EndpointStatus?e.EndpointStatus:void 0,Id:void 0!==e.Id&&null!==e.Id?e.Id:void 0,Location:void 0!==e.Location&&null!==e.Location?{__type:"EndpointLocation",City:void 0!==(t=e.Location).City&&null!==t.City?t.City:void 0,Country:void 0!==t.Country&&null!==t.Country?t.Country:void 0,Latitude:void 0!==t.Latitude&&null!==t.Latitude?t.Latitude:void 0,Longitude:void 0!==t.Longitude&&null!==t.Longitude?t.Longitude:void 0,PostalCode:void 0!==t.PostalCode&&null!==t.PostalCode?t.PostalCode:void 0,Region:void 0!==t.Region&&null!==t.Region?t.Region:void 0}:void 0,Metrics:void 0!==e.Metrics&&null!==e.Metrics?Ol(e.Metrics):void 0,OptOut:void 0!==e.OptOut&&null!==e.OptOut?e.OptOut:void 0,RequestId:void 0!==e.RequestId&&null!==e.RequestId?e.RequestId:void 0,User:void 0!==e.User&&null!==e.User?Al(e.User):void 0};var t})},Ol=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=n,e))},{})},Tl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]={__type:"EventItemResponse",Message:void 0!==(n=n).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})},kl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]={__type:"ItemResponse",EndpointItemResponse:void 0!==(t=n).EndpointItemResponse&&null!==t.EndpointItemResponse?{__type:"EndpointItemResponse",Message:void 0!==(n=t.EndpointItemResponse).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?Tl(t.EventsItemResponse):void 0},e))},{})},Ll=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jo(t,2),t=n[0],n=n[1];return Uo(Uo({},e),((e={})[t]=(n||[]).map(function(e){return e}),e))},{})},Rl=function(e,t){return{__type:"MessageBody",Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},xl=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Nl=function(e,t){return rl(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Ml=function(e,t){function n(e){return 0<=e.indexOf(":")&&(e=e.split(":")[0]),0<=e.indexOf("#")&&(e=e.split("#")[1]),e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""};var Ul={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},Dl={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Fl(t,n,r){return{applyToStack:function(e){e.add(function(o,s){var e=this;return function(i){return function(r){return G(e,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return[4,i(r)];case 1:return t=e.sent().response,[4,s(t,o)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}}(t,r),Ul),e.add(function(i,o){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,o(n.input,i)];case 1:return t=e.sent(),[2,r(j(j({},n),{request:t}))]}})})}}}(t,n),Dl)}}}var jl,ql=(Mo(Bl,jl=cn),Bl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Hc.filterSensitiveLog,outputFilterSensitiveLog:Wc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Bl.prototype.serialize=function(e,t){return s=e,a=t,Do(void 0,void 0,void 0,function(){var t,n,r,i,o;return Fo(this,function(e){switch(e.label){case 0:if(t={"Content-Type":""},n="/v1/apps/{ApplicationId}/users/{UserId}",void 0===s.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=s.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",Mc(i)),void 0===s.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((i=s.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return n=n.replace("{UserId}",Mc(i)),[4,a.endpoint()];case 1:return o=e.sent(),r=o.hostname,i=o.protocol,i=void 0===i?"https":i,o=o.port,[2,new ca({protocol:i,hostname:r,port:o,method:"GET",headers:t,path:n,body:void 0})]}})});var s,a},Bl.prototype.deserialize=function(e,t){return r=e,i=t,Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,il(r,i)]:(t={$metadata:xl(r),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,Nl(r.body,i)]);case 1:return n=e.sent(),t.EndpointsResponse=El(n),[2,Promise.resolve(t)]}})});var r,i},Bl);function Bl(e){var t=jl.call(this)||this;return t.input=e,t}var Vl,zl=(Mo(Gl,Vl=cn),Gl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:$c.filterSensitiveLog,outputFilterSensitiveLog:Jc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Gl.prototype.serialize=function(e,t){return a=e,u=t,Do(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Fo(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/events",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return n=n.replace("{ApplicationId}",Mc(o)),void 0!==a.EventsRequest&&(r=vl(a.EventsRequest)),void 0===r&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},Gl.prototype.deserialize=function(e,t){return r=e,i=t,Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&400<=r.statusCode?[2,ol(r,i)]:(t={$metadata:xl(r),__type:"PutEventsResponse",EventsResponse:void 0},[4,Nl(r.body,i)]);case 1:return n=e.sent(),t.EventsResponse=Il(n),[2,Promise.resolve(t)]}})});var r,i},Gl);function Gl(e){var t=Vl.call(this)||this;return t.input=e,t}var Kl,Hl=(Mo(Wl,Kl=cn),Wl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Yc.filterSensitiveLog,outputFilterSensitiveLog:Zc.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Wl.prototype.serialize=function(e,t){return a=e,u=t,Do(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Fo(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",Mc(o)),void 0===a.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((o=a.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return n=n.replace("{EndpointId}",Mc(o)),void 0!==a.EndpointRequest&&(r=hl(a.EndpointRequest)),void 0===r&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"PUT",headers:t,path:n,body:r})]}})});var a,u},Wl.prototype.deserialize=function(e,t){return r=e,i=t,Do(void 0,void 0,void 0,function(){var t,n;return Fo(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&400<=r.statusCode?[2,sl(r,i)]:(t={$metadata:xl(r),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,Nl(r.body,i)]);case 1:return n=e.sent(),t.MessageBody=Rl(n),[2,Promise.resolve(t)]}})});var r,i},Wl);function Wl(e){var t=Kl.call(this)||this;return t.input=e,t}var $l={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new E.StorageHelper).getStorage()};function Jl(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function Yl(){return(new Date).getTime()}function Zl(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(e=e)&&isFinite(e)&&Math.floor(e)===e}var Xl=new E.ConsoleLogger("StorageCache"),cr=(Ql.prototype.getModuleName=function(){return"Cache"},Ql.prototype.checkConfig=function(){Zl(this.config.capacityInBytes)||(Xl.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=$l.capacityInBytes),Zl(this.config.itemMaxSize)||(Xl.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=$l.itemMaxSize),Zl(this.config.defaultTTL)||(Xl.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=$l.defaultTTL),Zl(this.config.defaultPriority)||(Xl.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=$l.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Xl.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=$l.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Xl.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=$l.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Xl.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=$l.warningThreshold);5242880<this.config.capacityInBytes&&(Xl.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=$l.capacityInBytes)},Ql.prototype.fillCacheItem=function(e,t,n){t={key:e,data:t,timestamp:Yl(),visitedTime:Yl(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return t.byteSize=Jl(JSON.stringify(t)),t.byteSize=Jl(JSON.stringify(t)),t},Ql.prototype.configure=function(e){return e&&(e.keyPrefix&&Xl.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},Ql);function Ql(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var ep,tp,Xn=(ep=function(e,t){return(ep=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ep(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),np=new E.ConsoleLogger("Cache");function rp(e){var t=this,e=e?Object.assign({},$l,e):$l;return(t=tp.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var ip=new(Xn(rp,tp=cr),rp.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},rp.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},rp.prototype._refreshItem=function(e,t){return e.visitedTime=Yl(),this.config.storage.setItem(t,JSON.stringify(e)),e},rp.prototype._isExpired=function(e){e=this.config.storage.getItem(e),e=JSON.parse(e);return Yl()>=e.expires},rp.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},rp.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),np.error("Failed to set item "+e)}},rp.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,e=(1-this.config.warningThreshold)*this.config.capacityInBytes;return e<t?t:e},rp.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},rp.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},rp.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);null!=o&&(o=JSON.parse(o),n.push(o))}n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1});for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},rp.prototype.setItem=function(e,t,n){np.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Yl()};if(n.priority<1||5<n.priority)np.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,n);if(i.byteSize>this.config.itemMaxSize)np.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var o,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(i.byteSize)&&(o=this._findValidKeys(),this._isCacheFull(i.byteSize)&&(s=this._sizeToPop(i.byteSize),this._popOutItems(o,s))),this._setItem(r,i)}catch(e){np.warn("setItem failed! "+e)}}}else np.warn("The value of item should not be undefined!");else np.warn("Invalid key: should not be empty or 'CurSize'")},rp.prototype.getItem=function(e,t){np.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return np.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return np.warn("getItem failed! "+e),null}},rp.prototype.removeItem=function(e){np.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){np.warn("removeItem failed! "+e)}},rp.prototype.clear=function(){np.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){np.warn("clear failed! "+e)}},rp.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},rp.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},rp.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==$l.keyPrefix||(np.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Yl.toString()),new rp(e)},rp);E.Amplify.register(ip);var op=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},sp=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ap=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},up=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ap(arguments[t]));return e},cp=new E.ConsoleLogger("EventsBuffer"),lp=[429,500],pp=[202],fp=(dp.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return cp.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},dp.prototype.pause=function(){this._pause=!0},dp.prototype.resume=function(){this._pause=!1},dp.prototype.updateClient=function(e){this._client=e},dp.prototype.flush=function(){this._flush=!0},dp.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},dp.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},dp.prototype._putEvents=function(i){return op(this,void 0,void 0,function(){var t,n,r;return sp(this,function(e){switch(e.label){case 0:t=this._bufferToMap(i),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new zl(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}})})},dp.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,i=t.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,e=n.session,t=i.appId,n=i.endpointId,i=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||t,i[n]||(i[n]={Endpoint:{},Events:{}}),i[n].Events[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:e}}),c},dp.prototype._handlePutEventsFailure=function(e,t){cp.debug("_putEvents Failed: ",e);e=e.$metadata&&e.$metadata.httpStatusCode;lp.includes(e)&&(t=Object.values(t),this._retry(t))},dp.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var e=ap(e,2),s=e[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=ap(e,2),n=t[0],r=t[1],i=r.StatusCode,o=r.Message,e=a[n],t={EventsResponse:{Results:((t={})[s]={EventsItemResponse:((r={})[n]={StatusCode:i,Message:o},r)},t)}};if(pp.includes(i))e.handlers.resolve(t);else{if(!lp.includes(i)){i=e.params.event.name;return cp.error("event "+n+" : "+i+" failed with error: "+o),e.handlers.reject(t)}u.push(e)}})}),u.length&&this._retry(u)},dp.prototype._retry=function(e){var i=[];e.forEach(function(e){var t=e.params,n=t.event,r=n.eventId,n=n.name;if(0<t.resendLimit--)return cp.debug("resending event "+r+" : "+n+" with "+t.resendLimit+" retry attempts remaining"),void i.push(((t={})[r]=e,t));cp.debug("no retry attempts remaining for event "+r+" : "+n)}),(e=this._buffer).unshift.apply(e,up(i))},dp.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=ap(Object.entries(t),1),t=ap(n[0],2),n=t[0],t=t[1];return e[n]=t,e},{})},dp);function dp(e,t){this._pause=!1,this._flush=!1,cp.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function hp(e,t){E.Hub.dispatch("analytics",{event:e,data:t},"Analytics",bp)}var gp=function(){return(gp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},vp=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},mp=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},yp=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},bp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Sp=new E.ConsoleLogger("AWSPinpointProvider"),wp=[429,500],Cp=[202],_p="_update_endpoint",Ep="_session.stop",Ap="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Ip=(Pp.prototype.getCategory=function(){return Pp.category},Pp.prototype.getProviderName=function(){return Pp.providerName},Pp.prototype.configure=function(e){var t=this;Sp.debug("configure Analytics",e);e=e||{};return this._config=Object.assign({},this._config,e),this._config.appId&&!this._config.disabled?this._config.endpointId?hp("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){Sp.debug("setting endpoint id from the cache",e),t._config.endpointId=e,hp("pinpointProvider_configured",null)}).catch(function(e){Sp.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},Pp.prototype.record=function(n,r){return vp(this,void 0,void 0,function(){var t;return mp(this,function(e){switch(e.label){case 0:return Sp.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=v.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(Sp.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},Pp.prototype._sendEndpointUpdate=function(n){return vp(this,void 0,void 0,function(){var t;return mp(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},Pp.prototype._putToBuffer=function(e,t){e.event.name!==_p?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},Pp.prototype._generateSession=function(e){this._sessionId=this._sessionId||v.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=v.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Ep:e=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||v.v1(),t.session={Id:this._sessionId,Duration:e-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(e).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||v.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},Pp.prototype._send=function(t,n){return vp(this,void 0,void 0,function(){return mp(this,function(e){switch(t.event.name){case _p:return[2,this._updateEndpoint({params:t,handlers:n})];case Ep:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},Pp.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}},r={Endpoint:{}};return r.Events=((c={})[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},Pp.prototype._pinpointPutEvents=function(o,s){return vp(this,void 0,void 0,function(){var t,n,r,i;return mp(this,function(e){switch(e.label){case 0:t=o.event.eventId,n=o.config.endpointId,r=this._generateBatchItemContext(o),r=new zl(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return(i=e.sent(),r=i.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,Cp.includes(n))?(Sp.debug("record event success. ",i),[2,s.resolve(i)]):wp.includes(n)?(this._retry(o,s),[3,4]):(Sp.error("Event "+t+" is not accepted, the error is "+r),[2,s.reject(i)]);case 3:return i=e.sent(),this._eventError(i),[2,s.reject(i)];case 4:return[2]}})})},Pp.prototype._pinpointSendStopSession=function(e,t){if(Ap){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},i="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",o=JSON.stringify(o),i={url:i,body:o,method:"POST"},r={region:r,service:"mobiletargeting"},r=E.Signer.signUrl(i,n,r,null);return navigator.sendBeacon(r,o)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},Pp.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Sp.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Sp.debug("retry times used up for event "+e.eventName)},Pp.prototype._updateEndpoint=function(a){return vp(this,void 0,void 0,function(){var t,n,r,i,o,s;return mp(this,function(e){switch(e.label){case 0:s=a.params,t=a.handlers,n=s.config,i=s.event,r=n.appId,s=n.endpointId,i=this._endpointRequest(n,E.JS.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),s={ApplicationId:r,EndpointId:s,EndpointRequest:i},e.label=1;case 1:return e.trys.push([1,3,,4]),i=new Hl(s),[4,this.pinpointClient.send(i)];case 2:return o=e.sent(),Sp.debug("updateEndpoint success",o),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(o),[2];case 3:return o=e.sent(),s={err:o,update_params:s,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},Pp.prototype._handleEndpointUpdateFailure=function(i){return vp(this,void 0,void 0,function(){var t,n,r;return mp(this,function(e){switch(t=i.err,n=i.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Sp.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(i)];case 403:return[2,this._handleEndpointUpdateForbidden(i)];default:if(wp.includes(r))return[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]})})},Pp.prototype._handleEndpointUpdateBadRequest=function(s){return vp(this,void 0,void 0,function(){var t,n,r,i,o;return mp(this,function(e){switch(e.label){case 0:if(t=s.err,o=s.update_params,n=s.endpointObject,r=t.message,i=o.ApplicationId,o=o.EndpointRequest,!String(r).startsWith("Exceeded maximum endpoint per user count"))return[2,n.handlers.reject(t)];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(i,o.User.UserId)];case 2:return e.sent(),Sp.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(n),[3,4];case 3:return o=e.sent(),Sp.warn("Failed to remove unused endpoints with error: "+o),Sp.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,n.handlers.reject(o)];case 4:return[2]}})})},Pp.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},Pp.prototype._retryEndpointUpdate=function(e,t){Sp.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Sp.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Sp.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Sp.error("Initial endpoint update failed. ")},Pp.prototype._removeUnusedEndpoints=function(l,p){return vp(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return mp(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),t=new ql({ApplicationId:l,UserId:p}),[4,this.pinpointClient.send(t)];case 1:for(a=e.sent(),n=a.EndpointsResponse.Item,Sp.debug("get endpoints associated with the userId: "+p+" with data",n),r=n[0],i=1;i<n.length&&(o=Date.parse(r.EffectiveDate),s=Date.parse(n[i].EffectiveDate),!isNaN(o));i++){if(isNaN(s)){r=n[i];break}s<o&&(r=n[i])}a={ApplicationId:l,EndpointId:r.Id,EndpointRequest:{User:{UserId:""}}},e.label=2;case 2:return e.trys.push([2,4,,5]),u=new Hl(a),[4,this.pinpointClient.send(u)];case 3:return u=e.sent(),Sp.debug("The old endpoint is updated with an empty string for user id"),[2,u];case 4:throw c=e.sent(),Sp.debug("Failed to update the endpoint",c),c;case 5:return[3,7];case 6:throw c=e.sent(),Sp.debug("Failed to get endpoints associated with the userId: "+p+" with error",c),c;case 7:return[2]}})})},Pp.prototype._initClients=function(r){return vp(this,void 0,void 0,function(){var t,n;return mp(this,function(e){return Sp.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Sp.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Sp.debug("init clients with credentials",r),this.pinpointClient=new Qc({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},Pp.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof fp},Pp.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new fp(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},Pp.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},Pp.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},Pp.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},Pp.prototype._customizePinpointClientReq=function(){},Pp.prototype._getEndpointId=function(n){return vp(this,void 0,void 0,function(){var t;return mp(this,function(e){switch(e.label){case 0:return[4,ip.getItem(n)];case 1:return t=e.sent(),Sp.debug("endpointId from cache",t,"type",typeof t),t||(t=v.v1(),ip.setItem(n,t)),[2,t]}})})},Pp.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},i=yp(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=gp(gp(gp({channelType:r,requestId:v.v1(),effectiveDate:(new Date).toISOString()},o),t),{attributes:gp(gp({},o.attributes),t.attributes),demographic:gp(gp(gp(gp({},e),i),o.demographic),t.demographic),location:gp(gp({},o.location),t.location),metrics:gp(gp({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:gp(gp({},o.userAttributes),t.userAttributes)}}),t=(t.userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,yp(t,["userId","userAttributes","name","session","eventId","immediate"]));return E.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},Pp.prototype._eventError=function(e){Sp.error("record event failed.",e),Sp.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},Pp.prototype._getCredentials=function(){return vp(this,void 0,void 0,function(){var t;return mp(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E.Credentials.get()];case 1:return(t=e.sent())?(Sp.debug("set credentials for analytics",t),[2,E.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),Sp.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},Pp.category="Analytics",Pp.providerName="AWSPinpoint",Pp);function Pp(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=E.ClientDevice.clientInfo()}var Op=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Tp=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Op(arguments[t]));return e},kp=[],Lp=(Rp.add=function(e,t,n){xp(e,t).set(n)},Rp.remove=function(e,t){xp(e,t).remove()},Rp.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,Tp(e)))}},Rp.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Rp);function Rp(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function xp(t,n){var e=kp.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Lp(t,n),kp.push(e)),e}var Np=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Mp=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Up=new E.ConsoleLogger("PageViewTracker"),Dp="aws-amplify-analytics-prevUrl",Fp={enable:!1,provider:"AWSPinpoint",getUrl:function(){return E.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},br=(jp.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},jp.prototype._isSameUrl=function(){return sessionStorage.getItem(Dp)===this._config.getUrl()&&(Up.debug("the url is same"),!0)},jp.prototype._pageViewTrackDefault=function(){return Np(this,void 0,void 0,function(){var t,n;return Mp(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Up.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Up.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Dp,t)),[2]}})})},jp.prototype._trackFunc=function(){return Np(this,void 0,void 0,function(){var t,n;return Mp(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Up.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Up.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Dp,t)),[2]}})})},jp.prototype._pageViewTrackSPA=function(){E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Lp.add(history,"pushState",this._trackFunc),Lp.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Lp.remove(history,"pushState"),Lp.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Up.debug("not in the supported web enviroment")},jp);function jp(e,t){Up.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Fp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var Jn=E.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,qp=Jn?Jn.matches||Jn.matchesSelector||Jn.webkitMatchesSelector||Jn.mozMatchesSelector||Jn.msMatchesSelector||Jn.oMatchesSelector:null;function Bp(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||Vp(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||Vp(e,n))return 1}}function Vp(e,t){if("string"!=typeof t)return!1;if(qp)return qp.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),i=0;n=r[i];i++)if(n===e)return!0;return!1}function zp(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(Bp(r,t))return r}function Gp(e,t,o,s,a){void 0===a&&(a={});function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),i=0;n=r[i];i++)1===n.nodeType&&Bp(n,o)&&(t=n);else t=zp(e.target,o,!0);t&&s.call(t,e,t)}return e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var Kp=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Hp=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Wp=new E.ConsoleLogger("EventTracker"),$p={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},p=(Jp.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=Gp(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},Jp.prototype._trackFunc=function(s,a){return Kp(this,void 0,void 0,function(){var t,n,r,i,o;return Hp(this,function(e){switch(e.label){case 0:return t={},n=a.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=a.getAttribute(this._config.selectorPrefix+"name"),(i=a.getAttribute(this._config.selectorPrefix+"attrs"))&&i.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/);t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return o=e.sent(),[3,3];case 2:o=this._config.attributes,e.label=3;case 3:return(o=Object.assign({type:s.type,target:s.target.localName+" with id "+s.target.id},o,t),Wp.debug("events needed to be recorded",n),Wp.debug("attributes needed to be attached",t),n.indexOf(s.type)<0)?(Wp.debug("event "+s.type+" is not selected to be recorded"),[2]):(this._tracker({name:r||"event",attributes:o},this._config.provider).catch(function(e){Wp.debug("Failed to record the "+s.type+" event', "+e)}),[2])}})})},Jp);function Jp(e,t){E.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},$p,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Wp.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Wp.debug("not in the supported web environment")}var Yp=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Zp=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Xp=new E.ConsoleLogger("SessionTracker"),Qp={enable:!1,provider:"AWSPinpoint"},ef=!1,dr=(tf.prototype._envCheck=function(){if(!E.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Xp.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Xp.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},tf.prototype._trackFunc=function(){return Yp(this,void 0,void 0,function(){var t;return Zp(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){Xp.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Xp.debug("record session start event failed.",e)}),[2]}})})},tf.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e);t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){Xp.debug("record session stop event failed.",e)})})},tf.prototype._sendInitialEvent=function(){return Yp(this,void 0,void 0,function(){var t;return Zp(this,function(e){switch(e.label){case 0:return ef?(Xp.debug("the start session has been sent when the page is loaded"),[2]):(ef=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Xp.debug("record session start event failed.",e)}),[2]}})})},tf.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},tf);function tf(e,t){this._config=Object.assign({},Qp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}var nf=function(){return(nf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},of=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},sf=new E.ConsoleLogger("AnalyticsClass"),af="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",uf={pageView:br,event:p,session:dr},cf=null,ln=(lf.prototype.getModuleName=function(){return"Analytics"},lf.prototype.configure=function(e){var n=this;if(!e)return this._config;sf.debug("configure Analytics",e);var t=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(nf({disabled:n._config.disabled},t))}),0===this._pluggables.length&&this.addPluggable(new Ip),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),E.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",af),sf.debug("current configuration",this._config),this._config},lf.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=nf({disabled:this._config.disabled},t);return e.configure(t),t}},lf.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return sf.debug("No plugin found with providerName",e),null},lf.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?sf.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},lf.prototype.disable=function(){this._disabled=!0},lf.prototype.enable=function(){this._disabled=!1},lf.prototype.startSession=function(n){return rf(this,void 0,void 0,function(){var t;return of(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},lf.prototype.stopSession=function(n){return rf(this,void 0,void 0,function(){var t;return of(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},lf.prototype.record=function(n,r,i){return rf(this,void 0,void 0,function(){var t;return of(this,function(e){return t=null,t="string"==typeof n?{event:{name:n,attributes:r,metrics:i},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},lf.prototype.updateEndpoint=function(n,r){return rf(this,void 0,void 0,function(){var t;return of(this,function(e){return t=nf(nf({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},lf.prototype._sendEvent=function(r){var e=this;if(this._disabled)return sf.debug("Analytics has been disabled"),Promise.resolve();var i=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===i&&e.record(r,{resolve:t,reject:n})})})},lf.prototype.autoTrack=function(e,t){var n;uf[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new uf[e](this.record,t)):sf.debug("invalid tracker type")},lf);function lf(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(cf=this).record=this.record.bind(this),E.Hub.listen("auth",hf),E.Hub.listen("storage",hf),E.Hub.listen("analytics",hf)}var pf=!1,ff=!1,df=!1,hf=function(e){var t=e.channel,e=e.payload;switch(sf.debug("on hub capsule "+t,e),t){case"auth":vf(e);break;case"storage":gf(e);break;case"analytics":mf(e)}},gf=function(e){var t=e.data,e=t.attrs,t=t.metrics;e&&df&&cf.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){sf.debug("Failed to send the storage event automatically",e)})},vf=function(e){var t=e.event;if(t){e=function(n){return rf(void 0,void 0,void 0,function(){var t;return of(this,function(e){switch(e.label){case 0:if(!ff||!df)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,cf.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),sf.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(t){case"signIn":return e("sign_in");case"signUp":return e("sign_up");case"signOut":return e("sign_out");case"signIn_failure":return e("auth_fail");case"configured":(ff=!0)&&df&&yf()}}},mf=function(e){e=e.event;e&&"pinpointProvider_configured"===e&&(df=!0,ff&&df&&yf())},yf=function(){var e=cf.configure();!pf&&e.autoSessionRecord&&(cf.updateEndpoint({immediate:!0}).catch(function(e){sf.debug("Failed to update the endpoint",e)}),pf=!0),cf.autoTrack("session",{enable:e.autoSessionRecord})},bf=new ln;E.Amplify.register(bf);var Sf=(wf.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&Cf(t),new wf(t)},wf.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Cf(e),parseInt(pc(e),16)*(t?-1:1)},wf.prototype.toString=function(){return String(this.valueOf())},wf);function wf(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function Cf(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var _f=(Ef.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=H(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var f=H(o),d=f.next();!d.done;d=f.next()){var h=d.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return l},Ef.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":r=this.fromUtf8(e.value),i=new DataView(new ArrayBuffer(3+r.byteLength));i.setUint8(0,7),i.setUint16(1,r.byteLength,!1);i=new Uint8Array(i.buffer);return i.set(r,3),i;case"timestamp":var o=new Uint8Array(9);return o[0]=8,o.set(Sf.fromNumber(e.value.valueOf()).bytes,1),o;case"uuid":if(!Nf.test(e.value))throw new Error("Invalid UUID received: "+e.value);o=new Uint8Array(17);return o[0]=9,o.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in uc))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=uc[r]}return t}(e.value.replace(/\-/g,"")),1),o}},Ef.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:Af,value:!0};break;case 1:t[i]={type:Af,value:!1};break;case 2:t[i]={type:If,value:e.getInt8(n++)};break;case 3:t[i]={type:Pf,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:Of,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:Tf,value:new Sf(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:r=e.getUint16(n,!1);n+=2,t[i]={type:kf,value:new Uint8Array(e.buffer,e.byteOffset+n,r)},n+=r;break;case 7:var o=e.getUint16(n,!1);n+=2,t[i]={type:Lf,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o))},n+=o;break;case 8:t[i]={type:Rf,value:new Date(new Sf(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:o=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:xf,value:pc(o.subarray(0,4))+"-"+pc(o.subarray(4,6))+"-"+pc(o.subarray(6,8))+"-"+pc(o.subarray(8,10))+"-"+pc(o.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},Ef);function Ef(e,t){this.toUtf8=e,this.fromUtf8=t}(at={})[at.boolTrue=0]="boolTrue",at[at.boolFalse=1]="boolFalse",at[at.byte=2]="byte",at[at.short=3]="short",at[at.integer=4]="integer",at[at.long=5]="long",at[at.byteArray=6]="byteArray",at[at.string=7]="string",at[at.timestamp=8]="timestamp",at[at.uuid=9]="uuid";var Af="boolean",If="byte",Pf="short",Of="integer",Tf="long",kf="binary",Lf="string",Rf="timestamp",xf="uuid",Nf=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Mf=(Uf.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),e=new DataView(o.buffer,o.byteOffset,o.byteLength),t=new l.Crc32;return e.setUint32(0,i,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),e.setUint32(i-4,t.update(o.subarray(8,i-4)).digest(),!1),o},Uf.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var o=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new l.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,o),body:new Uint8Array(r,n+8+4+o,i-o-16)}}(e),e=t.headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Uf.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Uf);function Uf(e,t){this.headerMarshaller=new _f(e,t)}function Df(s){var a=0,u=0,c=null,l=null,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:t=s[Symbol.asyncIterator](),e.label=1;case 1:return[4,J(t.next())];case 2:return i=e.sent(),n=i.value,i.done?a?[3,4]:[4,J(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return a!==u?[3,7]:[4,J(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,J(void 0)];case 9:return[2,e.sent()];case 10:o=n.length,r=0,e.label=11;case 11:if(!(r<o))return[3,15];if(!c){if(i=o-r,l=l||new Uint8Array(4),i=Math.min(4-u,i),l.set(n.slice(r,r+i),u),r+=i,(u+=i)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);a=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return o=Math.min(a-u,o-r),c.set(n.slice(r,r+o),u),u+=o,r+=o,a&&a===u?[4,J(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=a=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},e}var Ff=(jf.prototype.deserialize=function(e,t){var p,f,e=Df(e);return p=e,f={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder},(t={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,J(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(s=n.value,r=f.eventMarshaller.unmarshall(s),"error"!==(i=r.headers[":message-type"].value))return[3,3];throw(s=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,s;case 3:return"exception"!==i?[3,5]:(o=r.headers[":exception-type"].value,(a={})[o]=r,[4,J(f.deserializer(a))]);case 4:if((s=e.sent()).$unknown)throw(a=new Error(f.toUtf8(r.body))).name=o,a;throw s[o];case 5:return"event"!==i?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,J(f.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,J(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c=e.sent(),c={error:c},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,J(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},jf.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(s),e.label=1;case 1:return[4,J(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,J(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=e.sent(),i={error:i},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(o=t.return)?[4,J(o.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[4,J(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},jf);function jf(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Mf(t,e),this.utfEncoder=t}var qf=(Bf.prototype.deserialize=function(e,t){e="function"==typeof e[Symbol.asyncIterator]?e:function(o){return Y(this,arguments,function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,o.on("error",function(e){if(t=t||!0,e)throw e}),o.on("data",function(e){r.push(e)}),o.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,J(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(i=e.sent())?[4,J(i)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e);return this.universalMarshaller.deserialize(e,t)},Bf.prototype.serialize=function(e,t){t=this.universalMarshaller.serialize(e,t);if("function"==typeof u.Readable.from)return u.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new u.Readable({autoDestroy:!0,objectMode:!0,read:function(){return G(this,void 0,void 0,function(){var n=this;return K(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},Bf);function Bf(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Mf(t,e),this.universalMarshaller=new Ff({utf8Decoder:e,utf8Encoder:t})}var Vf,zf;function Gf(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function Kf(e){return void 0!==e.redirectSignIn}(fn=Vf=Vf||{}).Cognito="COGNITO",fn.Google="Google",fn.Facebook="Facebook",fn.Amazon="LoginWithAmazon",fn.Apple="SignInWithApple",(jt=zf=zf||{}).NoConfig="noConfig",jt.MissingAuthConfig="missingAuthConfig",jt.EmptyUsername="emptyUsername",jt.InvalidUsername="invalidUsername",jt.EmptyPassword="emptyPassword",jt.EmptyCode="emptyCode",jt.SignUpError="signUpError",jt.NoMFA="noMFA",jt.InvalidMFA="invalidMFA",jt.EmptyChallengeResponse="emptyChallengeResponse",jt.NoUserSession="noUserSession",jt.Default="default";var Hf=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,e=t.AuthParameters,t=t.ClientMetadata;this.validationData=n||{},this.authParameters=e||{},this.clientMetadata=t||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}();function Wf(e,t){null!=e&&this.fromString(e,t)}function $f(){return new Wf(null)}b="undefined"!=typeof navigator,pn=b&&"Microsoft Internet Explorer"==navigator.appName?(Wf.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;0<=--o;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},30):b&&"Netscape"!=navigator.appName?(Wf.prototype.am=function(e,t,n,r,i,o){for(;0<=--o;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(Wf.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;0<=--o;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},28);Wf.prototype.DB=pn,Wf.prototype.DM=(1<<pn)-1,Wf.prototype.DV=1<<pn;Wf.prototype.FV=Math.pow(2,52),Wf.prototype.F1=52-pn,Wf.prototype.F2=2*pn-52;for(var Jf="0123456789abcdefghijklmnopqrstuvwxyz",Yf=new Array,Zf="0".charCodeAt(0),Xf=0;Xf<=9;++Xf)Yf[Zf++]=Xf;for(Zf="a".charCodeAt(0),Xf=10;Xf<36;++Xf)Yf[Zf++]=Xf;for(Zf="A".charCodeAt(0),Xf=10;Xf<36;++Xf)Yf[Zf++]=Xf;function Qf(e){return Jf.charAt(e)}function ed(e){var t=$f();return t.fromInt(e),t}function td(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function nd(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}nd.prototype.convert=function(e){var t=$f();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Wf.ZERO)&&this.m.subTo(t,t),t},nd.prototype.revert=function(e){var t=$f();return e.copyTo(t),this.reduce(t),t},nd.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},nd.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},nd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Wf.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Wf.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Wf.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var s=(s=r,null==(s=Yf[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&Wf.ZERO.subTo(this,this)},Wf.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Wf.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Wf.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Wf.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},Wf.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},Wf.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Wf.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Wf.ZERO.subTo(t,t)},Wf.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Wf.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=$f());var o=$f(),s=this.s,a=e.s,e=this.DB-td(r[r.t-1]);0<e?(r.lShiftTo(e,o),i.lShiftTo(e,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var i=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),l=this.FV/i,p=(1<<this.F1)/i,f=1<<this.F2,d=n.t,h=d-u,g=null==t?$f():t;for(o.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),Wf.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--h;){var v=n[--d]==c?this.DM:Math.floor(n[d]*l+(n[d-1]+f)*p);if((n[d]+=o.am(0,v,n,h,0,u))<v)for(o.dlShiftTo(h,g),n.subTo(g,n);n[d]<--v;)n.subTo(g,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&Wf.ZERO.subTo(t,t)),n.t=u,n.clamp(),0<e&&n.rShiftTo(e,n),s<0&&Wf.ZERO.subTo(n,n)}}},Wf.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Wf.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Wf.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(i=!0,o=Qf(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),0<n&&(i=!0),i&&(o+=Qf(n));return i?o:"0"},Wf.prototype.negate=function(){var e=$f();return Wf.ZERO.subTo(this,e),e},Wf.prototype.abs=function(){return this.s<0?this.negate():this},Wf.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Wf.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+td(this[this.t-1]^this.s&this.DM)},Wf.prototype.mod=function(e){var t=$f();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Wf.ZERO)&&e.subTo(t,t),t},Wf.prototype.equals=function(e){return 0==this.compareTo(e)},Wf.prototype.add=function(e){var t=$f();return this.addTo(e,t),t},Wf.prototype.subtract=function(e){var t=$f();return this.subTo(e,t),t},Wf.prototype.multiply=function(e){var t=$f();return this.multiplyTo(e,t),t},Wf.prototype.divide=function(e){var t=$f();return this.divRemTo(e,t,null),t},Wf.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=ed(1),s=new nd(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=$f();for(s.sqrTo(a[1],p);u<=l;)a[u]=$f(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var f,d,h=e.t-1,g=!0,v=$f(),i=td(e[h])-1;0<=h;){for(c<=i?f=e[h]>>i-c&l:(f=(e[h]&(1<<i+1)-1)<<c-i,0<h&&(f|=e[h-1]>>this.DB+i-c)),u=r;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--h),g)a[f].copyTo(o),g=!1;else{for(;1<u;)s.sqrTo(o,v),s.sqrTo(v,o),u-=2;0<u?s.sqrTo(o,v):(d=o,o=v,v=d),s.mulTo(v,a[f],o)}for(;0<=h&&0==(e[h]&1<<i);)s.sqrTo(o,v),d=o,o=v,v=d,--i<0&&(i=this.DB-1,--h)}return t=s.revert(o),n(null,t),t},Wf.ZERO=ed(0),Wf.ONE=ed(1);function rd(e){return f.Buffer.from(w.lib.WordArray.random(e).toString(),"hex")}var id=function(){function e(e){this.N=new Wf("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Wf("2",16),this.k=new Wf(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=f.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},t.generateRandomSmallA=function(){return new Wf(rd(128).toString("hex"),16).mod(this.N)},t.generateRandomString=function(){return rd(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=rd(16).toString("hex");this.SaltToHashDevices=this.padHex(new Wf(e,16)),this.g.modPow(new Wf(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Wf.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Wf(this.UHexHash,16)},t.hash=function(e){e=e instanceof f.Buffer?w.lib.WordArray.create(e):e,e=_(e).toString();return new Array(64-e.length).join("0")+e},t.hexHash=function(e){return this.hash(f.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=w.lib.WordArray.create(f.Buffer.concat([this.infoBits,f.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof f.Buffer?w.lib.WordArray.create(e):e,t=t instanceof f.Buffer?w.lib.WordArray.create(t):t,t=A(e,t),t=A(n,t);return f.Buffer.from(t.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(Wf.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Wf.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new Wf(this.hexHash(this.padHex(r)+t),16);this.calculateS(t,n,function(e,t){e&&i(e,null);t=o.computehkdf(f.Buffer.from(o.padHex(t),"hex"),f.Buffer.from(o.padHex(o.UValue.toString(16)),"hex"));i(null,t)})},t.calculateS=function(n,r,i){var o=this;this.g.modPow(n,this.N,function(e,t){e&&i(e,null),r.subtract(o.k.multiply(t)).modPow(o.smallAValue.add(o.UValue.multiply(n)),o.N,function(e,t){e&&i(e,null),i(null,t.mod(o.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){e=e.toString(16);return e.length%2==1?e="0"+e:-1!=="89ABCDEFabcdef".indexOf(e[0])&&(e="00"+e),e},e}(),dn=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(f.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();var od=function(t){var e,n;function r(e){e=(void 0===e?{}:e).AccessToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r}(dn);var sd=function(t){var e,n;function r(e){e=(void 0===e?{}:e).IdToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r}(dn),ad=function(){function e(e){e=(void 0===e?{}:e).RefreshToken;this.token=e||""}return e.prototype.getToken=function(){return this.token},e}(),ud=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,e=t.AccessToken,t=t.ClockDrift;if(null==e||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=e,this.clockDrift=void 0===t?this.calculateClockDrift():t}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),cd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ld=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pd=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=ld[e.getUTCDay()],n=cd[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),fd=function(){function e(e){var t=void 0===e?{}:e,e=t.Name,t=t.Value;this.Name=e||"",this.Value=t||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),dd={},hd=function(){function e(){}return e.setItem=function(e,t){return dd[e]=t,dd[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(dd,e)?dd[e]:void 0},e.removeItem=function(e){return delete dd[e]},e.clear=function(){return dd={}},e}(),gd=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=hd}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),vd="undefined"!=typeof navigator?navigator.userAgent:"nodejs",md=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new gd).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,r){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,r.customChallenge(e)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(n,a){var o,u,c=this,l=new id(this.pool.getUserPoolId().split("_")[1]),p=new pd,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var i=r.ChallengeParameters;c.username=i.USER_ID_FOR_SRP,o=new Wf(i.SRP_B,16),u=new Wf(i.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),o,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(f.Buffer.concat([f.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),f.Buffer.from(c.username,"utf8"),f.Buffer.from(i.SECRET_BLOCK,"base64"),f.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=I.stringify(A(e,t)),o={};o.USERNAME=c.username,o.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,o.TIMESTAMP=n,o.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(o.DEVICE_KEY=c.deviceKey);n=function n(r,i){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(o.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,i)):i(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:o,Session:r.Session,ClientMetadata:s};c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},t.authenticateUserPlainUsernamePassword=function(e,n){var r,i=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new id(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(n,t,r){var i=this,e=n.ChallengeName,o=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,o);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,o);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,o);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,o);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:f.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:f.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:vd},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(r)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new id(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(o,n){var s=this,a=new id(this.deviceGroupKey),u=new pd,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&o.onFailure(e),r.SRP_A=t.toString(16);t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return o.onFailure(e);var i=r.ChallengeParameters,t=new Wf(i.SRP_B,16),e=new Wf(i.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return o.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(f.Buffer.concat([f.Buffer.from(s.deviceGroupKey,"utf8"),f.Buffer.from(s.deviceKey,"utf8"),f.Buffer.from(i.SECRET_BLOCK,"base64"),f.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=I.stringify(A(e,t)),t={};t.USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey;t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?o.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),o.onSuccess(s.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,n,t){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new id(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})},t.sendMFACode=function(e,r,t,n){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;t=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===t&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);n={ChallengeName:t,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(i.signInUserSession);var t=new id(i.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:f.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:f.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:vd},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(r)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return o(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var i={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new fd(i);n.push(i)}return o(null,n)})},t.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(){var n=this;return new Promise(function(e){var t=n.signInUserSession.getRefreshToken();t&&t.getToken()?n.refreshSession(t,e):e()})},t.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(e))this.fetchUserData().then(function(e){return n.refreshSessionIfPossible().then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(r))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){e=(e||{}).bypassCache;return void 0!==e&&e},t.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",i=t+".refreshToken",t=t+".clockDrift";if(this.storage.getItem(n)){n=new sd({IdToken:this.storage.getItem(n)}),r=new od({AccessToken:this.storage.getItem(r)}),i=new ad({RefreshToken:this.storage.getItem(i)}),t=parseInt(this.storage.getItem(t),0)||0,t=new ud({IdToken:n,AccessToken:r,RefreshToken:i,ClockDrift:t});if(t.isValid())return this.signInUserSession=t,e(null,this.signInUserSession);if(!i.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(i,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(n,r,e){var i=this,t={};t.REFRESH_TOKEN=n.getToken();var o="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=o+".LastAuthUser";this.storage.getItem(s)&&(this.username=this.storage.getItem(s),o=o+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(o),t.DEVICE_KEY=this.deviceKey);e={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return"NotAuthorizedException"===e.code&&i.clearCachedUser(),r(e,null);if(t){t=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),i.signInUserSession=i.getCognitoUserSession(t),i.cacheTokens(),r(null,i.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",e=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(e,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(e,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(e))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(e)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",e=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(e)},t.getCognitoUserSession=function(e){var t=new sd(e),n=new od(e),e=new ad(e);return new ud({IdToken:t,AccessToken:n,RefreshToken:e})},t.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},t.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},t.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},t.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(n,r){var i=this,e={};e.USERNAME=this.username,e.ANSWER=n;e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(i.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;t={};t.USERNAME=r.username;t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session};r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}();function yd(){}function bd(e){var r="function"==typeof Map?new Map:void 0;return(bd=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return Sd(e,arguments,Cd(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wd(n,e)})(e)}function Sd(e,t,n){return(Sd=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&wd(r,n.prototype),r}).apply(null,arguments)}function wd(e,t){return(wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cd(e){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}yd.prototype.userAgent="aws-amplify/0.1.x js";function _d(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function Ed(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",xd)}var Ad=function(i){var e,t;function n(e,t,n,r){e=i.call(this,e)||this;return e.code=t,e.name=n,e.statusCode=r,e}return t=i,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n}(bd(Error)),Id=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";n=(n||{}).credentials;this.fetchOptions=n?{credentials:n}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var i=this;return new Promise(function(n,r){i.request(e,t,function(e,t){e?r(new Ad(e.message,e.code,e.name,e.statusCode)):n(t)})})},t.request=function(e,t,r){var i,e={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":yd.prototype.userAgent},t=Object.assign({},this.fetchOptions,{headers:e,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return r(e)}).catch(function(t){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return r(e)}return r(t)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],n={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return r(n)}catch(e){return r(t)}})},e}(),Pd=function(){function e(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,i=t.endpoint,o=t.fetchOptions,s=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");t=n.split("_")[0];this.userPoolId=n,this.clientId=r,this.client=new Id(t,i,o),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new gd).getStorage()}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(n,e,t,r,i,o){var s=this,o={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:o};this.getUserContextData(n)&&(o.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",o,function(e,t){if(e)return i(e,null);e={Username:n,Pool:s,Storage:s.storage},t={user:new md(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,t)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(e);if(e){e={Username:e,Pool:this,Storage:this.storage};return new md(e)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){e=t.getData(e,this.userPoolId,this.clientId);if(e)return{EncodedData:e}}return{}}},e}(),Od=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),O.set(e,t,n),O.get(e)},t.getItem=function(e){return O.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),O.remove(e,t)},t.clear=function(){for(var e=O.get(),t=0;t<e.length;++t)O.remove(e[t]);return{}},e}(),Td=function(){return(Td=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},kd=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Ld=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Rd=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},xd="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Nd=new E.ConsoleLogger("OAuth"),Md=(Ud.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},Ud.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=Vf.Cognito);var s=this._generateState(32),a=o?s+"-"+E.urlSafeEncode(o):s;o=a,window.sessionStorage.setItem("oauth_state",o);s=this._generateRandom(128);o=s,window.sessionStorage.setItem("ouath_pkce_key",o);o=this._generateChallenge(s),s=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Td(Td({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:s,state:a},"code"===e?{code_challenge:o}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=Rd(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&");Nd.debug("Redirecting to "+e),this._urlOpener(e,n)},Ud.prototype._handleCodeFlow=function(a){return kd(this,void 0,void 0,function(){var n,r,i,o,s;return Ld(this,function(e){switch(e.label){case 0:return(n=(h.parse(a).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Rd(t,2),t=n[0],n=n[1];return Td(Td({},e),((e={})[t]=n,e))},{code:void 0}).code)?(i="https://"+this._config.domain+"/oauth2/token",Ed("codeFlow",{},"Retrieving tokens from "+i),r=Kf(this._config)?this._cognitoClientId:this._config.clientID,o=Kf(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),r=Td({grant_type:"authorization_code",code:n,client_id:r,redirect_uri:o},(s=t)?{code_verifier:s}:{}),Nd.debug("Calling token endpoint: "+i+" with",r),o=Object.entries(r).map(function(e){var t=Rd(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o})]):[2];case 1:return[4,e.sent().json()];case 2:if(s=e.sent(),r=s.access_token,i=s.refresh_token,o=s.id_token,s=s.error)throw new Error(s);return[2,{accessToken:r,refreshToken:i,idToken:o}]}var t})})},Ud.prototype._handleImplicitFlow=function(r){return kd(this,void 0,void 0,function(){var t,n;return Ld(this,function(e){return n=(h.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Rd(t,2),t=n[0],n=n[1];return Td(Td({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,Ed("implicitFlow",{},"Got tokens from "+r),Nd.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},Ud.prototype.handleAuthResponse=function(s){return kd(this,void 0,void 0,function(){var t,n,r,i,o;return Ld(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),o=s?Td(Td({},(h.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Rd(t,2),t=n[0],n=n[1];return e[t]=n,e},{})),(h.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Rd(t,2),t=n[0],n=n[1];return e[t]=n,e},{})):{},t=o.error,n=o.error_description,t)throw new Error(n);return(o=this._validateState(o),Nd.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType)?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Td.apply(void 0,[Td.apply(void 0,r.concat([e.sent()])),{state:o}])];case 2:return i=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Td.apply(void 0,[Td.apply(void 0,i.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw o=e.sent(),Nd.error("Error handling auth response.",o),o;case 6:return[2]}})})},Ud.prototype._validateState=function(e){if(e){var t,t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},Ud.prototype.signOut=function(){return kd(this,void 0,void 0,function(){var t,n,r;return Ld(this,function(e){return t="https://"+this._config.domain+"/logout?",n=Kf(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Kf(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){e=Rd(e,2);return e[0]+"="+e[1]}).join("&"),Ed("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),Nd.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Ud.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Ud.prototype._generateChallenge=function(e){return this._base64URL(_(e))},Ud.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Ud.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Ud.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},Ud);function Ud(e){var t=e.config,n=e.cognitoClientId,e=e.scopes,e=void 0===e?[]:e;if(this._urlOpener=t.urlOpener||_d,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(hr=Sb=Sb||{}).DEFAULT_MSG="Authentication Error",hr.EMPTY_USERNAME="Username cannot be empty",hr.INVALID_USERNAME="The username should either be a string or one of the sign in types",hr.EMPTY_PASSWORD="Password cannot be empty",hr.EMPTY_CODE="Confirmation code cannot be empty",hr.SIGN_UP_ERROR="Error creating account",hr.NO_MFA="No valid MFA method provided",hr.INVALID_MFA="Invalid MFA type",hr.EMPTY_CHALLENGE="Challenge response cannot be empty",hr.NO_USER_SESSION="Failed to get the session because the user is empty";var Dd,Fd,nr=(Dd=function(e,t){return(Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jd=new E.ConsoleLogger("AuthError"),qd=(Fd=Error,nr(Bd,Fd),Bd);function Bd(e){var t=this,n=Hd[e],e=n.message,n=n.log;return(t=Fd.call(this,e)||this).constructor=Bd,Object.setPrototypeOf(t,Bd.prototype),t.name="AuthError",t.log=n||e,jd.error(t.log),t}var Vd,zd=(nr(Gd,Vd=qd),Gd);function Gd(e){e=Vd.call(this,e)||this;return e.constructor=Gd,Object.setPrototypeOf(e,Gd.prototype),e.name="NoUserPoolError",e}function Kd(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Qd)}var Hd={noConfig:{message:Sb.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Sb.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:Sb.EMPTY_USERNAME},invalidUsername:{message:Sb.INVALID_USERNAME},emptyPassword:{message:Sb.EMPTY_PASSWORD},emptyCode:{message:Sb.EMPTY_CODE},signUpError:{message:Sb.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Sb.NO_MFA},invalidMFA:{message:Sb.INVALID_MFA},emptyChallengeResponse:{message:Sb.EMPTY_CHALLENGE},noUserSession:{message:Sb.NO_USER_SESSION},default:{message:Sb.DEFAULT_MSG}},Wd=function(){return(Wd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$d=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Jd=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Yd=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Zd=new E.ConsoleLogger("AuthClass"),Xd="aws.cognito.signin.user.admin",Qd="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function eh(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=E.Credentials,this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),E.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var th=new(eh.prototype.getModuleName=function(){return"Auth"},eh.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Zd.debug("configure Auth");var n=Object.assign({},this._config,E.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,p=r.refreshHandlers,f=r.identityPoolRegion,n=r.clientMetadata,r=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Zd.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Od(s):e.ssr?new E.UniversalStorage:(new E.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:o,endpoint:r}).Storage=this._storage,this.userPool=new Pd(r)),this.Credentials.configure({mandatorySignIn:l,region:f||u,userPoolId:i,identityPoolId:c,refreshHandlers:p,storage:this._storage});var d,a=a?Kf(this._config.oauth)?a:a.awsCognito:void 0;return a&&(a=Object.assign({cognitoClientId:o,UserPoolId:i,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new Md({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),d={},function(e){if(E.JS.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!E.JS.browserOrNode().isNode)throw new Error("Not supported")}(function(e){e=e.url;d[e]||(d[e]=!0,t._handleAuthResponse(e))})),Kd("configured",null,"The Auth category has been configured successfully"),this._config},eh.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(zf.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){e={Name:e,Value:p[e]};a.push(e)}),u=e.validationData||null}return o?s?(Zd.debug("signUp attrs:",a),Zd.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(o,s,a,u,function(e,t){e?(Kd("signUp_failure",e,o+" failed to signup"),r(e)):(Kd("signUp",t,o+" has signed up successfully"),n(t))},i)})):this.rejectAuthError(zf.EmptyPassword):this.rejectAuthError(zf.EmptyUsername)},eh.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(zf.EmptyUsername);if(!t)return this.rejectAuthError(zf.EmptyCode);var i,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,r){o.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},i)})},eh.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(zf.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(n,r){i.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},eh.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(zf.InvalidUsername);void 0!==t&&Zd.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(zf.EmptyUsername);n=new Hf({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(n):this.signInWithoutPassword(n)},eh.prototype.authCallbacks=function(i,o,s){var e=this,a=this;return{onSuccess:function(r){return $d(e,void 0,void 0,function(){var t,n;return Jd(this,function(e){switch(e.label){case 0:Zd.debug(r),delete i.challengeName,delete i.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Zd.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Zd.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),a.user=n,Kd("signIn",n,"A user "+i.getUsername()+" has been signed in"),o(n),[3,8];case 7:return n=e.sent(),Zd.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Zd.debug("signIn failure",e),Kd("signIn_failure",e,i.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){Zd.debug("signIn custom challenge answer required"),i.challengeName="CUSTOM_CHALLENGE",i.challengeParam=e,o(i)},mfaRequired:function(e,t){Zd.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Zd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)},newPasswordRequired:function(e,t){Zd.debug("signIn new password"),i.challengeName="NEW_PASSWORD_REQUIRED",i.challengeParam={userAttributes:e,requiredAttributes:t},o(i)},totpRequired:function(e,t){Zd.debug("signIn totpRequired"),i.challengeName=e,i.challengeParam=t,o(i)},selectMFAType:function(e,t){Zd.debug("signIn selectMFAType",e),i.challengeName=e,i.challengeParam=t,o(i)}}},eh.prototype.signInWithPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return new Promise(function(e,t){i.authenticateUser(n,r.authCallbacks(i,e,t))})},eh.prototype.signInWithoutPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){i.initiateAuth(n,r.authCallbacks(i,e,t))})},eh.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Zd.debug("get MFA Options failed",e),void r(e)):(Zd.debug("get MFA options success",t),void n(t))})})},eh.prototype.getPreferredMFA=function(t,i){var o=this;return new Promise(function(n,r){var e=!!i&&i.bypassCache;t.getUserData(function(e,t){if(e)return Zd.debug("getting preferred mfa failed",e),void r(e);t=o._getMfaTypeFromUserData(t);t?n(t):r("invalid MFA Type")},{bypassCache:e})})},eh.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Zd.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},eh.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(Zd.debug("getting user data failed",e),r(e)):n(t)},t)})},eh.prototype.setPreferredMFA=function(o,s){return $d(this,void 0,void 0,function(){var t,n,r,i;return Jd(this,function(e){switch(e.label){case 0:return[4,this._getUserData(o,{bypassCache:!0})];case 1:switch(i=e.sent(),n=t=null,s){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return t={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(i=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===i)t={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==i)return[2,this.rejectAuthError(zf.InvalidMFA)];n={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?t={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(n={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Zd.debug("no validmfa method provided"),[2,this.rejectAuthError(zf.NoMFA)];case 7:return[2,new Promise(function(r,i){o.setUserMfaPreference(t,n,function(e,n){return e?(Zd.debug("Set user mfa preference error",e),i(e)):(Zd.debug("Set user mfa success",n),Zd.debug("Caching the latest user data into local"),void o.getUserData(function(e,t){return e?(Zd.debug("getting user data failed",e),i(e)):r(n)},{bypassCache:!0}))})})]}})})},eh.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Zd.debug("disable mfa failed",e),void r(e)):(Zd.debug("disable mfa succeed",t),void n(t))})})},eh.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Zd.debug("enable mfa failed",e),void r(e)):(Zd.debug("enable mfa succeed",t),void n(t))})})},eh.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Zd.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Zd.debug("associateSoftwareToken sucess",e),t(e)}})})},eh.prototype.verifyTotpToken=function(e,r){return Zd.debug("verfication totp token",e,r),new Promise(function(t,n){e.verifySoftwareToken(r,"My TOTP device",{onFailure:function(e){Zd.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Zd.debug("verifyTotpToken success",e),t(e)}})})},eh.prototype.confirmSignIn=function(i,e,n,o){var s=this;if(void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(zf.EmptyCode);var a=this;return new Promise(function(r,t){i.sendMFACode(e,{onSuccess:function(n){return $d(s,void 0,void 0,function(){var t;return Jd(this,function(e){switch(e.label){case 0:Zd.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Zd.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Zd.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Kd("signIn",i,i+" has signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Zd.debug("confirm signIn failure",e),t(e)}},n,o)})},eh.prototype.completeNewPassword=function(i,e,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(zf.EmptyPassword);var a=this;return new Promise(function(r,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return $d(s,void 0,void 0,function(){var t;return Jd(this,function(e){switch(e.label){case 0:Zd.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Zd.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Zd.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Kd("signIn",i,i+" has signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Zd.debug("completeNewPassword failure",e),Kd("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Zd.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,r(i)},mfaSetup:function(e,t){Zd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)},totpRequired:function(e,t){Zd.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)}},o)})},eh.prototype.sendCustomChallengeAnswer=function(n,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,o.authCallbacks(n,e,t),i)}):this.rejectAuthError(zf.EmptyChallengeResponse):this.rejectNoUserPool()},eh.prototype.updateUserAttributes=function(o,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,i){e.userSession(o).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}o.updateAttributes(u,function(e,t){return e?i(e):r(t)},a)})})},eh.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},eh.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},eh.prototype.currentUserPoolUser=function(o){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return $d(e,void 0,void 0,function(){var a,t=this;return Jd(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Zd.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Zd.debug("OAuth signIn in progress timeout"),E.Hub.remove("auth",r),t()},1e4);function r(e){e=e.payload.event;"cognitoHostedUI"!==e&&"cognitoHostedUI_failure"!==e||(Zd.debug("OAuth signIn resolved: "+e),clearTimeout(n),E.Hub.remove("auth",r),t())}E.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(a.getSession(function(r,i){return $d(t,void 0,void 0,function(){var t,n,s=this;return Jd(this,function(e){switch(e.label){case 0:return r?(Zd.debug("Failed to get the user session",r),c(r),[2]):(t=!!o&&o.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return(n=i.getAccessToken().decodePayload().scope,(void 0===n?"":n).split(" ").includes(Xd))?(a.getUserData(function(e,t){if(e)return Zd.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],i=0;i<t.UserAttributes.length;i++){var o={Name:t.UserAttributes[i].Name,Value:t.UserAttributes[i].Value},o=new fd(o);r.push(o)}e=s.attributesToObject(r);return Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t}),[2]):(Zd.debug("Unable to get the user data because the "+Xd+" is not in the scopes of the access token"),[2,u(a)])}})})}),[2]):(Zd.debug("Failed to get user from user pool"),c("No current user"),[2])}})})}).catch(function(e){return Zd.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},eh.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},eh.prototype.currentAuthenticatedUser=function(o){return $d(this,void 0,void 0,function(){var t,n,r,i;return Jd(this,function(e){switch(e.label){case 0:Zd.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw i=e.sent(),Zd.debug("Failed to sync cache info into memory",i),i;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Wd(Wd({},n.user),{token:n.token}))}catch(e){Zd.debug("cannot load federated user from auth storage")}return t?(this.user=t,Zd.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Zd.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(o)];case 7:return r=e.sent(),[3,9];case 8:throw"No userPool"===(i=e.sent())&&Zd.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Zd.debug("The user is not authenticated by the error",i),"not authenticated";case 9:return this.user=r,[2,this.user]}})})},eh.prototype.currentSession=function(){var r=this;return Zd.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Zd.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Zd.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},eh.prototype.userSession=function(i){return i?new Promise(function(n,r){Zd.debug("Getting the session from this user:",i),i.getSession(function(e,t){e?(Zd.debug("Failed to get the session from user",i),r(e)):(Zd.debug("Succeed to get the user session",t),n(t))})}):(Zd.debug("the user is null"),this.rejectAuthError(zf.NoUserSession))},eh.prototype.currentUserCredentials=function(){return $d(this,void 0,void 0,function(){var t,n,r=this;return Jd(this,function(e){switch(e.label){case 0:Zd.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Zd.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Zd.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,this.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Zd.debug("getting session success",e),r.Credentials.set(e,"session")}).catch(function(e){return Zd.debug("getting session failed",e),r.Credentials.set(null,"guest")})]}})})},eh.prototype.currentCredentials=function(){return Zd.debug("getting current credentials"),this.Credentials.get()},eh.prototype.verifyUserAttribute=function(n,r,i){return void 0===i&&(i=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)},clientMetadata:i})})},eh.prototype.verifyUserAttributeSubmit=function(e,r,i){return i?new Promise(function(t,n){e.verifyAttribute(r,i,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(zf.EmptyCode)},eh.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},eh.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},eh.prototype.cognitoIdentitySignOut=function(s,a){return $d(this,void 0,void 0,function(){var t,i,o=this;return Jd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Zd.debug("Failed to sync cache info into memory",t),t;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(s&&s.global)Zd.debug("user global sign out",a),a.getSession(function(e,t){return e?(Zd.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(Zd.debug("global sign out success"),!i)return n();o.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Zd.debug("global sign out failed",e),r(e)}})});else{if(Zd.debug("user sign out",a),a.signOut(),!i)return n();o.oAuthSignOutRedirect(n,r)}})]}})})},eh.prototype.oAuthSignOutRedirect=function(e,t){E.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},eh.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},eh.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},eh.prototype.signOut=function(n){return $d(this,void 0,void 0,function(){var t;return Jd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Zd.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Zd.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Zd.debug("no Congito User pool"),e.label=8;case 8:return Kd("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},eh.prototype.cleanCachedItems=function(){return $d(this,void 0,void 0,function(){return Jd(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},eh.prototype.changePassword=function(t,i,o,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(i,o,function(e,t){return e?(Zd.debug("change password failure",e),r(e)):n(t)},s)})})},eh.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(zf.EmptyUsername);var i=this.createCognitoUser(r);return new Promise(function(t,n){i.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Zd.debug("forgot password failure",e),Kd("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Kd("forgotPassword",i,r+" has initiated forgot password flow"),t(e)}},e)})},eh.prototype.forgotPasswordSubmit=function(n,r,i,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(zf.EmptyUsername);if(!r)return this.rejectAuthError(zf.EmptyCode);if(!i)return this.rejectAuthError(zf.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,i,{onSuccess:function(){Kd("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Kd("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},o)})},eh.prototype.currentUserInfo=function(){return $d(this,void 0,void 0,function(){var t,n,r,i,o;return Jd(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Zd.debug(e)})];case 1:if(!(o=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(o)];case 3:r=e.sent(),i=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),Zd.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:o.getUsername(),attributes:i}];case 8:return i=e.sent(),Zd.debug("currentUserInfo error",i),[2,{}];case 9:return"federated"===t?[2,(o=this.user)||{}]:[2]}})})},eh.prototype.federatedSignIn=function(l,p,f){return $d(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Jd(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Gf(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:Vf.Cognito},i=Gf(r)?r.provider:r.customProvider,Gf(r),a=r.customState,this._config.userPoolId&&(s=Kf(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=Kf(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,i,a)),[3,4]):[3,1];case 1:i=l;try{(o=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Zd.warn("There is already a signed in user: "+o+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:i,token:s,identity_id:a,user:f,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return c=e.sent(),Kd("signIn",c,"A user "+c.username+" has been signed in"),Zd.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},eh.prototype._handleAuthResponse=function(c){return $d(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return Jd(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Zd.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Kd("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(E.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(h.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){e=Yd(e,1)[0];return"code"===e||"error"===e}),r=!!(h.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){e=Yd(e,1)[0];return"access_token"===e||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=e.sent(),s=i.accessToken,u=i.idToken,o=i.refreshToken,a=i.state,i=new ud({IdToken:new sd({IdToken:u}),RefreshToken:new ad({RefreshToken:o}),AccessToken:new od({AccessToken:s})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(i,"session")]:[3,5];case 4:u=e.sent(),Zd.debug("AWS credentials",u),e.label=5;case 5:return o=/-/.test(a),(s=this.createCognitoUser(i.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(i),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Kd("signIn",s,"A user "+s.getUsername()+" has been signed in"),Kd("cognitoHostedUI",s,"A user "+s.getUsername()+" has been signed in via Cognito Hosted UI"),o&&(a=a.split("-").splice(1).join("-"),Kd("customOAuthState",E.urlSafeDecode(a),"State for user "+s.getUsername())),[2,u];case 6:return u=e.sent(),Zd.debug("Error in cognito hosted auth response",u),Kd("signIn_failure",u,"The OAuth response flow failed"),Kd("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),Kd("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},eh.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},eh.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value}),t},eh.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;e=this._config.authenticationFlowType,t=new md(t);return e&&t.setAuthenticationFlowType(e),t},eh.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},eh.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?zf.NoConfig:zf.MissingAuthConfig},eh.prototype.rejectAuthError=function(e){return Promise.reject(new qd(e))},eh.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new zd(e))},eh)(null);E.Amplify.register(th);var nh=function(e,t){return(nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function rh(e,t){function n(){this.constructor=e}nh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ih=function(){return(ih=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function oh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function sh(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ah,uh=(F(ch,ah=u.Writable),ch.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},ch);function ch(e,t){t=ah.call(this,t)||this;return t.hash=e,t}function lh(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length}function ph(e){return wh(e)?e.replace(/fips-|-fips/,""):e}function fh(e){var t=e.match(yh);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function dh(e){var t=e.baseHostname;return yh.test(t)?"string"==typeof e.bucketName?Eh(e):{bucketEndpoint:!0,hostname:_h(e)}:{bucketEndpoint:!1,hostname:t}}var hh=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,gh=/(\d+\.){3}\d+/,vh=/\.\./,mh=/\./,yh=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,bh=/^s3(-external-1)?\.amazonaws\.com$/,Sh="amazonaws.com",wh=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Ch=function(e,t){return e===t||ph(e)===t||e===ph(t)},_h=function(e){var t=W((p=e.baseHostname,bh.test(p)?[p.replace("."+Sh,""),Sh]:fh(p)),2),n=t[0],r=t[1],i=e.pathStyleEndpoint,o=e.dualstackEndpoint,s=e.accelerateEndpoint,a=e.tlsCompatible,u=void 0===a||a,c=e.useArnRegion,l=e.bucketName,p=e.clientPartition,t=void 0===p?"aws":p,a=e.clientSigningRegion,p=void 0===a?n:a;if(i)throw new Error("Path-style S3 endpoint is not supported when bucket is an Access Point ARN");if(s)throw new Error("Accelerate is not supported when bucket is an Access Point ARN");if(!u)throw new Error("Access Point can only be used with https");e=l.service,a=l.partition,i=l.accountId,s=l.region,l=l.resource;!function(e){if("s3"!==e)throw new Error("Expect 's3' in access point ARN service component")}(e),function(e,t){if(""===e)throw new Error("Access point ARN region is empty");if(!t.useArnRegion&&!Ch(e,t.clientRegion)&&!Ch(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&wh(e))throw new Error("Access point endpoint does not support FIPS region")}(s,{useArnRegion:c,clientRegion:n,clientSigningRegion:p}),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(a,{clientPartition:t}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(i);l=function(e){if(0!==e.indexOf("accesspoint:")&&0!==e.indexOf("accesspoint/"))throw new Error("Access point ARN resource should begin with 'accesspoint/'");e=e.split(e["accesspoint".length]);if(2!==e.length||""===e[1])throw new Error("Access Point ARN should have one resource accesspoint/{accesspointname}");return e[1]}(l);return function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&mh.test(e))throw new Error("Invalid DNS label "+e)}(l+"-"+i,{tlsCompatible:u}),l+"-"+i+".s3-accesspoint"+(o?".dualstack":"")+"."+(c?s:n)+"."+r},Eh=function(e){var t=e.accelerateEndpoint,n=void 0!==t&&t,r=e.baseHostname,i=e.bucketName,o=e.dualstackEndpoint,s=void 0!==o&&o,a=e.pathStyleEndpoint,t=void 0!==a&&a,o=e.tlsCompatible,a=void 0===o||o,o=W((e=r,bh.test(e)?["us-east-1",Sh]:fh(e)),2),e=o[0],o=o[1];return t||(t=i,!hh.test(t)||gh.test(t)||vh.test(t))||a&&mh.test(i)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+e+"."+o:r}:(n?r="s3-accelerate"+(s?".dualstack":"")+"."+o:s&&(r="s3.dualstack."+e+"."+o),{bucketEndpoint:!0,hostname:i+"."+r})};function Ah(g){var e=this;return function(d,h){return function(f){return G(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p;return K(this,function(e){switch(e.label){case 0:return(c=f.input.Bucket,t=g.bucketEndpoint,n=f.request,ca.isInstance(n))?g.bucketEndpoint?(n.hostname=c,[3,6]):[3,1]:[3,7];case 1:return lh(c)?(r=function(e){e=e.split(":");if(e.length<6||"arn"!==e[0])throw new Error("Malformed ARN");e=W(e);return{partition:e[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(c),o=ph,[4,g.region()]):[3,5];case 2:return i=o.apply(void 0,[e.sent()]),[4,g.regionInfoProvider(i)];case 3:return u=e.sent()||{},s=u.partition,a=u.signingRegion,[4,g.useArnRegion()];case 4:return u=e.sent(),p=dh({bucketName:r,baseHostname:n.hostname,accelerateEndpoint:g.useAccelerateEndpoint,dualstackEndpoint:g.useDualstackEndpoint,pathStyleEndpoint:g.forcePathStyle,tlsCompatible:"https:"===n.protocol,useArnRegion:u,clientPartition:s,clientSigningRegion:a}),l=p.hostname,p=p.bucketEndpoint,u&&i!==r.region&&(h.signing_region=r.region),n.hostname=l,t=p,[3,6];case 5:c=dh({bucketName:c,baseHostname:n.hostname,accelerateEndpoint:g.useAccelerateEndpoint,dualstackEndpoint:g.useDualstackEndpoint,pathStyleEndpoint:g.forcePathStyle,tlsCompatible:"https:"===n.protocol}),l=c.hostname,p=c.bucketEndpoint,n.hostname=l,t=p,e.label=6;case 6:t&&(n.path=n.path.replace(/^(\/)?[^\/]+/,""),""===n.path&&(n.path="/")),e.label=7;case 7:return[2,d(j(j({},f),{request:n}))]}})})}}}function Ih(t){return{applyToStack:function(e){e.addRelativeTo(Ah(t),Ph)}}}var Ph={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"};var Oh="AWS_S3_USE_ARN_REGION",Th="s3_use_arn_region",Xn={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Oh)){if("true"===e[Oh])return!0;if("false"===e[Oh])return!1;throw new Error("Cannot load env "+Oh+'. Expected "true" or "false", got '+e[Oh]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Th)){if("true"===e[Th])return!0;if("false"===e[Th])return!1;throw new Error("Cannot load shared config entry "+Th+'. Expected "true" or "false", got '+e[Th]+".")}},default:!1},kh="s3.{region}.amazonaws.com",Lh=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Rh=new Set(["cn-north-1","cn-northwest-1"]),xh=new Set(["us-iso-east-1"]),Nh=new Set(["us-isob-east-1"]),Mh=new Set(["us-gov-east-1","us-gov-west-1"]),Uh=ih(ih({},{apiVersion:"2006-03-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Lh.has(e)&&(n={hostname:kh.replace("{region}",e),partition:"aws"}),Rh.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),xh.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Nh.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Mh.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:kh.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1}),{runtime:"node",base64Decoder:Cu,base64Encoder:_u,bodyLengthChecker:Eu,credentialDefaultProvider:Qs,defaultUserAgent:Au("@aws-sdk/client-s3","1.0.0-gamma.8"),eventStreamSerdeProvider:function(e){return new qf(e)},maxAttempts:tr(C),md5:S.bind(null,"md5"),region:tr(Wn,lr),requestHandler:new Me,sha256:S.bind(null,"sha256"),streamCollector:Re,streamHasher:function(o,s){return new Promise(function(e,t){var n,r,i;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new o,i=new uh(r),n.pipe(i),n.on("error",function(e){i.end(),t(e)}),i.on("error",t),i.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},urlParser:wu,useArnRegion:tr(Xn),utf8Decoder:Iu,utf8Encoder:Pu});function Dh(t){return{applyToStack:function(e){e.add(function(i){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){return t=n.request,ca.isInstance(t)&&t.body&&"node"===i.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(t),Fh)}}}var Fh={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"};function jh(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(r){return function(n){return G(e,void 0,void 0,function(){var t;return K(this,function(e){if("string"==typeof(t=n.input.Bucket)&&!lh(t)&&0<=t.indexOf("/"))throw(t=new Error("Bucket name shouldn't contain '/', received '"+t+"'")).name="InvalidBucketName",t;return[2,r(j({},n))]})})}}}(),Cg)}}}var qh,Bh,Vh,zh,Gh,Kh,Hh,Wh,$h,Jh,Yh,Zh,Xh,Qh,eg,tg,ng,rg,ig,og,sg,ag,ug,cg,lg,pg,fg,dg,hg,gg,vg,mg,yg,bg,Sg,wg,Cg={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},_g=(rh(Eg,qh=ct),Eg.prototype.destroy=function(){qh.prototype.destroy.call(this)},Eg);function Eg(e){var t,n,r=this,i=ih(ih({},Uh),e),o=Bo(i),s=_c(qo(o)),a=wa(s),a=(i=void 0!==(e=(t=a).bucketEndpoint)&&e,o=t.forcePathStyle,s=void 0!==o&&o,e=void 0!==(a=t.useAccelerateEndpoint)&&a,a=void 0!==(o=t.useDualstackEndpoint)&&o,n=void 0!==(o=t.useArnRegion)&&o,j(j({},t),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:e,useDualstackEndpoint:a,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}})),a=j(j({},a=a),{eventStreamMarshaller:a.eventStreamSerdeProvider(a)});return(r=qh.call(this,a)||this).config=a,r.middlewareStack.use(Pc(r.config)),r.middlewareStack.use(oa(r.config)),r.middlewareStack.use(Tc(r.config)),r.middlewareStack.use(Uu(r.config)),r.middlewareStack.use(jh(r.config)),r.middlewareStack.use(Dh(r.config)),r.middlewareStack.use(Fu(r.config)),r.middlewareStack.use(ju(r.config)),r}(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"AbortIncompleteMultipartUpload")},(Jn=Bh=Bh||{}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"AbortMultipartUploadOutput")},(br=Vh=Vh||{}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"AbortMultipartUploadRequest")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"AccelerateConfiguration")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"AccessControlPolicy")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"AccessControlTranslation")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"AnalyticsAndOperator")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"AnalyticsConfiguration")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"AnalyticsExportDestination")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"AnalyticsFilter")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"AnalyticsS3BucketDestination")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"Bucket")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"BucketAlreadyExists")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"BucketAlreadyOwnedByYou")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"BucketLifecycleConfiguration")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"BucketLoggingStatus")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"CommonPrefix")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"CompletedMultipartUpload")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"CompletedPart")},(p=zh=zh||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},p.isa=function(e){return Fc(e,"CompleteMultipartUploadOutput")},(dr=Gh=Gh||{}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"CompleteMultipartUploadRequest")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"Condition")},(at=Kh=Kh||{}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"ContinuationEvent")},(fn={}).filterSensitiveLog=function(e){return ih(ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc})},fn.isa=function(e){return Fc(e,"CopyObjectOutput")},(jt={}).filterSensitiveLog=function(e){return ih(ih(ih(ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc}),e.SSECustomerKey&&{SSECustomerKey:Xc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Xc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc})},jt.isa=function(e){return Fc(e,"CopyObjectRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"CopyObjectResult")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"CopyPartResult")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"CORSConfiguration")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"CORSRule")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"CreateBucketConfiguration")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"CreateBucketOutput")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"CreateBucketRequest")},(cr=Hh=Hh||{}).filterSensitiveLog=function(e){return ih(ih(ih({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},cr.isa=function(e){return Fc(e,"CreateMultipartUploadOutput")},(Jn=Wh=Wh||{}).filterSensitiveLog=function(e){return ih(ih(ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc}),e.SSECustomerKey&&{SSECustomerKey:Xc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc})},Jn.isa=function(e){return Fc(e,"CreateMultipartUploadRequest")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"CSVInput")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"CSVOutput")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"DefaultRetention")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"Delete")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"DeleteBucketAnalyticsConfigurationRequest")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"DeleteBucketCorsRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"DeleteBucketEncryptionRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"DeleteBucketInventoryConfigurationRequest")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"DeleteBucketLifecycleRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"DeleteBucketMetricsConfigurationRequest")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"DeleteBucketPolicyRequest")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"DeleteBucketReplicationRequest")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"DeleteBucketRequest")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"DeleteBucketTaggingRequest")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"DeleteBucketWebsiteRequest")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"DeletedObject")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"DeleteMarkerEntry")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"DeleteMarkerReplication")},(dr=$h=$h||{}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"DeleteObjectOutput")},(ln=Jh=Jh||{}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"DeleteObjectRequest")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"DeleteObjectsOutput")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"DeleteObjectsRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"DeleteObjectTaggingOutput")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"DeleteObjectTaggingRequest")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"DeletePublicAccessBlockRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"Destination")},(hr=Yh=Yh||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.KMSKeyId&&{KMSKeyId:Xc})},hr.isa=function(e){return Fc(e,"Encryption")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"EncryptionConfiguration")},(Sb=Zh=Zh||{}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"EndEvent")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"Error")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"ErrorDocument")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"ExistingObjectReplication")},(br={}).IGNORE="IGNORE",br.NONE="NONE",br.USE="USE",(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"FilterRule")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"GetBucketAccelerateConfigurationOutput")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"GetBucketAccelerateConfigurationRequest")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"GetBucketAclOutput")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"GetBucketAclRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"GetBucketAnalyticsConfigurationOutput")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"GetBucketAnalyticsConfigurationRequest")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"GetBucketCorsOutput")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"GetBucketCorsRequest")},(hr={}).filterSensitiveLog=function(e){return ih(ih({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:vg.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},hr.isa=function(e){return Fc(e,"GetBucketEncryptionOutput")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"GetBucketEncryptionRequest")},(Sb={}).filterSensitiveLog=function(e){return ih(ih({},e),e.InventoryConfiguration&&{InventoryConfiguration:eg.filterSensitiveLog(e.InventoryConfiguration)})},Sb.isa=function(e){return Fc(e,"GetBucketInventoryConfigurationOutput")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"GetBucketInventoryConfigurationRequest")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"GetBucketLifecycleConfigurationOutput")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"GetBucketLifecycleConfigurationRequest")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"GetBucketLocationOutput")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"GetBucketLocationRequest")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"GetBucketLoggingOutput")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"GetBucketLoggingRequest")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"GetBucketMetricsConfigurationOutput")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"GetBucketMetricsConfigurationRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"GetBucketNotificationConfigurationRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"GetBucketPolicyOutput")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"GetBucketPolicyRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"GetBucketPolicyStatusOutput")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"GetBucketPolicyStatusRequest")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"GetBucketReplicationOutput")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"GetBucketReplicationRequest")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"GetBucketRequestPaymentOutput")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"GetBucketRequestPaymentRequest")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"GetBucketTaggingOutput")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"GetBucketTaggingRequest")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"GetBucketVersioningOutput")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"GetBucketVersioningRequest")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"GetBucketWebsiteOutput")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"GetBucketWebsiteRequest")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"GetObjectAclOutput")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"GetObjectAclRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"GetObjectLegalHoldOutput")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"GetObjectLegalHoldRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"GetObjectLockConfigurationOutput")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"GetObjectLockConfigurationRequest")},(nr=Xh=Xh||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},nr.isa=function(e){return Fc(e,"GetObjectOutput")},(Sb=Qh=Qh||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSECustomerKey&&{SSECustomerKey:Xc})},Sb.isa=function(e){return Fc(e,"GetObjectRequest")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"GetObjectRetentionOutput")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"GetObjectRetentionRequest")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"GetObjectTaggingOutput")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"GetObjectTaggingRequest")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"GetObjectTorrentOutput")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"GetObjectTorrentRequest")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"GetPublicAccessBlockOutput")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"GetPublicAccessBlockRequest")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"GlacierJobParameters")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"Grant")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"Grantee")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"HeadBucketRequest")},(dn={}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},dn.isa=function(e){return Fc(e,"HeadObjectOutput")},(hr={}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSECustomerKey&&{SSECustomerKey:Xc})},hr.isa=function(e){return Fc(e,"HeadObjectRequest")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"IndexDocument")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"Initiator")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"InputSerialization")},(cr=eg=eg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.Destination&&{Destination:tg.filterSensitiveLog(e.Destination)})},cr.isa=function(e){return Fc(e,"InventoryConfiguration")},(Jn=tg=tg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.S3BucketDestination&&{S3BucketDestination:rg.filterSensitiveLog(e.S3BucketDestination)})},Jn.isa=function(e){return Fc(e,"InventoryDestination")},(br=ng=ng||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMS&&{SSEKMS:yg.filterSensitiveLog(e.SSEKMS)})},br.isa=function(e){return Fc(e,"InventoryEncryption")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"InventoryFilter")},(dr=rg=rg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.Encryption&&{Encryption:ng.filterSensitiveLog(e.Encryption)})},dr.isa=function(e){return Fc(e,"InventoryS3BucketDestination")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"InventorySchedule")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"JSONInput")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"JSONOutput")},(jt={}).DOCUMENT="DOCUMENT",jt.LINES="LINES",(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"LambdaFunctionConfiguration")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"LifecycleExpiration")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"LifecycleRule")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"LifecycleRuleAndOperator")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"LifecycleRuleFilter")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"ListBucketAnalyticsConfigurationsOutput")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"ListBucketAnalyticsConfigurationsRequest")},(cr={}).filterSensitiveLog=function(e){return ih(ih({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return eg.filterSensitiveLog(e)})})},cr.isa=function(e){return Fc(e,"ListBucketInventoryConfigurationsOutput")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"ListBucketInventoryConfigurationsRequest")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"ListBucketMetricsConfigurationsOutput")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"ListBucketMetricsConfigurationsRequest")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"ListBucketsOutput")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"ListMultipartUploadsOutput")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"ListMultipartUploadsRequest")},(fn=ig=ig||{}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"ListObjectsOutput")},(jt=og=og||{}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"ListObjectsRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"ListObjectsV2Output")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"ListObjectsV2Request")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"ListObjectVersionsOutput")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"ListObjectVersionsRequest")},(nr=sg=sg||{}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"ListPartsOutput")},(Sb=ag=ag||{}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"ListPartsRequest")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"LoggingEnabled")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"MetadataEntry")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"Metrics")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"MetricsAndOperator")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"MetricsConfiguration")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"MetricsFilter")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"MultipartUpload")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"NoncurrentVersionExpiration")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"NoncurrentVersionTransition")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"NoSuchBucket")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"NoSuchKey")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"NoSuchUpload")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"NotificationConfiguration")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"NotificationConfigurationFilter")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"Object")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"ObjectAlreadyInActiveTierError")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"ObjectIdentifier")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"ObjectLockConfiguration")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"ObjectLockLegalHold")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"ObjectLockRetention")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"ObjectLockRule")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"ObjectNotInActiveTierError")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"ObjectVersion")},(at=ug=ug||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.S3&&{S3:hg.filterSensitiveLog(e.S3)})},at.isa=function(e){return Fc(e,"OutputLocation")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"OutputSerialization")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"Owner")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"ParquetInput")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"Part")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"PolicyStatus")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"Progress")},(nr=cg=cg||{}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"ProgressEvent")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"PublicAccessBlockConfiguration")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"PutBucketAccelerateConfigurationRequest")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"PutBucketAclRequest")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"PutBucketAnalyticsConfigurationRequest")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"PutBucketCorsRequest")},(p={}).filterSensitiveLog=function(e){return ih(ih({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:vg.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},p.isa=function(e){return Fc(e,"PutBucketEncryptionRequest")},(dr={}).filterSensitiveLog=function(e){return ih(ih({},e),e.InventoryConfiguration&&{InventoryConfiguration:eg.filterSensitiveLog(e.InventoryConfiguration)})},dr.isa=function(e){return Fc(e,"PutBucketInventoryConfigurationRequest")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"PutBucketLifecycleConfigurationRequest")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"PutBucketLoggingRequest")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"PutBucketMetricsConfigurationRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"PutBucketNotificationConfigurationRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"PutBucketPolicyRequest")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"PutBucketReplicationRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"PutBucketRequestPaymentRequest")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"PutBucketTaggingRequest")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"PutBucketVersioningRequest")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"PutBucketWebsiteRequest")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"PutObjectAclOutput")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"PutObjectAclRequest")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"PutObjectLegalHoldOutput")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"PutObjectLegalHoldRequest")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"PutObjectLockConfigurationOutput")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"PutObjectLockConfigurationRequest")},(ln=lg=lg||{}).filterSensitiveLog=function(e){return ih(ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc})},ln.isa=function(e){return Fc(e,"PutObjectOutput")},(at=pg=pg||{}).filterSensitiveLog=function(e){return ih(ih(ih(ih({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Xc}),e.SSECustomerKey&&{SSECustomerKey:Xc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},at.isa=function(e){return Fc(e,"PutObjectRequest")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"PutObjectRetentionOutput")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"PutObjectRetentionRequest")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"PutObjectTaggingOutput")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"PutObjectTaggingRequest")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"PutPublicAccessBlockRequest")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"QueueConfiguration")},(nr={}).ALWAYS="ALWAYS",nr.ASNEEDED="ASNEEDED",(Sb=fg=fg||{}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"RecordsEvent")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"Redirect")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"RedirectAllRequestsTo")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"ReplicationConfiguration")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"ReplicationRule")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"ReplicationRuleAndOperator")},(dr={}).filterSensitiveLog=function(e){return ih({},e)},dr.isa=function(e){return Fc(e,"ReplicationRuleFilter")},(ln={}).filterSensitiveLog=function(e){return ih({},e)},ln.isa=function(e){return Fc(e,"ReplicationTime")},(at={}).filterSensitiveLog=function(e){return ih({},e)},at.isa=function(e){return Fc(e,"ReplicationTimeValue")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"RequestPaymentConfiguration")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"RequestProgress")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"RestoreObjectOutput")},(pn={}).filterSensitiveLog=function(e){return ih(ih({},e),e.RestoreRequest&&{RestoreRequest:dg.filterSensitiveLog(e.RestoreRequest)})},pn.isa=function(e){return Fc(e,"RestoreObjectRequest")},(dn=dg=dg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.OutputLocation&&{OutputLocation:ug.filterSensitiveLog(e.OutputLocation)})},dn.isa=function(e){return Fc(e,"RestoreRequest")},(hr={}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"RoutingRule")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"S3KeyFilter")},(Sb=hg=hg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.Encryption&&{Encryption:Yh.filterSensitiveLog(e.Encryption)})},Sb.isa=function(e){return Fc(e,"S3Location")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"ScanRange")},(cr={}).visit=function(e,t){return void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.End?t.End(e.End):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Records?t.Records(e.Records):void 0!==e.Cont?t.Cont(e.Cont):t._(e.$unknown[0],e.$unknown[1])},cr.filterSensitiveLog=function(e){var t;return void 0!==e.Stats?{Stats:bg.filterSensitiveLog(e.Stats)}:void 0!==e.End?{End:Zh.filterSensitiveLog(e.End)}:void 0!==e.Progress?{Progress:cg.filterSensitiveLog(e.Progress)}:void 0!==e.Records?{Records:fg.filterSensitiveLog(e.Records)}:void 0!==e.Cont?{Cont:Kh.filterSensitiveLog(e.Cont)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Jn={}).filterSensitiveLog=function(e){return ih(ih({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},Jn.isa=function(e){return Fc(e,"SelectObjectContentOutput")},(br={}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSECustomerKey&&{SSECustomerKey:Xc})},br.isa=function(e){return Fc(e,"SelectObjectContentRequest")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"SelectParameters")},(dr=gg=gg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Xc})},dr.isa=function(e){return Fc(e,"ServerSideEncryptionByDefault")},(ln=vg=vg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.Rules&&{Rules:e.Rules.map(function(e){return mg.filterSensitiveLog(e)})})},ln.isa=function(e){return Fc(e,"ServerSideEncryptionConfiguration")},(at=mg=mg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:gg.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},at.isa=function(e){return Fc(e,"ServerSideEncryptionRule")},(fn={}).filterSensitiveLog=function(e){return ih({},e)},fn.isa=function(e){return Fc(e,"SourceSelectionCriteria")},(jt=yg=yg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.KeyId&&{KeyId:Xc})},jt.isa=function(e){return Fc(e,"SSEKMS")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"SseKmsEncryptedObjects")},(pn={}).filterSensitiveLog=function(e){return ih({},e)},pn.isa=function(e){return Fc(e,"SSES3")},(dn={}).filterSensitiveLog=function(e){return ih({},e)},dn.isa=function(e){return Fc(e,"Stats")},(hr=bg=bg||{}).filterSensitiveLog=function(e){return ih({},e)},hr.isa=function(e){return Fc(e,"StatsEvent")},(nr={}).filterSensitiveLog=function(e){return ih({},e)},nr.isa=function(e){return Fc(e,"StorageClassAnalysis")},(Sb={}).filterSensitiveLog=function(e){return ih({},e)},Sb.isa=function(e){return Fc(e,"StorageClassAnalysisDataExport")},(Xn={}).filterSensitiveLog=function(e){return ih({},e)},Xn.isa=function(e){return Fc(e,"Tag")},(cr={}).filterSensitiveLog=function(e){return ih({},e)},cr.isa=function(e){return Fc(e,"Tagging")},(Jn={}).filterSensitiveLog=function(e){return ih({},e)},Jn.isa=function(e){return Fc(e,"TargetGrant")},(br={}).filterSensitiveLog=function(e){return ih({},e)},br.isa=function(e){return Fc(e,"TopicConfiguration")},(p={}).filterSensitiveLog=function(e){return ih({},e)},p.isa=function(e){return Fc(e,"Transition")},(dr={}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},dr.isa=function(e){return Fc(e,"UploadPartCopyOutput")},(ln={}).filterSensitiveLog=function(e){return ih(ih(ih({},e),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Xc}),e.SSECustomerKey&&{SSECustomerKey:Xc})},ln.isa=function(e){return Fc(e,"UploadPartCopyRequest")},(at=Sg=Sg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Xc})},at.isa=function(e){return Fc(e,"UploadPartOutput")},(fn=wg=wg||{}).filterSensitiveLog=function(e){return ih(ih({},e),e.SSECustomerKey&&{SSECustomerKey:Xc})},fn.isa=function(e){return Fc(e,"UploadPartRequest")},(jt={}).filterSensitiveLog=function(e){return ih({},e)},jt.isa=function(e){return Fc(e,"VersioningConfiguration")},(b={}).filterSensitiveLog=function(e){return ih({},e)},b.isa=function(e){return Fc(e,"WebsiteConfiguration")};var Ag=(Ig.prototype.withName=function(e){return this.name=e,this},Ig.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},Ig.prototype.addChildNode=function(e){return this.children.push(e),this},Ig.prototype.removeAttribute=function(e){return delete this.attributes[e],this},Ig.prototype.toString=function(){var t,e,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=H(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},Ig);function Ig(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var Pg=(Og.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Og);function Og(e){this.value=e}var Tg,kg=function(a,u){return oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},a)],s={},[4,Xg(a.body,u)];case 1:switch(i=ih.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Qg(a,i.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,Bg(i)];case 3:return n=ih.apply(void 0,[ih.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Jg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=ih(ih({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Jg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},Lg=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Rg=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},xg=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Ng=function(a,u){return oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},a)],s={},[4,Xg(a.body,u)];case 1:switch(i=ih.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Qg(a,i.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return r=[{}],[4,qg(i)];case 3:return n=ih.apply(void 0,[ih.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Jg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=ih(ih({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Jg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},Mg=function(a,u){return oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},a)],s={},[4,Xg(a.body,u)];case 1:switch(i=ih.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=Qg(a,i.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,jg(i)];case 3:return n=ih.apply(void 0,[ih.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Jg(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=ih(ih({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Jg(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},Ug=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Dg=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Fg=function(r,i){return oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return t=[ih({},r)],n={},[4,Xg(r.body,i)];case 1:return t=ih.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Qg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ih(ih({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Jg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},jg=function(n,e){return oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Jg(n)},n.body,[2,t]})})},qg=function(n,e){return oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Jg(n)},n.body,[2,t]})})},Bg=function(n,e){return oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Jg(n)},n.body,[2,t]})})},Vg=function(e,t){var n=new Ag("CompletedMultipartUpload");return void 0!==e.Parts&&zg(e.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),n},zg=function(e,t){return e.map(function(e){var t,n;return(t=e,e=new Ag("CompletedPart"),void 0!==t.ETag&&(n=new Ag("ETag").addChildNode(new Pg(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&(n=new Ag("PartNumber").addChildNode(new Pg(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e).withName("member")})},Gg=function(e,t){return(e||[]).map(function(e){return t={__type:"CommonPrefix",Prefix:void 0},void 0!==(e=e).Prefix&&(t.Prefix=e.Prefix),t;var t})},Kg=function(e,t){var n={__type:"Initiator",ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},Hg=function(e,t){return(e||[]).map(function(e){return t={__type:"Object",Owner:void 0,StorageClass:void 0,LastModified:void 0,ETag:void 0,Size:void 0,Key:void 0},void 0!==(e=e).Owner&&(t.Owner=Wg(e.Owner)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.Key&&(t.Key=e.Key),t;var t})},Wg=function(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},$g=function(e,t){return(e||[]).map(function(e){return t={__type:"Part",ETag:void 0,PartNumber:void 0,LastModified:void 0,Size:void 0},void 0!==(e=e).ETag&&(t.ETag=e.ETag),void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t;var t})},Jg=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Yg=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Zg=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Xg=function(e,t){return Yg(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=T.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),e=Object.keys(t)[0],t=t[e];return t["#text"]&&(t[e]=t["#text"],delete t["#text"]),Dc(t)}return{}});var n},Qg=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},ev=(rh(tv,Tg=cn),tv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Vh.filterSensitiveLog,outputFilterSensitiveLog:Bh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},tv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih({"Content-Type":""},Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Mc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),r=ih({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},tv.prototype.deserialize=function(e,t){return n=e,r=t,oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,kg(n,r)]:(t={$metadata:Jg(n),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Yg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},tv);function tv(e){var t=Tg.call(this)||this;return t.input=e,t}var nv,rv=(rh(iv,nv=cn),iv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Gh.filterSensitiveLog,outputFilterSensitiveLog:zh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},iv.prototype.serialize=function(e,t){return u=e,c=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sh(this,function(e){switch(e.label){case 0:if(t=ih({"Content-Type":"application/xml"},Zg(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Mc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),r=ih({},void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.MultipartUpload&&(s=Vg(u.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new ca({protocol:s,hostname:o,port:a,method:"POST",headers:t,path:n,query:r,body:i})]}})});var u,c},iv.prototype.deserialize=function(e,t){return r=e,i=t,oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,Lg(r,i)]:(t={$metadata:Jg(r),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),[4,Xg(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})});var r,i},iv);function iv(e){var t=nv.call(this)||this;return t.input=e,t}function ov(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(h){return function(d){return G(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f;return K(this,function(e){switch(e.label){case 0:t=j({},d.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=H(o),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(i=r.value,(o=t[i.target])?(u=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):"string"==typeof o?g.utf8Decoder(o):new Uint8Array(o),c=g.base64Encoder(u),(o=new g.md5).update(u),s=[j({},t)],(f={})[i.target]=c,a=i.hash,c=(u=g).base64Encoder,[4,o.digest()]):[3,4]);case 3:t=j.apply(void 0,s.concat([(f[a]=c.apply(u,[e.sent()]),f)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l=e.sent(),l={error:l},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},d),{input:t}))]}})})}}}(t),av)}}}var sv,av={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},uv=(rh(cv,sv=cn),cv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(ov(t)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Wh.filterSensitiveLog,outputFilterSensitiveLog:Hh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},cv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih({"Content-Type":""},Zg(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),Zg(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),Zg(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),Zg(a.Tagging)&&{"x-amz-tagging":a.Tagging}),Zg(a.ACL)&&{"x-amz-acl":a.ACL}),Zg(a.Expires)&&{Expires:Gc(a.Expires).toString()}),Zg(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),Zg(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),Zg(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),Zg(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),Zg(a.CacheControl)&&{"Cache-Control":a.CacheControl}),Zg(a.ContentType)&&{"Content-Type":a.ContentType}),Zg(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),Zg(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),Zg(a.ContentLanguage)&&{"Content-Language":a.ContentLanguage}),Zg(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),Zg(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Zg(a.ContentDisposition)&&{"Content-Disposition":a.ContentDisposition}),Zg(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),Zg(a.ContentEncoding)&&{"Content-Encoding":a.ContentEncoding}),Zg(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),Zg(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),Zg(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=a.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Mc(o)),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},cv.prototype.deserialize=function(e,t){return r=e,i=t,oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,Rg(r,i)]:(t={$metadata:Jg(r),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),[4,Xg(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},cv);function cv(e){var t=sv.call(this)||this;return t.input=e,t}var lv,pv=(rh(fv,lv=cn),fv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Jh.filterSensitiveLog,outputFilterSensitiveLog:$h.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},fv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih(ih(ih({"Content-Type":""},Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),Zg(a.MFA)&&{"x-amz-mfa":a.MFA}),Zg(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Mc(o)),r=ih({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},fv.prototype.deserialize=function(e,t){return n=e,r=t,oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,xg(n,r)]:(t={$metadata:Jg(n),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),[4,Yg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},fv);function fv(e){var t=lv.call(this)||this;return t.input=e,t}var dv,hv=(rh(gv,dv=cn),gv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(ov(t)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:Qh.filterSensitiveLog,outputFilterSensitiveLog:Xh.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},gv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih(ih(ih(ih(ih(ih(ih(ih(ih({"Content-Type":""},Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),Zg(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),Zg(a.IfNoneMatch)&&{"If-None-Match":a.IfNoneMatch}),Zg(a.IfMatch)&&{"If-Match":a.IfMatch}),Zg(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),Zg(a.Range)&&{Range:a.Range}),Zg(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),Zg(a.IfModifiedSince)&&{"If-Modified-Since":Gc(a.IfModifiedSince).toString()}),Zg(a.IfUnmodifiedSince)&&{"If-Unmodified-Since":Gc(a.IfUnmodifiedSince).toString()}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Mc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),r=ih(ih(ih(ih(ih(ih(ih(ih({"x-id":"GetObject"},void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},gv.prototype.deserialize=function(e,t){return r=e,i=t,oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,Ng(r,i)]:(t={$metadata:Jg(r),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})});var r,i},gv);function gv(e){var t=dv.call(this)||this;return t.input=e,t}var vv,mv=(rh(yv,vv=cn),yv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:og.filterSensitiveLog,outputFilterSensitiveLog:ig.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},yv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih({"Content-Type":""},Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Mc(o)),r=ih(ih(ih(ih(ih({},void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.Prefix&&{prefix:a.Prefix}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Delimiter&&{delimiter:a.Delimiter}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},yv.prototype.deserialize=function(e,t){return r=e,i=t,oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,Mg(r,i)]:(t={$metadata:Jg(r),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Xg(r.body,i)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=Gg(Uc(n.CommonPrefixes))),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=Hg(Uc(n.Contents))),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}})});var r,i},yv);function yv(e){var t=vv.call(this)||this;return t.input=e,t}var bv,Sv=(rh(wv,bv=cn),wv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:ag.filterSensitiveLog,outputFilterSensitiveLog:sg.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},wv.prototype.serialize=function(e,t){return a=e,u=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sh(this,function(e){switch(e.label){case 0:if(t=ih({"Content-Type":""},Zg(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Mc(o)),r=ih(ih(ih({"x-id":"ListParts"},void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker.toString()}),void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},wv.prototype.deserialize=function(e,t){return r=e,i=t,oh(void 0,void 0,void 0,function(){var t,n;return sh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,Ug(r,i)]:(t={$metadata:Jg(r),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,Xg(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Initiator&&(t.Initiator=Kg(n.Initiator)),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.MaxParts&&(t.MaxParts=parseInt(n.MaxParts)),void 0!==n.NextPartNumberMarker&&(t.NextPartNumberMarker=parseInt(n.NextPartNumberMarker)),void 0!==n.Owner&&(t.Owner=Wg(n.Owner)),void 0!==n.PartNumberMarker&&(t.PartNumberMarker=parseInt(n.PartNumberMarker)),""===n.Part&&(t.Parts=[]),void 0!==n.Part&&(t.Parts=$g(Uc(n.Part))),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},wv);function wv(e){var t=bv.call(this)||this;return t.input=e,t}var Cv,_v=(rh(Ev,Cv=cn),Ev.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(ov(t)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:pg.filterSensitiveLog,outputFilterSensitiveLog:lg.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Ev.prototype.serialize=function(e,t){return u=e,c=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sh(this,function(e){switch(e.label){case 0:if(t=ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih(ih({"Content-Type":"application/octet-stream"},Zg(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),Zg(u.Tagging)&&{"x-amz-tagging":u.Tagging}),Zg(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),Zg(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),Zg(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),Zg(u.Expires)&&{Expires:Gc(u.Expires).toString()}),Zg(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),Zg(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),Zg(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),Zg(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),Zg(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),Zg(u.ContentDisposition)&&{"Content-Disposition":u.ContentDisposition}),Zg(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),Zg(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),Zg(u.ContentEncoding)&&{"Content-Encoding":u.ContentEncoding}),Zg(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),Zg(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Zg(u.CacheControl)&&{"Cache-Control":u.CacheControl}),Zg(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),Zg(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),Zg(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),Zg(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),Zg(u.ContentLanguage)&&{"Content-Language":u.ContentLanguage}),Zg(u.ACL)&&{"x-amz-acl":u.ACL}),Zg(u.ContentType)&&{"Content-Type":u.ContentType}),Zg(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=u.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Mc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new ca({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},Ev.prototype.deserialize=function(e,t){return n=e,r=t,oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,Dg(n,r)]:(t={$metadata:Jg(n),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),[4,Yg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Ev);function Ev(e){var t=Cv.call(this)||this;return t.input=e,t}var Av,Iv=(rh(Pv,Av=cn),Pv.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize)),this.middlewareStack.use(ov(t)),this.middlewareStack.use(Ih(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:wg.filterSensitiveLog,outputFilterSensitiveLog:Sg.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Pv.prototype.serialize=function(e,t){return u=e,c=t,oh(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sh(this,function(e){switch(e.label){case 0:if(t=ih(ih(ih(ih(ih(ih({"Content-Type":"application/octet-stream"},Zg(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),Zg(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),Zg(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),Zg(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),Zg(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),Zg(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Mc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Mc).join("/")),r=ih(ih({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new ca({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},Pv.prototype.deserialize=function(e,t){return n=e,r=t,oh(void 0,void 0,void 0,function(){var t;return sh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,Fg(n,r)]:(t={$metadata:Jg(n),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),[4,Yg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Pv);function Pv(e){var t=Av.call(this)||this;return t.input=e,t}function Ov(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,e=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);n=n?Oa(n):"";return n&&"?"!==n[0]&&(n="?"+n),r+"//"+e+i+n}var Tv=(kv.prototype.presign=function(t,e){void 0===e&&(e={});var n=e.unsignableHeaders,r=void 0===n?new Set:n,i=q(e,["unsignableHeaders"]);return G(this,void 0,void 0,function(){return K(this,function(e){return r.add("content-type"),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r},i))]})})},kv);function kv(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new mc(e)}var Lv=new E.ConsoleLogger("axios-http-handler"),Rv="sendProgress",xv=(Nv.prototype.destroy=function(){},Nv.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;!e.query||(o=Oa(e.query))&&(i+="?"+o);var o=e.port,o=e.protocol+"//"+e.hostname+(o?":"+o:"")+i,i={};i.url=o,i.method=e.method,i.headers=e.headers,delete i.headers.host,e.body?i.data=e.body:i.headers["Content-Type"]&&(i.data=null),r&&(i.onUploadProgress=function(e){r.emit(Rv,e),Lv.debug(e)}),i.responseType="blob";n=[k.request(i).then(function(e){return{response:new aa({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw Lv.error(e),e}),function(n){void 0===n&&(n=0);return new Promise(function(e,t){n&&setTimeout(function(){var e=new Error("Request did not complete within "+n+" ms");e.name="TimeoutError",t(e)},n)})}(n)];return Promise.race(n)},Nv);function Nv(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}for(var Mv={},Uv=new Array(64),Dv=0,Fv="A".charCodeAt(0),jv="Z".charCodeAt(0);Dv+Fv<=jv;Dv++){var qv=String.fromCharCode(Dv+Fv);Uv[Mv[qv]=Dv]=qv}for(Dv=0,Fv="a".charCodeAt(0),jv="z".charCodeAt(0);Dv+Fv<=jv;Dv++){var qv=String.fromCharCode(Dv+Fv),Bv=Dv+26;Uv[Mv[qv]=Bv]=qv}for(Dv=0;Dv<10;Dv++){Mv[Dv.toString(10)]=Dv+52;qv=Dv.toString(10),Bv=Dv+52;Uv[Mv[qv]=Bv]=qv}Uv[Mv["+"]=62]="+",Uv[Mv["/"]=63]="/";var Vv=6,zv=8;function Gv(e){return("function"==typeof Blob&&e instanceof Blob?function(r){return G(this,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var i=new FileReader;i.onloadend=function(){if(2!==i.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=i.result)&&void 0!==t?t:"",t=e.indexOf(","),t=-1<t?t+1:e.length;n(e.substring(t))},i.onabort=function(){return r(new Error("Read aborted"))},i.onerror=function(){return r(i.error)},i.readAsDataURL(t)}))];case 1:return n=e.sent(),n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var i=0,o=0,s=r,a=r+3;s<=a;s++)"="!==e[s]?(i|=Mv[e[s]]<<(a-s)*Vv,o+=Vv):i>>=Vv;var u=r/4*3;i>>=o%zv;for(var c=Math.floor(o/zv),l=0;l<c;l++){var p=(c-l-1)*zv;n.setUint8(u+l,(i&255<<p)>>p)}}return new Uint8Array(t)}(n),[2,new Uint8Array(n)]}var t})})}:function(s){return G(this,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),i=s.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,i.read()];case 2:return o=e.sent(),r=o.done,(i=o.value)&&(o=t,(t=new Uint8Array(o.length+i.length)).set(o),t.set(i,o.length)),n=r,[3,1];case 3:return[2,t]}})})})(e)}var Kv=function(){return(Kv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Hv=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Wv=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$v=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jv=new E.ConsoleLogger("AWSS3ProviderManagedUpload"),Yv=(Zv.prototype.upload=function(){return Hv(this,void 0,void 0,function(){var t,n,r,i,o;return Wv(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return(t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize)?(this.params.Body=this.body,n=new _v(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=5;case 5:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),o=this.createParts(i),[4,this.uploadParts(r,o)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},Zv.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new L.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},Zv.prototype.createMultiPartUpload=function(){return Hv(this,void 0,void 0,function(){var t;return Wv(this,function(e){switch(e.label){case 0:return t=new uv(this.params),[4,this._createNewS3Client(this.opts)];case 1:return[4,e.sent().send(t)];case 2:return t=e.sent(),Jv.debug(t.UploadId),[2,t.UploadId]}})})},Zv.prototype.uploadParts=function(l,p){return Hv(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return Wv(this,function(e){switch(e.label){case 0:a=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=$v(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(i=n.value,this.setupEventListener(i),r={PartNumber:i.partNumber,Body:i.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new Iv(r),[4,this._createNewS3Client(this.opts,i.emitter)]);case 3:i=e.sent(),a.push(i.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u=e.sent(),u={error:u},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(a)];case 9:for(o=e.sent(),s=0;s<o.length;s++)this.multiPartMap.push({PartNumber:p[s].partNumber,ETag:o[s].ETag});return[3,11];case 10:return a=e.sent(),Jv.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 11:return[2]}})})},Zv.prototype.finishMultiPartUpload=function(r){return Hv(this,void 0,void 0,function(){var t,n;return Wv(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new rv(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),Jv.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},Zv.prototype.checkIfUploadCancelled=function(r){return Hv(this,void 0,void 0,function(){var t,n;return Wv(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Zv.prototype.cancelUpload=function(){this.cancel=!0},Zv.prototype.cleanup=function(r){return Hv(this,void 0,void 0,function(){var t,n;return Wv(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new ev(n))];case 2:return e.sent(),[4,t.send(new Sv(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Zv.prototype.setupEventListener=function(t){var n=this;t.emitter.on(Rv,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Zv.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(Rv,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Zv.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Zv.prototype.validateAndSanitizeBody=function(t){return Hv(this,void 0,void 0,function(){return Wv(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?E.Platform.isReactNative?[4,Gv(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},Zv.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},Zv.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Zv.prototype._createNewS3Client=function(i,o){return Hv(this,void 0,void 0,function(){var t,n,r;return Wv(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=i.region,r=i.dangerouslyConnectToHttpEndpointForTesting,(r=new _g(Kv(Kv({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new xv({},o),customUserAgent:E.getAmplifyUserAgent(),urlParser:wu}))).middlewareStack.remove("contentLengthMiddleware"),[2,r]}})})},Zv.prototype._getCredentials=function(){return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return Jv.debug("set credentials for storage",e),e}).catch(function(e){return Jv.warn("ensure credentials error",e),!1})},Zv);function Zv(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Xv(e,t,n,r,i){e&&(n={attrs:n},r&&(n.metrics=r),E.Hub.dispatch("storage",{event:t,data:n,message:i},"Storage",rm))}var Qv=function(){return(Qv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},em=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},tm=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},nm=new E.ConsoleLogger("AWSS3Provider"),rm="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",im=(om.prototype.getCategory=function(){return om.CATEGORY},om.prototype.getProviderName=function(){return om.PROVIDER_NAME},om.prototype.configure=function(e){if(nm.debug("configure Storage",e),!e)return this._config;e=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,e.Storage),this._config.bucket||nm.debug("Do not have bucket yet"),this._config},om.prototype.get=function(v,m){return em(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return tm(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(d=Object.assign({},this._config,m),t=d.bucket,l=d.download,n=d.cacheControl,r=d.contentDisposition,i=d.contentEncoding,o=d.contentLanguage,s=d.contentType,a=d.expires,u=d.track,c=this._prefix(d),c=c+v,d=this._createNewS3Client(d),nm.debug("get "+v+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),i&&(c.ResponseContentEncoding=i),o&&(c.ResponseContentLanguage=o),s&&(c.ResponseContentType=s),!0!==l)return[3,5];l=new hv(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,d.send(l)];case 3:return p=e.sent(),Xv(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+v),[2,p];case 4:throw p=e.sent(),Xv(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=a||900,e.label=6;case 6:return e.trys.push([6,9,,10]),f=new Tv(Qv({},d.config)),[4,function(i,o){return G(this,void 0,void 0,function(){var t,n,r=this;return K(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return G(r,void 0,void 0,function(){return K(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=i.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,o.resolveMiddleware(n,i.config,void 0)(o).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(d,new hv(c))];case 7:return d=e.sent(),h=Ov,[4,f.presign(d,{expiresIn:c.Expires})];case 8:return g=h.apply(void 0,[e.sent()]),Xv(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+g),[2,g];case 9:throw g=e.sent(),nm.warn("get signed url error",g),Xv(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+v),g;case 10:return[2]}})})},om.prototype.put=function(b,S,w){return em(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v,m,y;return tm(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];m=Object.assign({},this._config,w),t=m.bucket,n=m.track,r=m.progressCallback,h=m.contentType,i=m.contentDisposition,o=m.cacheControl,s=m.expires,a=m.metadata,u=m.tagging,c=m.acl,l=m.serverSideEncryption,p=m.SSECustomerAlgorithm,f=m.SSECustomerKey,d=m.SSECustomerKeyMD5,v=m.SSEKMSKeyId,g=h||"binary/octet-stream",h=this._prefix(m),h=h+b,nm.debug("put "+b+" to "+h),g={Bucket:t,Key:h,Body:S,ContentType:g},o&&(g.CacheControl=o),i&&(g.ContentDisposition=i),s&&(g.Expires=s),a&&(g.Metadata=a),u&&(g.Tagging=u),l&&(g.ServerSideEncryption=l,p&&(g.SSECustomerAlgorithm=p),f&&(g.SSECustomerKey=f),d&&(g.SSECustomerKeyMD5=d),v&&(g.SSEKMSKeyId=v)),v=new L.EventEmitter,m=new Yv(g,m,v),c&&(g.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),v.on("sendProgress",function(e){r&&("function"==typeof r?r(e):nm.warn("progressCallback should be a function, not a "+typeof r))}),[4,m.upload()];case 3:return y=e.sent(),nm.debug("upload result",y),Xv(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw y=e.sent(),nm.warn("error uploading",y),Xv(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),y;case 5:return[2]}})})},om.prototype.remove=function(s,a){return em(this,void 0,void 0,function(){var t,n,r,i,o;return tm(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,a),t=r.bucket,n=r.track,i=this._prefix(r),i=i+s,r=this._createNewS3Client(r),nm.debug("remove "+s+" from "+i),i=new pv({Bucket:t,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=e.sent(),Xv(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,o];case 4:throw o=e.sent(),Xv(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+o),o;case 5:return[2]}})})},om.prototype.list=function(u,c){return em(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];o=Object.assign({},this._config,c),t=o.bucket,n=o.track,s=o.maxKeys,r=this._prefix(o),i=r+u,o=this._createNewS3Client(o),nm.debug("list "+u+" from "+i),s=new mv({Bucket:t,Prefix:i,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.send(s)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Xv(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),nm.debug("list",a),[2,a];case 4:throw a=e.sent(),nm.warn("list error",a),Xv(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},om.prototype._ensureCredentials=function(){var t=this;return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return nm.debug("set credentials for storage",e),t._config.credentials=e,!0}).catch(function(e){return nm.warn("ensure credentials error",e),!1})},om.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},e=e.identityId||t.identityId,t=(void 0!==r.private?r.private:"private/")+e+"/",e=(void 0!==r.protected?r.protected:"protected/")+e+"/",r=void 0!==r.public?r.public:"public/";switch(n){case"private":return t;case"protected":return e;default:return r}},om.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new _g(Qv(Qv({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()},i),{requestHandler:new xv({},t)}))},om.CATEGORY="Storage",om.PROVIDER_NAME="AWSS3",om);function om(e){this._config=e||{},nm.debug("Storage Options",this._config)}var sm=function(){return(sm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},am=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},um=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},cm=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},lm=new E.ConsoleLogger("StorageClass"),pm="AWSS3",fm=(dm.prototype.getModuleName=function(){return"Storage"},dm.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},dm.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(lm.debug("No plugin found with providerName",t),null):e},dm.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},dm.prototype.configure=function(e){var t=this;if(lm.debug("configure Storage"),!e)return this._config;function n(t){return o.some(function(e){return e===t})}var r=E.Parser.parseMobilehubConfig(e),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return i&&i.find(n)&&!r.Storage[pm]&&(r.Storage[pm]={}),Object.entries(r.Storage).map(function(e){var t=cm(e,2),e=t[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[pm][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=sm(sm({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new im),this._config},dm.prototype.get=function(r,i){return am(this,void 0,void 0,function(){var t,n;return um(this,function(e){return t=void 0===(n=(i||{}).provider)?pm:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(lm.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.get(r,i)]})})},dm.prototype.put=function(r,i,o){return am(this,void 0,void 0,function(){var t,n;return um(this,function(e){return t=void 0===(n=(o||{}).provider)?pm:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(lm.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.put(r,i,o)]})})},dm.prototype.remove=function(r,i){return am(this,void 0,void 0,function(){var t,n;return um(this,function(e){return t=void 0===(n=(i||{}).provider)?pm:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(lm.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.remove(r,i)]})})},dm.prototype.list=function(r,i){return am(this,void 0,void 0,function(){var t,n;return um(this,function(e){return t=void 0===(n=(i||{}).provider)?pm:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(lm.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.list(r,i)]})})},dm);function dm(){this._config={},this._pluggables=[],lm.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var hm=function(){return(hm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},gm=new E.ConsoleLogger("Storage"),vm=null,mm=function(){if(vm)return vm;gm.debug("Create Storage Instance, debug"),(vm=new fm).vault=new fm;var n=vm.configure;return vm.configure=function(e){gm.debug("storage configure called");var t=hm({},n.call(vm,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=hm(hm({},t[e]),{level:"private"}))}),gm.debug("storage vault configure called"),vm.vault.configure(t)},vm}();E.Amplify.register(mm);var ym=function(){return(ym=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},bm=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Sm=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},wm=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},Cm=new E.ConsoleLogger("RestClient"),_m=(Em.prototype.ajax=function(p,f,d){return bm(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l=this;return Sm(this,function(e){switch(e.label){case 0:return Cm.debug(f,p),t="us-east-1",n="execute-api",r=void 0,"string"==typeof p?(o=this._parseUrl(p),c=p):(c=p.endpoint,r=p.custom_header,t=p.region,n=p.service,o=this._parseUrl(p.endpoint)),i={method:f,url:c,host:o.host,path:o.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},o={},E.Platform.isReactNative&&(s=E.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":s}),s=Object.assign({},d),a=s.response,s.body&&(o["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(s.body)),s.responseType&&(i.responseType=s.responseType),s.withCredentials&&(i.withCredentials=s.withCredentials),s.timeout&&(i.timeout=s.timeout),s.cancellableToken&&(i.cancelToken=s.cancellableToken.token),i.signerServiceInfo=s.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return u=u,i.headers=ym(ym(ym({},o),u),s.headers),c=h.parse(c,!0,!0),c.search,c=wm(c,["search"]),i.url=h.format(ym(ym({},c),{query:ym(ym({},c.query),s.queryStringParameters||{})})),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,a)]):[2,this.Credentials.get().then(function(e){return l._signed(ym({},i),e,a,{region:t,service:n}).catch(function(e){if(E.DateUtils.isClockSkewError(e)){var t=e.response.headers,n=t&&(t.date||t.Date),t=new Date(n),n=E.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(E.DateUtils.isClockSkewed(n,t))return E.DateUtils.setClockOffset(t.getTime()-n.getTime()),l.ajax(p,f,d)}throw e})},function(e){return Cm.debug("No credentials available, the request will be unsigned"),l._request(i,a)})]}})})},Em.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Em.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Em.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Em.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Em.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Em.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Em.prototype.cancel=function(e,t){e=this._cancelTokenMap.get(e);return e&&e.cancel(t),!0},Em.prototype.isCancel=function(e){return k.isCancel(e)},Em.prototype.getCancellableToken=function(){return k.CancelToken.source()},Em.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},Em.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Em.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,r=e.signerServiceInfo,e=wm(e,["signerServiceInfo"]),o=o||this._region||this._options.region,i=i||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},i={region:o,service:i},r=Object.assign(i,r),r=E.Signer.sign(e,t,r);return r.data&&(r.body=r.data),Cm.debug("Signed Request: ",r),delete r.headers.host,k(r).then(function(e){return n?e:e.data}).catch(function(e){throw Cm.debug(e),e})},Em.prototype._request=function(e,t){return void 0===t&&(t=!1),k(e).then(function(e){return t?e:e.data}).catch(function(e){throw Cm.debug(e),e})},Em.prototype._parseUrl=function(e){e=e.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},Em);function Em(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=E.Credentials,this._options=e,Cm.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var Am=function(){return(Am=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Im=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Pm=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Om=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},Tm=new E.ConsoleLogger("RestAPI"),km=(Lm.prototype.getModuleName=function(){return"RestAPI"},Lm.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=Om(t,["API"]),t=Am(Am({},t),e);return Tm.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Tm.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},Lm.prototype.createInstance=function(){return Tm.debug("create Rest API instance"),this._api=new _m(this._options),this._api.Credentials=this.Credentials,!0},Lm.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.get(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.post(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.put(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.del(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.head(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},Lm.prototype.isCancel=function(e){return this._api.isCancel(e)},Lm.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Lm.prototype.endpoint=function(t){return Im(this,void 0,void 0,function(){return Pm(this,function(e){return[2,this._api.endpoint(t)]})})},Lm.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");n=n.find(function(e){return e.name===t});if(!n)throw new Error("API "+t+" does not exist");e={endpoint:n.endpoint+e};return"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},Lm);function Lm(e){this._api=null,this.Credentials=E.Credentials,this._options=e,Tm.debug("API Options",this._options)}pn=new km(null);function Rm(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function xm(e,t){var n=e.locationOffset.column-1,r=Nm(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,o=t.line+o,n=1===t.line?n:0,n=t.column+n,r=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(n,")\n")+function(e){var t=e.filter(function(e){e[0];return void 0!==e[1]}),n=0,r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var a=a.value[0];n=Math.max(n,a.length)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t.map(function(e){var t=e[0],e=e[1];return Nm(n-(t=t).length)+t+e}).join("\n")}([["".concat(o-1,": "),r[i-1]],["".concat(o,": "),r[i]],["",Nm(n-1)+"^"],["".concat(o+1,": "),r[1+i]]])}function Nm(e){return Array(e+1).join(" ")}function Mm(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!t&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;!c&&a&&(c=a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),c&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return Rm(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(Rm(t.loc.source,t.loc.start)),e},[]));s=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:o},extensions:{value:s||void 0,enumerable:Boolean(s)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Mm):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}E.Amplify.register(pn),Mm.prototype=Object.create(Error.prototype,{constructor:{value:Mm},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o=e.nodes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var s=s.value;s.loc&&t.push(xm(s.loc.source,Rm(s.loc.source,s.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var a=e.source,u=!0,c=!1,l=void 0;try{for(var p=e.locations[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var f=f.value;t.push(xm(a,f))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var Um={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Dm={};function Fm(e,t,n){var r=2<arguments.length&&void 0!==n?n:Um,i=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,f=[],d=[],h=e;do{var g=++a===s.length,v=g&&0!==u.length;if(g){if(l=0===d.length?void 0:f[f.length-1],c=p,p=d.pop(),v){if(o)c=c.slice();else{var m,y={};for(m in c)c.hasOwnProperty(m)&&(y[m]=c[m]);c=y}for(var b=0,S=0;S<u.length;S++){var w=u[S][0],C=u[S][1];o&&(w-=b),o&&null===C?(c.splice(w,1),b++):c[w]=C}}a=i.index,s=i.keys,u=i.edits,o=i.inArray,i=i.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:h))continue;p&&f.push(l)}var _=void 0;if(!Array.isArray(c)){if(!jm(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t,n){var r=e[t];{if(r){if(!n&&"function"==typeof r)return r;r=n?r.leave:r.enter;return"function"==typeof r?r:void 0}e=n?e.leave:e.enter;if(e){if("function"==typeof e)return e;t=e[t];return"function"==typeof t?t:void 0}}}(t,c.kind,g);if(E){if((_=E.call(t,c,l,p,f,d))===Dm)break;if(!1===_){if(!g){f.pop();continue}}else if(void 0!==_&&(u.push([l,_]),!g)){if(!jm(_)){f.pop();continue}c=_}}}void 0===_&&v&&u.push([l,c]),g?f.pop():(i={inArray:o,index:a,keys:s,edits:u,prev:i},s=(o=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&d.push(p),p=c)}while(void 0!==i);return 0!==u.length&&(h=u[u.length-1][1]),h}function jm(e){return Boolean(e&&"string"==typeof e.kind)}function qm(e){return Fm(e,{leave:Bm})}var Bm={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return zm(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Km("(",zm(e.variableDefinitions,", "),")"),i=zm(e.directives," "),e=e.selectionSet;return n||i||r||"query"!==t?zm([t,zm([n,r]),i,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+Km(" = ",r)+Km(" ",zm(e," "))},SelectionSet:function(e){return Gm(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,e=e.selectionSet;return zm([Km("",t,": ")+n+Km("(",zm(r,", "),")"),zm(i," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+Km(" ",zm(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return zm(["...",Km("on ",t),zm(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(Km("(",zm(r,", "),")")," ")+"on ".concat(n," ").concat(Km("",zm(i," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:Hm(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+zm(e.values,", ")+"]"},ObjectValue:function(e){return"{"+zm(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+Km("(",zm(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return zm(["schema",zm(t," "),Gm(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:Vm(function(e){return zm(["scalar",e.name,zm(e.directives," ")]," ")}),ObjectTypeDefinition:Vm(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return zm(["type",t,Km("implements ",zm(n," & ")),zm(r," "),Gm(e)]," ")}),FieldDefinition:Vm(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?Km("(",zm(n,", "),")"):Km("(\n",Hm(zm(n,"\n")),"\n)"))+": "+r+Km(" ",zm(e," "))}),InputValueDefinition:Vm(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return zm([t+": "+n,Km("= ",r),zm(e," ")]," ")}),InterfaceTypeDefinition:Vm(function(e){var t=e.name,n=e.directives,e=e.fields;return zm(["interface",t,zm(n," "),Gm(e)]," ")}),UnionTypeDefinition:Vm(function(e){var t=e.name,n=e.directives,e=e.types;return zm(["union",t,zm(n," "),e&&0!==e.length?"= "+zm(e," | "):""]," ")}),EnumTypeDefinition:Vm(function(e){var t=e.name,n=e.directives,e=e.values;return zm(["enum",t,zm(n," "),Gm(e)]," ")}),EnumValueDefinition:Vm(function(e){return zm([e.name,zm(e.directives," ")]," ")}),InputObjectTypeDefinition:Vm(function(e){var t=e.name,n=e.directives,e=e.fields;return zm(["input",t,zm(n," "),Gm(e)]," ")}),DirectiveDefinition:Vm(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?Km("(",zm(n,", "),")"):Km("(\n",Hm(zm(n,"\n")),"\n)"))+" on "+zm(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return zm(["extend schema",zm(t," "),Gm(e)]," ")},ScalarTypeExtension:function(e){return zm(["extend scalar",e.name,zm(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return zm(["extend type",t,Km("implements ",zm(n," & ")),zm(r," "),Gm(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return zm(["extend interface",t,zm(n," "),Gm(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return zm(["extend union",t,zm(n," "),e&&0!==e.length?"= "+zm(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return zm(["extend enum",t,zm(n," "),Gm(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return zm(["extend input",t,zm(n," "),Gm(e)]," ")}};function Vm(t){return function(e){return zm([e.description,t(e)],"\n")}}function zm(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function Gm(e){return e&&0!==e.length?"{\n"+Hm(zm(e,"\n"))+"\n}":""}function Km(e,t,n){return t?e+t+(n||""):""}function Hm(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function Wm(e){return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $m(t){return t&&"object"===Wm(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map($m).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat($m(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function Jm(e,t){if(!e)throw new Error(t)}function Ym(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zm(e,t,n){Ym(this,"body",void 0),Ym(this,"name",void 0),Ym(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||Jm(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||Jm(0,"column in locationOffset is 1-indexed and must be positive")}var Xm;function Qm(e,t,n){return new Mm("Syntax Error: ".concat(n),void 0,e,[t])}function ey(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function ty(e){return ey(e)===e.length}function ny(){return this.lastToken=this.token,this.token=this.lookahead()}function ry(){var e=this.token;if(e.kind!==iy.EOF)for(;(e=e.next||(e.next=function(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=sy.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===sy.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,e=1+o-e.lineStart;if(i<=o)return new uy(iy.EOF,i,i,s,e,t);i=sy.call(r,o);switch(i){case 33:return new uy(iy.BANG,o,o+1,s,e,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;for(;o=sy.call(s,++a),null!==o&&(31<o||9===o););return new uy(iy.COMMENT,t,a,n,r,i,ay.call(s,t+1,a))}(n,o,s,e,t);case 36:return new uy(iy.DOLLAR,o,o+1,s,e,t);case 38:return new uy(iy.AMP,o,o+1,s,e,t);case 40:return new uy(iy.PAREN_L,o,o+1,s,e,t);case 41:return new uy(iy.PAREN_R,o,o+1,s,e,t);case 46:if(46===sy.call(r,o+1)&&46===sy.call(r,o+2))return new uy(iy.SPREAD,o,o+3,s,e,t);break;case 58:return new uy(iy.COLON,o,o+1,s,e,t);case 61:return new uy(iy.EQUALS,o,o+1,s,e,t);case 64:return new uy(iy.AT,o,o+1,s,e,t);case 91:return new uy(iy.BRACKET_L,o,o+1,s,e,t);case 93:return new uy(iy.BRACKET_R,o,o+1,s,e,t);case 123:return new uy(iy.BRACE_L,o,o+1,s,e,t);case 124:return new uy(iy.PIPE,o,o+1,s,e,t);case 125:return new uy(iy.BRACE_R,o,o+1,s,e,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=sy.call(o,a))&&(95===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122);)++a;return new uy(iy.NAME,t,a,n,r,i,ay.call(o,t,a))}(n,o,s,e,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,n=!1;45===a&&(a=sy.call(s,++u));if(48===a){if(48<=(a=sy.call(s,++u))&&a<=57)throw Qm(e,u,"Invalid number, unexpected digit after 0: ".concat(cy(a),"."))}else u=ly(e,u,a),a=sy.call(s,u);46===a&&(n=!0,a=sy.call(s,++u),u=ly(e,u,a),a=sy.call(s,u));69!==a&&101!==a||(n=!0,43!==(a=sy.call(s,++u))&&45!==a||(a=sy.call(s,++u)),u=ly(e,u,a));return new uy(n?iy.FLOAT:iy.INT,t,u,r,i,o,ay.call(s,t,u))}(n,o,i,s,e,t);case 34:return 34===sy.call(r,o+1)&&34===sy.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=sy.call(o,s));){if(34===u&&34===sy.call(o,s+1)&&34===sy.call(o,s+2))return c+=ay.call(o,a,s),new uy(iy.BLOCK_STRING,t,s+3,n,r,i,function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=ey(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&ty(t[0]);)t.shift();for(;0<t.length&&ty(t[t.length-1]);)t.pop();return t.join("\n")}(c));if(u<32&&9!==u&&10!==u&&13!==u)throw Qm(e,s,"Invalid character within String: ".concat(cy(u),"."));92===u&&34===sy.call(o,s+1)&&34===sy.call(o,s+2)&&34===sy.call(o,s+3)?(c+=ay.call(o,a,s)+'"""',a=s+=4):++s}throw Qm(e,s,"Unterminated string.")}(n,o,s,e,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=sy.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=ay.call(o,a,s),new uy(iy.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw Qm(e,s,"Invalid character within String: ".concat(cy(u),"."));if(++s,92===u){switch(c+=ay.call(o,a,s-1),u=sy.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=function(e,t,n,r){return py(e)<<12|py(t)<<8|py(n)<<4|py(r)}(sy.call(o,s+1),sy.call(o,s+2),sy.call(o,s+3),sy.call(o,s+4));if(l<0)throw Qm(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw Qm(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw Qm(e,s,"Unterminated string.")}(n,o,s,e,t)}throw Qm(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(cy(e),".");return 39!==e?"Cannot parse the unexpected character ".concat(cy(e),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?"}(i))}(this,e))).kind===iy.COMMENT;);return e}Xm=Zm,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Xm.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var iy=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function oy(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var sy=String.prototype.charCodeAt,ay=String.prototype.slice;function uy(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function cy(e){return isNaN(e)?iy.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function ly(e,t,n){var r=e.body,i=t,o=n;if(48<=o&&o<=57){for(;48<=(o=sy.call(r,++i))&&o<=57;);return i}throw Qm(e,i,"Invalid number, expected digit but got: ".concat(cy(o),"."))}function py(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}uy.prototype.toJSON=uy.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var fy=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),dy=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function hy(e,t){var n="string"==typeof e?new Zm(e):e;if(!(n instanceof Zm))throw new TypeError("Must provide Source. Received: ".concat($m(n)));e=n,n=t||{},t=new uy(iy.SOF,0,0,0,0,null),n={source:e,options:n,lastToken:t,token:t,line:1,lineStart:0,advance:ny,lookahead:ry};return n=(t=n).token,{kind:fy.DOCUMENT,definitions:nb(t,iy.SOF,vy,iy.EOF),loc:Jy(t,n)}}function gy(e){var t=Qy(e,iy.NAME);return{kind:fy.NAME,value:t.value,loc:Jy(e,t)}}function vy(e){if(Zy(e,iy.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return my(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return Uy(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===iy.NAME)switch(t.value){case"schema":return function(e){var t=e.token;eb(e,"extend"),eb(e,"schema");var n=xy(e,!0),r=Zy(e,iy.BRACE_L)?nb(e,iy.BRACE_L,jy,iy.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:fy.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:Jy(e,t)};throw tb(e)}(e);case"scalar":return function(e){var t=e.token;eb(e,"extend"),eb(e,"scalar");var n=gy(e),r=xy(e,!0);if(0!==r.length)return{kind:fy.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:Jy(e,t)};throw tb(e)}(e);case"type":return function(e){var t=e.token;eb(e,"extend"),eb(e,"type");var n=gy(e),r=qy(e),i=xy(e,!0),o=By(e);if(0!==r.length||0!==i.length||0!==o.length)return{kind:fy.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:Jy(e,t)};throw tb(e)}(e);case"interface":return function(e){var t=e.token;eb(e,"extend"),eb(e,"interface");var n=gy(e),r=xy(e,!0),i=By(e);if(0!==r.length||0!==i.length)return{kind:fy.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:Jy(e,t)};throw tb(e)}(e);case"union":return function(e){var t=e.token;eb(e,"extend"),eb(e,"union");var n=gy(e),r=xy(e,!0),i=Ky(e);if(0!==r.length||0!==i.length)return{kind:fy.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:Jy(e,t)};throw tb(e)}(e);case"enum":return function(e){var t=e.token;eb(e,"extend"),eb(e,"enum");var n=gy(e),r=xy(e,!0),i=Hy(e);if(0!==r.length||0!==i.length)return{kind:fy.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:Jy(e,t)};throw tb(e)}(e);case"input":return function(e){var t=e.token;eb(e,"extend"),eb(e,"input");var n=gy(e),r=xy(e,!0),i=$y(e);if(0!==r.length||0!==i.length)return{kind:fy.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:Jy(e,t)};throw tb(e)}(e)}throw tb(e,t)}(e)}else{if(Zy(e,iy.BRACE_L))return my(e);if(Dy(e))return Uy(e)}throw tb(e)}function my(e){if(Zy(e,iy.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return yy(e);case"fragment":return function(e){var t=e.token;if(eb(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:fy.FRAGMENT_DEFINITION,name:Oy(e),variableDefinitions:Sy(e),typeCondition:(eb(e,"on"),My(e)),directives:xy(e,!1),selectionSet:_y(e),loc:Jy(e,t)};return{kind:fy.FRAGMENT_DEFINITION,name:Oy(e),typeCondition:(eb(e,"on"),My(e)),directives:xy(e,!1),selectionSet:_y(e),loc:Jy(e,t)}}(e)}else if(Zy(e,iy.BRACE_L))return yy(e);throw tb(e)}function yy(e){var t=e.token;if(Zy(e,iy.BRACE_L))return{kind:fy.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:_y(e),loc:Jy(e,t)};var n,r=by(e);return Zy(e,iy.NAME)&&(n=gy(e)),{kind:fy.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Sy(e),directives:xy(e,!1),selectionSet:_y(e),loc:Jy(e,t)}}function by(e){var t=Qy(e,iy.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw tb(e,t)}function Sy(e){return Zy(e,iy.PAREN_L)?nb(e,iy.PAREN_L,wy,iy.PAREN_R):[]}function wy(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:fy.VARIABLE_DEFINITION,variable:Cy(e),type:(Qy(e,iy.COLON),Ny(e)),defaultValue:Xy(e,iy.EQUALS)?Ty(e,!0):void 0,directives:xy(e,!0),loc:Jy(e,t)}:{kind:fy.VARIABLE_DEFINITION,variable:Cy(e),type:(Qy(e,iy.COLON),Ny(e)),defaultValue:Xy(e,iy.EQUALS)?Ty(e,!0):void 0,loc:Jy(e,t)}}function Cy(e){var t=e.token;return Qy(e,iy.DOLLAR),{kind:fy.VARIABLE,name:gy(e),loc:Jy(e,t)}}function _y(e){var t=e.token;return{kind:fy.SELECTION_SET,selections:nb(e,iy.BRACE_L,Ey,iy.BRACE_R),loc:Jy(e,t)}}function Ey(e){return(Zy(e,iy.SPREAD)?function(e){var t,n=e.token;if(Qy(e,iy.SPREAD),Zy(e,iy.NAME)&&"on"!==e.token.value)return{kind:fy.FRAGMENT_SPREAD,name:Oy(e),directives:xy(e,!1),loc:Jy(e,n)};"on"===e.token.value&&(e.advance(),t=My(e));return{kind:fy.INLINE_FRAGMENT,typeCondition:t,directives:xy(e,!1),selectionSet:_y(e),loc:Jy(e,n)}}:function(e){var t,n=e.token,r=gy(e);r=Xy(e,iy.COLON)?(t=r,gy(e)):r;return{kind:fy.FIELD,alias:t,name:r,arguments:Ay(e,!1),directives:xy(e,!1),selectionSet:Zy(e,iy.BRACE_L)?_y(e):void 0,loc:Jy(e,n)}})(e)}function Ay(e,t){t=t?Py:Iy;return Zy(e,iy.PAREN_L)?nb(e,iy.PAREN_L,t,iy.PAREN_R):[]}function Iy(e){var t=e.token;return{kind:fy.ARGUMENT,name:gy(e),value:(Qy(e,iy.COLON),Ty(e,!1)),loc:Jy(e,t)}}function Py(e){var t=e.token;return{kind:fy.ARGUMENT,name:gy(e),value:(Qy(e,iy.COLON),Ly(e)),loc:Jy(e,t)}}function Oy(e){if("on"===e.token.value)throw tb(e);return gy(e)}function Ty(e,t){var n,r,i,o=e.token;switch(o.kind){case iy.BRACKET_L:return r=t,i=(n=e).token,r=r?Ly:Ry,{kind:fy.LIST,values:function(e,t,n,r){Qy(e,t);var i=[];for(;!Xy(e,r);)i.push(n(e));return i}(n,iy.BRACKET_L,r,iy.BRACKET_R),loc:Jy(n,i)};case iy.BRACE_L:return function(e,t){var n=e.token;Qy(e,iy.BRACE_L);var r=[];for(;!Xy(e,iy.BRACE_R);)r.push(function(e,t){var n=e.token;return{kind:fy.OBJECT_FIELD,name:gy(e),value:(Qy(e,iy.COLON),Ty(e,t)),loc:Jy(e,n)}}(e,t));return{kind:fy.OBJECT,fields:r,loc:Jy(e,n)}}(e,t);case iy.INT:return e.advance(),{kind:fy.INT,value:o.value,loc:Jy(e,o)};case iy.FLOAT:return e.advance(),{kind:fy.FLOAT,value:o.value,loc:Jy(e,o)};case iy.STRING:case iy.BLOCK_STRING:return ky(e);case iy.NAME:return"true"===o.value||"false"===o.value?(e.advance(),{kind:fy.BOOLEAN,value:"true"===o.value,loc:Jy(e,o)}):"null"===o.value?(e.advance(),{kind:fy.NULL,loc:Jy(e,o)}):(e.advance(),{kind:fy.ENUM,value:o.value,loc:Jy(e,o)});case iy.DOLLAR:if(!t)return Cy(e)}throw tb(e)}function ky(e){var t=e.token;return e.advance(),{kind:fy.STRING,value:t.value,block:t.kind===iy.BLOCK_STRING,loc:Jy(e,t)}}function Ly(e){return Ty(e,!0)}function Ry(e){return Ty(e,!1)}function xy(e,t){for(var n,r,i,o=[];Zy(e,iy.AT);)o.push((r=t,i=void 0,i=(n=e).token,Qy(n,iy.AT),{kind:fy.DIRECTIVE,name:gy(n),arguments:Ay(n,r),loc:Jy(n,i)}));return o}function Ny(e){var t=e.token,n=Xy(e,iy.BRACKET_L)?(n=Ny(e),Qy(e,iy.BRACKET_R),{kind:fy.LIST_TYPE,type:n,loc:Jy(e,t)}):My(e);return Xy(e,iy.BANG)?{kind:fy.NON_NULL_TYPE,type:n,loc:Jy(e,t)}:n}function My(e){var t=e.token;return{kind:fy.NAMED_TYPE,name:gy(e),loc:Jy(e,t)}}function Uy(e){var t=Dy(e)?e.lookahead():e.token;if(t.kind===iy.NAME)switch(t.value){case"schema":return function(e){var t=e.token;eb(e,"schema");var n=xy(e,!0),r=nb(e,iy.BRACE_L,jy,iy.BRACE_R);return{kind:fy.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:Jy(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=Fy(e);eb(e,"scalar");var r=gy(e),i=xy(e,!0);return{kind:fy.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:Jy(e,t)}}(e);case"type":return function(e){var t=e.token,n=Fy(e);eb(e,"type");var r=gy(e),i=qy(e),o=xy(e,!0),s=By(e);return{kind:fy.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:Jy(e,t)}}(e);case"interface":return function(e){var t=e.token,n=Fy(e);eb(e,"interface");var r=gy(e),i=xy(e,!0),o=By(e);return{kind:fy.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:Jy(e,t)}}(e);case"union":return function(e){var t=e.token,n=Fy(e);eb(e,"union");var r=gy(e),i=xy(e,!0),o=Ky(e);return{kind:fy.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:Jy(e,t)}}(e);case"enum":return function(e){var t=e.token,n=Fy(e);eb(e,"enum");var r=gy(e),i=xy(e,!0),o=Hy(e);return{kind:fy.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:Jy(e,t)}}(e);case"input":return function(e){var t=e.token,n=Fy(e);eb(e,"input");var r=gy(e),i=xy(e,!0),o=$y(e);return{kind:fy.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:Jy(e,t)}}(e);case"directive":return function(e){var t=e.token,n=Fy(e);eb(e,"directive"),Qy(e,iy.AT);var r=gy(e),i=zy(e);eb(e,"on");var o=function(e){Xy(e,iy.PIPE);var t=[];for(;t.push(function(e){var t=e.token,n=gy(e);if(dy.hasOwnProperty(n.value))return n;throw tb(e,t)}(e)),Xy(e,iy.PIPE););return t}(e);return{kind:fy.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:Jy(e,t)}}(e)}throw tb(e,t)}function Dy(e){return Zy(e,iy.STRING)||Zy(e,iy.BLOCK_STRING)}function Fy(e){if(Dy(e))return ky(e)}function jy(e){var t=e.token,n=by(e);Qy(e,iy.COLON);var r=My(e);return{kind:fy.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:Jy(e,t)}}function qy(e){var t=[];if("implements"===e.token.value)for(e.advance(),Xy(e,iy.AMP);t.push(My(e)),Xy(e,iy.AMP)||e.options.allowLegacySDLImplementsInterfaces&&Zy(e,iy.NAME););return t}function By(e){return e.options.allowLegacySDLEmptyFields&&Zy(e,iy.BRACE_L)&&e.lookahead().kind===iy.BRACE_R?(e.advance(),e.advance(),[]):Zy(e,iy.BRACE_L)?nb(e,iy.BRACE_L,Vy,iy.BRACE_R):[]}function Vy(e){var t=e.token,n=Fy(e),r=gy(e),i=zy(e);Qy(e,iy.COLON);var o=Ny(e),s=xy(e,!0);return{kind:fy.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:Jy(e,t)}}function zy(e){return Zy(e,iy.PAREN_L)?nb(e,iy.PAREN_L,Gy,iy.PAREN_R):[]}function Gy(e){var t=e.token,n=Fy(e),r=gy(e);Qy(e,iy.COLON);var i,o=Ny(e);Xy(e,iy.EQUALS)&&(i=Ly(e));var s=xy(e,!0);return{kind:fy.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:Jy(e,t)}}function Ky(e){var t=[];if(Xy(e,iy.EQUALS))for(Xy(e,iy.PIPE);t.push(My(e)),Xy(e,iy.PIPE););return t}function Hy(e){return Zy(e,iy.BRACE_L)?nb(e,iy.BRACE_L,Wy,iy.BRACE_R):[]}function Wy(e){var t=e.token,n=Fy(e),r=gy(e),i=xy(e,!0);return{kind:fy.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:Jy(e,t)}}function $y(e){return Zy(e,iy.BRACE_L)?nb(e,iy.BRACE_L,Gy,iy.BRACE_R):[]}function Jy(e,t){if(!e.options.noLocation)return new Yy(t,e.lastToken,e.source)}function Yy(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function Zy(e,t){return e.token.kind===t}function Xy(e,t){t=e.token.kind===t;return t&&e.advance(),t}function Qy(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw Qm(e.source,n.start,"Expected ".concat(t,", found ").concat(oy(n)))}function eb(e,t){var n=e.token;if(n.kind===iy.NAME&&n.value===t)return e.advance(),n;throw Qm(e.source,n.start,'Expected "'.concat(t,'", found ').concat(oy(n)))}function tb(e,t){t=t||e.token;return Qm(e.source,t.start,"Unexpected ".concat(oy(t)))}function nb(e,t,n,r){Qy(e,t);for(var i=[n(e)];!Xy(e,r);)i.push(n(e));return i}Yy.prototype.toJSON=Yy.prototype.inspect=function(){return{start:this.start,end:this.end}};var rb=R,ib=function(){return(ib=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ob=new E.ConsoleLogger("AbstractPubSubProvider"),dn=(sb.prototype.configure=function(e){return void 0===e&&(e={}),this._config=ib(ib({},e),this._config),ob.debug("configure "+this.getProviderName(),this._config),this.options},sb.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(sb.prototype,"options",{get:function(){return ib({},this._config)},enumerable:!0,configurable:!0}),sb);function sb(e){void 0===e&&(e={}),this._config=e}var ab,hr=(ab=function(e,t){return(ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ab(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ub=function(){return(ub=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},cb=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},lb=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},pb=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},fb=new E.ConsoleLogger("MqttOverWSProvider");var db=(hb.prototype.get=function(n,r){return cb(this,void 0,void 0,function(){var t;return lb(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(hb.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),hb.prototype.remove=function(e){this.promises.delete(e)},hb);function hb(){this.promises=new Map}var gb,vb="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",nr=(hr(mb,gb=dn),Object.defineProperty(mb.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(mb.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(mb.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(mb.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),mb.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[vb]},mb.prototype.getProviderName=function(){return"MqttOverWSProvider"},mb.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,i=e.errorCode,e=pb(e,["clientId","errorCode"]);0!==i&&(fb.warn(n,JSON.stringify(ub({errorCode:i},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+i),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},mb.prototype.newClient=function(e){var t=e.url,i=e.clientId;return cb(this,void 0,void 0,function(){var n,r=this;return lb(this,function(e){switch(e.label){case 0:return fb.debug("Creating new MQTT client",i),(n=new x.Client(t,i)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=pb(e,["errorCode"]);r.onDisconnect(ub({clientId:i,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},mb.prototype.connect=function(n,r){return void 0===r&&(r={}),cb(this,void 0,void 0,function(){var t=this;return lb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(ub(ub({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},mb.prototype.disconnect=function(n){return cb(this,void 0,void 0,function(){var t;return lb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},mb.prototype.publish=function(o,s){return cb(this,void 0,void 0,function(){var t,n,r,i;return lb(this,function(e){switch(e.label){case 0:return t=[].concat(o),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return i=e.sent(),fb.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return i.send(e,n)}),[2]}})})},mb.prototype._onMessage=function(n,t){try{var r=[];this._topicObservers.forEach(function(e,t){!function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return}return r===i.length}(t,n)||r.push(e)});var i=JSON.parse(t);"object"==typeof i&&(i[vb]=n),r.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){fb.warn("Error handling message",e,t)}},mb.prototype.subscribe=function(e,a){var n=this;void 0===a&&(a={});var u=[].concat(e);return fb.debug("Subscribing to topic(s)",u.join(",")),new rb(function(i){var o;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=a.clientId,s=void 0===e?n.clientId:e,e=n._clientIdObservers.get(s);return(e=e||new Set).add(i),n._clientIdObservers.set(s,e),cb(n,void 0,void 0,function(){var t,n,r;return lb(this,function(e){switch(e.label){case 0:return void 0!==(t=a.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(s,{url:r})];case 5:return o=e.sent(),u.forEach(function(e){o.subscribe(e)}),[3,7];case 6:return r=e.sent(),i.error(r),[3,7];case 7:return[2]}})}),function(){return fb.debug("Unsubscribing from topic(s)",u.join(",")),o&&(n._clientIdObservers.get(s).delete(i),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),o.isConnected()&&o.unsubscribe(e))})),null}})},mb);function mb(e){void 0===e&&(e={});e=gb.call(this,ub(ub({},e),{clientId:e.clientId||v.v4()}))||this;return e._clientsQueue=new db,e._topicObservers=new Map,e._clientIdObservers=new Map,e}var yb,bb,Sb=(yb=function(e,t){return(yb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wb=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Cb=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},_b=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},Eb=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ab=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Eb(arguments[t]));return e},Ib=new E.ConsoleLogger("AWSAppSyncProvider"),Pb=(Sb(Ob,bb=nr),Object.defineProperty(Ob.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),Ob.prototype.getProviderName=function(){return"AWSAppSyncProvider"},Ob.prototype.publish=function(e,t,n){return wb(this,void 0,void 0,function(){return Cb(this,function(e){throw new Error("Operation not supported")})})},Ob.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return Eb(e,2)[1].clientId===t}).map(function(e){return Eb(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},Ob.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},Ob.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=_b(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return Eb(e,2)[1].clientId===n}).map(function(e){return Eb(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},Ob.prototype.disconnect=function(t){return wb(this,void 0,void 0,function(){return Cb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,bb.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},Ob.prototype.subscribe=function(e,o){var n=this;void 0===o&&(o={});var t=new rb(function(a){var r=[].concat(e);return Ib.debug("Subscribing to topic(s)",r.join(",")),wb(n,void 0,void 0,function(){var i,t,n=this;return Cb(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=o.mqttConnections,i=void 0===t?[]:t,t=o.newSubscriptions,t=Object.entries(t).map(function(e){var t=Eb(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(Ab(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=i.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var e=Eb(e,2),i=e[0],e=e[1],o=e.url,s=e.topics;return wb(n,void 0,void 0,function(){var t,n,r=this;return Cb(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(i,{clientId:i,url:o})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){Ib.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return rb.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=Eb(t,2),t=n[0],n=n[1];return e[r||t]=n,e},{}),e})},Ob);function Ob(){var e=null!==bb&&bb.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}var Tb,kb,Lb,Rb,Xn=(Tb=function(e,t){return(Tb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Tb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),xb=function(){return(xb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Nb=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Mb=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ub=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Db=new E.Logger("AWSAppSyncRealTimeProvider"),Fb="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",jb=[400,401,403];(cr=kb=kb||{}).GQL_CONNECTION_INIT="connection_init",cr.GQL_CONNECTION_ERROR="connection_error",cr.GQL_CONNECTION_ACK="connection_ack",cr.GQL_START="start",cr.GQL_START_ACK="start_ack",cr.GQL_DATA="data",cr.GQL_CONNECTION_KEEP_ALIVE="ka",cr.GQL_STOP="stop",cr.GQL_COMPLETE="complete",cr.GQL_ERROR="error",(Jn=Lb=Lb||{})[Jn.PENDING=0]="PENDING",Jn[Jn.CONNECTED=1]="CONNECTED",Jn[Jn.FAILED=2]="FAILED",(br=Rb=Rb||{})[br.CLOSED=0]="CLOSED",br[br.READY=1]="READY",br[br.CONNECTING=2]="CONNECTING";var qb,Bb={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Vb=(Xn(zb,qb=dn),zb.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},zb.prototype.newClient=function(){throw new Error("Not used here")},zb.prototype.publish=function(e,t,n){return Nb(this,void 0,void 0,function(){return Mb(this,function(e){throw new Error("Operation not supported")})})},zb.prototype.subscribe=function(e,t){var r=this,i=t.appSyncGraphqlEndpoint;return new rb(function(e){if(i){var n=v.v4();return r._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:n}),function(){return Nb(r,void 0,void 0,function(){var t;return Mb(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==Lb.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),Db.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}e.error({errors:[xb({},new Mm("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(zb.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),zb.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var m=e.options,y=e.observer,b=e.subscriptionId;return Nb(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v=this;return Mb(this,function(e){switch(e.label){case 0:return t=m.appSyncGraphqlEndpoint,n=m.authenticationType,r=m.query,i=m.variables,o=m.apiKey,s=m.region,p=m.graphql_headers,a=void 0===p?function(){return{}}:p,l=m.additionalHeaders,u=void 0===l?{}:l,c=Lb.PENDING,p={query:r,variables:i},this.subscriptionObserverMap.set(b,{observer:y,query:r,variables:i,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s})];case 1:return f=[xb.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:g=xb.apply(void 0,[xb.apply(void 0,[xb.apply(void 0,f.concat([e.sent()])),u]),((g={})[E.USER_AGENT_HEADER]=E.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:xb({},g)}},type:kb.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),Db.debug({err:h}),d=h.message,h=void 0===d?"":d,y.error({errors:[xb({},new Mm("Connection failed: "+h))]}),y.complete(),"function"==typeof(d=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&d(),[2];case 6:return h=this.subscriptionObserverMap.get(b),d=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:y,subscriptionState:c,variables:i,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:d,startAckTimeoutId:setTimeout(function(){v._timeoutStartSubscriptionAck.call(v,b)},15e3)}),this.awsRealTimeSocket.send(g),[2]}})})},zb.prototype._waitForSubscriptionToBeConnected=function(a){return Nb(this,void 0,void 0,function(){var s=this;return Mb(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===Lb.PENDING?[2,new Promise(function(e,t){var n=s.subscriptionObserverMap.get(a),r=n.observer,i=n.subscriptionState,o=n.variables,n=n.query;s.subscriptionObserverMap.set(a,{observer:r,subscriptionState:i,variables:o,query:n,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},zb.prototype._sendUnsubscriptionMessage=function(e){try{var t;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Rb.READY&&(t={id:e,type:kb.GQL_STOP},t=JSON.stringify(t),this.awsRealTimeSocket.send(t))}catch(e){Db.debug({err:e})}},zb.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},zb.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(Db.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Rb.CLOSED):this.socketStatus=Rb.CLOSED)},zb.prototype._handleIncomingSubscriptionMessage=function(e){Db.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,e=s.query,n=void 0===e?"":e,t=s.variables,a=void 0===t?{}:t,e=s.startAckTimeoutId,t=s.subscriptionReadyCallback,s=s.subscriptionFailedCallback;if(Db.debug({id:r,observer:u,query:n,variables:a}),o===kb.GQL_DATA&&i&&i.data)u?u.next(i):Db.debug("observer not found for id: "+r);else if(o!==kb.GQL_START_ACK){if(o===kb.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,$b.TIMEOUT_DISCONNECT),this.keepAliveTimeout));o===kb.GQL_ERROR&&(c=Lb.FAILED,this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:e,subscriptionReadyCallback:t,subscriptionFailedCallback:s,subscriptionState:c}),u.error({errors:[xb({},new Mm("Connection failed: "+JSON.stringify(i)))]}),clearTimeout(e),u.complete(),"function"==typeof s&&s())}else{Db.debug("subscription ready for "+JSON.stringify({query:n,variables:a})),"function"==typeof t&&t(),clearTimeout(e),o=$b.SUBSCRIPTION_ACK,i={query:n,variables:a},e="Connection established for subscription",E.Hub.dispatch("api",{event:o,data:i,message:e},"PubSub",Fb);var c=Lb.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:t,subscriptionFailedCallback:s})}},zb.prototype._errorDisconnect=function(t){Db.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){e=e.observer;e&&!e.closed&&e.error({errors:[xb({},new Mm(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Rb.CLOSED},zb.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,t=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:t,subscriptionState:Lb.FAILED}),n&&!n.closed&&(n.error({errors:[xb({},new Mm("Subscription timeout "+JSON.stringify({query:r,variables:t})))]}),n.complete()),Db.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:t})))},zb.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==Rb.READY)return new Promise(function(s,a){return Nb(t,void 0,void 0,function(){var t,n,r,i,o;return Mb(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:s,rej:a}),this.socketStatus!==Rb.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=Rb.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),i="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:i,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=f.Buffer.from(r).toString("base64"),i=f.Buffer.from(i).toString("base64"),i=t+"?header="+r+"&payload="+i,[4,this._initializeRetryableHandshake({awsRealTimeUrl:i})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res;Db.debug("Notifying connection successful"),e()}),this.socketStatus=Rb.READY,this.promiseArray=[],[3,5];case 4:throw o=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(o)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Rb.CLOSED,o;case 5:return[2]}})})})},zb.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Nb(this,void 0,void 0,function(){return Mb(this,function(e){switch(e.label){case 0:return Db.debug("Initializaling retryable Handshake"),[4,E.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},zb.prototype._initializeHandshake=function(e){var i=e.awsRealTimeUrl;return Nb(this,void 0,void 0,function(){var t,n,r,s=this;return Mb(this,function(e){switch(e.label){case 0:Db.debug("Initializing handshake "+i),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(i,"graphql-ws");n.onerror=function(){Db.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,i){var o=!1;s.awsRealTimeSocket.onerror=function(e){Db.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){Db.debug("WebSocket closed "+e.reason),i(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){Db.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=t.payload,e=(void 0===e?{}:e).connectionTimeoutMs,e=void 0===e?3e5:e;if(n===kb.GQL_CONNECTION_ACK)return o=!0,s.keepAliveTimeout=e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){Db.debug(e),s._errorDisconnect($b.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){Db.debug("WebSocket closed "+e.reason),s._errorDisconnect($b.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===kb.GQL_CONNECTION_ERROR&&(t=(void 0===(n=t.payload)?{}:n).errors,n=void 0===(n=(t=void 0===(n=Ub(void 0===t?[]:t,1)[0])?{}:n).errorType)?"":n,t=t.errorCode,i({errorType:n,errorCode:void 0===t?0:t}))};var e={type:kb.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){o||i(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,jb.includes(r)?new E.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},zb.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region;return Nb(this,void 0,void 0,function(){var t,n;return Mb(this,function(e){switch(e.label){case 0:return(n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r]))?(Db.debug("Authentication type "+r+" not supported"),[2,""]):(n=h.parse(s).host,[4,t({payload:i,canonicalUri:o,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n})]);case 1:return[2,e.sent()]}})})},zb.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Nb(this,void 0,void 0,function(){return Mb(this,function(e){switch(e.label){case 0:return[4,th.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},zb.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return Nb(this,void 0,void 0,function(){var t,n;return Mb(this,function(e){switch(e.label){case 0:return[4,ip.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,th.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},zb.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return Nb(this,void 0,void 0,function(){var t;return Mb(this,function(e){return t=new Date,t=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},zb.prototype._awsRealTimeIAMHeader=function(e){var i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return Nb(this,void 0,void 0,function(){var t,n,r;return Mb(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,E.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+o,data:i,method:"POST",headers:xb({},Bb)},[2,E.Signer.sign(r,n,t).headers]}})})},zb.prototype._ensureCredentials=function(){return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return Db.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0}).catch(function(e){return Db.warn("ensure credentials error",e),!1})},zb);function zb(){var e=null!==qb&&qb.apply(this,arguments)||this;return e.socketStatus=Rb.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}var Gb=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Kb=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Hb=new E.ConsoleLogger("PubSub");function Wb(e){this._options=e,Hb.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var $b,Jb=new(Object.defineProperty(Wb.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Pb(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(Wb.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Vb(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),Wb.prototype.getModuleName=function(){return"PubSub"},Wb.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return Hb.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},Wb.prototype.addPluggable=function(t){return Gb(this,void 0,void 0,function(){return Kb(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},Wb.prototype.getProviderByName=function(t){return t===E.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},Wb.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;e=this.getProviderByName(t);if(!e)throw new Error("Could not find provider named "+t);return[e]},Wb.prototype.publish=function(t,n,r){return Gb(this,void 0,void 0,function(){return Kb(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},Wb.prototype.subscribe=function(t,r){if(this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");Hb.debug("subscribe options",r);var i=this.getProviders(r);return new rb(function(n){var e=i.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},Wb)(null);E.Amplify.register(Jb),(p=$b=$b||{}).CONNECTION_CLOSED="Connection closed",p.TIMEOUT_DISCONNECT="Timeout disconnect",p.SUBSCRIPTION_ACK="Subscription ack";var Yb=function(){return(Yb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Zb=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Xb=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Qb=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},eS=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},tS=new E.ConsoleLogger("GraphQLAPI"),nS=(rS.prototype.getModuleName=function(){return"GraphQLAPI"},rS.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=Qb(t,["API"]),e=Yb(Yb({},t),e);return tS.debug("configure GraphQL API",{opt:e}),e.aws_project_region&&(e=Object.assign({},e,{region:e.aws_project_region,header:{}})),void 0!==e.graphql_headers&&"function"!=typeof e.graphql_headers&&(tS.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},rS.prototype.createInstance=function(){return tS.debug("create Rest instance"),this._options?(this._api=new _m(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},rS.prototype._headerBasedAuth=function(s){return Zb(this,void 0,void 0,function(){var t,n,r,i,o;return Xb(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},s||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!n)throw new Error("No api-key configured");return r={Authorization:null,"X-Api-Key":n},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,12];case 4:return o=void 0,[4,ip.getItem("federatedInfo")];case 5:return(i=e.sent())?(o=i.token,[3,8]):[3,6];case 6:return[4,th.currentAuthenticatedUser()];case 7:(i=e.sent())&&(o=i.token),e.label=8;case 8:if(!o)throw new Error("No federated jwt");return r={Authorization:o},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return o=e.sent(),r={Authorization:o.getAccessToken().getJwtToken()},[3,12];case 11:return r={Authorization:null},[3,12];case 12:return[2,r]}})})},rS.prototype.getGraphqlOperationType=function(e){e=hy(e);return eS(e.definitions,1)[0].operation},rS.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=hy("string"==typeof n?n:qm(n)),r=eS(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],e=(void 0===r?{}:r).operation;switch(e){case"query":case"mutation":n=this._api.getCancellableToken(),r={cancellableToken:n},r=this._graphql({query:s,variables:i,authMode:o},t,r);return this._api.updateRequestToBeCancellable(r,n),r;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+e)},rS.prototype._graphql=function(e,v,m){var y=e.query,b=e.variables,S=e.authMode;return void 0===v&&(v={}),void 0===m&&(m={}),Zb(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g;return Xb(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,i=a.graphql_endpoint,o=a.graphql_endpoint_iam_region,s=[{}],(a=!i)?[4,this._headerBasedAuth(S)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[Yb.apply(void 0,s.concat([a]))],(c=i)?o?[4,this._headerBasedAuth(S)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[Yb.apply(void 0,u.concat([c]))],[4,r({query:y,variables:b})];case 9:if(f=Yb.apply(void 0,[Yb.apply(void 0,[Yb.apply(void 0,p.concat([e.sent()])),v]),!i&&((g={})["x-amz-user-agent"]=E.Constants.userAgent,g)]),g={query:qm(y),variables:b},f=Object.assign({headers:f,body:g,signerServiceInfo:{service:i?"execute-api":"appsync",region:i?o:t}},m),!(g=i||n))throw{data:{},errors:[new Mm("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,f)];case 11:return d=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return d={data:{},errors:[new Mm(h.message)]},[3,13];case 13:if((h=d.errors)&&h.length)throw d;return[2,d]}})})},rS.prototype.isCancel=function(e){return this._api.isCancel(e)},rS.prototype.cancel=function(e,t){return this._api.cancel(e,t)},rS.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,u=o.aws_appsync_authenticationType,e=o.aws_appsync_apiKey,o=o.graphql_headers,o=void 0===o?function(){return{}}:o,u=i||u||"AWS_IAM";if(Jb&&"function"==typeof Jb.subscribe)return Jb.subscribe("",{provider:E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:u,apiKey:e,query:qm(n),region:s,variables:r,graphql_headers:o,additionalHeaders:t});throw tS.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},rS.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;e=t.Credentials.shear(e);return tS.debug("set credentials for api",e),!0}).catch(function(e){return tS.warn("ensure credentials error",e),!1})},rS);function rS(e){this._api=null,this.Auth=th,this.Cache=ip,this.Credentials=E.Credentials,this._options=e,tS.debug("API Options",this._options)}dr=new nS(null);E.Amplify.register(dr);var iS=function(){return(iS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oS=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},sS=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},aS=new E.ConsoleLogger("API");function uS(e){this.Auth=th,this.Cache=ip,this.Credentials=E.Credentials,this._options=e,this._restApi=new km(e),this._graphqlApi=new nS(e),aS.debug("API Options",this._options)}var cS=new(uS.prototype.getModuleName=function(){return"API"},uS.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return iS(iS({},t),e)},uS.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},uS.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},uS.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},uS.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},uS.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},uS.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},uS.prototype.isCancel=function(e){return this._restApi.isCancel(e)},uS.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},uS.prototype.endpoint=function(t){return oS(this,void 0,void 0,function(){return sS(this,function(e){return[2,this._restApi.endpoint(t)]})})},uS.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},uS.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},uS)(null);E.Amplify.register(cS);var lS=function(){return(lS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},pS=new E.ConsoleLogger("AbstractInteractionsProvider"),ln=(fS.prototype.configure=function(e){return void 0===e&&(e={}),this._config=lS(lS({},this._config),e),pS.debug("configure "+this.getProviderName(),this._config),this.options},fS.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(fS.prototype,"options",{get:function(){return lS({},this._config)},enumerable:!0,configurable:!0}),fS);function fS(e){void 0===e&&(e={}),this._config=e}var dS=function(e,t){return(dS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function hS(e,t){function n(){this.constructor=e}dS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var gS=function(){return(gS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function vS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function mS(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function yS(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var bS,SS,wS,CS,_S,ES,AS,IS="runtime.lex.{region}.amazonaws.com",PS=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),OS=new Set(["cn-north-1","cn-northwest-1"]),TS=new Set(["us-iso-east-1"]),kS=new Set(["us-isob-east-1"]),LS=new Set(["us-gov-east-1","us-gov-west-1"]),RS=gS(gS({},{apiVersion:"2016-11-28",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:PS.has(e)&&(n={hostname:IS.replace("{region}",e),partition:"aws",signingService:"lex"}),OS.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),TS.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),kS.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),LS.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:IS.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"node",base64Decoder:Cu,base64Encoder:_u,bodyLengthChecker:Eu,credentialDefaultProvider:Qs,defaultUserAgent:Au("@aws-sdk/client-lex-runtime-service","1.0.0-gamma.8"),maxAttempts:tr(C),region:tr(Wn,lr),requestHandler:new Me,sha256:S.bind(null,"sha256"),streamCollector:Re,urlParser:wu,utf8Decoder:Iu,utf8Encoder:Pu}),xS=(hS(NS,bS=ct),NS.prototype.destroy=function(){bS.prototype.destroy.call(this)},NS);function NS(e){var t=this,e=gS(gS({},RS),e),e=Bo(e),e=_c(qo(e)),e=wa(e);return(t=bS.call(this,e)||this).config=e,t.middlewareStack.use(Pc(t.config)),t.middlewareStack.use(oa(t.config)),t.middlewareStack.use(Tc(t.config)),t.middlewareStack.use(Uu(t.config)),t.middlewareStack.use(Fu(t.config)),t.middlewareStack.use(ju(t.config)),t}(at={}).filterSensitiveLog=function(e){return gS({},e)},at.isa=function(e){return Fc(e,"BadGatewayException")},(fn={}).filterSensitiveLog=function(e){return gS({},e)},fn.isa=function(e){return Fc(e,"BadRequestException")},(jt={}).filterSensitiveLog=function(e){return gS({},e)},jt.isa=function(e){return Fc(e,"Button")},(b={}).CONFIRMED="Confirmed",b.DENIED="Denied",b.NONE="None",(pn={}).filterSensitiveLog=function(e){return gS({},e)},pn.isa=function(e){return Fc(e,"ConflictException")},(R={}).filterSensitiveLog=function(e){return gS({},e)},R.isa=function(e){return Fc(e,"DeleteSessionRequest")},(hr={}).filterSensitiveLog=function(e){return gS({},e)},hr.isa=function(e){return Fc(e,"DeleteSessionResponse")},(Sb={}).filterSensitiveLog=function(e){return gS({},e)},Sb.isa=function(e){return Fc(e,"DependencyFailedException")},(nr=SS=SS||{}).filterSensitiveLog=function(e){return gS(gS(gS({},e),e.message&&{message:Xc}),e.slots&&{slots:Xc})},nr.isa=function(e){return Fc(e,"DialogAction")},(cr={}).CLOSE="Close",cr.CONFIRM_INTENT="ConfirmIntent",cr.DELEGATE="Delegate",cr.ELICIT_INTENT="ElicitIntent",cr.ELICIT_SLOT="ElicitSlot",(Jn={}).CONFIRM_INTENT="ConfirmIntent",Jn.ELICIT_INTENT="ElicitIntent",Jn.ELICIT_SLOT="ElicitSlot",Jn.FAILED="Failed",Jn.FULFILLED="Fulfilled",Jn.READY_FOR_FULFILLMENT="ReadyForFulfillment",(br={}).FAILED="Failed",br.FULFILLED="Fulfilled",br.READY_FOR_FULFILLMENT="ReadyForFulfillment",(Xn={}).filterSensitiveLog=function(e){return gS({},e)},Xn.isa=function(e){return Fc(e,"GenericAttachment")},(dn={}).filterSensitiveLog=function(e){return gS({},e)},dn.isa=function(e){return Fc(e,"GetSessionRequest")},(p={}).filterSensitiveLog=function(e){return gS(gS(gS(gS({},e),e.dialogAction&&{dialogAction:SS.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return wS.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Xc})},p.isa=function(e){return Fc(e,"GetSessionResponse")},(dr=wS=wS||{}).filterSensitiveLog=function(e){return gS(gS({},e),e.slots&&{slots:Xc})},dr.isa=function(e){return Fc(e,"IntentSummary")},(C={}).filterSensitiveLog=function(e){return gS({},e)},C.isa=function(e){return Fc(e,"InternalFailureException")},(tr={}).filterSensitiveLog=function(e){return gS({},e)},tr.isa=function(e){return Fc(e,"LimitExceededException")},(Wn={}).filterSensitiveLog=function(e){return gS({},e)},Wn.isa=function(e){return Fc(e,"LoopDetectedException")},(lr={}).COMPOSITE="Composite",lr.CUSTOM_PAYLOAD="CustomPayload",lr.PLAIN_TEXT="PlainText",lr.SSML="SSML",(Me={}).filterSensitiveLog=function(e){return gS({},e)},Me.isa=function(e){return Fc(e,"NotAcceptableException")},(S={}).filterSensitiveLog=function(e){return gS({},e)},S.isa=function(e){return Fc(e,"NotFoundException")},(Re=CS=CS||{}).filterSensitiveLog=function(e){return gS(gS(gS({},e),e.sessionAttributes&&{sessionAttributes:Xc}),e.requestAttributes&&{requestAttributes:Xc})},Re.isa=function(e){return Fc(e,"PostContentRequest")},(ct=_S=_S||{}).filterSensitiveLog=function(e){return gS(gS({},e),e.message&&{message:Xc})},ct.isa=function(e){return Fc(e,"PostContentResponse")},(at=ES=ES||{}).filterSensitiveLog=function(e){return gS(gS(gS(gS({},e),e.inputText&&{inputText:Xc}),e.sessionAttributes&&{sessionAttributes:Xc}),e.requestAttributes&&{requestAttributes:Xc})},at.isa=function(e){return Fc(e,"PostTextRequest")},(fn=AS=AS||{}).filterSensitiveLog=function(e){return gS(gS(gS(gS({},e),e.message&&{message:Xc}),e.slots&&{slots:Xc}),e.sessionAttributes&&{sessionAttributes:Xc})},fn.isa=function(e){return Fc(e,"PostTextResponse")},(jt={}).filterSensitiveLog=function(e){return gS(gS(gS(gS({},e),e.dialogAction&&{dialogAction:SS.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return wS.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Xc})},jt.isa=function(e){return Fc(e,"PutSessionRequest")},(b={}).filterSensitiveLog=function(e){return gS(gS({},e),e.message&&{message:Xc})},b.isa=function(e){return Fc(e,"PutSessionResponse")},(pn={}).filterSensitiveLog=function(e){return gS({},e)},pn.isa=function(e){return Fc(e,"RequestTimeoutException")},(R={}).filterSensitiveLog=function(e){return gS({},e)},R.isa=function(e){return Fc(e,"ResponseCard")},(hr={}).filterSensitiveLog=function(e){return gS({},e)},hr.isa=function(e){return Fc(e,"SentimentResponse")},(Sb={}).filterSensitiveLog=function(e){return gS({},e)},Sb.isa=function(e){return Fc(e,"UnsupportedMediaTypeException")};function MS(e,t){return(e||[]).map(function(e){return{__type:"GenericAttachment",attachmentLinkUrl:void 0!==(e=e).attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?XS(e.buttons):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}function US(e,t){return n=t,void 0===(e=e)&&(e=new Uint8Array),(e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var DS,FS=function(m,y){return vS(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v;return mS(this,function(e){switch(e.label){case 0:return t=[gS({},m)],v={},[4,iw(m.body,y)];case 1:switch(h=gS.apply(void 0,t.concat([(v.body=e.sent(),v)])),g="UnknownError",g=ow(m,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,qS(h)];case 3:return n=gS.apply(void 0,[gS.apply(void 0,r.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 4:return i=[{}],[4,BS(h)];case 5:return n=gS.apply(void 0,[gS.apply(void 0,i.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 6:return o=[{}],[4,VS(h)];case 7:return n=gS.apply(void 0,[gS.apply(void 0,o.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 8:return s=[{}],[4,zS(h)];case 9:return n=gS.apply(void 0,[gS.apply(void 0,s.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 10:return a=[{}],[4,GS(h)];case 11:return n=gS.apply(void 0,[gS.apply(void 0,a.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 12:return u=[{}],[4,KS(h)];case 13:return n=gS.apply(void 0,[gS.apply(void 0,u.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 14:return c=[{}],[4,HS(h)];case 15:return n=gS.apply(void 0,[gS.apply(void 0,c.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 16:return l=[{}],[4,WS(h)];case 17:return n=gS.apply(void 0,[gS.apply(void 0,l.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 18:return p=[{}],[4,$S(h)];case 19:return n=gS.apply(void 0,[gS.apply(void 0,p.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 20:return f=[{}],[4,JS(h)];case 21:return n=gS.apply(void 0,[gS.apply(void 0,f.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 22:return d=[{}],[4,YS(h)];case 23:return n=gS.apply(void 0,[gS.apply(void 0,d.concat([e.sent()])),{name:g,$metadata:nw(m)}]),[3,25];case 24:h=h.body,g=h.code||h.Code||g,n=gS(gS({},h),{name:""+g,message:h.message||h.Message||g,$fault:"client",$metadata:nw(m)}),e.label=25;case 25:return g=n.message||n.Message||g,n.message=g,delete n.Message,[2,Promise.reject(Object.assign(new Error(g),n))]}})})},jS=function(h,g){return vS(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d;return mS(this,function(e){switch(e.label){case 0:return t=[gS({},h)],d={},[4,iw(h.body,g)];case 1:switch(p=gS.apply(void 0,t.concat([(d.body=e.sent(),d)])),f="UnknownError",f=ow(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,qS(p)];case 3:return n=gS.apply(void 0,[gS.apply(void 0,r.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 4:return i=[{}],[4,BS(p)];case 5:return n=gS.apply(void 0,[gS.apply(void 0,i.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 6:return o=[{}],[4,VS(p)];case 7:return n=gS.apply(void 0,[gS.apply(void 0,o.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 8:return s=[{}],[4,zS(p)];case 9:return n=gS.apply(void 0,[gS.apply(void 0,s.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 10:return a=[{}],[4,GS(p)];case 11:return n=gS.apply(void 0,[gS.apply(void 0,a.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 12:return u=[{}],[4,KS(p)];case 13:return n=gS.apply(void 0,[gS.apply(void 0,u.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 14:return c=[{}],[4,HS(p)];case 15:return n=gS.apply(void 0,[gS.apply(void 0,c.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 16:return l=[{}],[4,$S(p)];case 17:return n=gS.apply(void 0,[gS.apply(void 0,l.concat([e.sent()])),{name:f,$metadata:nw(h)}]),[3,19];case 18:p=p.body,f=p.code||p.Code||f,n=gS(gS({},p),{name:""+f,message:p.message||p.Message||f,$fault:"client",$metadata:nw(h)}),e.label=19;case 19:return f=n.message||n.Message||f,n.message=f,delete n.Message,[2,Promise.reject(Object.assign(new Error(f),n))]}})})},qS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:nw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},BS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},VS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},zS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:nw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},GS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},KS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:nw(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},HS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:nw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},WS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},$S=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},JS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},YS=function(r,e){return vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:nw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},ZS=function(e,t){return Object.entries(e).reduce(function(e,t){var n=yS(t,2),t=n[0],n=n[1];return gS(gS({},e),((e={})[t]=n,e))},{})},XS=function(e,t){return(e||[]).map(function(e){return{__type:"Button",text:void 0!==(e=e).text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}})},QS=function(e,t){return{__type:"ResponseCard",contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?MS(e.genericAttachments):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},ew=function(e,t){return{__type:"SentimentResponse",sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},tw=function(e,t){return Object.entries(e).reduce(function(e,t){var n=yS(t,2),t=n[0],n=n[1];return gS(gS({},e),((e={})[t]=n,e))},{})},nw=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},rw=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},iw=function(e,t){return US(e,t).then(function(e){return e.length?JSON.parse(e):{}})},ow=function(e,t){function n(e){return 0<=e.indexOf(":")&&(e=e.split(":")[0]),0<=e.indexOf("#")&&(e=e.split("#")[1]),e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},sw=(hS(aw,DS=cn),aw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:CS.filterSensitiveLog,outputFilterSensitiveLog:_S.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},aw.prototype.serialize=function(e,t){return a=e,u=t,vS(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return mS(this,function(e){switch(e.label){case 0:if(t=gS(gS(gS(gS({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},rw(a.sessionAttributes)&&{"x-amz-lex-session-attributes":qc.fromObject(a.sessionAttributes)}),rw(a.requestAttributes)&&{"x-amz-lex-request-attributes":qc.fromObject(a.requestAttributes)}),rw(a.accept)&&{Accept:a.accept}),rw(a.contentType)&&{"Content-Type":a.contentType}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",Mc(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Mc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return n=n.replace("{botAlias}",Mc(o)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},aw.prototype.deserialize=function(e,t){return r=e,i=t,vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,FS(r,i)]:(t={$metadata:nw(r),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new qc(r.headers["x-amz-lex-slots"])),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new qc(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})});var r,i},aw);function aw(e){var t=DS.call(this)||this;return t.input=e,t}var uw,cw=(hS(lw,uw=cn),lw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Fl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,inputFilterSensitiveLog:ES.filterSensitiveLog,outputFilterSensitiveLog:AS.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},lw.prototype.serialize=function(e,t){return a=e,u=t,vS(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return mS(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",Mc(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Mc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return n=n.replace("{botAlias}",Mc(o)),r=JSON.stringify(gS(gS(gS({},void 0!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&{requestAttributes:ZS(a.requestAttributes)}),void 0!==a.sessionAttributes&&{sessionAttributes:ZS(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new ca({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},lw.prototype.deserialize=function(e,t){return r=e,i=t,vS(void 0,void 0,void 0,function(){var t,n;return mS(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,jS(r,i)]:(t={$metadata:nw(r),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,iw(r.body,i)]);case 1:return void 0!==(n=e.sent()).dialogState&&null!==n.dialogState&&(t.dialogState=n.dialogState),void 0!==n.intentName&&null!==n.intentName&&(t.intentName=n.intentName),void 0!==n.message&&null!==n.message&&(t.message=n.message),void 0!==n.messageFormat&&null!==n.messageFormat&&(t.messageFormat=n.messageFormat),void 0!==n.responseCard&&null!==n.responseCard&&(t.responseCard=QS(n.responseCard)),void 0!==n.sentimentResponse&&null!==n.sentimentResponse&&(t.sentimentResponse=ew(n.sentimentResponse)),void 0!==n.sessionAttributes&&null!==n.sessionAttributes&&(t.sessionAttributes=tw(n.sessionAttributes)),void 0!==n.sessionId&&null!==n.sessionId&&(t.sessionId=n.sessionId),void 0!==n.slotToElicit&&null!==n.slotToElicit&&(t.slotToElicit=n.slotToElicit),void 0!==n.slots&&null!==n.slots&&(t.slots=tw(n.slots)),[2,Promise.resolve(t)]}})});var r,i},lw);function lw(e){var t=uw.call(this)||this;return t.input=e,t}var pw,fw,nr=(pw=function(e,t){return(pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}pw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dw=function(){return(dw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},hw=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},gw=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vw=new E.ConsoleLogger("AWSLexProvider"),mw=(nr(yw,fw=ln),yw.prototype.getProviderName=function(){return"AWSLexProvider"},yw.prototype.reportBotStatus=function(e,t){var n=this;vw.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},yw.prototype.sendMessage=function(a,u){return hw(this,void 0,void 0,function(){var t,n,r,i,o,s;return gw(this,function(e){switch(e.label){case 0:return this._config[a]?[4,E.Credentials.get()]:[2,Promise.reject("Bot "+a+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new xS({region:this._config[a].region,credentials:t,customUserAgent:E.getAmplifyUserAgent()}),"string"!=typeof u)return[3,6];i={botAlias:this._config[a].alias,botName:a,inputText:u,userId:t.identityId},vw.debug("postText to lex",u),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new cw(i),[4,this.lexRuntimeServiceClient.send(n)];case 3:return o=e.sent(),this.reportBotStatus(o,a),[2,o];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=u.content,r=u.options.messageType,i="voice"===r?{botAlias:this._config[a].alias,botName:a,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[a].alias,botName:a,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},vw.debug("postContent to lex",u),e.label=7;case 7:return e.trys.push([7,10,,11]),i=new sw(i),[4,this.lexRuntimeServiceClient.send(i)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((o=e.sent()).audioStream)];case 9:return s=e.sent(),this.reportBotStatus(o,a),[2,dw(dw({},o),{audioStream:s})];case 10:return s=e.sent(),[2,Promise.reject(s)];case 11:return[2]}})})},yw.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},yw);function yw(e){void 0===e&&(e={});e=fw.call(this,e)||this;return e._botsCompleteCallback={},e}var bw=function(){return(bw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Sw=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},ww=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Cw=new E.ConsoleLogger("Interactions");function _w(e){this._options=e,Cw.debug("Interactions Options",this._options),this._pluggables={}}var Ew=new(_w.prototype.getModuleName=function(){return"Interactions"},_w.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};Cw.debug("configure Interactions",{opt:e}),this._options=bw(bw({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new mw),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},_w.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},_w.prototype.send=function(n,r){return Sw(this,void 0,void 0,function(){var t;return ww(this,function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[n])throw new Error("Bot "+n+" does not exist");if(t=this._options.bots[n].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(n,r)];case 1:return[2,e.sent()]}})})},_w.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},_w)(null);E.Amplify.register(Ew);var Aw=function(){return(Aw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Iw=new E.ConsoleLogger("AbstractXRProvider"),cr=(Pw.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Aw(Aw({},e),this._config),Iw.debug("configure "+this.getProviderName(),this._config),this.options},Pw.prototype.getCategory=function(){return"XR"},Object.defineProperty(Pw.prototype,"options",{get:function(){return Aw({},this._config)},enumerable:!0,configurable:!0}),Pw);function Pw(e){void 0===e&&(e={}),this._config=e}var Ow,Tw,Jn=(Ow=function(e,t){return(Ow=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ow(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),br=(Tw=Error,Jn(kw,Tw),kw);function kw(){return null!==Tw&&Tw.apply(this,arguments)||this}var Lw,Rw=(Jn(xw,Lw=br),xw);function xw(){return null!==Lw&&Lw.apply(this,arguments)||this}var Nw,Mw=(Jn(Uw,Nw=br),Uw);function Uw(){return null!==Nw&&Nw.apply(this,arguments)||this}var Dw,Fw=(Jn(jw,Dw=br),jw);function jw(){return null!==Dw&&Dw.apply(this,arguments)||this}var qw,Bw=(Jn(Vw,qw=br),Vw);function Vw(){return null!==qw&&qw.apply(this,arguments)||this}var zw,Gw=(Jn(Kw,zw=br),Kw);function Kw(){return null!==zw&&zw.apply(this,arguments)||this}var Hw,Ww=(Jn($w,Hw=br),$w);function $w(){return null!==Hw&&Hw.apply(this,arguments)||this}var Jw,Yw,Xn=(Jw=function(e,t){return(Jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Jw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Zw=function(){return(Zw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Xw=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Qw=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},eC=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tC=new E.ConsoleLogger("SumerianProvider"),nC=(Xn(rC,Yw=cr),rC.prototype.getProviderName=function(){return"SumerianProvider"},rC.prototype.loadScript=function(r){return Xw(this,void 0,void 0,function(){return Qw(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},rC.prototype.loadScene=function(w,C,_){return Xw(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,f,d,h,g,v,m,y,b,S;return Qw(this,function(e){switch(e.label){case 0:if(!w)throw a="No scene name passed into loadScene",tC.error(a),new Gw(a);if(!C)throw a="No dom element id passed into loadScene",tC.error(a),new Bw(a);if(!(t=document.getElementById(C)))throw a="DOM element id, "+C+" not found",tC.error(a),new Bw(a);if(!(n=this.getScene(w)).sceneConfig)throw a="No scene config configured for scene: "+w,tC.error(a),new Gw(a);if(r=n.sceneConfig.url,i=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))u=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw a="No region configured for scene: "+w,tC.error(a),new Gw(a);u=this.options.region}h={region:u,customUserAgent:E.Constants.userAgent+"-SumerianScene"},o={headers:{"X-Amz-User-Agent":E.Constants.userAgent}},s=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,E.Credentials.get()];case 2:return a=e.sent(),h.credentials=a,a={secret_key:a.secretAccessKey,access_key:a.accessKeyId,session_token:a.sessionToken},u={region:u,service:"sumerian"},u=E.Signer.sign({method:"GET",url:r},a,u),o.headers=Zw(Zw({},o.headers),u.headers),s=u.url,[3,4];case 3:return e.sent(),tC.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(s,o)];case 5:return[4,(c=e.sent()).json()];case 6:if(l=e.sent(),403===c.status)throw l.message?(tC.error("Failure to authenticate user: "+l.message),new Gw("Failure to authenticate user: "+l.message)):(tC.error("Failure to authenticate user"),new Gw("Failure to authenticate user"));return f=l.bundleData[i],[4,fetch(f.url,{headers:f.headers})];case 7:return[4,e.sent().json()];case 8:p=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(p[i].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw d=e.sent(),tC.error(d),new Gw(d);case 12:return f=_.progressCallback||void 0,d=n.publishParamOverrides||void 0,h={element:t,sceneId:i,sceneBundle:p,apiResponse:l,progressCallback:f,publishParamOverrides:d,awsSDKConfigOverride:h},[4,window.SumerianBootstrapper.loadScene(h)];case 13:g=e.sent(),n.sceneController=g,n.isLoaded=!0;try{for(v=eC(g.sceneLoadWarnings),m=v.next();!m.done;m=v.next())y=m.value,tC.warn("loadScene warning: "+y)}catch(e){b={error:e}}finally{try{m&&!m.done&&(S=v.return)&&S.call(v)}finally{if(b)throw b.error}}return[2]}})})},rC.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},rC.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw tC.error(t),new Rw(t)}if(!e){t="No scene name was passed";throw tC.error(t),new Mw(t)}if(this.options.scenes[e])return this.options.scenes[e];t="Scene '"+e+"' is not configured";throw tC.error(t),new Mw(t)},rC.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw tC.error(t),new Rw(t)}var n=this.options.scenes[e];if(!n){t="Scene '"+e+"' is not configured";throw tC.error(t),new Mw(t)}n=n.sceneController;if(n)return n;t="Scene controller for '"+e+"' has not been loaded";throw tC.error(t),new Fw(t)},rC.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},rC.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},rC.prototype.start=function(e){this.getSceneController(e).start()},rC.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},rC.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},rC.prototype.isMuted=function(e){return this.getSceneController(e).muted},rC.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},rC.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},rC.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},rC);function rC(e){return void 0===e&&(e={}),Yw.call(this,e)||this}var iC=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},oC=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},sC=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},aC=new E.ConsoleLogger("XR");function uC(e){this._options=e,aC.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new nC)}var cC=new(uC.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return aC.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var t=sC(e,2),e=t[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},uC.prototype.addPluggable=function(t){return iC(this,void 0,void 0,function(){return oC(this,function(e){return t&&"XR"===t.getCategory()?(this._pluggables[t.getProviderName()]=t,[2,t.configure(this._options)]):[2]})})},uC.prototype.loadScene=function(t,n,r,i){return void 0===r&&(r={}),void 0===i&&(i=this._defaultProvider),iC(this,void 0,void 0,function(){return oC(this,function(e){switch(e.label){case 0:if(!this._pluggables[i])throw new Ww("Provider '"+i+"' not configured");return[4,this._pluggables[i].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},uC.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},uC.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},uC.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},uC.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},uC.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},uC.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},uC.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},uC.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},uC.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new Ww("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},uC.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new Ww("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},uC.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Ww("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},uC)(null);E.Amplify.register(cC);var lC=(pC.prototype.auth=function(){return this._auth||th},pC.prototype.analytics=function(){return this._analytics||bf},pC.prototype.storage=function(){return this._storage||mm},pC.prototype.api=function(){return this._api||cS},pC.prototype.interactions=function(){return this._interactions||Ew},pC.prototype.cache=function(){return this._cache},pC.prototype.pubsub=function(){return this._pubsub||Jb},pC.prototype.logger=function(e,t){return new this._logger(e,t)},pC.prototype.xr=function(){return this._xr||cC},pC.prototype.i18n=function(){return this._i18n},pC.prototype.authState=function(){return this._authState},pC.prototype.setAuthState=function(e){this._authState.next(e)},pC.decorators=[{type:d.Injectable}],pC.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:["modules"]},{type:d.Optional}]}]},pC);function pC(e){void 0===e&&(e={}),this.modules=e,this._authState=new ye,this.authStateChange$=this._authState.asObservable();e=e||U;xo(this._authState,e.Auth),this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=E.I18n,this._logger=E.Logger}var fC=(dC.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(dC.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(dC.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(dC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),dC.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},dC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},dC.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],dC.ctorParameters=function(){return[{type:lC}]},dC.propDecorators={hide:[{type:d.Input}],data:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},dC);function dC(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var hC,gC,dn=(hC=function(e,t){return(hC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}hC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),vC=(dn(mC,gC=fC),mC.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],mC.ctorParameters=function(){return[{type:lC}]},mC);function mC(e){var t=gC.call(this,e)||this;return t.amplifyService=e,t}yC.prototype.ngOnInit=function(){this.loadComponent()},yC.prototype.ngOnDestroy=function(){},yC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(vC,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new Lo(fC,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},yC.decorators=[{type:d.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],yC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},yC.propDecorators={framework:[{type:d.Input}],hide:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},p=yC;function yC(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var dr="sumerian-scene-container",C="sumerian-scene",tr="sumerian-scene-loading",Wn="sumerian-scene-loading-logo",lr="sumerian-scene-loading-scene-name",Me="sumerian-scene-loading-bar",S="sumerian-scene-error-text",Re="sumerian-scene-bar",ct="sumerian-scene-actions",at={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},fn={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},jt={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},b={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},pn={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},R={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},hr={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"},Sb={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},cn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+hr.section+'">\n    <div class="amplify-form-body" data-test="'+hr.bodySection+'">\n    <div class="amplify-form-header" data-test="'+hr.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+hr.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+hr.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+hr.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',bC=(Object.defineProperty(SC.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(SC.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),SC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},SC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},SC.prototype.setCode=function(e){this.code=e},SC.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,n="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},SC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},SC.prototype.onAlertClose=function(){this._setError(null)},SC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},SC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:cn}]}],SC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},SC.propDecorators={data:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}]},SC);function SC(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var wC,CC,nr=(wC=function(e,t){return(wC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ln='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+hr.section+'">\n  <div class="amplify-form-body" data-test="'+hr.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+hr.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+hr.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+hr.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',_C=(nr(EC,CC=bC),EC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:ln}]}],EC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},EC);function EC(e){var t=CC.call(this,e)||this;return t.amplifyService=e,t}AC.prototype.ngOnInit=function(){this.loadComponent()},AC.prototype.ngOnDestroy=function(){},AC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(_C,{authState:this.authState,hide:this.hide}):new Lo(bC,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},AC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],AC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},AC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},Jn=AC;function AC(e){this.componentFactoryResolver=e,this.hide=[]}function IC(e,t){return 0<e.filter(function(e){return e===t}).length}function PC(e,t){return"+"+e+t.replace(/[-()]/g,"")}var OC={email:"Email",phone_number:"Phone Number",username:"Username"},br='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+R.section+'">\n  <div class="amplify-form-body" data-test="'+R.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+R.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+R.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+R.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+R.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+R.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+R.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',TC=(Object.defineProperty(kC.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(kC.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(kC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),kC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},kC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},kC.prototype.setUsername=function(e){this.username=e},kC.prototype.setCode=function(e){this.code=e},kC.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},kC.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},kC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},kC.prototype.onAlertClose=function(){this._setError(null)},kC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},kC.prototype.getUsernameLabel=function(){return OC[this._usernameAttributes]||this._usernameAttributes},kC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:br}]}],kC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},kC.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},kC);function kC(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var LC,RC,Xn=(LC=function(e,t){return(LC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}LC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),cr='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+R.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+R.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+R.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+R.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label  class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+R.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+R.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+R.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+R.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',xC=(Xn(NC,RC=TC),NC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:cr}]}],NC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},NC);function NC(e){var t=RC.call(this,e)||this;return t.amplifyService=e,t}var MC,dn=(UC.prototype.ngOnInit=function(){this.loadComponent()},UC.prototype.ngOnDestroy=function(){},UC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(xC,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Lo(TC,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},UC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],UC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},UC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},UC);function UC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(cn=MC=MC||{}).EMAIL="email",cn.PHONE_NUMBER="phone_number",cn.USERNAME="username";var hr='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+at.section+'">\n    <div class="amplify-form-body" data-test="'+at.bodySection+'">\n      <div class="amplify-form-header" data-test="'+at.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+at.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+at.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+at.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+at.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+at.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',DC=(Object.defineProperty(FC.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=IC(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(FC.prototype,"authState",{set:function(e){this._authState=e,this._show=IC(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(FC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),FC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},FC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},FC.prototype.setUsername=function(e){this.username=e},FC.prototype.setPassword=function(e){this.password=e},FC.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},FC.prototype.onAlertClose=function(){this._setError(null)},FC.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},FC.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},FC.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},FC.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},FC.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},FC.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case MC.EMAIL:return this.email;case MC.PHONE_NUMBER:return PC(this.country_code,this.local_phone_number);default:return this.username}},FC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in-core",template:hr}]}],FC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},FC.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},FC);function FC(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var jC,qC,nr=(jC=function(e,t){return(jC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ln='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+at.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+at.bodySection+'">\n    <div class="amplify-form-header" data-test="'+at.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+at.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+at.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+at.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+at.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',BC=(nr(VC,qC=DC),VC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:ln}]}],VC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},VC);function VC(e){var t=qC.call(this,e)||this;return t.amplifyService=e,t}zC.prototype.ngOnInit=function(){this.loadComponent()},zC.prototype.ngOnDestroy=function(){},zC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new Lo(BC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Lo(DC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},zC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],zC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},zC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},br=zC;function zC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var GC=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],KC=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],HC=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],R='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+fn.section+'">\n    <div class="amplify-form-body" data-test="'+fn.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+fn.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+fn.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+fn.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+fn.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',WC=(Object.defineProperty($C.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===MC.EMAIL?(this.signUpFields=KC,this.defaultSignUpFields=KC):this._usernameAttributes===MC.PHONE_NUMBER&&(this.signUpFields=HC,this.defaultSignUpFields=HC),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===MC.EMAIL?(this.signUpFields=KC,this.defaultSignUpFields=KC):this._usernameAttributes===MC.PHONE_NUMBER&&(this.signUpFields=HC,this.defaultSignUpFields=HC)},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),$C.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},$C.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},$C.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=PC(this.country_code,this.local_phone_number));var e=Object.keys(this.user),r=e.map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},$C.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},$C.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},$C.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},$C.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},$C.prototype.onAlertClose=function(){this._setError(null)},$C.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},$C.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},$C.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},$C.prototype.getUsernameLabel=function(){return OC[this._usernameAttributes]||this._usernameAttributes},$C.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},$C.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up-core",template:R}]}],$C.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},$C.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],usernameAttributes:[{type:d.Input}],authState:[{type:d.Input}],signUpConfig:[{type:d.Input}]},$C);function $C(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=GC,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var JC,YC,Xn=(JC=function(e,t){return(JC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}JC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),cr='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+fn.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+fn.bodySection+'">\n    <div class="amplify-form-header" data-test="'+fn.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+fn.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+fn.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+fn.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+fn.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',ZC=(Xn(XC,YC=WC),XC.prototype.setProp=function(e){return this.user[e.name]=e.value},XC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:cr}]}],XC.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},XC);function XC(e){var t=YC.call(this,e)||this;return t.amplifyService=e,t}QC.prototype.ngOnInit=function(){this.loadComponent()},QC.prototype.ngOnDestroy=function(){},QC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(ZC,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Lo(WC,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},QC.decorators=[{type:d.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],QC.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},QC.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],signUpConfig:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},cn=QC;function QC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var hr='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+jt.section+'">\n  <div class="amplify-form-body" data-test="'+jt.bodySection+'">\n  <div class="amplify-form-header" data-test="'+jt.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+jt.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+jt.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+jt.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',e_=(Object.defineProperty(t_.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(t_.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),t_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},t_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},t_.prototype.setPassword=function(e){this.password=e},t_.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},t_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},t_.prototype.onAlertClose=function(){this._setError(null)},t_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},t_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password-core",template:hr}]}],t_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},t_.propDecorators={authState:[{type:d.Input}],hide:[{type:d.Input}],data:[{type:d.Input}]},t_);function t_(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var n_,r_,at=(n_=function(e,t){return(n_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}n_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),nr='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+jt.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+jt.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+jt.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+jt.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+jt.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+jt.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',i_=(at(o_,r_=e_),o_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:nr}]}],o_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},o_);function o_(e){var t=r_.call(this,e)||this;return t.amplifyService=e,t}s_.prototype.ngOnInit=function(){this.loadComponent()},s_.prototype.ngOnDestroy=function(){},s_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(i_,{authState:this.authState,hide:this.hide}):new Lo(e_,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},s_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],s_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},s_.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},ln=s_;function s_(e){this.componentFactoryResolver=e,this.hide=[]}var R='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+pn.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",a_=(Object.defineProperty(u_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),u_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},u_.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},u_.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===MC.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===MC.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},u_.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},u_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings-core",template:R}]}],u_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},u_.propDecorators={authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},u_);function u_(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var c_,l_,fn=(c_=function(e,t){return(c_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Xn='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+pn.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",p_=(fn(f_,l_=a_),f_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings-ionic",template:Xn}]}],f_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},f_);function f_(e){var t=l_.call(this,e)||this;return t.amplifyService=e,t}d_.prototype.ngOnInit=function(){this.loadComponent()},d_.prototype.ngOnDestroy=function(){},d_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(p_,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new Lo(a_,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},d_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],d_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},d_.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},cr=d_;function d_(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var hr='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+Sb.section+'">\n    <div class="amplify-form-body" data-test="'+Sb.bodySection+'">\n    <div class="amplify-form-header" data-test="'+Sb.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+Sb.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+Sb.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+Sb.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+Sb.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+Sb.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+Sb.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',h_=(Object.defineProperty(g_.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),g_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(g_.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),g_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(g_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),g_.prototype.setCode=function(e){this.code=e},g_.prototype.setPassword=function(e){this.password=e},g_.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case MC.EMAIL:return this.email;case MC.PHONE_NUMBER:return PC(this.country_code,this.local_phone_number);default:return this.username}},g_.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},g_.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},g_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},g_.prototype.onAlertClose=function(){this._setError(null)},g_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},g_.prototype.getUsernameLabel=function(){return OC[this._usernameAttributes]||this._usernameAttributes},g_.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},g_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password-core",template:hr}]}],g_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},g_.propDecorators={data:[{type:d.Input}],hide:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}]},g_);function g_(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var v_,m_,jt=(v_=function(e,t){return(v_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}v_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),at='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Sb.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+Sb.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+Sb.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+Sb.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+Sb.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+Sb.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+Sb.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',y_=(jt(b_,m_=h_),b_.prototype.onCodeChange=function(e){this.country_code=e},b_.prototype.onNumberChange=function(e){this.local_phone_number=e},b_.prototype.setUsername=function(e){this.username=e},b_.prototype.setEmail=function(e){this.email=e},b_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:at}]}],b_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},b_);function b_(e){var t=m_.call(this,e)||this;return t.amplifyService=e,t}S_.prototype.ngOnInit=function(){this.loadComponent()},S_.prototype.ngOnDestroy=function(){},S_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(y_,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Lo(h_,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},S_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],S_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},S_.propDecorators={framework:[{type:d.Input}],authState:[{type:d.Input}],usernameAttributes:[{type:d.Input}],hide:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},nr=S_;function S_(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var w_=function(){return(w_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},R='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+b.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+b.usernameInput+'"\n        />\n    </div>\n</div>\n',pn=(Object.defineProperty(C_.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),C_.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},C_.prototype.ngOnDestroy=function(){},C_.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},C_.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},C_.prototype.getUsernameLabel=function(){return OC[this._usernameAttributes]||this._usernameAttributes},C_.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},C_.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(w_({},e))},C_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-username-field-core",template:R}]}],C_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},C_.propDecorators={data:[{type:d.Input}],usernameAttributes:[{type:d.Input}],placeholder:[{type:d.Input}],usernameFieldChanged:[{type:d.Output}]},C_);function C_(e){this.amplifyService=e,this._usernameAttributes=MC.USERNAME,this._placeholder="",this.usernameFieldChanged=new d.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var __=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],fn='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+b.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+b.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',Xn=(Object.defineProperty(E_.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(E_.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(E_.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(E_.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(E_.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),E_.prototype.ngOnInit=function(){},E_.prototype.ngOnDestroy=function(){},E_.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},E_.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},E_.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},E_.decorators=[{type:d.Component,args:[{selector:"amplify-auth-phone-field-core",template:fn}]}],E_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},E_.propDecorators={data:[{type:d.Input}],placeholder:[{type:d.Input}],label:[{type:d.Input}],required:[{type:d.Input}],defaultCountryCode:[{type:d.Input}],phoneFieldChanged:[{type:d.Output}]},E_);function E_(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new d.EventEmitter,this._countries=__}var A_=(I_.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},I_.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(I_.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(I_.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(I_.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),I_.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},I_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],I_.ctorParameters=function(){return[{type:lC}]},I_.propDecorators={selected:[{type:d.Output}],data:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}]},I_);function I_(e){this.amplifyService=e,this._options={},this.selected=new d.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var P_,O_,hr=(P_=function(e,t){return(P_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}P_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T_=(hr(k_,O_=A_),k_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],k_.ctorParameters=function(){return[{type:lC}]},k_);function k_(e){var t=O_.call(this,e)||this;return t.amplifyService=e,t}L_.prototype.ngOnInit=function(){this.loadComponent()},L_.prototype.ngOnDestroy=function(){},L_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(T_,{path:this.path,options:this.options}):new Lo(A_,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},L_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],L_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},L_.propDecorators={framework:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}],selected:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[Je]}]},Sb=L_;function L_(e){this.componentFactoryResolver=e,this.selected=new d.EventEmitter}var R_=(Object.defineProperty(x_.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(x_.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(x_.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),x_.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},x_.prototype.onImageClicked=function(){this.selected.emit(this.url)},x_.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},x_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],x_.ctorParameters=function(){return[{type:lC}]},x_.propDecorators={selected:[{type:d.Output}],data:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}]},x_);function x_(e){this.amplifyService=e,this._options={},this.selected=new d.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var N_,M_,jt=(N_=function(e,t){return(N_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}N_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U_=(jt(D_,M_=R_),D_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],D_.ctorParameters=function(){return[{type:lC}]},D_);function D_(e){var t=M_.call(this,e)||this;return t.amplifyService=e,t}F_.prototype.ngOnInit=function(){this.loadComponent()},F_.prototype.ngOnDestroy=function(){},F_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(U_,{path:this.path,options:this.options}):new Lo(R_,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},F_.decorators=[{type:d.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],F_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},F_.propDecorators={framework:[{type:d.Input}],path:[{type:d.Input}],options:[{type:d.Input}],selected:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[Je]}]},at=F_;function F_(e){this.componentFactoryResolver=e,this.selected=new d.EventEmitter}var j_=(Object.defineProperty(q_.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(q_.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(q_.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(q_.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),q_.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},q_.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result;t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},q_.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},q_.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},q_.prototype.onPhotoError=function(){this.hasPhoto=!1},q_.prototype.onAlertClose=function(){this._setError(null)},q_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},q_.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],q_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},q_.propDecorators={url:[{type:d.Input}],storageOptions:[{type:d.Input}],path:[{type:d.Input}],data:[{type:d.Input}],picked:[{type:d.Output}],loaded:[{type:d.Output}],uploaded:[{type:d.Output}]},q_);function q_(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new d.EventEmitter,this.loaded=new d.EventEmitter,this.uploaded=new d.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var B_,V_,R=(B_=function(e,t){return(B_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}B_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),z_=(R(G_,V_=j_),G_.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],G_.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},G_);function G_(e){var t=V_.call(this,e)||this;return t.amplifyService=e,t}K_.prototype.ngOnInit=function(){this.loadComponent()},K_.prototype.ngOnDestroy=function(){},K_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(z_,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new Lo(j_,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},K_.decorators=[{type:d.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],K_.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},K_.propDecorators={framework:[{type:d.Input}],url:[{type:d.Input}],path:[{type:d.Input}],storageOptions:[{type:d.Input}],picked:[{type:d.Output}],loaded:[{type:d.Output}],uploaded:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[Je]}]},fn=K_;function K_(e){this.componentFactoryResolver=e,this.picked=new d.EventEmitter,this.loaded=new d.EventEmitter,this.uploaded=new d.EventEmitter}var H_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},W_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};require("./aws-lex-audio.js");var $_={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},J_={silenceDetectionConfig:{time:2e3,amplitude:.2}},Y_=(Object.defineProperty(Z_.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!N.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!N.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!N.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",$_.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",$_.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(Z_.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(Z_.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(Z_.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),Z_.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},Z_.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},Z_.prototype.onInputChange=function(e){this.inputText=e},Z_.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},Z_.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=$_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=$_.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},Z_.prototype.onError=function(e){this.logger.error(e)},Z_.prototype.lexResponseHandler=function(){return H_(this,void 0,void 0,function(){var t;return W_(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=$_.SPEAKING.MESSAGE,this.micText=$_.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},Z_.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=$_.LISTENING.MESSAGE,e.micText=$_.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=$_.INITIAL.MESSAGE,e.micText=$_.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=$_.INITIAL.MESSAGE,this.micText=$_.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},Z_.prototype.micButtonHandler=function(){return H_(this,void 0,void 0,function(){return W_(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=$_.LISTENING.MESSAGE,this.micText=$_.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},Z_.decorators=[{type:d.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],Z_.ctorParameters=function(){return[{type:d.ChangeDetectorRef},{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},Z_.propDecorators={complete:[{type:d.Output}],data:[{type:d.Input}],bot:[{type:d.Input}],title:[{type:d.Input}],clearOnComplete:[{type:d.Input}]},Z_);function Z_(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=$_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=$_.INITIAL.ICON,this.voiceConfig=J_,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new d.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=$_.SENDING.MESSAGE,n.audioInput=e,n.micText=$_.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var X_,Q_,hr=(X_=function(e,t){return(X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}X_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eE=(hr(tE,Q_=Y_),tE.decorators=[{type:d.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],tE.ctorParameters=function(){return[{type:d.ChangeDetectorRef},{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},tE);function tE(e,t){e=Q_.call(this,e,t)||this;return e.amplifyService=t,e}nE.prototype.ngOnInit=function(){this.loadComponent()},nE.prototype.ngOnDestroy=function(){},nE.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(eE,e):new Lo(Y_,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),e=this.componentHost.viewContainerRef;e.clear();r=e.createComponent(r);r.instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},nE.decorators=[{type:d.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],nE.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},nE.propDecorators={framework:[{type:d.Input}],bot:[{type:d.Input}],title:[{type:d.Input}],clearComplete:[{type:d.Input}],conversationModeOn:[{type:d.Input}],voiceConfig:[{type:d.Input}],voiceEnabled:[{type:d.Input}],textEnabled:[{type:d.Input}],complete:[{type:d.Output}],componentHost:[{type:d.ViewChild,args:[Je]}]},jt=nE;function nE(e){this.componentFactoryResolver=e,this.complete=new d.EventEmitter}Object.defineProperty(rE.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),rE.decorators=[{type:d.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],rE.propDecorators={title:[{type:d.Input}]},R=rE;function rE(){}var iE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},oE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},hr='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+dr+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+C+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+tr+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+Re+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+ct+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',sE=(Object.defineProperty(aE.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),aE.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},aE.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},aE.prototype.loadAndStartScene=function(){return iE(this,void 0,void 0,function(){var t,n=this;return oE(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},aE.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},aE.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},aE.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},aE.prototype.maximize=function(){return iE(this,void 0,void 0,function(){var t;return oE(this,function(e){return t=document.getElementById("sumerian-scene-container"),(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},aE.prototype.minimize=function(){return iE(this,void 0,void 0,function(){var t;return oE(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},aE.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-core",template:hr}]}],aE.ctorParameters=function(){return[{type:lC}]},aE.propDecorators={sceneName:[{type:d.Input}],data:[{type:d.Input}]},aE);function aE(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){e*=100;t.loadPercentage=e},this.amplifyUI=M,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var uE,cE,hr=(uE=function(e,t){return(uE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}uE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Re='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+dr+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+C+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+tr+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+Re+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+ct+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',lE=(hr(pE,cE=sE),pE.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-ionic",template:Re}]}],pE.ctorParameters=function(){return[{type:lC}]},pE);function pE(e){var t=cE.call(this,e)||this;return t.amplifyService=e,t}fE.prototype.ngOnInit=function(){this.loadComponent()},fE.prototype.ngOnDestroy=function(){},fE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Lo(lE,{sceneName:this.sceneName}):new Lo(sE,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},fE.decorators=[{type:d.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],fE.ctorParameters=function(){return[{type:d.ComponentFactoryResolver}]},fE.propDecorators={framework:[{type:d.Input}],sceneName:[{type:d.Input}],componentHost:[{type:d.ViewChild,args:[Je]}]},ct=fE;function fE(e){this.componentFactoryResolver=e}hr='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Wn+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+lr+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+S+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+Me+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",dE.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-loading-core",template:hr}]}],dE.ctorParameters=function(){return[]},dE.propDecorators={loadPercentage:[{type:d.Input}],sceneName:[{type:d.Input}],sceneError:[{type:d.Input}]},Re=dE;function dE(){this.AmplifyUI=M}hr=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},ct=[p,fC,Jn,bC,dn,TC,br,DC,cn,WC,ln,e_,cr,a_,nr,h_,pn,Xn,Sb,A_,at,R_,fn,j_,jt,Y_,R,ct,sE,Re],hE.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,mn],declarations:hr([Je],ct),entryComponents:hr(ct),providers:[],exports:hr(ct)}]}],Je=hE;function hE(){}var gE,vE,hr=(gE=function(e,t){return(gE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}gE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ct='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+b.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+b.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',Xn=(hr(mE,vE=Xn),mE.decorators=[{type:d.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:ct}]}],mE.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},mE);function mE(e){var t=vE.call(this,e)||this;return t.amplifyService=e,t}var yE,bE,ct=(yE=function(e,t){return(yE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+b.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+b.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',pn=(ct(SE,bE=pn),SE.decorators=[{type:d.Component,args:[{selector:"amplify-auth-username-field-ionic",template:b}]}],SE.ctorParameters=function(){return[{type:lC,decorators:[{type:d.Inject,args:[lC]}]}]},SE);function SE(e){var t=bE.call(this,e)||this;return t.amplifyService=e,t}var wE,CE,b=(wE=function(e,t){return(wE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Me='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Wn+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+lr+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+S+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+Me+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",Re=(b(_E,CE=Re),_E.decorators=[{type:d.Component,args:[{selector:"sumerian-scene-loading-ionic",template:Me}]}],_E.ctorParameters=function(){return[]},_E);function _E(){return CE.call(this)||this}Me=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Re=[vC,_C,xC,y_,p_,BC,ZC,pn,Xn,i_,z_,T_,U_,eE,lE,Re],EE.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,mn],declarations:Me(Re),entryComponents:Me(Re),providers:[lC],schemas:[d.CUSTOM_ELEMENTS_SCHEMA],exports:Me(Re)}]}],Re=EE;function EE(){}e.AmplifyAngularModule=Je,e.AmplifyIonicModule=Re,e.AmplifyModules=function(e){return new lC(e)},e.AmplifyService=lC,Object.defineProperty(e,"__esModule",{value:!0})});
